2025-12-02 22:39:56,653 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:39:56,653 - multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-02 22:39:56,653 - multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2025-12-02 22:39:56,655 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:39:56,655 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:39:56,655 - multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2025-12-02 22:39:56,656 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:39:56,656 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:39:56,656 - multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2025-12-02 22:39:56,656 - multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2025-12-02 22:39:56,656 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:39:56,657 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:39:56,657 - multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2025-12-02 22:39:56,658 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:39:56,658 - multipart.multipart - DEBUG - Calling on_end with no data
2025-12-02 22:39:56,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:39:56,848 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2025-12-02 22:39:56,849 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('admin',)
2025-12-02 22:39:57,082 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2025-12-02 22:39:57,083 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (datetime.datetime(2025, 12, 2, 17, 9, 57, 81008, tzinfo=datetime.timezone.utc), 1)
2025-12-02 22:39:57,086 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:26,980 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:40:26,980 - multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-02 22:40:26,981 - multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2025-12-02 22:40:26,981 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:40:26,981 - multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2025-12-02 22:40:26,981 - multipart.multipart - DEBUG - Calling on_header_value with data[139:149]
2025-12-02 22:40:26,982 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:40:26,982 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:40:26,982 - multipart.multipart - DEBUG - Calling on_part_data with data[153:254]
2025-12-02 22:40:26,982 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,982 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,983 - multipart.multipart - DEBUG - Calling on_part_data with data[256:45108]
2025-12-02 22:40:26,983 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,984 - multipart.multipart - DEBUG - Calling on_part_data with data[45109:49152]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[0:212992]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[0:33607]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[33608:51010]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,985 - multipart.multipart - DEBUG - Calling on_part_data with data[51011:57831]
2025-12-02 22:40:26,986 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,986 - multipart.multipart - DEBUG - Calling on_part_data with data[57832:78877]
2025-12-02 22:40:26,986 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,986 - multipart.multipart - DEBUG - Calling on_part_data with data[78878:147494]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[147495:208868]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[208869:230393]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[230394:232457]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,987 - multipart.multipart - DEBUG - Calling on_part_data with data[232458:238225]
2025-12-02 22:40:26,988 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,988 - multipart.multipart - DEBUG - Calling on_part_data with data[238226:245760]
2025-12-02 22:40:26,989 - multipart.multipart - DEBUG - Calling on_part_data with data[0:77448]
2025-12-02 22:40:26,989 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,989 - multipart.multipart - DEBUG - Calling on_part_data with data[77449:79891]
2025-12-02 22:40:26,990 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,990 - multipart.multipart - DEBUG - Calling on_part_data with data[79892:262144]
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_part_data with data[0:34252]
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_part_data with data[34253:93371]
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:40:26,991 - multipart.multipart - DEBUG - Calling on_header_field with data[93415:93434]
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_header_value with data[93436:93466]
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_part_data with data[93470:93478]
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:40:26,992 - multipart.multipart - DEBUG - Calling on_end with no data
2025-12-02 22:40:27,068 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:27,070 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2025-12-02 22:40:27,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] (1,)
2025-12-02 22:40:27,077 - app.services.file_processor - INFO - Parsed filename (strict): 212223240065, 19AI411
2025-12-02 22:40:27,079 - app.services.file_processor - INFO - Saved file: ./uploads\pending\85e0aacc54b24e6993d6fcc4efc059a5.jpg (hash: 8e24fdd42caf25f1...)
2025-12-02 22:40:27,084 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2025-12-02 22:40:27,084 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('6a02102b82cbf452d8cc15bf3919a176',)
2025-12-02 22:40:27,120 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2025-12-02 22:40:27,120 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] (UUID('9900387b-884b-456a-8433-70489e226a40'), '212223240065_19AI411.jpg', '212223240065_19AI411.jpg', '212223240065', '19AI411', './uploads\\pending\\85e0aacc54b24e6993d6fcc4efc059a5.jpg', '8e24fdd42caf25f119e96b8b3135d254a4a9adce5ef48fcfd0bb9240879a4bc5', 863266, 'image/jpeg', None, None, None, None, 'PENDING', None, None, None, '6a02102b82cbf452d8cc15bf3919a176', None, None, None, 1, None, '[{"timestamp": "2025-12-02T17:10:27.117636", "action": "created", "details": {"filename": "212223240065_19AI411.jpg", "parsed_reg_no": "212223240065", "parsed_subject_code": "19AI411"}}]', None, 0)
2025-12-02 22:40:27,129 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:40:27,129 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (17,)
2025-12-02 22:40:27,130 - app.services.artifact_service - INFO - Created artifact: 9900387b-884b-456a-8433-70489e226a40
2025-12-02 22:40:27,132 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:40:27,132 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2025-12-02 22:40:27,134 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:35,102 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:35,103 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:40:35,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('cuCArYHR6bm4S73s0jZ_X9gCgnk9zEQDh-DflFtmd4w',)
2025-12-02 22:40:35,109 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:40:35,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (datetime.datetime(2025, 12, 2, 17, 10, 35, 108876, tzinfo=datetime.timezone.utc), 19)
2025-12-02 22:40:35,112 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:35,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:35,181 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2025-12-02 22:40:35,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('212223240065', '212223240065', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2025-12-02 22:40:35,196 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2025-12-02 22:40:35,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('212223240065', 'SUBMITTED_TO_LMS', 'COMPLETED')
2025-12-02 22:40:35,198 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:40:35,199 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('19AI411',)
2025-12-02 22:40:35,203 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:40:35,203 - sqlalchemy.engine.Engine - INFO - [cached since 0.003942s ago] ('19AI411',)
2025-12-02 22:40:35,204 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:35,215 - app.db.database - ERROR - Database session error: [{'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.5/v/missing'}]
2025-12-02 22:40:41,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:41,915 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:40:41,915 - sqlalchemy.engine.Engine - INFO - [cached since 6.812s ago] ('cuCArYHR6bm4S73s0jZ_X9gCgnk9zEQDh-DflFtmd4w',)
2025-12-02 22:40:41,919 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:40:41,920 - sqlalchemy.engine.Engine - INFO - [cached since 6.81s ago] (datetime.datetime(2025, 12, 2, 17, 10, 41, 918463, tzinfo=datetime.timezone.utc), 19)
2025-12-02 22:40:41,921 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:41,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:41,985 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2025-12-02 22:40:41,986 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('9900387b-884b-456a-8433-70489e226a40',)
2025-12-02 22:40:42,002 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:40:42,003 - sqlalchemy.engine.Engine - INFO - [cached since 6.804s ago] ('19AI411',)
2025-12-02 22:40:42,005 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2025-12-02 22:40:42,007 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] (4, 'student2', 3, 17)
2025-12-02 22:40:42,008 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:40:42,009 - sqlalchemy.engine.Engine - INFO - [cached since 14.88s ago] ('submission_started', 'submit', 'Starting submission for assignment 3', 'student', '4', 'student2', '127.0.0.1', 17, None, None, 'null', 'null', None, None)
2025-12-02 22:40:42,011 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2025-12-02 22:40:42,012 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:40:42,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('UPLOADING', 17)
2025-12-02 22:40:42,307 - app.services.moodle_client - INFO - Uploading file: 212223240065_19AI411.jpg (863266 bytes)
2025-12-02 22:40:42,307 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2025-12-02 22:40:42,369 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026ECE78DAD0>
2025-12-02 22:40:42,370 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000026ECE74A180> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2025-12-02 22:40:42,429 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026ECE75E490>
2025-12-02 22:40:42,429 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:40:42,430 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:40:42,430 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:40:44,405 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:40:44,406 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Content-Length', b'293'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Date', b'Tue, 02 Dec 2025 17:10:42 GMT'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Tue, 02 Dec 2025 17:10:48 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:40:49,021 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,022 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:40:49,022 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:40:49,022 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:40:49,023 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 18, 'userid': '4', 'filearea': 'draft', 'filename': '212223240065_19AI411.jpg', 'filepath': '/', 'itemid': 16118978, 'license': 'unknown', 'author': 'student 212223240065', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212223240065_19AI411.jpg";}', 'filesize': 863266}]
2025-12-02 22:40:49,023 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 16118978
2025-12-02 22:40:49,024 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:40:49,025 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] (16118978, 17)
2025-12-02 22:40:49,026 - app.services.submission_service - INFO - Verifying assignment 3 exists and is accessible...
2025-12-02 22:40:49,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,027 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:40:49,027 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,027 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:40:49,027 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,320 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'986'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:10:49 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:40:49,320 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,320 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:40:49,320 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:40:49,321 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:40:49,321 - app.services.submission_service - INFO - Assignment 3 verified and accessible
2025-12-02 22:40:49,321 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2025-12-02 22:40:49,322 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:40:49,322 - sqlalchemy.engine.Engine - INFO - [cached since 7.311s ago] ('SUBMITTING', 17)
2025-12-02 22:40:49,325 - app.services.moodle_client - INFO - Saving submission for assignment 3 with item 16118978
2025-12-02 22:40:49,325 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,325 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:40:49,325 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,326 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:40:49,326 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,744 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'2'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:10:49 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:40:49,744 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,745 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:40:49,746 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:40:49,746 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:40:49,746 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2025-12-02 22:40:49,746 - app.services.moodle_client - INFO - Submission saved successfully for assignment 3
2025-12-02 22:40:49,748 - app.services.submission_service - INFO - Verifying submission status after save...
2025-12-02 22:40:49,748 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,749 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:40:49,749 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,749 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:40:49,749 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:40:49,973 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'986'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:10:49 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:40:49,974 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:40:49,974 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:40:49,974 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:40:49,974 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:40:49,975 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 7, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1764684184, 'timemodified': 1764695449, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 3, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212223240065_19AI411.jpg', 'filepath': '/', 'filesize': 1206297, 'fileurl': 'https://1844fdb23815.ngrok-free.app/webservice/pluginfile.php/30/assignsubmission_file/submission_files/7/212223240065_19AI411.jpg', 'timemodified': 1764695449, 'mimetype': 'image/jpeg', 'isexternalfile': False, 'icon': 'f/image'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2025-12-02 22:40:49,975 - app.services.submission_service - INFO - Submission status: submitted
2025-12-02 22:40:49,975 - app.services.submission_service - INFO - Submission ID: 7
2025-12-02 22:40:49,975 - app.services.submission_service - INFO - Submission timecreated: 1764684184
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Submission timemodified: 1764695449
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Grading status: notgraded
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Submissions enabled: True
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Can edit: True
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Can submit: False
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Submission verification - Files found: 1
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Verified files: ['212223240065_19AI411.jpg']
2025-12-02 22:40:49,977 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2025-12-02 22:40:49,977 - httpcore.connection - DEBUG - close.started
2025-12-02 22:40:49,978 - httpcore.connection - DEBUG - close.complete
2025-12-02 22:40:49,978 - app.services.submission_service - INFO - Submission result: {'assignment_id': 3, 'steps_completed': ['upload', 'save'], 'item_id': 16118978, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '7', 'verified_files': ['212223240065_19AI411.jpg'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_9900387b-884b-456a-8433-70489e226a40_20251202171049'}
2025-12-02 22:40:49,978 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2025-12-02 22:40:49,979 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:40:49,979 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (17,)
2025-12-02 22:40:49,980 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2025-12-02 22:40:49,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('COMPLETED', '7', 'TXN_9900387b-884b-456a-8433-70489e226a40_20251202171049', datetime.datetime(2025, 12, 2, 17, 10, 49, 980504), datetime.datetime(2025, 12, 2, 17, 10, 49, 980504), 17)
2025-12-02 22:40:49,982 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:40:49,982 - sqlalchemy.engine.Engine - INFO - [cached since 22.86s ago] (17,)
2025-12-02 22:40:49,983 - app.services.artifact_service - INFO - Artifact 17 marked as submitted
2025-12-02 22:40:49,984 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:40:49,984 - sqlalchemy.engine.Engine - INFO - [cached since 22.85s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', 'student2', '127.0.0.1', 17, None, None, 'null', '{"assignment_id": 3, "steps_completed": ["upload", "save"], "item_id": 16118978, "save_result": {"success": true, "warnings": []}, "submission_status ... (54 characters truncated) ... : ["212223240065_19AI411.jpg"], "submit_skipped": true, "success": true, "transaction_id": "TXN_9900387b-884b-456a-8433-70489e226a40_20251202171049"}', None, None)
2025-12-02 22:40:49,985 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:50,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:50,056 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2025-12-02 22:40:50,057 - sqlalchemy.engine.Engine - INFO - [cached since 8.073s ago] ('9900387b-884b-456a-8433-70489e226a40',)
2025-12-02 22:40:50,072 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:50,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:50,151 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:40:50,152 - sqlalchemy.engine.Engine - INFO - [cached since 15.05s ago] ('cuCArYHR6bm4S73s0jZ_X9gCgnk9zEQDh-DflFtmd4w',)
2025-12-02 22:40:50,156 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:40:50,156 - sqlalchemy.engine.Engine - INFO - [cached since 15.05s ago] (datetime.datetime(2025, 12, 2, 17, 10, 50, 155442, tzinfo=datetime.timezone.utc), 19)
2025-12-02 22:40:50,158 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:50,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:40:50,225 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2025-12-02 22:40:50,226 - sqlalchemy.engine.Engine - INFO - [cached since 15.05s ago] ('212223240065', '212223240065', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2025-12-02 22:40:50,239 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2025-12-02 22:40:50,240 - sqlalchemy.engine.Engine - INFO - [cached since 15.05s ago] ('212223240065', 'SUBMITTED_TO_LMS', 'COMPLETED')
2025-12-02 22:40:50,242 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:40:50,245 - app.db.database - ERROR - Database session error: [{'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.5/v/missing'}]
2025-12-02 22:44:39,845 - app.main - INFO - Shutting down Examination Middleware...
2025-12-02 22:44:39,845 - app.main - INFO - Database connections closed
2025-12-02 22:44:41,368 - app.main - INFO - Starting Examination Middleware...
2025-12-02 22:44:41,415 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-12-02 22:44:41,416 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:44:41,417 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-12-02 22:44:41,417 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:44:41,418 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-12-02 22:44:41,418 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:44:41,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:44:41,421 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,425 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,426 - sqlalchemy.engine.Engine - INFO - [cached since 0.004874s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.005968s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,427 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.006716s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.007478s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,429 - sqlalchemy.engine.Engine - INFO - [cached since 0.008218s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:44:41,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.009082s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:44:41,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-02 22:44:41,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] ('workflowstatus', 'pg_catalog')
2025-12-02 22:44:41,433 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:44:41,439 - app.main - INFO - Database tables created/verified
2025-12-02 22:44:41,440 - app.main - INFO - Upload directory: D:\Test SAE-2\exam_middleware\uploads
2025-12-02 22:44:41,440 - app.main - INFO - Storage directory: D:\Test SAE-2\exam_middleware\storage
2025-12-02 22:44:41,440 - app.main - INFO - Examination Middleware started successfully
2025-12-02 22:46:35,853 - app.main - INFO - Starting Examination Middleware...
2025-12-02 22:46:35,909 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-12-02 22:46:35,910 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:46:35,911 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-12-02 22:46:35,911 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:46:35,913 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-12-02 22:46:35,913 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-02 22:46:35,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:46:35,916 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,916 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,921 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,922 - sqlalchemy.engine.Engine - INFO - [cached since 0.005479s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,923 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,923 - sqlalchemy.engine.Engine - INFO - [cached since 0.006882s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,924 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,924 - sqlalchemy.engine.Engine - INFO - [cached since 0.007601s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,925 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,925 - sqlalchemy.engine.Engine - INFO - [cached since 0.008556s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,925 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,926 - sqlalchemy.engine.Engine - INFO - [cached since 0.0094s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,926 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-02 22:46:35,927 - sqlalchemy.engine.Engine - INFO - [cached since 0.01031s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-02 22:46:35,927 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-02 22:46:35,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ('workflowstatus', 'pg_catalog')
2025-12-02 22:46:35,929 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:46:35,940 - app.main - INFO - Database tables created/verified
2025-12-02 22:46:35,941 - app.main - INFO - Upload directory: D:\Test SAE-2\exam_middleware\uploads
2025-12-02 22:46:35,941 - app.main - INFO - Storage directory: D:\Test SAE-2\exam_middleware\storage
2025-12-02 22:46:35,941 - app.main - INFO - Examination Middleware started successfully
2025-12-02 22:46:46,232 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:46:46,233 - multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-02 22:46:46,233 - multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:46:46,234 - multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:46:46,235 - multipart.multipart - DEBUG - Calling on_end with no data
2025-12-02 22:46:46,317 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:46:46,330 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2025-12-02 22:46:46,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('admin',)
2025-12-02 22:46:46,577 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2025-12-02 22:46:46,578 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] (datetime.datetime(2025, 12, 2, 17, 16, 46, 576242, tzinfo=datetime.timezone.utc), 1)
2025-12-02 22:46:46,591 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:03,796 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_value with data[139:149]
2025-12-02 22:47:03,797 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:47:03,798 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:47:03,798 - multipart.multipart - DEBUG - Calling on_part_data with data[153:254]
2025-12-02 22:47:03,798 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,799 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,799 - multipart.multipart - DEBUG - Calling on_part_data with data[256:32768]
2025-12-02 22:47:03,800 - multipart.multipart - DEBUG - Calling on_part_data with data[0:102991]
2025-12-02 22:47:03,801 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,801 - multipart.multipart - DEBUG - Calling on_part_data with data[102992:111970]
2025-12-02 22:47:03,801 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,802 - multipart.multipart - DEBUG - Calling on_part_data with data[111971:202837]
2025-12-02 22:47:03,802 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,802 - multipart.multipart - DEBUG - Calling on_part_data with data[202838:262144]
2025-12-02 22:47:03,803 - multipart.multipart - DEBUG - Calling on_part_data with data[0:32443]
2025-12-02 22:47:03,803 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,803 - multipart.multipart - DEBUG - Calling on_part_data with data[32444:42888]
2025-12-02 22:47:03,803 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,804 - multipart.multipart - DEBUG - Calling on_part_data with data[42889:85350]
2025-12-02 22:47:03,804 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,804 - multipart.multipart - DEBUG - Calling on_part_data with data[85351:184779]
2025-12-02 22:47:03,804 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,805 - multipart.multipart - DEBUG - Calling on_part_data with data[184780:216956]
2025-12-02 22:47:03,805 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,805 - multipart.multipart - DEBUG - Calling on_part_data with data[216957:262144]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[0:23803]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[23804:34926]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[34927:69260]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[69261:178829]
2025-12-02 22:47:03,806 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,808 - multipart.multipart - DEBUG - Calling on_part_data with data[178830:262144]
2025-12-02 22:47:03,809 - multipart.multipart - DEBUG - Calling on_part_data with data[0:79692]
2025-12-02 22:47:03,809 - multipart.multipart - DEBUG - Calling on_part_data with data[0:1]
2025-12-02 22:47:03,809 - multipart.multipart - DEBUG - Calling on_part_data with data[79693:82325]
2025-12-02 22:47:03,809 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:47:03,809 - multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-02 22:47:03,810 - multipart.multipart - DEBUG - Calling on_header_field with data[82369:82388]
2025-12-02 22:47:03,810 - multipart.multipart - DEBUG - Calling on_header_value with data[82390:82420]
2025-12-02 22:47:03,810 - multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-02 22:47:03,811 - multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-02 22:47:03,811 - multipart.multipart - DEBUG - Calling on_part_data with data[82424:82432]
2025-12-02 22:47:03,811 - multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-02 22:47:03,811 - multipart.multipart - DEBUG - Calling on_end with no data
2025-12-02 22:47:03,876 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:03,878 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2025-12-02 22:47:03,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (1,)
2025-12-02 22:47:03,881 - app.services.file_processor - INFO - Parsed filename (strict): 212223240014, 19AI405
2025-12-02 22:47:03,883 - app.services.file_processor - INFO - Saved file: ./uploads\pending\2bff77d3bebc476aa5c41721e44a94a2.jpg (hash: 3a00d46e79102899...)
2025-12-02 22:47:03,886 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2025-12-02 22:47:03,886 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('9f46692b458d128fc49cc4c8df7273d1',)
2025-12-02 22:47:03,908 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2025-12-02 22:47:03,909 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] (UUID('0ff3069a-b578-404c-ac60-95451bc7f55c'), '212223240014_19AI405.jpg', '212223240014_19AI405.jpg', '212223240014', '19AI405', './uploads\\pending\\2bff77d3bebc476aa5c41721e44a94a2.jpg', '3a00d46e791028994365d24a1febf50b451f2fee472cf57c44b1c37bb58275dd', 901372, 'image/jpeg', None, None, None, None, 'PENDING', None, None, None, '9f46692b458d128fc49cc4c8df7273d1', None, None, None, 1, None, '[{"timestamp": "2025-12-02T17:17:03.905796", "action": "created", "details": {"filename": "212223240014_19AI405.jpg", "parsed_reg_no": "212223240014", "parsed_subject_code": "19AI405"}}]', None, 0)
2025-12-02 22:47:03,912 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:47:03,913 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] (18,)
2025-12-02 22:47:03,914 - app.services.artifact_service - INFO - Created artifact: 0ff3069a-b578-404c-ac60-95451bc7f55c
2025-12-02 22:47:03,915 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:47:03,916 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2025-12-02 22:47:03,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:13,164 - app.api.routes.auth - INFO - Authenticating student: student1
2025-12-02 22:47:13,414 - app.services.moodle_client - INFO - Authenticating user: student1
2025-12-02 22:47:13,414 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2025-12-02 22:47:13,603 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C75116F2D0>
2025-12-02 22:47:13,604 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C7512EACC0> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2025-12-02 22:47:13,666 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C7511DE410>
2025-12-02 22:47:13,668 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:13,668 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:13,669 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:13,669 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:13,669 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:14,178 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Content-Length', b'126'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Date', b'Tue, 02 Dec 2025 17:17:13 GMT'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Tue, 02 Dec 2025 17:17:13 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:47:14,179 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:14,179 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:14,179 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:14,180 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:14,180 - app.services.moodle_client - INFO - Successfully authenticated user: student1
2025-12-02 22:47:14,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:14,182 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:14,182 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:14,182 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:14,182 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:14,406 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:17:14 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Transfer-Encoding', b'chunked')])
2025-12-02 22:47:14,406 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:14,461 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:14,461 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:14,462 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:14,462 - app.services.moodle_client - INFO - Got site info for user: student1
2025-12-02 22:47:14,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:14,527 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::TIMESTAMP WITH TIME ZONE, $7::VARCHAR, $8::VARCHAR, $9::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2025-12-02 22:47:14,528 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('Zg1ktiEWhIQptjS6DpJL1oQaByvJxGx3wuZH2hX6gSs', 3, 'student1', 'student 212223240014', 'Z0FBQUFBQnBMeDhhM1VlZ1pPUzZreXVaRl9fZkZDeUhubGNPdC1mSGtQaFk5Z191aHd3LVJHV1dicFJpR3c2cWNoZTRVdUVfRFhNTzgyU1hJTUlKcU5zQWduZFFVYjl5bllTVUlWVlI3djU2cTQ0WFF3dzZUUk5fYnBydUVTZ1JPWk5GZGpLdzJMN3E=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36', datetime.datetime(2025, 12, 2, 18, 17, 14, 463609, tzinfo=datetime.timezone.utc))
2025-12-02 22:47:14,530 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:14,587 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:14,588 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2025-12-02 22:47:14,588 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('212223240014', '212223240014', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2025-12-02 22:47:14,602 - app.api.routes.auth - INFO - Student student1 (reg: 212223240014) logged in. Pending papers: 1
2025-12-02 22:47:14,602 - httpcore.connection - DEBUG - close.started
2025-12-02 22:47:14,602 - httpcore.connection - DEBUG - close.complete
2025-12-02 22:47:14,603 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:14,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:14,671 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:47:14,672 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('Zg1ktiEWhIQptjS6DpJL1oQaByvJxGx3wuZH2hX6gSs',)
2025-12-02 22:47:14,675 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:47:14,675 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] (datetime.datetime(2025, 12, 2, 17, 17, 14, 674005, tzinfo=datetime.timezone.utc), 20)
2025-12-02 22:47:14,676 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:14,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:14,746 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2025-12-02 22:47:14,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.1585s ago] ('212223240014', '212223240014', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2025-12-02 22:47:14,759 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2025-12-02 22:47:14,760 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('212223240014', 'SUBMITTED_TO_LMS', 'COMPLETED')
2025-12-02 22:47:14,761 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:47:14,762 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('19AI405',)
2025-12-02 22:47:14,763 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:47:14,764 - sqlalchemy.engine.Engine - INFO - [cached since 0.002746s ago] ('19AI405',)
2025-12-02 22:47:14,765 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:14,768 - app.db.database - ERROR - Database session error: [{'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.5/v/missing'}]
2025-12-02 22:47:24,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:24,742 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:47:24,744 - sqlalchemy.engine.Engine - INFO - [cached since 10.07s ago] ('Zg1ktiEWhIQptjS6DpJL1oQaByvJxGx3wuZH2hX6gSs',)
2025-12-02 22:47:24,746 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:47:24,746 - sqlalchemy.engine.Engine - INFO - [cached since 10.07s ago] (datetime.datetime(2025, 12, 2, 17, 17, 24, 746557, tzinfo=datetime.timezone.utc), 20)
2025-12-02 22:47:24,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:24,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:24,806 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2025-12-02 22:47:24,806 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] ('0ff3069a-b578-404c-ac60-95451bc7f55c',)
2025-12-02 22:47:24,818 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2025-12-02 22:47:24,819 - sqlalchemy.engine.Engine - INFO - [cached since 10.06s ago] ('19AI405',)
2025-12-02 22:47:24,823 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2025-12-02 22:47:24,823 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] (3, 'student1', 2, 18)
2025-12-02 22:47:24,824 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:47:24,824 - sqlalchemy.engine.Engine - INFO - [cached since 20.91s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', 'student1', '127.0.0.1', 18, None, None, 'null', 'null', None, None)
2025-12-02 22:47:24,827 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2025-12-02 22:47:24,828 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:47:24,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('UPLOADING', 18)
2025-12-02 22:47:25,087 - app.services.moodle_client - INFO - Uploading file: 212223240014_19AI405.jpg (901372 bytes)
2025-12-02 22:47:25,087 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2025-12-02 22:47:25,145 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C7513A0F50>
2025-12-02 22:47:25,146 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001C7512EB020> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2025-12-02 22:47:25,233 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C75115E390>
2025-12-02 22:47:25,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:25,234 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:25,234 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:27,065 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:27,066 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:38,570 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Content-Length', b'294'), (b'Content-Type', b'text/plain; charset=utf-8'), (b'Date', b'Tue, 02 Dec 2025 17:17:25 GMT'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Tue, 02 Dec 2025 17:17:38 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:47:38,570 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:38,570 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:38,570 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:38,570 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:38,571 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 17, 'userid': '3', 'filearea': 'draft', 'filename': '212223240014_19AI405.jpg', 'filepath': '/', 'itemid': 394725041, 'license': 'unknown', 'author': 'student 212223240014', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212223240014_19AI405.jpg";}', 'filesize': 901372}]
2025-12-02 22:47:38,571 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 394725041
2025-12-02 22:47:38,571 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:47:38,571 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (394725041, 18)
2025-12-02 22:47:38,573 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2025-12-02 22:47:38,574 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:38,574 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:38,574 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:38,574 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:38,574 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:38,799 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'662'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:17:38 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:47:38,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:38,800 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:38,800 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:38,800 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:38,801 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2025-12-02 22:47:38,801 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2025-12-02 22:47:38,802 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2025-12-02 22:47:38,802 - sqlalchemy.engine.Engine - INFO - [cached since 13.98s ago] ('SUBMITTING', 18)
2025-12-02 22:47:38,803 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 394725041
2025-12-02 22:47:38,804 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:38,804 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:38,804 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:38,805 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:38,805 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:39,114 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'2'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:17:38 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:47:39,115 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:39,116 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:39,117 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:39,117 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:39,118 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2025-12-02 22:47:39,119 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2025-12-02 22:47:39,119 - app.services.submission_service - INFO - Verifying submission status after save...
2025-12-02 22:47:39,120 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-02 22:47:39,121 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-02 22:47:39,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-02 22:47:39,122 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-02 22:47:39,122 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-02 22:47:39,278 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Content-Length', b'986'), (b'Content-Type', b'application/json'), (b'Date', b'Tue, 02 Dec 2025 17:17:39 GMT'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Ngrok-Agent-Ips', b'2401:4900:9157:667e:99c1:3a88:6025:b680'), (b'Pragma', b'no-cache'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4')])
2025-12-02 22:47:39,279 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-02 22:47:39,279 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-02 22:47:39,279 - httpcore.http11 - DEBUG - response_closed.started
2025-12-02 22:47:39,279 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-02 22:47:39,279 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 9, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1764694261, 'timemodified': 1764695858, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212223240014_19AI405.jpg', 'filepath': '/', 'filesize': 1268488, 'fileurl': 'https://1844fdb23815.ngrok-free.app/webservice/pluginfile.php/26/assignsubmission_file/submission_files/9/212223240014_19AI405.jpg', 'timemodified': 1764695858, 'mimetype': 'image/jpeg', 'isexternalfile': False, 'icon': 'f/image'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2025-12-02 22:47:39,279 - app.services.submission_service - INFO - Submission status: submitted
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Submission ID: 9
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Submission timecreated: 1764694261
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Submission timemodified: 1764695858
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Grading status: notgraded
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Submissions enabled: True
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Can edit: True
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Can submit: False
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Submission verification - Files found: 1
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Verified files: ['212223240014_19AI405.jpg']
2025-12-02 22:47:39,280 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2025-12-02 22:47:39,281 - httpcore.connection - DEBUG - close.started
2025-12-02 22:47:39,281 - httpcore.connection - DEBUG - close.complete
2025-12-02 22:47:39,281 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 394725041, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '9', 'verified_files': ['212223240014_19AI405.jpg'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_0ff3069a-b578-404c-ac60-95451bc7f55c_20251202171739'}
2025-12-02 22:47:39,281 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2025-12-02 22:47:39,282 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:47:39,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (18,)
2025-12-02 22:47:39,285 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2025-12-02 22:47:39,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('COMPLETED', '9', 'TXN_0ff3069a-b578-404c-ac60-95451bc7f55c_20251202171739', datetime.datetime(2025, 12, 2, 17, 17, 39, 284552), datetime.datetime(2025, 12, 2, 17, 17, 39, 284552), 18)
2025-12-02 22:47:39,287 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-02 22:47:39,287 - sqlalchemy.engine.Engine - INFO - [cached since 35.38s ago] (18,)
2025-12-02 22:47:39,288 - app.services.artifact_service - INFO - Artifact 18 marked as submitted
2025-12-02 22:47:39,289 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-02 22:47:39,289 - sqlalchemy.engine.Engine - INFO - [cached since 35.38s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', 'student1', '127.0.0.1', 18, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 394725041, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212223240014_19AI405.jpg"], "submit_skipped": true, "success": true, "transaction_id": "TXN_0ff3069a-b578-404c-ac60-95451bc7f55c_20251202171739"}', None, None)
2025-12-02 22:47:39,290 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:39,450 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:39,451 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2025-12-02 22:47:39,451 - sqlalchemy.engine.Engine - INFO - [cached since 14.65s ago] ('0ff3069a-b578-404c-ac60-95451bc7f55c',)
2025-12-02 22:47:39,465 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:39,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:39,618 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2025-12-02 22:47:39,618 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] ('Zg1ktiEWhIQptjS6DpJL1oQaByvJxGx3wuZH2hX6gSs',)
2025-12-02 22:47:39,621 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2025-12-02 22:47:39,622 - sqlalchemy.engine.Engine - INFO - [cached since 24.95s ago] (datetime.datetime(2025, 12, 2, 17, 17, 39, 621467, tzinfo=datetime.timezone.utc), 20)
2025-12-02 22:47:39,623 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:39,835 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-02 22:47:39,836 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2025-12-02 22:47:39,837 - sqlalchemy.engine.Engine - INFO - [cached since 25.25s ago] ('212223240014', '212223240014', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2025-12-02 22:47:39,859 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2025-12-02 22:47:39,860 - sqlalchemy.engine.Engine - INFO - [cached since 25.1s ago] ('212223240014', 'SUBMITTED_TO_LMS', 'COMPLETED')
2025-12-02 22:47:39,862 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-02 22:47:39,866 - app.db.database - ERROR - Database session error: [{'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.5/v/missing'}]
2025-12-02 22:51:43,043 - app.main - INFO - Shutting down Examination Middleware...
2025-12-02 22:51:43,043 - app.main - INFO - Database connections closed
2025-12-31 21:41:34,139 - asyncio - DEBUG - Using proactor: IocpProactor
2025-12-31 21:41:34,257 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-12-31 21:41:34,257 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:34,262 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-12-31 21:41:34,263 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:34,265 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-12-31 21:41:34,266 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:34,267 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:34,270 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,282 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,283 - sqlalchemy.engine.Engine - INFO - [cached since 0.01273s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,284 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,285 - sqlalchemy.engine.Engine - INFO - [cached since 0.01533s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,286 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,287 - sqlalchemy.engine.Engine - INFO - [cached since 0.01718s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,288 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,288 - sqlalchemy.engine.Engine - INFO - [cached since 0.01839s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,289 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,290 - sqlalchemy.engine.Engine - INFO - [cached since 0.01978s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,291 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:34,291 - sqlalchemy.engine.Engine - INFO - [cached since 0.02129s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:34,293 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-31 21:41:34,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('workflowstatus', 'pg_catalog')
2025-12-31 21:41:34,297 - sqlalchemy.engine.Engine - INFO - CREATE TYPE workflowstatus AS ENUM ('PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW', 'LOCKED_BY_USER', 'UPLOADING', 'SUBMITTING', 'SUBMITTED_TO_LMS', 'COMPLETED', 'FAILED', 'QUEUED')
2025-12-31 21:41:34,298 - sqlalchemy.engine.Engine - INFO - [no key 0.00055s] ()
2025-12-31 21:41:34,306 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE subject_mappings (
	id SERIAL NOT NULL, 
	subject_code VARCHAR(20) NOT NULL, 
	subject_name VARCHAR(255), 
	moodle_course_id INTEGER NOT NULL, 
	moodle_course_idnumber VARCHAR(50), 
	moodle_assignment_id INTEGER NOT NULL, 
	moodle_assignment_name VARCHAR(255), 
	exam_session VARCHAR(50), 
	is_active BOOLEAN, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	updated_at TIMESTAMP WITH TIME ZONE, 
	last_verified_at TIMESTAMP WITH TIME ZONE, 
	PRIMARY KEY (id)
)


2025-12-31 21:41:34,307 - sqlalchemy.engine.Engine - INFO - [no key 0.00089s] ()
2025-12-31 21:41:34,324 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_subject_mappings_subject_code ON subject_mappings (subject_code)
2025-12-31 21:41:34,325 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2025-12-31 21:41:34,329 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE staff_users (
	id SERIAL NOT NULL, 
	username VARCHAR(100) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	hashed_password VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	role VARCHAR(50), 
	is_active BOOLEAN, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	last_login_at TIMESTAMP WITH TIME ZONE, 
	PRIMARY KEY (id), 
	UNIQUE (email)
)


2025-12-31 21:41:34,330 - sqlalchemy.engine.Engine - INFO - [no key 0.00084s] ()
2025-12-31 21:41:34,336 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_staff_users_username ON staff_users (username)
2025-12-31 21:41:34,336 - sqlalchemy.engine.Engine - INFO - [no key 0.00059s] ()
2025-12-31 21:41:34,339 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE student_sessions (
	id SERIAL NOT NULL, 
	session_id VARCHAR(64) NOT NULL, 
	moodle_user_id BIGINT NOT NULL, 
	moodle_username VARCHAR(100) NOT NULL, 
	moodle_fullname VARCHAR(255), 
	encrypted_token TEXT NOT NULL, 
	token_expires_at TIMESTAMP WITH TIME ZONE, 
	ip_address VARCHAR(45), 
	user_agent VARCHAR(500), 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	last_activity_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	expires_at TIMESTAMP WITH TIME ZONE NOT NULL, 
	PRIMARY KEY (id)
)


2025-12-31 21:41:34,340 - sqlalchemy.engine.Engine - INFO - [no key 0.00077s] ()
2025-12-31 21:41:34,345 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_session_expires ON student_sessions (expires_at)
2025-12-31 21:41:34,346 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2025-12-31 21:41:34,349 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_student_sessions_session_id ON student_sessions (session_id)
2025-12-31 21:41:34,349 - sqlalchemy.engine.Engine - INFO - [no key 0.00043s] ()
2025-12-31 21:41:34,351 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE system_config (
	id SERIAL NOT NULL, 
	key VARCHAR(100) NOT NULL, 
	value TEXT, 
	value_type VARCHAR(20), 
	description TEXT, 
	updated_at TIMESTAMP WITH TIME ZONE, 
	PRIMARY KEY (id), 
	UNIQUE (key)
)


2025-12-31 21:41:34,352 - sqlalchemy.engine.Engine - INFO - [no key 0.00066s] ()
2025-12-31 21:41:34,359 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE examination_artifacts (
	id SERIAL NOT NULL, 
	artifact_uuid UUID NOT NULL, 
	raw_filename VARCHAR(255) NOT NULL, 
	original_filename VARCHAR(255) NOT NULL, 
	parsed_reg_no VARCHAR(20), 
	parsed_subject_code VARCHAR(20), 
	file_blob_path VARCHAR(512) NOT NULL, 
	file_hash VARCHAR(64) NOT NULL, 
	file_size_bytes BIGINT, 
	mime_type VARCHAR(100), 
	moodle_user_id BIGINT, 
	moodle_username VARCHAR(100), 
	moodle_course_id INTEGER, 
	moodle_assignment_id INTEGER, 
	workflow_status workflowstatus NOT NULL, 
	moodle_draft_item_id BIGINT, 
	moodle_submission_id VARCHAR(100), 
	lms_transaction_id VARCHAR(100), 
	transaction_id VARCHAR(64), 
	uploaded_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	validated_at TIMESTAMP WITH TIME ZONE, 
	submit_timestamp TIMESTAMP WITH TIME ZONE, 
	completed_at TIMESTAMP WITH TIME ZONE, 
	uploaded_by_staff_id INTEGER, 
	submitted_by_user_id BIGINT, 
	transaction_log JSONB, 
	error_message TEXT, 
	retry_count INTEGER, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_paper_submission UNIQUE (parsed_reg_no, parsed_subject_code), 
	UNIQUE (artifact_uuid), 
	UNIQUE (transaction_id), 
	FOREIGN KEY(uploaded_by_staff_id) REFERENCES staff_users (id)
)


2025-12-31 21:41:34,360 - sqlalchemy.engine.Engine - INFO - [no key 0.00136s] ()
2025-12-31 21:41:34,373 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_artifacts_status ON examination_artifacts (workflow_status)
2025-12-31 21:41:34,373 - sqlalchemy.engine.Engine - INFO - [no key 0.00058s] ()
2025-12-31 21:41:34,376 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_examination_artifacts_parsed_subject_code ON examination_artifacts (parsed_subject_code)
2025-12-31 21:41:34,376 - sqlalchemy.engine.Engine - INFO - [no key 0.00043s] ()
2025-12-31 21:41:34,378 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_artifacts_reg_subject ON examination_artifacts (parsed_reg_no, parsed_subject_code)
2025-12-31 21:41:34,379 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-12-31 21:41:34,381 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_examination_artifacts_parsed_reg_no ON examination_artifacts (parsed_reg_no)
2025-12-31 21:41:34,381 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2025-12-31 21:41:34,384 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE audit_logs (
	id SERIAL NOT NULL, 
	action VARCHAR(100) NOT NULL, 
	action_category VARCHAR(50) NOT NULL, 
	description TEXT, 
	actor_type VARCHAR(20) NOT NULL, 
	actor_id VARCHAR(100), 
	actor_username VARCHAR(100), 
	actor_ip VARCHAR(45), 
	artifact_id INTEGER, 
	target_type VARCHAR(50), 
	target_id VARCHAR(100), 
	request_data JSONB, 
	response_data JSONB, 
	error_details JSONB, 
	moodle_api_function VARCHAR(100), 
	moodle_response_code INTEGER, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(artifact_id) REFERENCES examination_artifacts (id)
)


2025-12-31 21:41:34,385 - sqlalchemy.engine.Engine - INFO - [no key 0.00091s] ()
2025-12-31 21:41:34,390 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_audit_logs_created_at ON audit_logs (created_at)
2025-12-31 21:41:34,391 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2025-12-31 21:41:34,394 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_audit_artifact_action ON audit_logs (artifact_id, action)
2025-12-31 21:41:34,394 - sqlalchemy.engine.Engine - INFO - [no key 0.00056s] ()
2025-12-31 21:41:34,397 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_audit_actor ON audit_logs (actor_type, actor_id)
2025-12-31 21:41:34,397 - sqlalchemy.engine.Engine - INFO - [no key 0.00037s] ()
2025-12-31 21:41:34,400 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_audit_logs_action ON audit_logs (action)
2025-12-31 21:41:34,400 - sqlalchemy.engine.Engine - INFO - [no key 0.00039s] ()
2025-12-31 21:41:34,402 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE submission_queue (
	id SERIAL NOT NULL, 
	artifact_id INTEGER NOT NULL, 
	status VARCHAR(20), 
	priority INTEGER, 
	retry_count INTEGER, 
	max_retries INTEGER, 
	next_retry_at TIMESTAMP WITH TIME ZONE, 
	queued_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	processed_at TIMESTAMP WITH TIME ZONE, 
	last_error TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(artifact_id) REFERENCES examination_artifacts (id)
)


2025-12-31 21:41:34,403 - sqlalchemy.engine.Engine - INFO - [no key 0.00085s] ()
2025-12-31 21:41:34,410 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_queue_status_retry ON submission_queue (status, next_retry_at)
2025-12-31 21:41:34,411 - sqlalchemy.engine.Engine - INFO - [no key 0.00048s] ()
2025-12-31 21:41:34,416 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:34,495 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:34,496 - sqlalchemy.engine.Engine - INFO - SELECT id FROM staff_users WHERE username = 'admin'
2025-12-31 21:41:34,497 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2025-12-31 21:41:34,791 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_users (username, email, hashed_password, full_name, role, is_active, last_login_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BOOLEAN, $7::TIMESTAMP WITH TIME ZONE) RETURNING staff_users.id, staff_users.created_at
2025-12-31 21:41:34,792 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('admin', 'admin@example.com', '$2b$12$MEo.4eYCxBZrzk/ujWnI7OqOzTbDqriZwSuFgs36V5VcBwxP9deMa', 'Administrator', 'admin', True, None)
2025-12-31 21:41:34,805 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:34,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:34,875 - sqlalchemy.engine.Engine - INFO - SELECT id FROM subject_mappings WHERE subject_code = $1
2025-12-31 21:41:34,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('19AI405',)
2025-12-31 21:41:34,879 - sqlalchemy.engine.Engine - INFO - SELECT id FROM subject_mappings WHERE subject_code = $1
2025-12-31 21:41:34,880 - sqlalchemy.engine.Engine - INFO - [cached since 0.005503s ago] ('19AI411',)
2025-12-31 21:41:34,881 - sqlalchemy.engine.Engine - INFO - SELECT id FROM subject_mappings WHERE subject_code = $1
2025-12-31 21:41:34,882 - sqlalchemy.engine.Engine - INFO - [cached since 0.007117s ago] ('ML',)
2025-12-31 21:41:34,884 - sqlalchemy.engine.Engine - INFO - INSERT INTO subject_mappings (subject_code, subject_name, moodle_course_id, moodle_course_idnumber, moodle_assignment_id, moodle_assignment_name, exam_session, is_active, updated_at, last_verified_at) SELECT p0::VARCHAR, p1::VARCHAR, p2::INTEGER, p3: ... 735 characters truncated ... sen_counter RETURNING subject_mappings.id, subject_mappings.created_at, subject_mappings.id AS id__1
2025-12-31 21:41:34,885 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] ('19AI405', 'Deep Learning', 3, None, 4, None, '2024-1', True, None, None, '19AI411', 'Natural Language Processing', 4, None, 6, None, '2024-1', True, None, None, 'ML', 'Machine Learning', 2, None, 2, None, '2024-1', True, None, None)
2025-12-31 21:41:34,887 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:34,955 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:34,956 - sqlalchemy.engine.Engine - INFO - SELECT id FROM system_config WHERE key = $1
2025-12-31 21:41:34,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] ('moodle_maintenance_mode',)
2025-12-31 21:41:34,959 - sqlalchemy.engine.Engine - INFO - SELECT id FROM system_config WHERE key = $1
2025-12-31 21:41:34,960 - sqlalchemy.engine.Engine - INFO - [cached since 0.004124s ago] ('max_file_size_mb',)
2025-12-31 21:41:34,961 - sqlalchemy.engine.Engine - INFO - SELECT id FROM system_config WHERE key = $1
2025-12-31 21:41:34,961 - sqlalchemy.engine.Engine - INFO - [cached since 0.005896s ago] ('allowed_extensions',)
2025-12-31 21:41:34,963 - sqlalchemy.engine.Engine - INFO - SELECT id FROM system_config WHERE key = $1
2025-12-31 21:41:34,964 - sqlalchemy.engine.Engine - INFO - [cached since 0.008183s ago] ('exam_session',)
2025-12-31 21:41:34,966 - sqlalchemy.engine.Engine - INFO - INSERT INTO system_config (key, value, value_type, description, updated_at) SELECT p0::VARCHAR, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::TIMESTAMP WITH TIME ZONE FROM (VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::TIMESTAMP WITH T ... 304 characters truncated ...  p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING system_config.id, system_config.id AS id__1
2025-12-31 21:41:34,967 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] ('moodle_maintenance_mode', 'false', 'string', 'Whether Moodle is in maintenance mode', None, 'max_file_size_mb', '50', 'string', 'Maximum file size in MB for uploads', None, 'allowed_extensions', 'pdf,jpg,jpeg,png', 'string', 'Comma-separated list of allowed file extensions', None, 'exam_session', '2024-SPRING', 'string', 'Current examination session', None)
2025-12-31 21:41:34,970 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:35,033 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:35,034 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-12-31 21:41:35,034 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2025-12-31 21:41:35,036 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:35,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:35,105 - sqlalchemy.engine.Engine - INFO - 
                SELECT table_name 
                FROM information_schema.tables 
                WHERE table_schema = 'public'
            
2025-12-31 21:41:35,105 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ()
2025-12-31 21:41:35,114 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:47,448 - app.main - INFO - Starting Examination Middleware...
2025-12-31 21:41:47,526 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-12-31 21:41:47,526 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:47,528 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-12-31 21:41:47,529 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:47,530 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-12-31 21:41:47,530 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-12-31 21:41:47,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:41:47,538 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,548 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,549 - sqlalchemy.engine.Engine - INFO - [cached since 0.01104s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,551 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,551 - sqlalchemy.engine.Engine - INFO - [cached since 0.01311s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,552 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,553 - sqlalchemy.engine.Engine - INFO - [cached since 0.01459s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,553 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,554 - sqlalchemy.engine.Engine - INFO - [cached since 0.01578s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,555 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,556 - sqlalchemy.engine.Engine - INFO - [cached since 0.01752s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,557 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-12-31 21:41:47,557 - sqlalchemy.engine.Engine - INFO - [cached since 0.01912s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-12-31 21:41:47,559 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2025-12-31 21:41:47,560 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('workflowstatus', 'pg_catalog')
2025-12-31 21:41:47,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:41:47,567 - app.main - INFO - Database tables created/verified
2025-12-31 21:41:47,568 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2025-12-31 21:41:47,569 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2025-12-31 21:41:47,569 - app.main - INFO - Examination Middleware started successfully
2025-12-31 21:42:43,145 - app.api.routes.auth - INFO - Authenticating student: 22007928
2025-12-31 21:42:43,976 - app.services.moodle_client - INFO - Authenticating user: 22007928
2025-12-31 21:42:43,998 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2025-12-31 21:42:44,616 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000019EE60BE3C0>
2025-12-31 21:42:44,617 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000019EE5FC5BE0> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2025-12-31 21:42:44,701 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000019EE5C36FD0>
2025-12-31 21:42:44,704 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-31 21:42:44,706 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-31 21:42:44,706 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-31 21:42:44,708 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-31 21:42:44,709 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-31 21:42:44,968 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Wed, 31 Dec 2025 16:12:44 GMT'), (b'Content-Length', b'72')])
2025-12-31 21:42:44,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-31 21:42:44,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-31 21:42:44,973 - httpcore.http11 - DEBUG - response_closed.started
2025-12-31 21:42:44,975 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-31 21:42:44,980 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-31 21:42:44,981 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2025-12-31 21:42:44,984 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2025-12-31 21:43:12,509 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:43:12,509 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-31 21:43:12,510 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2025-12-31 21:43:12,510 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:43:12,510 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:43:12,511 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2025-12-31 21:43:12,511 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:43:12,511 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:43:12,512 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2025-12-31 21:43:12,512 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2025-12-31 21:43:12,513 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:43:12,513 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:43:12,513 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2025-12-31 21:43:12,514 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:43:12,514 - python_multipart.multipart - DEBUG - Calling on_end with no data
2025-12-31 21:43:12,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:43:12,651 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2025-12-31 21:43:12,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] ('admin',)
2025-12-31 21:43:13,043 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2025-12-31 21:43:13,043 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] (datetime.datetime(2025, 12, 31, 16, 13, 13, 40641, tzinfo=datetime.timezone.utc), 1)
2025-12-31 21:43:13,050 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:45:23,327 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:45:23,328 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-31 21:45:23,329 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2025-12-31 21:45:23,329 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:23,330 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2025-12-31 21:45:23,330 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2025-12-31 21:45:23,331 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:23,332 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:45:23,334 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2025-12-31 21:45:23,335 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:45:23,336 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:45:23,337 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2025-12-31 21:45:23,338 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2025-12-31 21:45:23,339 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:23,344 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:45:23,346 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2025-12-31 21:45:23,348 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:45:23,349 - python_multipart.multipart - DEBUG - Calling on_end with no data
2025-12-31 21:45:23,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:45:23,516 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2025-12-31 21:45:23,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] (1,)
2025-12-31 21:45:23,528 - app.services.file_processor - INFO - Parsed filename (strict): 212222230134, 19AI406
2025-12-31 21:45:23,534 - app.services.file_processor - INFO - Saved file: ./uploads\pending\1b73d92cda164bc497787fe6718bed86.pdf (hash: 69530c94d1cfd882...)
2025-12-31 21:45:23,543 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2025-12-31 21:45:23,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00341s] ('a2e1c607d780645dfdb91981daf4fb55',)
2025-12-31 21:45:23,626 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2025-12-31 21:45:23,628 - sqlalchemy.engine.Engine - INFO - [generated in 0.00175s] (UUID('2a8fa349-e94a-4b8a-8281-0e5304ec64be'), '212222230134_19AI406.pdf', '212222230134_19AI406.pdf', '212222230134', '19AI406', './uploads\\pending\\1b73d92cda164bc497787fe6718bed86.pdf', '69530c94d1cfd88202dac8bcdbe9e7be8b021f021c09371f6d1782f1c0dc571d', 188644, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, 'a2e1c607d780645dfdb91981daf4fb55', None, None, None, 1, None, '[{"timestamp": "2025-12-31T16:15:23.622133", "action": "created", "details": {"filename": "212222230134_19AI406.pdf", "parsed_reg_no": "212222230134", "parsed_subject_code": "19AI406"}}]', None, 0)
2025-12-31 21:45:23,646 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2025-12-31 21:45:23,647 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] (1,)
2025-12-31 21:45:23,653 - app.services.artifact_service - INFO - Created artifact: 2a8fa349-e94a-4b8a-8281-0e5304ec64be
2025-12-31 21:45:23,658 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-31 21:45:23,660 - sqlalchemy.engine.Engine - INFO - [generated in 0.00258s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2025-12-31 21:45:23,676 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:45:31,492 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:45:31,493 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2025-12-31 21:45:31,494 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2025-12-31 21:45:31,494 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:31,495 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2025-12-31 21:45:31,495 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2025-12-31 21:45:31,496 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:31,497 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:45:31,498 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:32768]
2025-12-31 21:45:31,501 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:156034]
2025-12-31 21:45:31,502 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:45:31,503 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2025-12-31 21:45:31,505 - python_multipart.multipart - DEBUG - Calling on_header_field with data[156078:156097]
2025-12-31 21:45:31,507 - python_multipart.multipart - DEBUG - Calling on_header_value with data[156099:156129]
2025-12-31 21:45:31,511 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2025-12-31 21:45:31,512 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2025-12-31 21:45:31,514 - python_multipart.multipart - DEBUG - Calling on_part_data with data[156133:156141]
2025-12-31 21:45:31,515 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2025-12-31 21:45:31,516 - python_multipart.multipart - DEBUG - Calling on_end with no data
2025-12-31 21:45:31,636 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-12-31 21:45:31,637 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2025-12-31 21:45:31,638 - sqlalchemy.engine.Engine - INFO - [cached since 8.122s ago] (1,)
2025-12-31 21:45:31,644 - app.services.file_processor - INFO - Parsed filename (strict): 212222230134, 19AI406
2025-12-31 21:45:31,649 - app.services.file_processor - INFO - Saved file: ./uploads\pending\08f21ebc847c4605af7391457cbe7100.pdf (hash: 69530c94d1cfd882...)
2025-12-31 21:45:31,650 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2025-12-31 21:45:31,652 - sqlalchemy.engine.Engine - INFO - [cached since 8.11s ago] ('a2e1c607d780645dfdb91981daf4fb55',)
2025-12-31 21:45:31,713 - app.services.artifact_service - WARNING - Duplicate artifact detected: a2e1c607d780645dfdb91981daf4fb55
2025-12-31 21:45:31,715 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2025-12-31 21:45:31,716 - sqlalchemy.engine.Engine - INFO - [cached since 8.058s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2025-12-31 21:45:31,736 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-12-31 21:45:45,334 - app.api.routes.auth - INFO - Authenticating student: 22007928
2025-12-31 21:45:45,876 - app.services.moodle_client - INFO - Authenticating user: 22007928
2025-12-31 21:45:45,881 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2025-12-31 21:45:46,494 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000019EE60F7B10>
2025-12-31 21:45:46,495 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000019EE61A1520> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2025-12-31 21:45:46,672 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000019EE6165CD0>
2025-12-31 21:45:46,675 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-12-31 21:45:46,676 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-12-31 21:45:46,677 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-12-31 21:45:46,678 - httpcore.http11 - DEBUG - send_request_body.complete
2025-12-31 21:45:46,679 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-12-31 21:45:46,740 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Wed, 31 Dec 2025 16:15:46 GMT'), (b'Content-Length', b'72')])
2025-12-31 21:45:46,741 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-12-31 21:45:46,742 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-12-31 21:45:46,743 - httpcore.http11 - DEBUG - response_closed.started
2025-12-31 21:45:46,744 - httpcore.http11 - DEBUG - response_closed.complete
2025-12-31 21:45:46,746 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-31 21:45:46,746 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2025-12-31 21:45:46,748 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2025-12-31 22:40:49,465 - app.main - INFO - Shutting down Examination Middleware...
2025-12-31 22:40:49,466 - app.main - INFO - Database connections closed
2026-01-01 17:55:26,924 - app.main - INFO - Starting Examination Middleware...
2026-01-01 17:55:27,039 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 17:55:27,040 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 17:55:27,078 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 17:55:27,079 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 17:55:27,083 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 17:55:27,084 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 17:55:27,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 17:55:27,093 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,094 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,122 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,123 - sqlalchemy.engine.Engine - INFO - [cached since 0.02994s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,124 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,125 - sqlalchemy.engine.Engine - INFO - [cached since 0.03177s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,126 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,127 - sqlalchemy.engine.Engine - INFO - [cached since 0.03342s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,128 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,128 - sqlalchemy.engine.Engine - INFO - [cached since 0.03521s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,129 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,130 - sqlalchemy.engine.Engine - INFO - [cached since 0.03674s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,131 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 17:55:27,132 - sqlalchemy.engine.Engine - INFO - [cached since 0.03846s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 17:55:27,134 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 17:55:27,134 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('workflowstatus', 'pg_catalog')
2026-01-01 17:55:27,140 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 17:55:27,145 - app.main - INFO - Database tables created/verified
2026-01-01 17:55:27,146 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 17:55:27,146 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 17:55:27,147 - app.main - INFO - Examination Middleware started successfully
2026-01-01 17:59:18,882 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 17:59:18,883 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 17:59:18,883 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 17:59:18,885 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 17:59:18,886 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 17:59:18,887 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 17:59:18,889 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 17:59:18,892 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 17:59:18,893 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 17:59:18,895 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 17:59:18,896 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 17:59:18,897 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 17:59:18,898 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 17:59:18,898 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 17:59:18,899 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 17:59:18,902 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 17:59:18,904 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 17:59:18,905 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 17:59:18,987 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-01 18:00:13,928 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 18:00:15,060 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 18:00:15,104 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 18:00:15,310 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002662BD02270>
2026-01-01 18:00:15,312 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000002662BCF0320> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 18:00:15,554 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002662B837110>
2026-01-01 18:00:15,556 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 18:00:15,558 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 18:00:15,566 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 18:00:15,571 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 18:00:15,576 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 18:00:15,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 12:30:16 GMT'), (b'Content-Length', b'72')])
2026-01-01 18:00:15,621 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 18:00:15,624 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 18:00:15,627 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 18:00:15,629 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 18:00:15,632 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 18:00:15,634 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 18:00:15,639 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 18:06:31,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:06:31,148 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:06:31,149 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ('admin',)
2026-01-01 18:06:31,165 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 18:06:31,169 - app.db.database - ERROR - Database session error: 400: Username already exists
2026-01-01 18:06:37,467 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:06:37,467 - python_multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2026-01-01 18:06:37,467 - python_multipart.multipart - DEBUG - Calling on_field_data with data[9:17]
2026-01-01 18:06:37,468 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:06:37,468 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:06:37,468 - python_multipart.multipart - DEBUG - Calling on_field_name with data[18:26]
2026-01-01 18:06:37,469 - python_multipart.multipart - DEBUG - Calling on_field_data with data[27:32]
2026-01-01 18:06:37,469 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:06:37,470 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:06:37,538 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:06:37,539 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:06:37,540 - sqlalchemy.engine.Engine - INFO - [cached since 6.392s ago] ('admin',)
2026-01-01 18:06:37,826 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 18:06:37,827 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] (datetime.datetime(2026, 1, 1, 12, 36, 37, 825339, tzinfo=datetime.timezone.utc), 1)
2026-01-01 18:06:37,836 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:09:11,769 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:09:11,769 - python_multipart.multipart - DEBUG - Calling on_header_field with data[40:59]
2026-01-01 18:09:11,769 - python_multipart.multipart - DEBUG - Calling on_header_value with data[61:120]
2026-01-01 18:09:11,770 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:09:11,770 - python_multipart.multipart - DEBUG - Calling on_header_field with data[122:134]
2026-01-01 18:09:11,770 - python_multipart.multipart - DEBUG - Calling on_header_value with data[136:151]
2026-01-01 18:09:11,770 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:09:11,771 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:09:11,771 - python_multipart.multipart - DEBUG - Calling on_part_data with data[155:464]
2026-01-01 18:09:11,771 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:09:11,772 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:09:11,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:09:11,843 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:09:11,843 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] (1,)
2026-01-01 18:09:11,850 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 18:09:11,853 - app.services.file_processor - INFO - Saved file: ./uploads\pending\3b3e478727514630bb8f446796cdc5ef.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-01 18:09:11,857 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 18:09:11,858 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 18:09:11,924 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-01 18:09:11,925 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] (UUID('6813eca6-d97d-4021-ba2e-eab1407333bd'), '212222240047_19AI405.pdf', '212222240047_19AI405.pdf', '212222240047', '19AI405', './uploads\\pending\\3b3e478727514630bb8f446796cdc5ef.pdf', '3b5d0cdd7dd98e90b760efbe3faaa56b12fb1be732e85cd5e2fcd39628b4638d', 309, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, '68db98da00992eb3382cdfa22fe26d97', None, None, None, 1, None, '[{"timestamp": "2026-01-01T12:39:11.921602", "action": "created", "details": {"filename": "212222240047_19AI405.pdf", "parsed_reg_no": "212222240047", "parsed_subject_code": "19AI405"}}]', None, 0)
2026-01-01 18:09:11,934 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 18:09:11,935 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] (2,)
2026-01-01 18:09:11,937 - app.services.artifact_service - INFO - Created artifact: 6813eca6-d97d-4021-ba2e-eab1407333bd
2026-01-01 18:09:11,939 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 18:09:11,940 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('file_uploaded', 'upload', 'Uploaded file: 212222240047_19AI405.pdf', 'staff', '1', 'admin', '127.0.0.1', 2, None, None, '{"filename": "212222240047_19AI405.pdf", "size": 309}', 'null', None, None)
2026-01-01 18:09:11,943 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:13:07,593 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:13:07,594 - python_multipart.multipart - DEBUG - Calling on_header_field with data[0:12]
2026-01-01 18:13:07,594 - python_multipart.multipart - DEBUG - Calling on_header_value with data[14:29]
2026-01-01 18:13:07,595 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:13:07,595 - python_multipart.multipart - DEBUG - Calling on_header_field with data[31:50]
2026-01-01 18:13:07,595 - python_multipart.multipart - DEBUG - Calling on_header_value with data[52:150]
2026-01-01 18:13:07,596 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:13:07,596 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:13:07,596 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:309]
2026-01-01 18:13:07,597 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:13:07,597 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:13:07,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:13:07,676 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:13:07,676 - sqlalchemy.engine.Engine - INFO - [cached since 235.8s ago] (1,)
2026-01-01 18:13:07,681 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 18:13:07,684 - app.services.file_processor - INFO - Saved file: ./uploads\pending\d89bdcfeb1574efa9e8a8073e602318c.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-01 18:13:07,685 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 18:13:07,686 - sqlalchemy.engine.Engine - INFO - [cached since 235.8s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 18:13:07,712 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 18:13:07,713 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 18:13:07,714 - sqlalchemy.engine.Engine - INFO - [cached since 235.8s ago] ('file_uploaded', 'upload', 'Uploaded file: 212222240047_19AI405.pdf', 'staff', '1', 'admin', '127.0.0.1', 2, None, None, '{"filename": "212222240047_19AI405.pdf", "size": 309}', 'null', None, None)
2026-01-01 18:13:07,717 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:14:24,600 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 18:14:24,601 - app.main - INFO - Database connections closed
2026-01-01 18:14:27,261 - app.main - INFO - Starting Examination Middleware...
2026-01-01 18:14:27,405 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 18:14:27,406 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:27,410 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 18:14:27,411 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:27,416 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 18:14:27,417 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:27,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:14:27,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,446 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,446 - sqlalchemy.engine.Engine - INFO - [cached since 0.01439s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,448 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,449 - sqlalchemy.engine.Engine - INFO - [cached since 0.01712s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,451 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.01971s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.02229s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,456 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,457 - sqlalchemy.engine.Engine - INFO - [cached since 0.02487s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,459 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:27,459 - sqlalchemy.engine.Engine - INFO - [cached since 0.02731s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:27,463 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 18:14:27,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('workflowstatus', 'pg_catalog')
2026-01-01 18:14:27,469 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:14:27,475 - app.main - INFO - Database tables created/verified
2026-01-01 18:14:27,476 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 18:14:27,477 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 18:14:27,478 - app.main - INFO - Examination Middleware started successfully
2026-01-01 18:14:29,309 - app.main - INFO - Starting Examination Middleware...
2026-01-01 18:14:29,402 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 18:14:29,403 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:29,405 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 18:14:29,406 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:29,408 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 18:14:29,408 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 18:14:29,418 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:14:29,424 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,425 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,437 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,438 - sqlalchemy.engine.Engine - INFO - [cached since 0.01351s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.01623s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,444 - sqlalchemy.engine.Engine - INFO - [cached since 0.01997s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,447 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,448 - sqlalchemy.engine.Engine - INFO - [cached since 0.02345s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,449 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,450 - sqlalchemy.engine.Engine - INFO - [cached since 0.02581s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 18:14:29,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.02823s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 18:14:29,456 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 18:14:29,456 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('workflowstatus', 'pg_catalog')
2026-01-01 18:14:29,462 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:14:29,467 - app.main - INFO - Database tables created/verified
2026-01-01 18:14:29,468 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 18:14:29,469 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 18:14:29,470 - app.main - INFO - Examination Middleware started successfully
2026-01-01 18:16:46,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:16:46,411 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:16:46,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('teststaff',)
2026-01-01 18:16:46,702 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_users (username, email, hashed_password, full_name, role, is_active, last_login_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BOOLEAN, $7::TIMESTAMP WITH TIME ZONE) RETURNING staff_users.id, staff_users.created_at
2026-01-01 18:16:46,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('teststaff', 'staff@test.com', '$2b$12$rOO22rPFoRPr1.SDV/5Q8e0ZSaPPKEp1GywQVtMdI7p.9fjTmGYha', 'Test Staff', 'staff', True, None)
2026-01-01 18:16:46,706 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:16:46,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:16:46,778 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:16:46,779 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] (2,)
2026-01-01 18:16:46,785 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:16:46,790 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:16:46,790 - python_multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2026-01-01 18:16:46,790 - python_multipart.multipart - DEBUG - Calling on_field_data with data[9:14]
2026-01-01 18:16:46,791 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:16:46,791 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:16:46,791 - python_multipart.multipart - DEBUG - Calling on_field_name with data[15:23]
2026-01-01 18:16:46,791 - python_multipart.multipart - DEBUG - Calling on_field_data with data[24:32]
2026-01-01 18:16:46,792 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:16:46,792 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:16:46,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:16:46,865 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:16:46,866 - sqlalchemy.engine.Engine - INFO - [cached since 0.455s ago] ('admin',)
2026-01-01 18:16:47,157 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 18:16:47,158 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] (datetime.datetime(2026, 1, 1, 12, 46, 47, 156253, tzinfo=datetime.timezone.utc), 1)
2026-01-01 18:16:47,160 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:16:47,189 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:16:47,189 - python_multipart.multipart - DEBUG - Calling on_header_field with data[36:55]
2026-01-01 18:16:47,190 - python_multipart.multipart - DEBUG - Calling on_header_value with data[57:116]
2026-01-01 18:16:47,190 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:16:47,190 - python_multipart.multipart - DEBUG - Calling on_header_field with data[118:130]
2026-01-01 18:16:47,190 - python_multipart.multipart - DEBUG - Calling on_header_value with data[132:147]
2026-01-01 18:16:47,190 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:16:47,191 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:16:47,191 - python_multipart.multipart - DEBUG - Calling on_part_data with data[151:460]
2026-01-01 18:16:47,191 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:16:47,192 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:16:47,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:16:47,263 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:16:47,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] (1,)
2026-01-01 18:16:47,268 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 18:16:47,271 - app.services.file_processor - INFO - Saved file: ./uploads\pending\625a001674ff4beb8d3111ff0a970d84.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-01 18:16:47,273 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 18:16:47,273 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 18:16:47,296 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 18:16:47,298 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 18:16:47,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('file_uploaded', 'upload', 'Uploaded file: 212222240047_19AI405.pdf', 'staff', '1', 'admin', '127.0.0.1', 2, None, None, '{"filename": "212222240047_19AI405.pdf", "size": 309}', 'null', None, None)
2026-01-01 18:16:47,302 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:16:47,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:16:47,393 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:16:47,394 - sqlalchemy.engine.Engine - INFO - [cached since 0.1311s ago] (1,)
2026-01-01 18:16:47,400 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.is_active = true ORDER BY subject_mappings.subject_code
2026-01-01 18:16:47,401 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ()
2026-01-01 18:16:47,414 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:16:47,419 - app.api.routes.auth - INFO - Authenticating student: 212222240047
2026-01-01 18:16:47,744 - app.services.moodle_client - INFO - Authenticating user: 212222240047
2026-01-01 18:16:47,746 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 18:16:48,189 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273BC7380>
2026-01-01 18:16:48,190 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFD490> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 18:16:48,302 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002727367AC10>
2026-01-01 18:16:48,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 18:16:48,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 18:16:48,308 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 18:16:48,310 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 18:16:48,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 18:16:48,391 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 12:46:48 GMT'), (b'Content-Length', b'72')])
2026-01-01 18:16:48,392 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 18:16:48,393 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 18:16:48,394 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 18:16:48,395 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 18:16:48,396 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 18:16:48,396 - app.api.routes.auth - WARNING - Moodle authentication failed for 212222240047: HTTP error: 404
2026-01-01 18:16:48,397 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 18:17:21,166 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:17:21,166 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 18:17:21,167 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 18:17:21,167 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:17:21,168 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:17:21,168 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 18:17:21,169 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:17:21,169 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:17:21,170 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 18:17:21,170 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 18:17:21,171 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:17:21,171 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:17:21,172 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 18:17:21,172 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:17:21,173 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:17:21,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:17:21,255 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:17:21,255 - sqlalchemy.engine.Engine - INFO - [cached since 34.84s ago] ('admin',)
2026-01-01 18:17:21,545 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 18:17:21,545 - sqlalchemy.engine.Engine - INFO - [cached since 34.39s ago] (datetime.datetime(2026, 1, 1, 12, 47, 21, 545096, tzinfo=datetime.timezone.utc), 1)
2026-01-01 18:17:21,547 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:18:19,760 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:18:19,761 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 18:18:19,762 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 18:18:19,763 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:18:19,763 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 18:18:19,764 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 18:18:19,764 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:18:19,765 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:18:19,766 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 18:18:19,767 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:18:19,768 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:18:19,769 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 18:18:19,770 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 18:18:19,771 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:18:19,771 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:18:19,772 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 18:18:19,772 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:18:19,774 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:18:19,777 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-01 18:18:37,671 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 18:18:38,531 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 18:18:38,537 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 18:18:38,779 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273B13D90>
2026-01-01 18:18:38,781 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFDAC0> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 18:18:38,889 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273AE2EA0>
2026-01-01 18:18:38,894 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 18:18:38,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 18:18:38,899 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 18:18:38,900 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 18:18:38,901 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 18:18:38,984 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 12:48:39 GMT'), (b'Content-Length', b'72')])
2026-01-01 18:18:38,985 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 18:18:38,986 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 18:18:38,987 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 18:18:38,989 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 18:18:38,995 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 18:18:38,996 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 18:18:38,999 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 18:19:09,904 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:19:09,905 - python_multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2026-01-01 18:19:09,905 - python_multipart.multipart - DEBUG - Calling on_field_data with data[9:17]
2026-01-01 18:19:09,906 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:19:09,906 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-01-01 18:19:09,906 - python_multipart.multipart - DEBUG - Calling on_field_name with data[18:26]
2026-01-01 18:19:09,906 - python_multipart.multipart - DEBUG - Calling on_field_data with data[27:32]
2026-01-01 18:19:09,907 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-01-01 18:19:09,907 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:19:09,977 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:19:09,978 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:19:09,979 - sqlalchemy.engine.Engine - INFO - [cached since 143.6s ago] ('admin',)
2026-01-01 18:19:10,274 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 18:19:10,274 - sqlalchemy.engine.Engine - INFO - [cached since 143.1s ago] (datetime.datetime(2026, 1, 1, 12, 49, 10, 273645, tzinfo=datetime.timezone.utc), 1)
2026-01-01 18:19:10,276 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:49:49,501 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 18:49:50,267 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 18:49:50,275 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 18:49:50,483 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273BDE650>
2026-01-01 18:49:50,484 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFDB50> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 18:49:50,657 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000272736A7410>
2026-01-01 18:49:50,661 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 18:49:50,663 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 18:49:50,667 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 18:49:50,669 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 18:49:50,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 18:49:50,753 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 13:19:51 GMT'), (b'Content-Length', b'72')])
2026-01-01 18:49:50,754 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 18:49:50,755 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 18:49:50,756 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 18:49:50,758 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 18:49:50,765 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 18:49:50,766 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 18:49:50,769 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 18:50:07,668 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:50:07,669 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 18:50:07,670 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 18:50:07,670 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:50:07,671 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 18:50:07,672 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 18:50:07,672 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:50:07,673 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:50:07,674 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:49152]
2026-01-01 18:50:07,677 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:139650]
2026-01-01 18:50:07,678 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:50:07,679 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:50:07,680 - python_multipart.multipart - DEBUG - Calling on_header_field with data[139694:139713]
2026-01-01 18:50:07,680 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139715:139745]
2026-01-01 18:50:07,681 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:50:07,682 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:50:07,682 - python_multipart.multipart - DEBUG - Calling on_part_data with data[139749:139757]
2026-01-01 18:50:07,684 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:50:07,685 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:50:07,690 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-01 18:50:13,718 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:50:13,719 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 18:50:13,720 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 18:50:13,721 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:50:13,721 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:50:13,722 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 18:50:13,722 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:50:13,723 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:50:13,723 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 18:50:13,724 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 18:50:13,725 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:50:13,725 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:50:13,726 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 18:50:13,727 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:50:13,728 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:50:13,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:50:13,866 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 18:50:13,868 - sqlalchemy.engine.Engine - INFO - [cached since 2007s ago] ('admin',)
2026-01-01 18:50:14,416 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 18:50:14,418 - sqlalchemy.engine.Engine - INFO - [cached since 2007s ago] (datetime.datetime(2026, 1, 1, 13, 20, 14, 415440, tzinfo=datetime.timezone.utc), 1)
2026-01-01 18:50:14,436 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:53:35,781 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:53:35,782 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 18:53:35,782 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 18:53:35,782 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:53:35,782 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 18:53:35,783 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 18:53:35,783 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:53:35,783 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:53:35,784 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:81920]
2026-01-01 18:53:35,785 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:106882]
2026-01-01 18:53:35,785 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:53:35,785 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 18:53:35,786 - python_multipart.multipart - DEBUG - Calling on_header_field with data[106926:106945]
2026-01-01 18:53:35,786 - python_multipart.multipart - DEBUG - Calling on_header_value with data[106947:106977]
2026-01-01 18:53:35,786 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 18:53:35,787 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 18:53:35,789 - python_multipart.multipart - DEBUG - Calling on_part_data with data[106981:106989]
2026-01-01 18:53:35,789 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 18:53:35,790 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 18:53:35,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 18:53:35,932 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 18:53:35,932 - sqlalchemy.engine.Engine - INFO - [cached since 2209s ago] (1,)
2026-01-01 18:53:35,939 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 18:53:35,945 - app.services.file_processor - INFO - Saved file: ./uploads\pending\50138581adad46cf8f69004812d75c7f.pdf (hash: 69530c94d1cfd882...)
2026-01-01 18:53:35,946 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 18:53:35,947 - sqlalchemy.engine.Engine - INFO - [cached since 2209s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 18:53:35,997 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 18:53:35,999 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 18:53:36,000 - sqlalchemy.engine.Engine - INFO - [cached since 2209s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 18:53:36,007 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 18:54:13,233 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 18:54:14,007 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 18:54:14,013 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 18:54:14,229 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C98490>
2026-01-01 18:54:14,230 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFE8D0> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 18:54:14,287 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C985A0>
2026-01-01 18:54:14,290 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 18:54:14,291 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 18:54:14,292 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 18:54:14,293 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 18:54:14,295 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 18:54:14,433 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 13:24:14 GMT'), (b'Content-Length', b'72')])
2026-01-01 18:54:14,435 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 18:54:14,435 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 18:54:14,438 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 18:54:14,439 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 18:54:14,443 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 18:54:14,444 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 18:54:14,450 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 19:05:48,689 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:05:48,990 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:05:48,993 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:05:49,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C26950>
2026-01-01 19:05:49,218 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFE840> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 19:05:49,326 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C26750>
2026-01-01 19:05:49,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:05:49,329 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:05:49,330 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:05:49,331 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:05:49,331 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:05:49,525 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 13:35:49 GMT'), (b'Content-Length', b'72')])
2026-01-01 19:05:49,526 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:05:49,527 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:05:49,528 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:05:49,529 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:05:49,530 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 19:05:49,530 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 19:05:49,531 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 19:06:03,206 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:06:03,517 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:06:03,519 - httpcore.connection - DEBUG - connect_tcp.started host='1844fdb23815.ngrok-free.app' port=443 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:06:03,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C80C80>
2026-01-01 19:06:03,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027273BFE450> server_hostname='1844fdb23815.ngrok-free.app' timeout=30.0
2026-01-01 19:06:03,764 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027273C81400>
2026-01-01 19:06:03,766 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:06:03,767 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:06:03,768 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:06:03,769 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:06:03,770 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:06:03,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Connection', b'close'), (b'Content-Type', b'text/plain'), (b'Ngrok-Error-Code', b'ERR_NGROK_3200'), (b'Date', b'Thu, 01 Jan 2026 13:36:04 GMT'), (b'Content-Length', b'72')])
2026-01-01 19:06:03,814 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:06:03,815 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:06:03,816 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:06:03,818 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:06:03,819 - app.services.moodle_client - ERROR - HTTP error during authentication: Client error '404 Not Found' for url 'https://1844fdb23815.ngrok-free.app/login/token.php'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2026-01-01 19:06:03,819 - app.api.routes.auth - WARNING - Moodle authentication failed for 22007928: HTTP error: 404
2026-01-01 19:06:03,821 - app.db.database - ERROR - Database session error: 401: Authentication failed: HTTP error: 404
2026-01-01 19:06:17,392 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:06:17,393 - app.main - INFO - Database connections closed
2026-01-01 19:07:32,960 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:07:33,038 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:07:33,039 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:07:33,042 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:07:33,042 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:07:33,045 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:07:33,046 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:07:33,050 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:07:33,055 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,056 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,065 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,066 - sqlalchemy.engine.Engine - INFO - [cached since 0.01158s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,068 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,068 - sqlalchemy.engine.Engine - INFO - [cached since 0.01345s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,069 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,070 - sqlalchemy.engine.Engine - INFO - [cached since 0.01522s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,071 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,072 - sqlalchemy.engine.Engine - INFO - [cached since 0.01695s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,073 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,073 - sqlalchemy.engine.Engine - INFO - [cached since 0.01864s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,075 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:07:33,075 - sqlalchemy.engine.Engine - INFO - [cached since 0.02055s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:07:33,078 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:07:33,078 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:07:33,083 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:07:33,087 - app.main - INFO - Database tables created/verified
2026-01-01 19:07:33,087 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:07:33,088 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:07:33,089 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:08:00,793 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:08:00,794 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:08:00,794 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:08:00,795 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:08:00,796 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:08:00,796 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:08:00,797 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:08:00,798 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:08:00,799 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:08:00,800 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:08:00,801 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:08:00,802 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:08:00,803 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:08:00,805 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:08:00,806 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:08:01,102 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:01,132 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:08:01,136 - sqlalchemy.engine.Engine - INFO - [generated in 0.00386s] ('admin',)
2026-01-01 19:08:01,697 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:08:01,699 - sqlalchemy.engine.Engine - INFO - [generated in 0.00251s] (datetime.datetime(2026, 1, 1, 13, 38, 1, 694187, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:08:01,716 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:08:07,483 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:08:07,485 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:08:07,485 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:08:07,486 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:08:07,487 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:08:07,488 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:08:07,488 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:08:07,489 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:08:07,490 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 19:08:07,491 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:08:07,492 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:08:07,492 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 19:08:07,493 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 19:08:07,494 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:08:07,494 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:08:07,496 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 19:08:07,496 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:08:07,497 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:08:07,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:07,671 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:08:07,673 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] (1,)
2026-01-01 19:08:07,685 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:08:07,694 - app.services.file_processor - INFO - Saved file: ./uploads\pending\57eb414ba85740cdae74cb5537b2d0ac.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:08:07,700 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:08:07,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:08:07,737 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:08:07,743 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:08:07,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:08:07,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:08:12,056 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:08:12,983 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:08:12,990 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:08:13,000 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002DFDCD9B770>
2026-01-01 19:08:13,003 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:08:13,005 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:08:13,007 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:08:13,009 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:08:13,009 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:08:13,216 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:38:13 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:38:13 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:08:13,219 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:08:13,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:08:13,222 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:08:13,223 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:08:13,227 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:08:13,233 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:08:13,234 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:08:13,235 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:08:13,236 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:08:13,237 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:08:13,375 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:38:13 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:08:13,377 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:08:13,379 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:08:13,381 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:08:13,382 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:08:13,385 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:08:13,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:13,581 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::TIMESTAMP WITH TIME ZONE, $7::VARCHAR, $8::VARCHAR, $9::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:08:13,583 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q', 3, '22007928', 'Kavin D', 'Z0FBQUFBQnBWbmpGQzBEODRMYjRfd0p2YjJLTW1nNVhLMXhPT3o4NXhZeVpZRGkyU2dkd3dWbEhETVlaeUVwQ3lqVzFoa3dhTFpjbUlNMW5jZmlJVGxORzNSZWRRQ29BemhySndjSnpIRThYZGJIZndHT1VHWUpmUlRIb000VzZZV3BLZ01nMWpXNFc=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 38, 13, 386677, tzinfo=datetime.timezone.utc))
2026-01-01 19:08:13,612 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:08:13,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:13,761 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:08:13,764 - sqlalchemy.engine.Engine - INFO - [generated in 0.00315s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:08:13,833 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-01 19:08:13,836 - httpcore.connection - DEBUG - close.started
2026-01-01 19:08:13,837 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:08:13,841 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:08:14,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:14,018 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:08:14,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:08:14,030 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:08:14,031 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] (datetime.datetime(2026, 1, 1, 13, 38, 14, 28858, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:08:14,036 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:08:14,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:08:14,179 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:08:14,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.4199s ago] ('22007928', '22007928', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:08:14,224 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:08:14,226 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] ('22007928', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:08:14,231 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:10:47,914 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:10:47,915 - app.main - INFO - Database connections closed
2026-01-01 19:10:49,945 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:10:50,047 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:10:50,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:10:50,055 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:10:50,055 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:10:50,057 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:10:50,058 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:10:50,060 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:10:50,063 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,064 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,071 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,072 - sqlalchemy.engine.Engine - INFO - [cached since 0.009078s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,074 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,075 - sqlalchemy.engine.Engine - INFO - [cached since 0.01191s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,077 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,078 - sqlalchemy.engine.Engine - INFO - [cached since 0.01428s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,080 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,083 - sqlalchemy.engine.Engine - INFO - [cached since 0.01963s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,085 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,086 - sqlalchemy.engine.Engine - INFO - [cached since 0.02298s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,089 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:10:50,091 - sqlalchemy.engine.Engine - INFO - [cached since 0.02768s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:10:50,094 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:10:50,095 - sqlalchemy.engine.Engine - INFO - [generated in 0.00165s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:10:50,101 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:10:50,107 - app.main - INFO - Database tables created/verified
2026-01-01 19:10:50,108 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:10:50,109 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:10:50,110 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:14:12,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:12,094 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:12,096 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:12,118 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:12,127 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:12,129 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:13,375 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:13,376 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:13,377 - sqlalchemy.engine.Engine - INFO - [cached since 1.283s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:13,382 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:13,388 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:13,390 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:14,320 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:14,321 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:14,322 - sqlalchemy.engine.Engine - INFO - [cached since 2.228s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:14,325 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:14,329 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:14,330 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:14,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:14,597 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:14,599 - sqlalchemy.engine.Engine - INFO - [cached since 2.504s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:14,604 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:14,612 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:14,613 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:20,031 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:20,032 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:14:20,032 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:14:20,033 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:20,034 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:14:20,034 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:14:20,035 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:20,036 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:20,036 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:180224]
2026-01-01 19:14:20,038 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:8578]
2026-01-01 19:14:20,038 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:20,039 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:20,040 - python_multipart.multipart - DEBUG - Calling on_header_field with data[8622:8641]
2026-01-01 19:14:20,041 - python_multipart.multipart - DEBUG - Calling on_header_value with data[8643:8673]
2026-01-01 19:14:20,041 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:20,042 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:20,043 - python_multipart.multipart - DEBUG - Calling on_part_data with data[8677:8685]
2026-01-01 19:14:20,043 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:20,044 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:14:20,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:20,225 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:14:20,226 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] (1,)
2026-01-01 19:14:20,238 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:14:20,243 - app.services.file_processor - INFO - Saved file: ./uploads\pending\0ecf4f3b152b4bc6bca2f8bf02d6d71b.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:14:20,246 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:14:20,247 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:14:20,293 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:14:20,300 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:14:20,301 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:14:20,308 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:14:24,367 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:24,368 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:14:24,369 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:14:24,370 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:24,371 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:24,371 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:14:24,372 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:24,373 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:24,373 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:14:24,374 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:14:24,375 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:24,376 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:24,377 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:14:24,378 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:24,379 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:14:24,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:24,584 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:14:24,585 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('admin',)
2026-01-01 19:14:24,927 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:14:24,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] (datetime.datetime(2026, 1, 1, 13, 44, 24, 925661, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:14:24,932 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:14:32,181 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:32,182 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:14:32,182 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:14:32,183 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:32,183 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:14:32,184 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:14:32,185 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:32,185 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:32,186 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:65536]
2026-01-01 19:14:32,187 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:123266]
2026-01-01 19:14:32,187 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:32,188 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:14:32,188 - python_multipart.multipart - DEBUG - Calling on_header_field with data[123310:123329]
2026-01-01 19:14:32,188 - python_multipart.multipart - DEBUG - Calling on_header_value with data[123331:123361]
2026-01-01 19:14:32,189 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:14:32,189 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:14:32,190 - python_multipart.multipart - DEBUG - Calling on_part_data with data[123365:123373]
2026-01-01 19:14:32,190 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:14:32,191 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:14:32,313 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:32,314 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:14:32,314 - sqlalchemy.engine.Engine - INFO - [cached since 12.09s ago] (1,)
2026-01-01 19:14:32,323 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:14:32,329 - app.services.file_processor - INFO - Saved file: ./uploads\pending\1ff48961c82f4be0bf669f02c5cd6a12.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:14:32,330 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:14:32,331 - sqlalchemy.engine.Engine - INFO - [cached since 12.09s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:14:32,375 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:14:32,377 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:14:32,379 - sqlalchemy.engine.Engine - INFO - [cached since 12.08s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:14:32,385 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:14:37,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:37,078 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:37,079 - sqlalchemy.engine.Engine - INFO - [cached since 24.99s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:37,084 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:37,089 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:37,089 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:37,905 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:37,906 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:37,907 - sqlalchemy.engine.Engine - INFO - [cached since 25.81s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:37,910 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:37,915 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:37,916 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:38,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:38,385 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:14:38,386 - sqlalchemy.engine.Engine - INFO - [cached since 26.29s ago] ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)
2026-01-01 19:14:38,390 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:38,395 - app.db.database - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:38,396 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 526, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 638, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 657, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\asyncpg\connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 29, in __call__
    await responder(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 130, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\gzip.py", line 46, in __call__
    await self.app(scope, receive, self.send_with_compression)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 37, in get_session_from_header
    return await get_current_student_session(x_session_id, db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\auth.py", line 281, in get_current_student_session
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(StudentSession).where(StudentSession.session_id == session_id)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column student_sessions.register_number does not exist
[SQL: SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR]
[parameters: ('8U_XlT0zvKbrAzynnzqt-M4YacGg9dO9N7CfeiUOv8Q',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:47,376 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:14:48,066 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:14:48,070 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:14:48,085 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024499A17E00>
2026-01-01 19:14:48,087 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:14:48,088 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:14:48,088 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:14:48,089 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:14:48,090 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:14:48,308 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:44:48 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:44:48 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:14:48,310 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:14:48,310 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:14:48,312 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:14:48,312 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:14:48,314 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:14:48,318 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:14:48,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:14:48,320 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:14:48,321 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:14:48,321 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:14:48,524 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:44:48 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:14:48,525 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:14:48,529 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:14:48,531 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:14:48,532 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:14:48,537 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:14:48,696 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:48,699 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:14:48,699 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('2qUMOPfxwd61dUeRD9VaNSK3l3QRNwOLZiSkL20Z430', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBRRWV0UVN3aVFhRUExTlJ0NDI5a05zN3RGNUlnU1JaVGpJaWttTWFrSGFvbG95QmlPbUpndDYtcGpOeHp3UW1MdDVzV0IzaVFLRUUxWEVpN1M0aE9jT1ZjRG1laGFIbFFHMTViUk5ZczdNWV9LdklyMWRlcW9fdXExYzczSGtDbHU=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 44, 48, 537731, tzinfo=datetime.timezone.utc))
2026-01-01 19:14:48,704 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:48,705 - app.api.routes.auth - ERROR - Unexpected error during student login: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "register_number" of relation "student_sessions" does not exist
[SQL: INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at]
[parameters: ('2qUMOPfxwd61dUeRD9VaNSK3l3QRNwOLZiSkL20Z430', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBRRWV0UVN3aVFhRUExTlJ0NDI5a05zN3RGNUlnU1JaVGpJaWttTWFrSGFvbG95QmlPbUpndDYtcGpOeHp3UW1MdDVzV0IzaVFLRUUxWEVpN1M0aE9jT1ZjRG1laGFIbFFHMTViUk5ZczdNWV9LdklyMWRlcW9fdXExYzczSGtDbHU=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 44, 48, 537731, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:48,707 - httpcore.connection - DEBUG - close.started
2026-01-01 19:14:48,707 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:14:48,711 - app.db.database - ERROR - Database session error: 500: An unexpected error occurred
2026-01-01 19:14:57,649 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:14:58,312 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:14:58,317 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:14:58,322 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024499ABA710>
2026-01-01 19:14:58,324 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:14:58,325 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:14:58,325 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:14:58,326 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:14:58,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:14:58,527 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:44:58 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:44:58 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:14:58,528 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:14:58,529 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:14:58,532 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:14:58,533 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:14:58,537 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:14:58,545 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:14:58,546 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:14:58,547 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:14:58,548 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:14:58,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:14:58,711 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:44:58 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:14:58,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:14:58,718 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:14:58,721 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:14:58,722 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:14:58,726 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:14:58,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:14:58,882 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:14:58,883 - sqlalchemy.engine.Engine - INFO - [cached since 10.18s ago] ('5tF6MUVDlHJRZEIP_XyJEdDOd6Zt1dcx9brZTUdvPVQ', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBhOFdnR09rSTJpa0lVXzlKdUc5MkdhTFFUaUs1M25CNGUzQzRMVlVTUXdxaHFHVzF3UkxWU0E0TmdGYUpqZlo4VVRpVFlRR21mWDlTazZ2NEh3Mm1ya0p4S2FJRHZaN3FZaktiRnpFUXh4NkZzM0hJdUJ6OFQzZ2NhZnN6ZnZQNjM=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 44, 58, 727770, tzinfo=datetime.timezone.utc))
2026-01-01 19:14:58,887 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:14:58,888 - app.api.routes.auth - ERROR - Unexpected error during student login: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "register_number" of relation "student_sessions" does not exist
[SQL: INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at]
[parameters: ('5tF6MUVDlHJRZEIP_XyJEdDOd6Zt1dcx9brZTUdvPVQ', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBhOFdnR09rSTJpa0lVXzlKdUc5MkdhTFFUaUs1M25CNGUzQzRMVlVTUXdxaHFHVzF3UkxWU0E0TmdGYUpqZlo4VVRpVFlRR21mWDlTazZ2NEh3Mm1ya0p4S2FJRHZaN3FZaktiRnpFUXh4NkZzM0hJdUJ6OFQzZ2NhZnN6ZnZQNjM=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 44, 58, 727770, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:14:58,891 - httpcore.connection - DEBUG - close.started
2026-01-01 19:14:58,891 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:14:58,897 - app.db.database - ERROR - Database session error: 500: An unexpected error occurred
2026-01-01 19:14:59,755 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:15:00,349 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:15:00,355 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:15:00,360 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024499ABB750>
2026-01-01 19:15:00,363 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:00,364 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:00,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:00,365 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:00,365 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:00,503 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:00 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:45:00 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:15:00,504 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:00,504 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:00,505 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:00,506 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:00,507 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:15:00,510 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:00,511 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:00,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:00,512 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:00,513 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:00,634 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:00 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:15:00,635 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:00,638 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:00,639 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:00,640 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:00,642 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:15:00,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:15:00,779 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:15:00,781 - sqlalchemy.engine.Engine - INFO - [cached since 12.08s ago] ('gPpWl_bfCm2a_cdcIuihj1gqPc-I3VjHj4FRF8LVS9s', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBjdUVRQ3pRMlN0X21CSXkyOTNYWDhhNUxzcEp6dDVlVnBEcVN3emhrLVl3RWRyOUU4cE1ldkViN0JvQXlIcHZyMlJ3a1pnSWtlV0ZQZ3dLdjFfdHRidW1RR1hiTHBpa1JCNFV2VGZiWWVDQUdEMVJxZUVFdkxPVXRfNTd4VkdJZXI=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 0, 643179, tzinfo=datetime.timezone.utc))
2026-01-01 19:15:00,785 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:15:00,786 - app.api.routes.auth - ERROR - Unexpected error during student login: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "register_number" of relation "student_sessions" does not exist
[SQL: INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at]
[parameters: ('gPpWl_bfCm2a_cdcIuihj1gqPc-I3VjHj4FRF8LVS9s', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnBjdUVRQ3pRMlN0X21CSXkyOTNYWDhhNUxzcEp6dDVlVnBEcVN3emhrLVl3RWRyOUU4cE1ldkViN0JvQXlIcHZyMlJ3a1pnSWtlV0ZQZ3dLdjFfdHRidW1RR1hiTHBpa1JCNFV2VGZiWWVDQUdEMVJxZUVFdkxPVXRfNTd4VkdJZXI=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 0, 643179, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:15:00,789 - httpcore.connection - DEBUG - close.started
2026-01-01 19:15:00,790 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:15:00,795 - app.db.database - ERROR - Database session error: 500: An unexpected error occurred
2026-01-01 19:15:31,239 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:15:31,862 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:15:31,866 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:15:31,870 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024499B44FC0>
2026-01-01 19:15:31,871 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:31,872 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:31,873 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:31,874 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:31,874 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:32,057 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:31 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:45:31 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:15:32,058 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:32,059 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:32,061 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:32,062 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:32,065 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:15:32,070 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:32,072 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:32,073 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:32,074 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:32,075 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:32,228 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:32 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:15:32,229 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:32,233 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:32,237 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:32,238 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:32,241 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:15:32,370 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:15:32,371 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:15:32,371 - sqlalchemy.engine.Engine - INFO - [cached since 43.67s ago] ('aVnRPzDQKtMaMZiqt0css_qJfp7qUzyYEeEzpw3GmWE', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnA4MGlhQk1RZk1KSXVpMmNiV1NsQktUd1Z3QU9MRC1tbGV4aXVqSnlDNFVJbjRfME40OTJ4MWZtbmJsX0xSNjVuSTZ6Q3BhRUJ0akNZbWluYW1MWUFCUmZrcFpWZEhMYWFkd3c2dWR0Q3ZXcmdhRWEtRXpqb0ZueFZmRDRCQ3V2Yzg=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 32, 242531, tzinfo=datetime.timezone.utc))
2026-01-01 19:15:32,375 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:15:32,376 - app.api.routes.auth - ERROR - Unexpected error during student login: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "register_number" of relation "student_sessions" does not exist
[SQL: INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at]
[parameters: ('aVnRPzDQKtMaMZiqt0css_qJfp7qUzyYEeEzpw3GmWE', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnA4MGlhQk1RZk1KSXVpMmNiV1NsQktUd1Z3QU9MRC1tbGV4aXVqSnlDNFVJbjRfME40OTJ4MWZtbmJsX0xSNjVuSTZ6Q3BhRUJ0akNZbWluYW1MWUFCUmZrcFpWZEhMYWFkd3c2dWR0Q3ZXcmdhRWEtRXpqb0ZueFZmRDRCQ3V2Yzg=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 32, 242531, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:15:32,378 - httpcore.connection - DEBUG - close.started
2026-01-01 19:15:32,378 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:15:32,382 - app.db.database - ERROR - Database session error: 500: An unexpected error occurred
2026-01-01 19:15:42,782 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:15:42,783 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:15:42,784 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:15:42,784 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:15:42,785 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:15:42,785 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:15:42,785 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:15:42,786 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:15:42,786 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:65536]
2026-01-01 19:15:42,788 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:123266]
2026-01-01 19:15:42,788 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:15:42,789 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:15:42,790 - python_multipart.multipart - DEBUG - Calling on_header_field with data[123310:123329]
2026-01-01 19:15:42,790 - python_multipart.multipart - DEBUG - Calling on_header_value with data[123331:123361]
2026-01-01 19:15:42,791 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:15:42,792 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:15:42,792 - python_multipart.multipart - DEBUG - Calling on_part_data with data[123365:123373]
2026-01-01 19:15:42,793 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:15:42,793 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:15:42,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:15:42,932 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:15:42,933 - sqlalchemy.engine.Engine - INFO - [cached since 82.71s ago] (1,)
2026-01-01 19:15:42,939 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:15:42,945 - app.services.file_processor - INFO - Saved file: ./uploads\pending\35c827e7cbf1444dbfe1da11765d86fd.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:15:42,946 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:15:42,947 - sqlalchemy.engine.Engine - INFO - [cached since 82.7s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:15:42,988 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:15:42,990 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:15:42,991 - sqlalchemy.engine.Engine - INFO - [cached since 82.69s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:15:42,996 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:15:58,836 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:15:59,446 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:15:59,450 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:15:59,453 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024499A4FA80>
2026-01-01 19:15:59,455 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:59,456 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:59,457 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:59,457 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:59,458 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:59,634 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:59 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:45:59 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:15:59,635 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:59,635 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:59,637 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:59,638 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:59,640 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:15:59,645 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:15:59,650 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:15:59,655 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:15:59,659 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:15:59,661 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:15:59,809 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:45:59 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:15:59,810 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:15:59,813 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:15:59,817 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:15:59,817 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:15:59,821 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:15:59,956 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:15:59,957 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:15:59,957 - sqlalchemy.engine.Engine - INFO - [cached since 71.26s ago] ('KZcGwlgB_YJHKYEht5jyBMsnxPCdutbyDzeLicM06HM', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnFYTlJ5ZTh6UnJSUUw4RkNCdWs5TXBMcDMzWjZGYzBZeVdvUWxzV1c1Wjl1ZmpxM0wtSTY5R2RXWnNvX0d5R1B1bDlaSzJPV1pmX2N2WGMtekpQclg5MU5iZGV4MWRFQzVFRnZTQ0FDTjVGaWgtZnhLNzVKaDJBUEk2WmhJajg3MGs=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 59, 821753, tzinfo=datetime.timezone.utc))
2026-01-01 19:15:59,961 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:15:59,963 - app.api.routes.auth - ERROR - Unexpected error during student login: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column "register_number" of relation "student_sessions" does not exist
[SQL: INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at]
[parameters: ('KZcGwlgB_YJHKYEht5jyBMsnxPCdutbyDzeLicM06HM', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnFYTlJ5ZTh6UnJSUUw4RkNCdWs5TXBMcDMzWjZGYzBZeVdvUWxzV1c1Wjl1ZmpxM0wtSTY5R2RXWnNvX0d5R1B1bDlaSzJPV1pmX2N2WGMtekpQclg5MU5iZGV4MWRFQzVFRnZTQ0FDTjVGaWgtZnhLNzVKaDJBUEk2WmhJajg3MGs=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 45, 59, 821753, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/f405)
2026-01-01 19:15:59,965 - httpcore.connection - DEBUG - close.started
2026-01-01 19:15:59,966 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:15:59,970 - app.db.database - ERROR - Database session error: 500: An unexpected error occurred
2026-01-01 19:18:01,035 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:18:01,035 - app.main - INFO - Database connections closed
2026-01-01 19:18:17,634 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:18:17,719 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:18:17,720 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:18:17,723 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:18:17,724 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:18:17,725 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:18:17,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:18:17,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:18:17,736 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,737 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,760 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,761 - sqlalchemy.engine.Engine - INFO - [cached since 0.02454s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,762 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,763 - sqlalchemy.engine.Engine - INFO - [cached since 0.027s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,766 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,767 - sqlalchemy.engine.Engine - INFO - [cached since 0.03104s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,770 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,771 - sqlalchemy.engine.Engine - INFO - [cached since 0.03447s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,773 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,774 - sqlalchemy.engine.Engine - INFO - [cached since 0.03787s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,776 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:18:17,777 - sqlalchemy.engine.Engine - INFO - [cached since 0.0404s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:18:17,780 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:18:17,782 - sqlalchemy.engine.Engine - INFO - [generated in 0.00158s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:18:17,792 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:18:17,802 - app.main - INFO - Database tables created/verified
2026-01-01 19:18:17,804 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:18:17,805 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:18:17,807 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:18:31,407 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:18:31,408 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:18:31,408 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:18:31,409 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:18:31,410 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:18:31,410 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:18:31,411 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:18:31,412 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:18:31,412 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:18:31,413 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:18:31,414 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:18:31,415 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:18:31,416 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:18:31,416 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:18:31,417 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:18:31,570 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:18:31,589 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:18:31,590 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('admin',)
2026-01-01 19:18:31,960 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:18:31,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] (datetime.datetime(2026, 1, 1, 13, 48, 31, 958013, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:18:31,964 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:18:42,025 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:18:42,026 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:18:42,026 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:18:42,027 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:18:42,027 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:18:42,027 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:18:42,028 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:18:42,028 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:18:42,029 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 19:18:42,029 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:18:42,030 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:18:42,031 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 19:18:42,031 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 19:18:42,032 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:18:42,032 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:18:42,033 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 19:18:42,033 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:18:42,033 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:18:42,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:18:42,153 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:18:42,154 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (1,)
2026-01-01 19:18:42,161 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:18:42,168 - app.services.file_processor - INFO - Saved file: ./uploads\pending\00835cc0078e4a618d967771a2737cac.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:18:42,173 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:18:42,174 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:18:42,217 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:18:42,225 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:18:42,227 - sqlalchemy.engine.Engine - INFO - [generated in 0.00209s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:18:42,237 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:04,910 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:19:05,657 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:19:05,661 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:19:05,666 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000163C5057770>
2026-01-01 19:19:05,669 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:19:05,670 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:19:05,671 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:19:05,672 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:19:05,673 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:19:05,919 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:49:05 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:49:05 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:19:05,921 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:19:05,922 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:19:05,925 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:19:05,926 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:19:05,929 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:19:05,936 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:19:05,937 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:19:05,938 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:19:05,939 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:19:05,940 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:19:06,124 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:49:05 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:19:06,125 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:19:06,128 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:19:06,129 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:19:06,130 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:19:06,133 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:19:06,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:06,287 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:19:06,288 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWbnRTMHFwTDl1R1BRT0MyblRua3FYREhrTFJLcHJBaGswU3p4eEFQaV9DTDFjNjBQWGVkTWFBV0pqdENZNFJxOEJVM2pEeURFSmdnVWo5SWdfSGJMNE1GUmZ6Y0RiOTMzdVhLR2h4Nlg1Zkh2QUJFY2xIY19rcmJiNDJBbXFKUmo1cWQ=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 14, 49, 6, 133679, tzinfo=datetime.timezone.utc))
2026-01-01 19:19:06,294 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:06,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:06,447 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:19:06,449 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:19:06,506 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-01 19:19:06,508 - httpcore.connection - DEBUG - close.started
2026-01-01 19:19:06,510 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:19:06,514 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:06,662 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:06,664 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:19:06,665 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:19:06,676 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:19:06,676 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (datetime.datetime(2026, 1, 1, 13, 49, 6, 675145, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:19:06,679 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:06,685 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:19:06,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:06,799 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:19:06,800 - sqlalchemy.engine.Engine - INFO - [cached since 0.353s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:19:06,848 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:19:06,850 - sqlalchemy.engine.Engine - INFO - [generated in 0.00210s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:19:06,856 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:19:06,857 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('19AI405',)
2026-01-01 19:19:06,864 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:19:06,864 - sqlalchemy.engine.Engine - INFO - [cached since 0.008686s ago] ('19AI405',)
2026-01-01 19:19:06,869 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:10,633 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-01 19:19:33,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:33,994 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:19:33,995 - sqlalchemy.engine.Engine - INFO - [cached since 27.33s ago] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:19:34,005 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:19:34,006 - sqlalchemy.engine.Engine - INFO - [cached since 27.33s ago] (datetime.datetime(2026, 1, 1, 13, 49, 34, 5459, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:19:34,009 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:34,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:34,164 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:19:34,165 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:19:34,202 - app.services.submission_service - WARNING - Security violation: User 22007928 attempted to submit artifact belonging to 212222240047
2026-01-01 19:19:34,203 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:19:34,204 - sqlalchemy.engine.Engine - INFO - [cached since 51.98s ago] ('unauthorized_submission_attempt', 'security', 'User attempted to submit artifact belonging to 212222240047', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:19:34,209 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:34,217 - app.db.database - ERROR - Database session error: 400: You can only submit your own papers
2026-01-01 19:19:53,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:53,575 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:19:53,576 - sqlalchemy.engine.Engine - INFO - [cached since 46.91s ago] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:19:53,584 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:19:53,584 - sqlalchemy.engine.Engine - INFO - [cached since 46.91s ago] (datetime.datetime(2026, 1, 1, 13, 49, 53, 583527, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:19:53,588 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:53,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:19:53,746 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:19:53,746 - sqlalchemy.engine.Engine - INFO - [cached since 19.58s ago] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:19:53,780 - app.services.submission_service - WARNING - Security violation: User 22007928 attempted to submit artifact belonging to 212222240047
2026-01-01 19:19:53,782 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:19:53,783 - sqlalchemy.engine.Engine - INFO - [cached since 71.56s ago] ('unauthorized_submission_attempt', 'security', 'User attempted to submit artifact belonging to 212222240047', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:19:53,788 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:19:53,794 - app.db.database - ERROR - Database session error: 400: You can only submit your own papers
2026-01-01 19:20:02,061 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:02,062 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:20:02,063 - sqlalchemy.engine.Engine - INFO - [cached since 55.4s ago] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:20:02,074 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:20:02,075 - sqlalchemy.engine.Engine - INFO - [cached since 55.4s ago] (datetime.datetime(2026, 1, 1, 13, 50, 2, 73755, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:20:02,079 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:02,089 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:20:02,241 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:02,243 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:20:02,244 - sqlalchemy.engine.Engine - INFO - [cached since 55.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:20:02,305 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:20:02,306 - sqlalchemy.engine.Engine - INFO - [cached since 55.46s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:20:02,311 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:20:02,313 - sqlalchemy.engine.Engine - INFO - [cached since 55.46s ago] ('19AI405',)
2026-01-01 19:20:02,323 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:20:02,325 - sqlalchemy.engine.Engine - INFO - [cached since 55.47s ago] ('19AI405',)
2026-01-01 19:20:02,332 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:05,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:05,160 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:20:05,162 - sqlalchemy.engine.Engine - INFO - [cached since 58.5s ago] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:20:05,169 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:20:05,170 - sqlalchemy.engine.Engine - INFO - [cached since 58.49s ago] (datetime.datetime(2026, 1, 1, 13, 50, 5, 169127, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:20:05,174 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:05,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:05,352 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:20:05,353 - sqlalchemy.engine.Engine - INFO - [cached since 31.19s ago] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:20:05,391 - app.services.submission_service - WARNING - Security violation: User 22007928 attempted to submit artifact belonging to 212222240047
2026-01-01 19:20:05,393 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:20:05,394 - sqlalchemy.engine.Engine - INFO - [cached since 83.17s ago] ('unauthorized_submission_attempt', 'security', 'User attempted to submit artifact belonging to 212222240047', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:20:05,400 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:05,420 - app.db.database - ERROR - Database session error: 400: You can only submit your own papers
2026-01-01 19:20:38,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:38,879 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:20:38,880 - sqlalchemy.engine.Engine - INFO - [cached since 92.22s ago] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:20:38,886 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:20:38,887 - sqlalchemy.engine.Engine - INFO - [cached since 92.21s ago] (datetime.datetime(2026, 1, 1, 13, 50, 38, 886423, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:20:38,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:39,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:20:39,039 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:20:39,040 - sqlalchemy.engine.Engine - INFO - [cached since 64.88s ago] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:20:39,093 - app.services.submission_service - WARNING - Security violation: User 22007928 attempted to submit artifact belonging to 212222240047
2026-01-01 19:20:39,095 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:20:39,096 - sqlalchemy.engine.Engine - INFO - [cached since 116.9s ago] ('unauthorized_submission_attempt', 'security', 'User attempted to submit artifact belonging to 212222240047', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:20:39,104 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:20:39,112 - app.db.database - ERROR - Database session error: 400: You can only submit your own papers
2026-01-01 19:21:39,772 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:21:39,773 - app.main - INFO - Database connections closed
2026-01-01 19:21:41,247 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:21:41,322 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:21:41,323 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:41,328 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:21:41,329 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:41,330 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:21:41,331 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:41,332 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:41,336 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,337 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,345 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.009625s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,348 - sqlalchemy.engine.Engine - INFO - [cached since 0.01239s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.01437s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,351 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,352 - sqlalchemy.engine.Engine - INFO - [cached since 0.01614s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,353 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,354 - sqlalchemy.engine.Engine - INFO - [cached since 0.01808s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,355 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:41,356 - sqlalchemy.engine.Engine - INFO - [cached since 0.01972s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:41,358 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:21:41,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:21:41,362 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:21:41,367 - app.main - INFO - Database tables created/verified
2026-01-01 19:21:41,368 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:21:41,368 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:21:41,369 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:21:56,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:56,087 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:21:56,088 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:21:56,101 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:21:56,102 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (datetime.datetime(2026, 1, 1, 13, 51, 56, 98436, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:21:56,105 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:21:56,114 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:21:56,246 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:56,251 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:21:56,253 - sqlalchemy.engine.Engine - INFO - [generated in 0.00175s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:21:56,294 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:21:56,296 - sqlalchemy.engine.Engine - INFO - [generated in 0.00176s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:21:56,302 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:21:56,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('19AI405',)
2026-01-01 19:21:56,308 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:21:56,309 - sqlalchemy.engine.Engine - INFO - [cached since 0.00644s ago] ('19AI405',)
2026-01-01 19:21:56,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:21:56,379 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:21:56,380 - app.main - INFO - Database connections closed
2026-01-01 19:21:58,240 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:21:58,331 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:21:58,332 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:58,337 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:21:58,338 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:58,340 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:21:58,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:21:58,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:58,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,349 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,356 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,357 - sqlalchemy.engine.Engine - INFO - [cached since 0.009189s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,358 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,360 - sqlalchemy.engine.Engine - INFO - [cached since 0.01216s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,363 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,364 - sqlalchemy.engine.Engine - INFO - [cached since 0.0163s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,367 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,369 - sqlalchemy.engine.Engine - INFO - [cached since 0.02088s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.02473s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,374 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:21:58,375 - sqlalchemy.engine.Engine - INFO - [cached since 0.027s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:21:58,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:21:58,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:21:58,388 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:21:58,396 - app.main - INFO - Database tables created/verified
2026-01-01 19:21:58,398 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:21:58,400 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:21:58,403 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:21:58,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:58,552 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:21:58,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:21:58,563 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:21:58,564 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] (datetime.datetime(2026, 1, 1, 13, 51, 58, 561198, tzinfo=datetime.timezone.utc), 2)
2026-01-01 19:21:58,567 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:21:58,573 - app.api.routes.student - INFO - Submit attempt for 6813eca6-d97d-4021-ba2e-eab1407333bd by register_number: 212222240047
2026-01-01 19:21:58,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:21:58,662 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:21:58,663 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:21:58,701 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:21:58,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('19AI405',)
2026-01-01 19:21:58,706 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 19:21:58,706 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] (3, '22007928', 4, 2)
2026-01-01 19:21:58,711 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:21:58,712 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:21:58,716 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 19:21:58,717 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 19:21:58,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('UPLOADING', 2)
2026-01-01 19:21:59,112 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (309 bytes)
2026-01-01 19:21:59,120 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:21:59,123 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026F96B10440>
2026-01-01 19:21:59,124 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:21:59,125 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:21:59,125 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:21:59,127 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:21:59,128 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:21:59,756 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:51:59 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 13:51:59 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'278'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 19:21:59,758 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:21:59,758 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:21:59,761 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:21:59,762 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:21:59,765 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 639805605, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 309}]
2026-01-01 19:21:59,765 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 639805605
2026-01-01 19:21:59,767 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 19:21:59,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] (639805605, 2)
2026-01-01 19:21:59,770 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-01 19:21:59,776 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:21:59,778 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:21:59,779 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:21:59,780 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:21:59,782 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:22:00,219 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 13:51:59 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 19:22:00,220 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:22:00,220 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:22:00,222 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:22:00,222 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:22:00,224 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-01 19:22:00,224 - app.services.submission_service - ERROR - Assignment 4 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-01 19:22:00,226 - httpcore.connection - DEBUG - close.started
2026-01-01 19:22:00,227 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:22:00,228 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 19:22:00,232 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 19:22:00,234 - sqlalchemy.engine.Engine - INFO - [generated in 0.00226s] (2,)
2026-01-01 19:22:00,239 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 19:22:00,240 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('FAILED', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 1, 2)
2026-01-01 19:22:00,248 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 19:22:00,249 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] (2,)
2026-01-01 19:22:00,254 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:22:00,255 - sqlalchemy.engine.Engine - INFO - [cached since 1.544s ago] ('submission_failed', 'error', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', '{"error": "Assignment 4 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-01 19:22:00,258 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:22:00,269 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 19:22:53,321 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:22:53,321 - app.main - INFO - Database connections closed
2026-01-01 19:51:28,853 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:51:28,955 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:51:28,955 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:51:28,976 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:51:28,977 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:51:28,983 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:51:28,984 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:51:28,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:51:28,997 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:28,999 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,028 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,029 - sqlalchemy.engine.Engine - INFO - [cached since 0.03169s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,031 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,032 - sqlalchemy.engine.Engine - INFO - [cached since 0.03439s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,034 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,035 - sqlalchemy.engine.Engine - INFO - [cached since 0.03732s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,037 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,038 - sqlalchemy.engine.Engine - INFO - [cached since 0.0407s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,041 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,042 - sqlalchemy.engine.Engine - INFO - [cached since 0.045s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,047 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:51:29,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.05165s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:51:29,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:51:29,062 - sqlalchemy.engine.Engine - INFO - [generated in 0.00304s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:51:29,069 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:51:29,081 - app.main - INFO - Database tables created/verified
2026-01-01 19:51:29,082 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:51:29,083 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:51:29,083 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:51:30,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:51:30,407 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:51:30,409 - sqlalchemy.engine.Engine - INFO - [generated in 0.00254s] ('a7zCpbe0hGyMSyWlDmTopFSaKYyOoU_E9ZmhMyt55tg',)
2026-01-01 19:51:30,429 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 19:51:30,438 - app.db.database - ERROR - Database session error: 401: Invalid session
2026-01-01 19:51:34,913 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:51:34,914 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:51:34,914 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:51:34,914 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:51:34,915 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:51:34,915 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:51:34,915 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:51:34,916 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:51:34,916 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:51:34,916 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:51:34,917 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:51:34,917 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:51:34,917 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:51:34,918 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:51:34,918 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:51:35,060 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:51:35,065 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:51:35,066 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ('admin',)
2026-01-01 19:51:35,422 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:51:35,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (datetime.datetime(2026, 1, 1, 14, 21, 35, 420396, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:51:35,430 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:51:48,233 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:51:48,234 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:51:48,235 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:51:48,235 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:51:48,236 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:51:48,237 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:51:48,237 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:51:48,238 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:51:48,269 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:65536]
2026-01-01 19:51:48,271 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:32768]
2026-01-01 19:51:48,304 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-01 19:51:48,338 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-01 19:51:48,341 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-01 19:51:48,375 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-01 19:51:48,410 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-01 19:51:48,413 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:8578]
2026-01-01 19:51:48,414 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:51:48,415 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:51:48,416 - python_multipart.multipart - DEBUG - Calling on_header_field with data[8622:8641]
2026-01-01 19:51:48,418 - python_multipart.multipart - DEBUG - Calling on_header_value with data[8643:8673]
2026-01-01 19:51:48,419 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:51:48,420 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:51:48,422 - python_multipart.multipart - DEBUG - Calling on_part_data with data[8677:8685]
2026-01-01 19:51:48,423 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:51:48,424 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:51:48,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:51:48,627 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:51:48,628 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] (1,)
2026-01-01 19:51:48,646 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:51:48,654 - app.services.file_processor - INFO - Saved file: ./uploads\pending\1761221dabe64202b9dbff0a93cfe8be.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:51:48,662 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:51:48,664 - sqlalchemy.engine.Engine - INFO - [generated in 0.00182s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:51:48,806 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:51:48,811 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:51:48,813 - sqlalchemy.engine.Engine - INFO - [generated in 0.00140s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:51:48,828 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:15,216 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:52:15,959 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:52:15,963 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:52:15,966 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001BD0236F770>
2026-01-01 19:52:15,968 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:52:15,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:52:15,970 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:52:15,972 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:52:15,973 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:52:16,775 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:22:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:22:16 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:52:16,777 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:52:16,777 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:52:16,779 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:52:16,779 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:52:16,781 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:52:16,784 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:52:16,785 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:52:16,786 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:52:16,787 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:52:16,788 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:52:17,095 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:22:16 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:52:17,097 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:52:17,100 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:52:17,102 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:52:17,102 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:52:17,105 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:52:17,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:17,237 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:52:17,238 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWb01aLW1RX3ZiN0dyRXZOam5ma0N0b05wQnFBeFh3bVQ5WGlqRk83dXJXUVZpZzFibXowYTdNaFo2dUpmWnFXV3lRaVNmOFplRUtib09VN09ZV0JYZWtnM2kzTjkyLWZtcTdTX3VJY1RaUVdub3doSGxvMEp3WVptTkswNllsNUhIckc=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 15, 22, 17, 106298, tzinfo=datetime.timezone.utc))
2026-01-01 19:52:17,244 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:17,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:17,364 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:17,365 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:17,416 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 0
2026-01-01 19:52:17,421 - httpcore.connection - DEBUG - close.started
2026-01-01 19:52:17,422 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:52:17,433 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:17,586 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:17,588 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:17,588 - sqlalchemy.engine.Engine - INFO - [cached since 47.18s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:17,599 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:17,599 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] (datetime.datetime(2026, 1, 1, 14, 22, 17, 598015, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:17,602 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:17,608 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:17,718 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:17,720 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:17,721 - sqlalchemy.engine.Engine - INFO - [cached since 0.3571s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:17,765 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:17,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:17,773 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:24,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:24,277 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:24,278 - sqlalchemy.engine.Engine - INFO - [cached since 53.87s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:24,289 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:24,289 - sqlalchemy.engine.Engine - INFO - [cached since 6.691s ago] (datetime.datetime(2026, 1, 1, 14, 22, 24, 288502, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:24,294 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:24,301 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:24,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:24,436 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:24,437 - sqlalchemy.engine.Engine - INFO - [cached since 7.073s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:24,490 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:24,492 - sqlalchemy.engine.Engine - INFO - [cached since 6.726s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:24,498 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:25,126 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:25,128 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:25,129 - sqlalchemy.engine.Engine - INFO - [cached since 54.72s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:25,138 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:25,139 - sqlalchemy.engine.Engine - INFO - [cached since 7.54s ago] (datetime.datetime(2026, 1, 1, 14, 22, 25, 137816, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:25,143 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:25,152 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:25,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:25,302 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:25,304 - sqlalchemy.engine.Engine - INFO - [cached since 7.94s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:25,358 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:25,360 - sqlalchemy.engine.Engine - INFO - [cached since 7.595s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:25,366 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:25,893 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:25,895 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:25,895 - sqlalchemy.engine.Engine - INFO - [cached since 55.49s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:25,906 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:25,907 - sqlalchemy.engine.Engine - INFO - [cached since 8.308s ago] (datetime.datetime(2026, 1, 1, 14, 22, 25, 905685, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:25,910 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:25,917 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:26,045 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,046 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:26,047 - sqlalchemy.engine.Engine - INFO - [cached since 8.684s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:26,077 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:26,078 - sqlalchemy.engine.Engine - INFO - [cached since 8.313s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:26,082 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,285 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,286 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:26,287 - sqlalchemy.engine.Engine - INFO - [cached since 55.88s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:26,295 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:26,295 - sqlalchemy.engine.Engine - INFO - [cached since 8.697s ago] (datetime.datetime(2026, 1, 1, 14, 22, 26, 294644, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:26,298 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,305 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:26,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,433 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:26,434 - sqlalchemy.engine.Engine - INFO - [cached since 9.07s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:26,468 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:26,470 - sqlalchemy.engine.Engine - INFO - [cached since 8.704s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:26,475 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,555 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,556 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:26,557 - sqlalchemy.engine.Engine - INFO - [cached since 56.15s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:26,566 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:26,567 - sqlalchemy.engine.Engine - INFO - [cached since 8.968s ago] (datetime.datetime(2026, 1, 1, 14, 22, 26, 565995, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:26,569 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,578 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:26,708 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,709 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:26,709 - sqlalchemy.engine.Engine - INFO - [cached since 9.346s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:26,764 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:26,766 - sqlalchemy.engine.Engine - INFO - [cached since 9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:26,772 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:26,962 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:26,963 - sqlalchemy.engine.Engine - INFO - [cached since 56.56s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:26,972 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:26,972 - sqlalchemy.engine.Engine - INFO - [cached since 9.374s ago] (datetime.datetime(2026, 1, 1, 14, 22, 26, 971781, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:26,976 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:26,983 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:27,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:27,135 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:27,136 - sqlalchemy.engine.Engine - INFO - [cached since 9.772s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:27,197 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:27,198 - sqlalchemy.engine.Engine - INFO - [cached since 9.433s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:27,204 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:33,572 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:33,573 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:52:33,573 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:52:33,573 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:33,573 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:52:33,574 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:52:33,574 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:33,574 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:33,575 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:163840]
2026-01-01 19:52:33,575 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:24962]
2026-01-01 19:52:33,576 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:33,576 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:33,577 - python_multipart.multipart - DEBUG - Calling on_header_field with data[25006:25025]
2026-01-01 19:52:33,577 - python_multipart.multipart - DEBUG - Calling on_header_value with data[25027:25057]
2026-01-01 19:52:33,577 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:33,577 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:33,578 - python_multipart.multipart - DEBUG - Calling on_part_data with data[25061:25069]
2026-01-01 19:52:33,579 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:33,579 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:52:33,691 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:33,692 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:52:33,693 - sqlalchemy.engine.Engine - INFO - [cached since 45.07s ago] (1,)
2026-01-01 19:52:33,701 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:52:33,707 - app.services.file_processor - INFO - Saved file: ./uploads\pending\5dfb3b31aaf5480b81f5ddb85335105b.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:52:33,708 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:52:33,709 - sqlalchemy.engine.Engine - INFO - [cached since 45.05s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:52:33,753 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:52:33,755 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:52:33,756 - sqlalchemy.engine.Engine - INFO - [cached since 44.94s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:52:33,760 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:37,827 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:37,827 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:52:37,828 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:52:37,828 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:37,829 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:37,829 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:52:37,830 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:37,830 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:37,830 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:52:37,831 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:52:37,831 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:37,832 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:37,832 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:52:37,832 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:37,833 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:52:37,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:37,996 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:52:37,997 - sqlalchemy.engine.Engine - INFO - [cached since 62.93s ago] ('admin',)
2026-01-01 19:52:38,370 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:52:38,371 - sqlalchemy.engine.Engine - INFO - [cached since 62.95s ago] (datetime.datetime(2026, 1, 1, 14, 22, 38, 369971, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:52:38,373 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:38,373 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:52:38,373 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:52:38,374 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:38,374 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:38,374 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:52:38,374 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:38,375 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:38,375 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:52:38,375 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:52:38,376 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:38,376 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:38,376 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:52:38,377 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:38,377 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:52:38,383 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:38,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:38,479 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:52:38,480 - sqlalchemy.engine.Engine - INFO - [cached since 63.42s ago] ('admin',)
2026-01-01 19:52:38,835 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:52:38,835 - sqlalchemy.engine.Engine - INFO - [cached since 63.41s ago] (datetime.datetime(2026, 1, 1, 14, 22, 38, 834832, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:52:38,838 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:44,762 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:44,762 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:52:44,763 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:52:44,763 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:44,763 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:52:44,764 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:52:44,764 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:44,764 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:44,765 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:32768]
2026-01-01 19:52:44,766 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:156034]
2026-01-01 19:52:44,766 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:44,767 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:52:44,767 - python_multipart.multipart - DEBUG - Calling on_header_field with data[156078:156097]
2026-01-01 19:52:44,767 - python_multipart.multipart - DEBUG - Calling on_header_value with data[156099:156129]
2026-01-01 19:52:44,768 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:52:44,768 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:52:44,769 - python_multipart.multipart - DEBUG - Calling on_part_data with data[156133:156141]
2026-01-01 19:52:44,770 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:52:44,770 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:52:44,890 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:44,891 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:52:44,892 - sqlalchemy.engine.Engine - INFO - [cached since 56.27s ago] (1,)
2026-01-01 19:52:44,900 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:52:44,907 - app.services.file_processor - INFO - Saved file: ./uploads\pending\dc1ca6d49c5b4b2e8be2626a8ec48cba.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:52:44,908 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:52:44,910 - sqlalchemy.engine.Engine - INFO - [cached since 56.25s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:52:44,964 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:52:44,966 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:52:44,967 - sqlalchemy.engine.Engine - INFO - [cached since 56.16s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:52:44,974 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:47,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:47,347 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:47,348 - sqlalchemy.engine.Engine - INFO - [cached since 76.94s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:47,356 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:47,357 - sqlalchemy.engine.Engine - INFO - [cached since 29.76s ago] (datetime.datetime(2026, 1, 1, 14, 22, 47, 356562, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:47,363 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:47,369 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:47,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:47,501 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:47,502 - sqlalchemy.engine.Engine - INFO - [cached since 30.14s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:47,558 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:47,560 - sqlalchemy.engine.Engine - INFO - [cached since 29.79s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:47,565 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:48,097 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:48,099 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:48,099 - sqlalchemy.engine.Engine - INFO - [cached since 77.69s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:48,110 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:48,111 - sqlalchemy.engine.Engine - INFO - [cached since 30.51s ago] (datetime.datetime(2026, 1, 1, 14, 22, 48, 110049, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:48,116 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:48,126 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:48,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:48,281 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:48,283 - sqlalchemy.engine.Engine - INFO - [cached since 30.92s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:48,337 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:48,340 - sqlalchemy.engine.Engine - INFO - [cached since 30.57s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:48,345 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:48,830 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:48,831 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:48,832 - sqlalchemy.engine.Engine - INFO - [cached since 78.43s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:48,841 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:48,842 - sqlalchemy.engine.Engine - INFO - [cached since 31.24s ago] (datetime.datetime(2026, 1, 1, 14, 22, 48, 841010, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:48,846 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:48,854 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:48,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:48,991 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:48,992 - sqlalchemy.engine.Engine - INFO - [cached since 31.63s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:49,042 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:49,044 - sqlalchemy.engine.Engine - INFO - [cached since 31.28s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:49,048 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:49,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:49,518 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:49,518 - sqlalchemy.engine.Engine - INFO - [cached since 79.11s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:49,525 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:49,526 - sqlalchemy.engine.Engine - INFO - [cached since 31.93s ago] (datetime.datetime(2026, 1, 1, 14, 22, 49, 525040, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:49,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:49,541 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:49,668 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:49,669 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:49,669 - sqlalchemy.engine.Engine - INFO - [cached since 32.31s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:49,702 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:49,703 - sqlalchemy.engine.Engine - INFO - [cached since 31.94s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:49,708 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:50,167 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:50,168 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:50,169 - sqlalchemy.engine.Engine - INFO - [cached since 79.76s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:50,177 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:50,178 - sqlalchemy.engine.Engine - INFO - [cached since 32.58s ago] (datetime.datetime(2026, 1, 1, 14, 22, 50, 176933, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:50,181 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:50,188 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:50,303 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:50,305 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:50,306 - sqlalchemy.engine.Engine - INFO - [cached since 32.94s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:50,359 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:50,361 - sqlalchemy.engine.Engine - INFO - [cached since 32.6s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:50,366 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:50,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:50,861 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:50,862 - sqlalchemy.engine.Engine - INFO - [cached since 80.46s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:50,870 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:50,873 - sqlalchemy.engine.Engine - INFO - [cached since 33.27s ago] (datetime.datetime(2026, 1, 1, 14, 22, 50, 870124, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:50,876 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:50,882 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:50,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:50,990 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:50,992 - sqlalchemy.engine.Engine - INFO - [cached since 33.63s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:51,033 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:51,035 - sqlalchemy.engine.Engine - INFO - [cached since 33.27s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:51,039 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:51,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:51,479 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:51,480 - sqlalchemy.engine.Engine - INFO - [cached since 81.07s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:51,490 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:51,491 - sqlalchemy.engine.Engine - INFO - [cached since 33.89s ago] (datetime.datetime(2026, 1, 1, 14, 22, 51, 489752, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:51,495 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:51,502 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:51,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:51,640 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:51,641 - sqlalchemy.engine.Engine - INFO - [cached since 34.28s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:51,686 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:51,688 - sqlalchemy.engine.Engine - INFO - [cached since 33.92s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:51,693 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:52,184 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:52,185 - sqlalchemy.engine.Engine - INFO - [cached since 81.78s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:52,195 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:52,195 - sqlalchemy.engine.Engine - INFO - [cached since 34.6s ago] (datetime.datetime(2026, 1, 1, 14, 22, 52, 194631, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:52,199 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,209 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:52,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:52,366 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:52,367 - sqlalchemy.engine.Engine - INFO - [cached since 35s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:52,416 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:52,418 - sqlalchemy.engine.Engine - INFO - [cached since 34.65s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:52,425 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,689 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:52,691 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:52,692 - sqlalchemy.engine.Engine - INFO - [cached since 82.29s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:52,701 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:52,702 - sqlalchemy.engine.Engine - INFO - [cached since 35.1s ago] (datetime.datetime(2026, 1, 1, 14, 22, 52, 700996, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:52,706 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,712 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:52,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:52,848 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:52,848 - sqlalchemy.engine.Engine - INFO - [cached since 35.48s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:52,883 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:52,884 - sqlalchemy.engine.Engine - INFO - [cached since 35.12s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:52,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:52,966 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:52:52,967 - sqlalchemy.engine.Engine - INFO - [cached since 82.56s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:52:52,980 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:52:52,981 - sqlalchemy.engine.Engine - INFO - [cached since 35.38s ago] (datetime.datetime(2026, 1, 1, 14, 22, 52, 979548, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:52:52,986 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:52:52,999 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:52:53,148 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:52:53,149 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:52:53,150 - sqlalchemy.engine.Engine - INFO - [cached since 35.79s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:52:53,194 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:52:53,195 - sqlalchemy.engine.Engine - INFO - [cached since 35.43s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:52:53,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:36,093 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:55:36,094 - app.main - INFO - Database connections closed
2026-01-01 19:55:42,154 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:55:42,236 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:55:42,236 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:55:42,238 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:55:42,239 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:55:42,240 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:55:42,240 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:55:42,244 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:42,248 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,249 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,257 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,258 - sqlalchemy.engine.Engine - INFO - [cached since 0.01024s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,259 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,260 - sqlalchemy.engine.Engine - INFO - [cached since 0.01193s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,261 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,261 - sqlalchemy.engine.Engine - INFO - [cached since 0.01342s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,262 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,262 - sqlalchemy.engine.Engine - INFO - [cached since 0.01471s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,263 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,264 - sqlalchemy.engine.Engine - INFO - [cached since 0.01591s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,265 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:55:42,265 - sqlalchemy.engine.Engine - INFO - [cached since 0.01741s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:55:42,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:55:42,268 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:55:42,272 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:42,276 - app.main - INFO - Database tables created/verified
2026-01-01 19:55:42,277 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:55:42,277 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:55:42,278 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:55:49,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:49,578 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:55:49,578 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:55:49,589 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:55:49,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (datetime.datetime(2026, 1, 1, 14, 25, 49, 586705, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:55:49,592 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:49,597 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:55:49,695 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:49,698 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:55:49,698 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:55:49,728 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:55:49,729 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:55:49,732 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:53,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:53,115 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:55:53,116 - sqlalchemy.engine.Engine - INFO - [cached since 3.539s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:55:53,125 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:55:53,125 - sqlalchemy.engine.Engine - INFO - [cached since 3.536s ago] (datetime.datetime(2026, 1, 1, 14, 25, 53, 124543, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:55:53,128 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:53,149 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:55:53,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:53,281 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:55:53,282 - sqlalchemy.engine.Engine - INFO - [cached since 3.584s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:55:53,331 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:55:53,333 - sqlalchemy.engine.Engine - INFO - [cached since 3.605s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:55:53,339 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,174 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:55:54,175 - sqlalchemy.engine.Engine - INFO - [cached since 4.598s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:55:54,190 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:55:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 4.603s ago] (datetime.datetime(2026, 1, 1, 14, 25, 54, 190082, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:55:54,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,211 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:55:54,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,347 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:55:54,348 - sqlalchemy.engine.Engine - INFO - [cached since 4.65s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:55:54,388 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:55:54,390 - sqlalchemy.engine.Engine - INFO - [cached since 4.662s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:55:54,394 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,507 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,509 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:55:54,510 - sqlalchemy.engine.Engine - INFO - [cached since 4.932s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:55:54,522 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:55:54,523 - sqlalchemy.engine.Engine - INFO - [cached since 4.935s ago] (datetime.datetime(2026, 1, 1, 14, 25, 54, 521389, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:55:54,527 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,538 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:55:54,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,675 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:55:54,676 - sqlalchemy.engine.Engine - INFO - [cached since 4.978s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:55:54,707 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:55:54,709 - sqlalchemy.engine.Engine - INFO - [cached since 4.981s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:55:54,712 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,858 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:55:54,859 - sqlalchemy.engine.Engine - INFO - [cached since 5.281s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:55:54,865 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:55:54,866 - sqlalchemy.engine.Engine - INFO - [cached since 5.278s ago] (datetime.datetime(2026, 1, 1, 14, 25, 54, 865573, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:55:54,869 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:55:54,874 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:55:54,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:55:54,993 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:55:54,995 - sqlalchemy.engine.Engine - INFO - [cached since 5.297s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:55:55,045 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:55:55,046 - sqlalchemy.engine.Engine - INFO - [cached since 5.318s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:55:55,052 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,133 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:02,134 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:02,135 - sqlalchemy.engine.Engine - INFO - [cached since 12.56s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:02,146 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:02,147 - sqlalchemy.engine.Engine - INFO - [cached since 12.56s ago] (datetime.datetime(2026, 1, 1, 14, 26, 2, 146372, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:02,152 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,160 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:56:02,284 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:02,285 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:56:02,286 - sqlalchemy.engine.Engine - INFO - [cached since 12.59s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:56:02,333 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:56:02,334 - sqlalchemy.engine.Engine - INFO - [cached since 12.61s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:56:02,339 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:02,520 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:02,521 - sqlalchemy.engine.Engine - INFO - [cached since 12.94s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:02,530 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:02,530 - sqlalchemy.engine.Engine - INFO - [cached since 12.94s ago] (datetime.datetime(2026, 1, 1, 14, 26, 2, 529930, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:02,534 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,540 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:56:02,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:02,676 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:56:02,677 - sqlalchemy.engine.Engine - INFO - [cached since 12.98s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:56:02,733 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:56:02,734 - sqlalchemy.engine.Engine - INFO - [cached since 13.01s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:56:02,829 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:02,845 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:02,847 - sqlalchemy.engine.Engine - INFO - [cached since 13.27s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:02,871 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:02,872 - sqlalchemy.engine.Engine - INFO - [cached since 13.28s ago] (datetime.datetime(2026, 1, 1, 14, 26, 2, 871221, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:02,878 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:02,895 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:56:03,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:03,021 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:56:03,023 - sqlalchemy.engine.Engine - INFO - [cached since 13.32s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:56:03,056 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:56:03,057 - sqlalchemy.engine.Engine - INFO - [cached since 13.33s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:56:03,062 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:03,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:03,264 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:03,265 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:03,279 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:03,280 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] (datetime.datetime(2026, 1, 1, 14, 26, 3, 278640, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:03,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:03,296 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:56:03,454 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:03,456 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:56:03,457 - sqlalchemy.engine.Engine - INFO - [cached since 13.76s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:56:03,518 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:56:03,520 - sqlalchemy.engine.Engine - INFO - [cached since 13.79s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:56:03,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:18,229 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:56:18,229 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:56:18,229 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:56:18,230 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:56:18,230 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:56:18,230 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:56:18,231 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:56:18,231 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:56:18,231 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 19:56:18,232 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:56:18,232 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:56:18,232 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 19:56:18,234 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 19:56:18,234 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:56:18,235 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:56:18,235 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 19:56:18,235 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:56:18,236 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:56:18,353 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:18,356 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:56:18,356 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (1,)
2026-01-01 19:56:18,362 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:56:18,367 - app.services.file_processor - INFO - Saved file: ./uploads\pending\1555d46fd350400f8cf9d8c6e66ea7be.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:56:18,369 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:56:18,370 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:56:18,397 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:56:18,402 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:56:18,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:56:18,406 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:25,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:25,740 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:25,741 - sqlalchemy.engine.Engine - INFO - [cached since 36.16s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:25,754 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:25,755 - sqlalchemy.engine.Engine - INFO - [cached since 36.17s ago] (datetime.datetime(2026, 1, 1, 14, 26, 25, 753886, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:25,760 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:25,769 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:56:25,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:25,946 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:56:25,948 - sqlalchemy.engine.Engine - INFO - [cached since 36.25s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:56:25,998 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:56:26,000 - sqlalchemy.engine.Engine - INFO - [cached since 36.27s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:56:26,008 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:56:26,009 - sqlalchemy.engine.Engine - INFO - [generated in 0.00150s] ('19AI405',)
2026-01-01 19:56:26,021 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 19:56:26,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.01466s ago] ('19AI405',)
2026-01-01 19:56:26,027 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:28,777 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:28,777 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:56:28,778 - sqlalchemy.engine.Engine - INFO - [cached since 39.2s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:56:28,788 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:56:28,788 - sqlalchemy.engine.Engine - INFO - [cached since 39.2s ago] (datetime.datetime(2026, 1, 1, 14, 26, 28, 787743, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:56:28,791 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:28,796 - app.api.routes.student - INFO - Submit attempt for 6813eca6-d97d-4021-ba2e-eab1407333bd by register_number: 212222240047
2026-01-01 19:56:28,953 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:56:28,954 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 19:56:28,955 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('6813eca6-d97d-4021-ba2e-eab1407333bd',)
2026-01-01 19:56:29,004 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:56:29,004 - sqlalchemy.engine.Engine - INFO - [cached since 10.6s ago] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', 'null', None, None)
2026-01-01 19:56:29,012 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 19:56:29,014 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 19:56:29,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] ('UPLOADING', 2)
2026-01-01 19:56:29,846 - app.services.submission_service - ERROR - Moodle API error during submission: File not found: ./uploads\pending\3b3e478727514630bb8f446796cdc5ef.pdf
2026-01-01 19:56:29,850 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 19:56:29,853 - sqlalchemy.engine.Engine - INFO - [generated in 0.00306s] (2,)
2026-01-01 19:56:29,859 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 19:56:29,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ('FAILED', 'File not found: ./uploads\\pending\\3b3e478727514630bb8f446796cdc5ef.pdf', 2, 2)
2026-01-01 19:56:29,872 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 19:56:29,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00165s] (2,)
2026-01-01 19:56:29,877 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:56:29,878 - sqlalchemy.engine.Engine - INFO - [cached since 11.48s ago] ('submission_failed', 'error', 'File not found: ./uploads\\pending\\3b3e478727514630bb8f446796cdc5ef.pdf', 'student', '3', '22007928', '127.0.0.1', 2, None, None, 'null', '{"error": "File not found: ./uploads\\\\pending\\\\3b3e478727514630bb8f446796cdc5ef.pdf", "queued_for_retry": false}', None, None)
2026-01-01 19:56:29,884 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:56:29,891 - app.db.database - ERROR - Database session error: 400: Submission failed: File not found: ./uploads\pending\3b3e478727514630bb8f446796cdc5ef.pdf
2026-01-01 19:58:01,437 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:01,438 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:58:01,439 - sqlalchemy.engine.Engine - INFO - [cached since 131.9s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:58:01,447 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:58:01,448 - sqlalchemy.engine.Engine - INFO - [cached since 131.9s ago] (datetime.datetime(2026, 1, 1, 14, 28, 1, 447071, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:58:01,451 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:01,459 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:58:01,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:01,587 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:58:01,588 - sqlalchemy.engine.Engine - INFO - [cached since 131.9s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:58:01,639 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:58:01,641 - sqlalchemy.engine.Engine - INFO - [cached since 131.9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:58:01,646 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:18,768 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:18,769 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:58:18,770 - sqlalchemy.engine.Engine - INFO - [cached since 149.2s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:58:18,780 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:58:18,782 - sqlalchemy.engine.Engine - INFO - [cached since 149.2s ago] (datetime.datetime(2026, 1, 1, 14, 28, 18, 779645, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:58:18,786 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:18,792 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:58:18,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:18,913 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:58:18,915 - sqlalchemy.engine.Engine - INFO - [cached since 149.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:58:18,972 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:58:18,973 - sqlalchemy.engine.Engine - INFO - [cached since 149.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:58:18,978 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:19,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:19,520 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:58:19,521 - sqlalchemy.engine.Engine - INFO - [cached since 149.9s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:58:19,532 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:58:19,533 - sqlalchemy.engine.Engine - INFO - [cached since 149.9s ago] (datetime.datetime(2026, 1, 1, 14, 28, 19, 532093, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:58:19,536 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:19,543 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:58:19,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:19,675 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:58:19,676 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:58:19,720 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:58:19,721 - sqlalchemy.engine.Engine - INFO - [cached since 150s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:58:19,725 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:20,247 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:20,248 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:58:20,250 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:58:20,262 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:58:20,263 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] (datetime.datetime(2026, 1, 1, 14, 28, 20, 261771, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:58:20,268 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:20,276 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:58:20,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:20,454 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:58:20,456 - sqlalchemy.engine.Engine - INFO - [cached since 150.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:58:20,493 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:58:20,495 - sqlalchemy.engine.Engine - INFO - [cached since 150.8s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:58:20,502 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:21,660 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 19:58:21,662 - app.main - INFO - Database connections closed
2026-01-01 19:58:24,040 - app.main - INFO - Starting Examination Middleware...
2026-01-01 19:58:24,114 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 19:58:24,114 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:58:24,116 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 19:58:24,117 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:58:24,118 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 19:58:24,118 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 19:58:24,122 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:58:24,126 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,127 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,134 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,134 - sqlalchemy.engine.Engine - INFO - [cached since 0.008113s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,135 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,136 - sqlalchemy.engine.Engine - INFO - [cached since 0.00971s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,137 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,137 - sqlalchemy.engine.Engine - INFO - [cached since 0.0112s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,138 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,139 - sqlalchemy.engine.Engine - INFO - [cached since 0.01271s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,141 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,142 - sqlalchemy.engine.Engine - INFO - [cached since 0.01544s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,143 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 19:58:24,144 - sqlalchemy.engine.Engine - INFO - [cached since 0.01784s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 19:58:24,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 19:58:24,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('workflowstatus', 'pg_catalog')
2026-01-01 19:58:24,152 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:58:24,157 - app.main - INFO - Database tables created/verified
2026-01-01 19:58:24,158 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 19:58:24,159 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 19:58:24,159 - app.main - INFO - Examination Middleware started successfully
2026-01-01 19:59:12,827 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:59:12,828 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:59:12,828 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 19:59:12,829 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:59:12,830 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:59:12,830 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 19:59:12,831 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:59:12,831 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:59:12,832 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 19:59:12,832 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 19:59:12,833 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:59:12,834 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:59:12,834 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 19:59:12,835 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:59:12,835 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:59:12,976 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:12,994 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 19:59:12,995 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('admin',)
2026-01-01 19:59:13,346 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 19:59:13,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] (datetime.datetime(2026, 1, 1, 14, 29, 13, 344192, tzinfo=datetime.timezone.utc), 1)
2026-01-01 19:59:13,350 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:17,493 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:59:17,494 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 19:59:17,494 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 19:59:17,495 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:59:17,495 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 19:59:17,496 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 19:59:17,496 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:59:17,497 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:59:17,498 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:16384]
2026-01-01 19:59:17,500 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:172418]
2026-01-01 19:59:17,501 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:59:17,502 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 19:59:17,502 - python_multipart.multipart - DEBUG - Calling on_header_field with data[172462:172481]
2026-01-01 19:59:17,503 - python_multipart.multipart - DEBUG - Calling on_header_value with data[172483:172513]
2026-01-01 19:59:17,504 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 19:59:17,504 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 19:59:17,505 - python_multipart.multipart - DEBUG - Calling on_part_data with data[172517:172525]
2026-01-01 19:59:17,505 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 19:59:17,506 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 19:59:17,665 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:17,667 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 19:59:17,668 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] (1,)
2026-01-01 19:59:17,678 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 19:59:17,682 - app.services.file_processor - INFO - Saved file: ./uploads\pending\4a23b220013d43f7ac617c7b837f2a9b.pdf (hash: 69530c94d1cfd882...)
2026-01-01 19:59:17,687 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 19:59:17,688 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 19:59:17,719 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97
2026-01-01 19:59:17,724 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 19:59:17,725 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 19:59:17,731 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:20,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:20,528 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:59:20,529 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:59:20,539 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:59:20,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] (datetime.datetime(2026, 1, 1, 14, 29, 20, 537011, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:59:20,544 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:20,552 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:59:20,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:20,702 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:59:20,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:59:20,754 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:59:20,755 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:59:20,760 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:21,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:21,495 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:59:21,495 - sqlalchemy.engine.Engine - INFO - [cached since 0.9674s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:59:21,502 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:59:21,503 - sqlalchemy.engine.Engine - INFO - [cached since 0.9644s ago] (datetime.datetime(2026, 1, 1, 14, 29, 21, 502378, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:59:21,506 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:21,512 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:59:21,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:21,735 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:59:21,736 - sqlalchemy.engine.Engine - INFO - [cached since 1.034s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:59:21,777 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:59:21,778 - sqlalchemy.engine.Engine - INFO - [cached since 1.024s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:59:21,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:22,304 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:22,305 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:59:22,306 - sqlalchemy.engine.Engine - INFO - [cached since 1.778s ago] ('k5O7UIizYqn_GfS98dPZUtWbFRO8kPqGJRH9tcWT1Nc',)
2026-01-01 19:59:22,312 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:59:22,312 - sqlalchemy.engine.Engine - INFO - [cached since 1.774s ago] (datetime.datetime(2026, 1, 1, 14, 29, 22, 311456, tzinfo=datetime.timezone.utc), 3)
2026-01-01 19:59:22,316 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:22,322 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:59:22,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:22,457 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:59:22,458 - sqlalchemy.engine.Engine - INFO - [cached since 1.756s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:59:22,518 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:59:22,519 - sqlalchemy.engine.Engine - INFO - [cached since 1.766s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:59:22,525 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:31,741 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 19:59:32,474 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 19:59:32,480 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 19:59:32,486 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000250422D78C0>
2026-01-01 19:59:32,489 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:59:32,490 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:59:32,491 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:59:32,492 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:59:32,493 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:59:32,712 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:29:32 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:29:32 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 19:59:32,714 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:59:32,714 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:59:32,716 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:59:32,717 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:59:32,720 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 19:59:32,724 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 19:59:32,725 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 19:59:32,726 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 19:59:32,727 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 19:59:32,728 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 19:59:32,904 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:29:32 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 19:59:32,905 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 19:59:32,908 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 19:59:32,910 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 19:59:32,910 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 19:59:32,913 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 19:59:33,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:33,059 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 19:59:33,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('YsTgZ77RT3nNhG4zmnQMyD_b334vci1kYtQhls5kS9Y', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWb1RNcnRqWW5Wdm5vcjF1SHA2UkhSdHdXRFBYRmpXaFcza2lETDNGMHNSY1JXcEVzeF9MVkx1Zks0NzZwLWpmdFdtVUVqdWZ2b0Z6cjRFeFQtNWxkLVA3b0RtTUVRb19JSEphSkZaU0ctTHNjTFlfMGVYcTlKOTFocHhCdlNjVllRa28=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 15, 29, 32, 914206, tzinfo=datetime.timezone.utc))
2026-01-01 19:59:33,068 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:33,211 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:33,213 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:59:33,214 - sqlalchemy.engine.Engine - INFO - [cached since 12.51s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:59:33,268 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 0
2026-01-01 19:59:33,270 - httpcore.connection - DEBUG - close.started
2026-01-01 19:59:33,271 - httpcore.connection - DEBUG - close.complete
2026-01-01 19:59:33,273 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:33,416 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:33,417 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 19:59:33,418 - sqlalchemy.engine.Engine - INFO - [cached since 12.89s ago] ('YsTgZ77RT3nNhG4zmnQMyD_b334vci1kYtQhls5kS9Y',)
2026-01-01 19:59:33,429 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 19:59:33,430 - sqlalchemy.engine.Engine - INFO - [cached since 12.89s ago] (datetime.datetime(2026, 1, 1, 14, 29, 33, 428608, tzinfo=datetime.timezone.utc), 4)
2026-01-01 19:59:33,435 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 19:59:33,442 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 19:59:33,575 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 19:59:33,576 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 19:59:33,577 - sqlalchemy.engine.Engine - INFO - [cached since 12.88s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 19:59:33,630 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 19:59:33,631 - sqlalchemy.engine.Engine - INFO - [cached since 12.88s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 19:59:33,636 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:01:41,368 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:01:41,368 - app.main - INFO - Database connections closed
2026-01-01 20:01:42,833 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:01:42,910 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:01:42,911 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:01:42,916 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:01:42,917 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:01:42,918 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:01:42,919 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:01:42,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:01:42,923 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,924 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,931 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,932 - sqlalchemy.engine.Engine - INFO - [cached since 0.008919s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,934 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,935 - sqlalchemy.engine.Engine - INFO - [cached since 0.01173s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,936 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,936 - sqlalchemy.engine.Engine - INFO - [cached since 0.01318s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,937 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,938 - sqlalchemy.engine.Engine - INFO - [cached since 0.01448s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,939 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,939 - sqlalchemy.engine.Engine - INFO - [cached since 0.01616s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,940 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:01:42,941 - sqlalchemy.engine.Engine - INFO - [cached since 0.01776s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:01:42,943 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:01:42,943 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:01:42,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:01:42,950 - app.main - INFO - Database tables created/verified
2026-01-01 20:01:42,951 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:01:42,952 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:01:42,952 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:02:17,185 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:02:17,185 - app.main - INFO - Database connections closed
2026-01-01 20:02:18,544 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:02:18,617 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:02:18,618 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:18,620 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:02:18,621 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:18,623 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:02:18,624 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:18,628 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:02:18,632 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,638 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,639 - sqlalchemy.engine.Engine - INFO - [cached since 0.007135s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,640 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,640 - sqlalchemy.engine.Engine - INFO - [cached since 0.008611s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,641 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,642 - sqlalchemy.engine.Engine - INFO - [cached since 0.01034s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,643 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,643 - sqlalchemy.engine.Engine - INFO - [cached since 0.01157s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,644 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,645 - sqlalchemy.engine.Engine - INFO - [cached since 0.01337s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,646 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:18,647 - sqlalchemy.engine.Engine - INFO - [cached since 0.01528s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:18,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:02:18,650 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:02:18,653 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:02:18,656 - app.main - INFO - Database tables created/verified
2026-01-01 20:02:18,657 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:02:18,658 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:02:18,658 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:02:29,758 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:02:29,759 - app.main - INFO - Database connections closed
2026-01-01 20:02:31,166 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:02:31,238 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:02:31,239 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:31,241 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:02:31,242 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:31,243 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:02:31,244 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:02:31,248 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:02:31,252 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,252 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,257 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,258 - sqlalchemy.engine.Engine - INFO - [cached since 0.006329s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,259 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,260 - sqlalchemy.engine.Engine - INFO - [cached since 0.008062s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,261 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,261 - sqlalchemy.engine.Engine - INFO - [cached since 0.009543s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,262 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,263 - sqlalchemy.engine.Engine - INFO - [cached since 0.01087s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,264 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,264 - sqlalchemy.engine.Engine - INFO - [cached since 0.01251s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,265 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:02:31,266 - sqlalchemy.engine.Engine - INFO - [cached since 0.01412s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:02:31,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:02:31,268 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:02:31,271 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:02:31,274 - app.main - INFO - Database tables created/verified
2026-01-01 20:02:31,275 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:02:31,276 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:02:31,276 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:05:24,302 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:05:24,302 - app.main - INFO - Database connections closed
2026-01-01 20:05:46,758 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:05:46,830 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:05:46,831 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:05:46,833 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:05:46,834 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:05:46,836 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:05:46,836 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:05:46,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:05:46,845 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,852 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,853 - sqlalchemy.engine.Engine - INFO - [cached since 0.008408s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,854 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,855 - sqlalchemy.engine.Engine - INFO - [cached since 0.01046s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,856 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,856 - sqlalchemy.engine.Engine - INFO - [cached since 0.01191s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,858 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,859 - sqlalchemy.engine.Engine - INFO - [cached since 0.01469s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,861 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,861 - sqlalchemy.engine.Engine - INFO - [cached since 0.017s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,862 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:05:46,863 - sqlalchemy.engine.Engine - INFO - [cached since 0.01832s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:05:46,865 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:05:46,866 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:05:46,869 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:05:46,873 - app.main - INFO - Database tables created/verified
2026-01-01 20:05:46,874 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:05:46,876 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:05:46,876 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:05:51,375 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:05:51,396 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:05:51,397 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('YsTgZ77RT3nNhG4zmnQMyD_b334vci1kYtQhls5kS9Y',)
2026-01-01 20:05:51,406 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-01 20:05:51,412 - app.db.database - ERROR - Database session error: 401: Invalid session
2026-01-01 20:05:54,581 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:05:54,582 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:05:54,582 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 20:05:54,583 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:05:54,583 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:05:54,584 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 20:05:54,585 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:05:54,586 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:05:54,586 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 20:05:54,588 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 20:05:54,589 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:05:54,590 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:05:54,591 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 20:05:54,592 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:05:54,594 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:05:54,746 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:05:54,749 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 20:05:54,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('admin',)
2026-01-01 20:05:55,108 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 20:05:55,109 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] (datetime.datetime(2026, 1, 1, 14, 35, 55, 106050, tzinfo=datetime.timezone.utc), 1)
2026-01-01 20:05:55,112 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:02,775 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:06:02,776 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:06:02,776 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 20:06:02,777 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:06:02,777 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 20:06:02,778 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 20:06:02,778 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:06:02,779 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:06:02,779 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:16384]
2026-01-01 20:06:02,781 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:172418]
2026-01-01 20:06:02,781 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:06:02,782 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:06:02,782 - python_multipart.multipart - DEBUG - Calling on_header_field with data[172462:172481]
2026-01-01 20:06:02,782 - python_multipart.multipart - DEBUG - Calling on_header_value with data[172483:172513]
2026-01-01 20:06:02,783 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:06:02,783 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:06:02,784 - python_multipart.multipart - DEBUG - Calling on_part_data with data[172517:172525]
2026-01-01 20:06:02,784 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:06:02,785 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:06:02,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:02,943 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 20:06:02,945 - sqlalchemy.engine.Engine - INFO - [generated in 0.00121s] (1,)
2026-01-01 20:06:02,956 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 20:06:02,962 - app.services.file_processor - INFO - Saved file: ./uploads/pending/c3541747ed5d46cd91f407bcf30b1a2c.pdf (hash: 69530c94d1cfd882...)
2026-01-01 20:06:02,968 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 20:06:02,970 - sqlalchemy.engine.Engine - INFO - [generated in 0.00183s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 20:06:03,030 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-01 20:06:03,032 - sqlalchemy.engine.Engine - INFO - [generated in 0.00237s] (UUID('6df8d217-3358-4f07-b1d4-ae887c6c89f4'), '212222240047_19AI405.pdf', '212222240047_19AI405.pdf', '212222240047', '19AI405', './uploads/pending/c3541747ed5d46cd91f407bcf30b1a2c.pdf', '69530c94d1cfd88202dac8bcdbe9e7be8b021f021c09371f6d1782f1c0dc571d', 188644, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, '68db98da00992eb3382cdfa22fe26d97', None, None, None, 1, None, '[{"timestamp": "2026-01-01T14:36:03.024800", "action": "created", "details": {"filename": "212222240047_19AI405.pdf", "parsed_reg_no": "212222240047", "parsed_subject_code": "19AI405"}}]', None, 0)
2026-01-01 20:06:03,042 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:06:03,044 - sqlalchemy.engine.Engine - INFO - [generated in 0.00150s] (3,)
2026-01-01 20:06:03,048 - app.services.artifact_service - INFO - Created artifact: 6df8d217-3358-4f07-b1d4-ae887c6c89f4
2026-01-01 20:06:03,056 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:06:03,058 - sqlalchemy.engine.Engine - INFO - [generated in 0.00220s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 20:06:03,066 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:14,435 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 20:06:15,181 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 20:06:15,187 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:06:15,196 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002D2546DFA10>
2026-01-01 20:06:15,199 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:06:15,200 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:06:15,201 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:06:15,202 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:06:15,202 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:06:15,407 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:36:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:36:15 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 20:06:15,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:06:15,410 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:06:15,412 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:06:15,413 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:06:15,416 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 20:06:15,421 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:06:15,423 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:06:15,425 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:06:15,427 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:06:15,428 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:06:15,636 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:36:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 20:06:15,637 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:06:15,639 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:06:15,641 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:06:15,641 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:06:15,643 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 20:06:15,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:15,801 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 20:06:15,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA', 3, '22007928', 'Kavin D', '212222240047', 'Z0FBQUFBQnBWb1pmb29QOGZDQjN2SWZZalZNS0JzVVN5ZmJFWEJrXy1JZDRvRW1nNDU5LWxoWkNJUzg4WEUzYnBaa2pyZHppcEZ5LVRubGVRdW5NUDJwV0d2Yk1FMmNNTnNEWnBfWFdoQThxMm83NTBZNHl1ZUh0a3BuaHZiNDRCUEFQNVhtMWdBSks=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 15, 36, 15, 644559, tzinfo=datetime.timezone.utc))
2026-01-01 20:06:15,808 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:15,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:15,976 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:06:15,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:06:16,022 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-01 20:06:16,023 - httpcore.connection - DEBUG - close.started
2026-01-01 20:06:16,024 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:06:16,025 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:16,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:16,135 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:06:16,136 - sqlalchemy.engine.Engine - INFO - [cached since 24.74s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:06:16,145 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:06:16,146 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] (datetime.datetime(2026, 1, 1, 14, 36, 16, 145052, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:06:16,149 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:16,157 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:06:16,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:16,284 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:06:16,285 - sqlalchemy.engine.Engine - INFO - [cached since 0.3094s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:06:16,342 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:06:16,344 - sqlalchemy.engine.Engine - INFO - [generated in 0.00314s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:06:16,354 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:06:16,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00314s] ('19AI405',)
2026-01-01 20:06:16,372 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:06:16,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.02021s ago] ('19AI405',)
2026-01-01 20:06:16,381 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:19,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:19,604 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:06:19,605 - sqlalchemy.engine.Engine - INFO - [cached since 28.21s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:06:19,617 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:06:19,618 - sqlalchemy.engine.Engine - INFO - [cached since 3.473s ago] (datetime.datetime(2026, 1, 1, 14, 36, 19, 616695, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:06:19,623 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:19,646 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-01 20:06:19,893 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:06:19,895 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:06:19,896 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:06:19,935 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:06:19,935 - sqlalchemy.engine.Engine - INFO - [cached since 3.582s ago] ('19AI405',)
2026-01-01 20:06:19,943 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:06:19,944 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] (3, '22007928', 4, 3)
2026-01-01 20:06:19,947 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:06:19,947 - sqlalchemy.engine.Engine - INFO - [cached since 16.89s ago] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-01 20:06:19,952 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 20:06:19,953 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:06:19,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('UPLOADING', 3)
2026-01-01 20:06:20,510 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-01 20:06:20,514 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:06:20,518 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002D2547C9090>
2026-01-01 20:06:20,519 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:06:20,521 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:06:20,521 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:06:20,524 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:06:20,525 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:06:20,705 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:36:20 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:36:20 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'281'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 20:06:20,707 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:06:20,708 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:06:20,711 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:06:20,711 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:06:20,715 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 866148412, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-01 20:06:20,716 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 866148412
2026-01-01 20:06:20,720 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:06:20,725 - sqlalchemy.engine.Engine - INFO - [generated in 0.00518s] (866148412, 3)
2026-01-01 20:06:20,730 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-01 20:06:20,738 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:06:20,740 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:06:20,741 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:06:20,743 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:06:20,747 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:06:20,848 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:36:20 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:06:20,850 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:06:20,851 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:06:20,854 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:06:20,854 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:06:20,857 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-01 20:06:20,858 - app.services.submission_service - ERROR - Assignment 4 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-01 20:06:20,865 - httpcore.connection - DEBUG - close.started
2026-01-01 20:06:20,866 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:06:20,867 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:06:20,873 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:06:20,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00240s] (3,)
2026-01-01 20:06:20,883 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:06:20,884 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] ('FAILED', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 1, 3)
2026-01-01 20:06:20,890 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:06:20,891 - sqlalchemy.engine.Engine - INFO - [cached since 17.85s ago] (3,)
2026-01-01 20:06:20,895 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:06:20,896 - sqlalchemy.engine.Engine - INFO - [cached since 17.84s ago] ('submission_failed', 'error', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"error": "Assignment 4 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-01 20:06:20,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:06:20,907 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:09:17,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:17,542 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:17,543 - sqlalchemy.engine.Engine - INFO - [cached since 206.1s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:17,551 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:17,552 - sqlalchemy.engine.Engine - INFO - [cached since 181.4s ago] (datetime.datetime(2026, 1, 1, 14, 39, 17, 550382, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:17,557 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:17,569 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:17,732 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:17,734 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:17,736 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:17,798 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:17,800 - sqlalchemy.engine.Engine - INFO - [cached since 181.5s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:17,805 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:18,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:18,849 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:18,851 - sqlalchemy.engine.Engine - INFO - [cached since 207.5s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:18,867 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:18,869 - sqlalchemy.engine.Engine - INFO - [cached since 182.7s ago] (datetime.datetime(2026, 1, 1, 14, 39, 18, 866531, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:18,877 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:18,892 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:19,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,028 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:19,029 - sqlalchemy.engine.Engine - INFO - [cached since 183.1s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:19,130 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,131 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:19,132 - sqlalchemy.engine.Engine - INFO - [cached since 207.7s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:19,146 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:19,147 - sqlalchemy.engine.Engine - INFO - [cached since 183s ago] (datetime.datetime(2026, 1, 1, 14, 39, 19, 145516, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:19,152 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,175 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:19,196 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:19,197 - sqlalchemy.engine.Engine - INFO - [cached since 182.9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:19,202 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,327 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,328 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:19,330 - sqlalchemy.engine.Engine - INFO - [cached since 183.4s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:19,394 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:19,395 - sqlalchemy.engine.Engine - INFO - [cached since 183.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:19,400 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,524 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:19,525 - sqlalchemy.engine.Engine - INFO - [cached since 208.1s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:19,531 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:19,532 - sqlalchemy.engine.Engine - INFO - [cached since 183.4s ago] (datetime.datetime(2026, 1, 1, 14, 39, 19, 531075, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:19,535 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,540 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:19,702 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,703 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:19,705 - sqlalchemy.engine.Engine - INFO - [cached since 183.7s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:19,761 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:19,762 - sqlalchemy.engine.Engine - INFO - [cached since 183.4s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:19,766 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,951 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:19,953 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:19,953 - sqlalchemy.engine.Engine - INFO - [cached since 208.6s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:19,964 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:19,964 - sqlalchemy.engine.Engine - INFO - [cached since 183.8s ago] (datetime.datetime(2026, 1, 1, 14, 39, 19, 963576, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:19,968 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:19,979 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:20,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:20,182 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:20,183 - sqlalchemy.engine.Engine - INFO - [cached since 208.8s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:20,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:20,189 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:20,191 - sqlalchemy.engine.Engine - INFO - [cached since 184.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:20,198 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:20,198 - sqlalchemy.engine.Engine - INFO - [cached since 184.1s ago] (datetime.datetime(2026, 1, 1, 14, 39, 20, 197476, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:20,202 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:20,213 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:20,260 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:20,262 - sqlalchemy.engine.Engine - INFO - [cached since 183.9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:20,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:20,386 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:20,388 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:20,390 - sqlalchemy.engine.Engine - INFO - [cached since 184.4s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:20,429 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:20,431 - sqlalchemy.engine.Engine - INFO - [cached since 184.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:20,437 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:20,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:20,634 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:20,635 - sqlalchemy.engine.Engine - INFO - [cached since 209.2s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:20,643 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:20,644 - sqlalchemy.engine.Engine - INFO - [cached since 184.5s ago] (datetime.datetime(2026, 1, 1, 14, 39, 20, 642734, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:20,648 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:20,658 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:20,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:20,806 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:20,807 - sqlalchemy.engine.Engine - INFO - [cached since 184.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:20,857 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:20,859 - sqlalchemy.engine.Engine - INFO - [cached since 184.5s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:20,864 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:24,062 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:24,063 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:09:24,064 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-01 20:09:24,065 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:24,065 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:24,066 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-01 20:09:24,067 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:24,068 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:24,068 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-01 20:09:24,069 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-01 20:09:24,071 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:24,072 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:24,074 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-01 20:09:24,075 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:24,076 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:09:24,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:24,214 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-01 20:09:24,215 - sqlalchemy.engine.Engine - INFO - [cached since 209.5s ago] ('admin',)
2026-01-01 20:09:24,590 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-01 20:09:24,592 - sqlalchemy.engine.Engine - INFO - [cached since 209.5s ago] (datetime.datetime(2026, 1, 1, 14, 39, 24, 590037, tzinfo=datetime.timezone.utc), 1)
2026-01-01 20:09:24,595 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:29,417 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:29,418 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:09:29,418 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 20:09:29,418 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:29,418 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 20:09:29,419 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 20:09:29,419 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:29,420 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:29,421 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:98304]
2026-01-01 20:09:29,422 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:90498]
2026-01-01 20:09:29,422 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:29,423 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:29,423 - python_multipart.multipart - DEBUG - Calling on_header_field with data[90542:90561]
2026-01-01 20:09:29,424 - python_multipart.multipart - DEBUG - Calling on_header_value with data[90563:90593]
2026-01-01 20:09:29,424 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:29,424 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:29,425 - python_multipart.multipart - DEBUG - Calling on_part_data with data[90597:90605]
2026-01-01 20:09:29,425 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:29,426 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:09:29,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:29,625 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 20:09:29,626 - sqlalchemy.engine.Engine - INFO - [cached since 206.7s ago] (1,)
2026-01-01 20:09:29,632 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 20:09:29,636 - app.services.file_processor - INFO - Saved file: ./uploads/pending/f1f6043f7cd147b09f9318567b78fd8b.pdf (hash: 69530c94d1cfd882...)
2026-01-01 20:09:29,637 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 20:09:29,638 - sqlalchemy.engine.Engine - INFO - [cached since 206.7s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 20:09:29,663 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-01 20:09:29,664 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:09:29,665 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('./uploads/pending/f1f6043f7cd147b09f9318567b78fd8b.pdf', 'PENDING', None, 3)
2026-01-01 20:09:29,668 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:09:29,669 - sqlalchemy.engine.Engine - INFO - [cached since 206.6s ago] (3,)
2026-01-01 20:09:29,672 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:09:29,673 - sqlalchemy.engine.Engine - INFO - [cached since 206.6s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 20:09:29,676 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:32,369 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:32,370 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:32,371 - sqlalchemy.engine.Engine - INFO - [cached since 221s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:32,378 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:32,379 - sqlalchemy.engine.Engine - INFO - [cached since 196.2s ago] (datetime.datetime(2026, 1, 1, 14, 39, 32, 378486, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:32,382 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:32,392 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:32,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:32,541 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:32,543 - sqlalchemy.engine.Engine - INFO - [cached since 196.6s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:32,593 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:32,594 - sqlalchemy.engine.Engine - INFO - [cached since 196.3s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:32,598 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:09:32,599 - sqlalchemy.engine.Engine - INFO - [cached since 196.2s ago] ('19AI405',)
2026-01-01 20:09:32,608 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:09:32,609 - sqlalchemy.engine.Engine - INFO - [cached since 196.3s ago] ('19AI405',)
2026-01-01 20:09:32,613 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:35,319 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:35,320 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:35,321 - sqlalchemy.engine.Engine - INFO - [cached since 223.9s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:35,330 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:35,332 - sqlalchemy.engine.Engine - INFO - [cached since 199.2s ago] (datetime.datetime(2026, 1, 1, 14, 39, 35, 329861, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:35,335 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:35,342 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-01 20:09:35,460 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:35,461 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:09:35,462 - sqlalchemy.engine.Engine - INFO - [cached since 195.6s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:09:35,508 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:09:35,509 - sqlalchemy.engine.Engine - INFO - [cached since 212.5s ago] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-01 20:09:35,515 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 20:09:35,516 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:09:35,517 - sqlalchemy.engine.Engine - INFO - [cached since 195.6s ago] ('UPLOADING', 3)
2026-01-01 20:09:36,044 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-01 20:09:36,048 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:09:36,053 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002D2547CAD50>
2026-01-01 20:09:36,056 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:09:36,057 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:09:36,057 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:09:36,059 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:09:36,060 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:09:36,205 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:39:36 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:39:36 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'280'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 20:09:36,207 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:09:36,208 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:09:36,211 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:09:36,212 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:09:36,215 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 45770478, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-01 20:09:36,216 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 45770478
2026-01-01 20:09:36,217 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:09:36,218 - sqlalchemy.engine.Engine - INFO - [cached since 195.5s ago] (45770478, 3)
2026-01-01 20:09:36,225 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-01 20:09:36,229 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:09:36,230 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:09:36,230 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:09:36,231 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:09:36,232 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:09:36,303 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:39:36 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:09:36,304 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:09:36,305 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:09:36,307 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:09:36,307 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:09:36,309 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-01 20:09:36,310 - app.services.submission_service - ERROR - Assignment 4 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-01 20:09:36,313 - httpcore.connection - DEBUG - close.started
2026-01-01 20:09:36,314 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:09:36,314 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:09:36,316 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:09:36,317 - sqlalchemy.engine.Engine - INFO - [cached since 195.4s ago] (3,)
2026-01-01 20:09:36,323 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:09:36,324 - sqlalchemy.engine.Engine - INFO - [cached since 195.4s ago] ('FAILED', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 2, 3)
2026-01-01 20:09:36,329 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:09:36,331 - sqlalchemy.engine.Engine - INFO - [cached since 213.3s ago] (3,)
2026-01-01 20:09:36,335 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:09:36,336 - sqlalchemy.engine.Engine - INFO - [cached since 213.3s ago] ('submission_failed', 'error', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"error": "Assignment 4 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-01 20:09:36,340 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:36,360 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:09:44,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:44,225 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:44,226 - sqlalchemy.engine.Engine - INFO - [cached since 232.8s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:44,235 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:44,235 - sqlalchemy.engine.Engine - INFO - [cached since 208.1s ago] (datetime.datetime(2026, 1, 1, 14, 39, 44, 234738, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:44,240 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:44,246 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:44,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:44,372 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:44,373 - sqlalchemy.engine.Engine - INFO - [cached since 208.4s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:44,423 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:44,424 - sqlalchemy.engine.Engine - INFO - [cached since 208.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:44,429 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:49,482 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:49,482 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:09:49,483 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 20:09:49,483 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:49,484 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 20:09:49,485 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 20:09:49,485 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:49,486 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:49,489 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:32768]
2026-01-01 20:09:49,491 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:156034]
2026-01-01 20:09:49,492 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:49,493 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:09:49,494 - python_multipart.multipart - DEBUG - Calling on_header_field with data[156078:156097]
2026-01-01 20:09:49,495 - python_multipart.multipart - DEBUG - Calling on_header_value with data[156099:156129]
2026-01-01 20:09:49,496 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:09:49,497 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:09:49,498 - python_multipart.multipart - DEBUG - Calling on_part_data with data[156133:156141]
2026-01-01 20:09:49,499 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:09:49,500 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:09:49,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:49,766 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 20:09:49,766 - sqlalchemy.engine.Engine - INFO - [cached since 226.8s ago] (1,)
2026-01-01 20:09:49,777 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 20:09:49,783 - app.services.file_processor - INFO - Saved file: ./uploads/pending/20de0301b67947c8988ea373333dd432.pdf (hash: 69530c94d1cfd882...)
2026-01-01 20:09:49,784 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 20:09:49,785 - sqlalchemy.engine.Engine - INFO - [cached since 226.8s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 20:09:49,834 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-01 20:09:49,836 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:09:49,837 - sqlalchemy.engine.Engine - INFO - [cached since 20.17s ago] ('./uploads/pending/20de0301b67947c8988ea373333dd432.pdf', 'PENDING', None, 3)
2026-01-01 20:09:49,842 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:09:49,843 - sqlalchemy.engine.Engine - INFO - [cached since 226.8s ago] (3,)
2026-01-01 20:09:49,848 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:09:49,849 - sqlalchemy.engine.Engine - INFO - [cached since 226.8s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 20:09:49,856 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:52,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:52,996 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:09:52,997 - sqlalchemy.engine.Engine - INFO - [cached since 241.6s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:09:53,008 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:09:53,009 - sqlalchemy.engine.Engine - INFO - [cached since 216.9s ago] (datetime.datetime(2026, 1, 1, 14, 39, 53, 7756, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:09:53,014 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:09:53,021 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:09:53,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:09:53,151 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:09:53,153 - sqlalchemy.engine.Engine - INFO - [cached since 217.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:09:53,197 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:09:53,199 - sqlalchemy.engine.Engine - INFO - [cached since 216.9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:09:53,205 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:09:53,206 - sqlalchemy.engine.Engine - INFO - [cached since 216.9s ago] ('19AI405',)
2026-01-01 20:09:53,213 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:09:53,214 - sqlalchemy.engine.Engine - INFO - [cached since 216.9s ago] ('19AI405',)
2026-01-01 20:09:53,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:10:23,928 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:10:23,929 - app.main - INFO - Database connections closed
2026-01-01 20:10:25,558 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:10:25,627 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:10:25,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:25,630 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:10:25,630 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:25,632 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:10:25,632 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:25,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:10:25,640 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,641 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,647 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,647 - sqlalchemy.engine.Engine - INFO - [cached since 0.007085s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,648 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,648 - sqlalchemy.engine.Engine - INFO - [cached since 0.008381s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,649 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.009981s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.01257s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,655 - sqlalchemy.engine.Engine - INFO - [cached since 0.01468s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,656 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:25,656 - sqlalchemy.engine.Engine - INFO - [cached since 0.01598s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:25,658 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:10:25,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:10:25,660 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:10:25,664 - app.main - INFO - Database tables created/verified
2026-01-01 20:10:25,664 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:10:25,664 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:10:25,665 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:10:27,106 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:10:27,182 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:10:27,182 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:27,184 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:10:27,184 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:27,186 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:10:27,187 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:10:27,191 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:10:27,195 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,201 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,202 - sqlalchemy.engine.Engine - INFO - [cached since 0.007436s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,204 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,205 - sqlalchemy.engine.Engine - INFO - [cached since 0.009883s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,206 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,207 - sqlalchemy.engine.Engine - INFO - [cached since 0.01175s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,207 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,208 - sqlalchemy.engine.Engine - INFO - [cached since 0.01321s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,209 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,210 - sqlalchemy.engine.Engine - INFO - [cached since 0.01503s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,211 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:10:27,212 - sqlalchemy.engine.Engine - INFO - [cached since 0.01705s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:10:27,215 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:10:27,215 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:10:27,221 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:10:27,227 - app.main - INFO - Database tables created/verified
2026-01-01 20:10:27,229 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:10:27,230 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:10:27,232 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:11:41,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:41,945 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:11:41,946 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:11:41,962 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:11:41,963 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] (datetime.datetime(2026, 1, 1, 14, 41, 41, 959238, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:11:41,966 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:41,971 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:11:42,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:42,081 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:11:42,082 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:11:42,132 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:11:42,135 - sqlalchemy.engine.Engine - INFO - [generated in 0.00255s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:11:42,142 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:11:42,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('19AI405',)
2026-01-01 20:11:42,150 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:11:42,153 - sqlalchemy.engine.Engine - INFO - [cached since 0.01087s ago] ('19AI405',)
2026-01-01 20:11:42,158 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:44,381 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:44,383 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:11:44,385 - sqlalchemy.engine.Engine - INFO - [cached since 2.441s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:11:44,402 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:11:44,404 - sqlalchemy.engine.Engine - INFO - [cached since 2.442s ago] (datetime.datetime(2026, 1, 1, 14, 41, 44, 400229, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:11:44,409 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:44,433 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-01 20:11:44,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:44,678 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:11:44,679 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:11:44,725 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:11:44,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00211s] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-01 20:11:44,733 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 20:11:44,739 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:11:44,740 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('UPLOADING', 3)
2026-01-01 20:11:45,358 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-01 20:11:45,372 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:11:45,376 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001AC313B3A10>
2026-01-01 20:11:45,378 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:11:45,382 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:11:45,382 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:11:45,385 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:11:45,386 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:11:45,508 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:41:45 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:41:45 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'281'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 20:11:45,510 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:11:45,511 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:11:45,513 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:11:45,514 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:11:45,517 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 993619589, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-01 20:11:45,518 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 993619589
2026-01-01 20:11:45,520 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:11:45,521 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] (993619589, 3)
2026-01-01 20:11:45,530 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-01 20:11:45,535 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:11:45,537 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:11:45,537 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:11:45,538 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:11:45,539 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:11:45,602 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:41:45 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:11:45,603 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:11:45,604 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:11:45,606 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:11:45,606 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:11:45,609 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-01 20:11:45,609 - app.services.submission_service - ERROR - Assignment 4 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-01 20:11:45,611 - httpcore.connection - DEBUG - close.started
2026-01-01 20:11:45,612 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:11:45,613 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:11:45,617 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:11:45,619 - sqlalchemy.engine.Engine - INFO - [generated in 0.00224s] (3,)
2026-01-01 20:11:45,624 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:11:45,625 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('FAILED', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 3, 3)
2026-01-01 20:11:45,633 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:11:45,634 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] (3,)
2026-01-01 20:11:45,639 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:11:45,640 - sqlalchemy.engine.Engine - INFO - [cached since 0.9146s ago] ('submission_failed', 'error', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"error": "Assignment 4 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-01 20:11:45,662 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:45,671 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:11:51,123 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:51,125 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:11:51,126 - sqlalchemy.engine.Engine - INFO - [cached since 9.181s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:11:51,141 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:11:51,143 - sqlalchemy.engine.Engine - INFO - [cached since 9.181s ago] (datetime.datetime(2026, 1, 1, 14, 41, 51, 140515, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:11:51,148 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:51,159 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:11:51,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:51,280 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:11:51,281 - sqlalchemy.engine.Engine - INFO - [cached since 9.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:11:51,327 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:11:51,328 - sqlalchemy.engine.Engine - INFO - [cached since 9.196s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:11:51,332 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:52,355 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:11:52,356 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-01 20:11:52,357 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-01 20:11:52,357 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:11:52,358 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-01 20:11:52,359 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-01 20:11:52,359 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:11:52,360 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:11:52,361 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-01 20:11:52,362 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:11:52,363 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-01 20:11:52,364 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-01 20:11:52,364 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-01 20:11:52,365 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-01 20:11:52,366 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-01 20:11:52,368 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-01 20:11:52,369 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-01 20:11:52,369 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-01 20:11:52,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:52,538 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-01 20:11:52,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] (1,)
2026-01-01 20:11:52,549 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-01 20:11:52,555 - app.services.file_processor - INFO - Saved file: ./uploads/pending/fe45adbea64a4f969bac4777c0d069a6.pdf (hash: 69530c94d1cfd882...)
2026-01-01 20:11:52,557 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-01 20:11:52,559 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-01 20:11:52,612 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-01 20:11:52,614 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:11:52,615 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('./uploads/pending/fe45adbea64a4f969bac4777c0d069a6.pdf', 'PENDING', None, 3)
2026-01-01 20:11:52,620 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:11:52,621 - sqlalchemy.engine.Engine - INFO - [cached since 6.989s ago] (3,)
2026-01-01 20:11:52,627 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:11:52,628 - sqlalchemy.engine.Engine - INFO - [cached since 7.903s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-01 20:11:52,637 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:55,163 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:55,164 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:11:55,165 - sqlalchemy.engine.Engine - INFO - [cached since 13.22s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:11:55,175 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:11:55,176 - sqlalchemy.engine.Engine - INFO - [cached since 13.21s ago] (datetime.datetime(2026, 1, 1, 14, 41, 55, 175099, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:11:55,180 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:11:55,190 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:11:55,337 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:11:55,339 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:11:55,340 - sqlalchemy.engine.Engine - INFO - [cached since 13.26s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:11:55,369 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:11:55,370 - sqlalchemy.engine.Engine - INFO - [cached since 13.24s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:11:55,373 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:11:55,374 - sqlalchemy.engine.Engine - INFO - [cached since 13.23s ago] ('19AI405',)
2026-01-01 20:11:55,379 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:11:55,382 - sqlalchemy.engine.Engine - INFO - [cached since 13.24s ago] ('19AI405',)
2026-01-01 20:11:55,386 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:03,628 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:03,629 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:12:03,630 - sqlalchemy.engine.Engine - INFO - [cached since 21.69s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:12:03,640 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:12:03,643 - sqlalchemy.engine.Engine - INFO - [cached since 21.68s ago] (datetime.datetime(2026, 1, 1, 14, 42, 3, 640341, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:12:03,646 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:03,654 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:12:03,769 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:03,771 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:12:03,773 - sqlalchemy.engine.Engine - INFO - [cached since 21.69s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:12:03,820 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:12:03,821 - sqlalchemy.engine.Engine - INFO - [cached since 21.69s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:12:03,825 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:12:03,826 - sqlalchemy.engine.Engine - INFO - [cached since 21.68s ago] ('19AI405',)
2026-01-01 20:12:03,834 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:12:03,835 - sqlalchemy.engine.Engine - INFO - [cached since 21.69s ago] ('19AI405',)
2026-01-01 20:12:03,841 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:05,335 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:05,336 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:12:05,337 - sqlalchemy.engine.Engine - INFO - [cached since 23.39s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:12:05,346 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:12:05,347 - sqlalchemy.engine.Engine - INFO - [cached since 23.38s ago] (datetime.datetime(2026, 1, 1, 14, 42, 5, 345858, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:12:05,350 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:05,375 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-01 20:12:05,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:05,502 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:12:05,503 - sqlalchemy.engine.Engine - INFO - [cached since 20.82s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:12:05,550 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:12:05,552 - sqlalchemy.engine.Engine - INFO - [cached since 20.83s ago] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-01 20:12:05,559 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 20:12:05,563 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:12:05,564 - sqlalchemy.engine.Engine - INFO - [cached since 20.83s ago] ('UPLOADING', 3)
2026-01-01 20:12:06,089 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-01 20:12:06,092 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:12:06,114 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001AC31484F50>
2026-01-01 20:12:06,118 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:12:06,119 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:12:06,121 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:12:06,124 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:12:06,125 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:12:06,174 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:42:06 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:42:06 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'281'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 20:12:06,176 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:12:06,176 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:12:06,178 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:12:06,178 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:12:06,180 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 919690812, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-01 20:12:06,181 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 919690812
2026-01-01 20:12:06,182 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:12:06,183 - sqlalchemy.engine.Engine - INFO - [cached since 20.66s ago] (919690812, 3)
2026-01-01 20:12:06,190 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-01 20:12:06,194 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:12:06,195 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:12:06,195 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:12:06,196 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:12:06,197 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:12:06,254 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:42:06 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:12:06,255 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:12:06,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:12:06,258 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:12:06,259 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:12:06,261 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-01 20:12:06,261 - app.services.submission_service - ERROR - Assignment 4 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-01 20:12:06,263 - httpcore.connection - DEBUG - close.started
2026-01-01 20:12:06,265 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:12:06,265 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:12:06,267 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:12:06,269 - sqlalchemy.engine.Engine - INFO - [cached since 20.65s ago] (3,)
2026-01-01 20:12:06,275 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-01 20:12:06,276 - sqlalchemy.engine.Engine - INFO - [cached since 20.65s ago] ('FAILED', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 4, 3)
2026-01-01 20:12:06,280 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:12:06,282 - sqlalchemy.engine.Engine - INFO - [cached since 20.65s ago] (3,)
2026-01-01 20:12:06,287 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:12:06,289 - sqlalchemy.engine.Engine - INFO - [cached since 21.56s ago] ('submission_failed', 'error', "Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"error": "Assignment 4 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-01 20:12:06,293 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:06,303 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 4 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-01 20:12:40,485 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:12:40,485 - app.main - INFO - Database connections closed
2026-01-01 20:12:42,083 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:12:42,156 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:12:42,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:42,159 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:12:42,159 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:42,161 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:12:42,161 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:42,166 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:42,170 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,171 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,178 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,179 - sqlalchemy.engine.Engine - INFO - [cached since 0.009239s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,181 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.01162s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,183 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,183 - sqlalchemy.engine.Engine - INFO - [cached since 0.01343s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.01513s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.01684s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:42,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.01841s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:42,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:12:42,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:12:42,195 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:42,198 - app.main - INFO - Database tables created/verified
2026-01-01 20:12:42,199 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:12:42,199 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:12:42,201 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:12:43,558 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:12:43,624 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:12:43,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:43,627 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:12:43,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:43,628 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:12:43,629 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:12:43,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:12:43,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,637 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,642 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,643 - sqlalchemy.engine.Engine - INFO - [cached since 0.006206s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,644 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,644 - sqlalchemy.engine.Engine - INFO - [cached since 0.008083s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,645 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,646 - sqlalchemy.engine.Engine - INFO - [cached since 0.00948s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,647 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,647 - sqlalchemy.engine.Engine - INFO - [cached since 0.01073s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,648 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,648 - sqlalchemy.engine.Engine - INFO - [cached since 0.01212s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:12:43,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.01426s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:12:43,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:12:43,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:12:43,656 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:12:43,659 - app.main - INFO - Database tables created/verified
2026-01-01 20:12:43,659 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:12:43,660 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:12:43,661 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:13:47,831 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:13:47,832 - app.main - INFO - Database connections closed
2026-01-01 20:13:49,271 - app.main - INFO - Starting Examination Middleware...
2026-01-01 20:13:49,345 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-01 20:13:49,346 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:13:49,348 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-01 20:13:49,348 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:13:49,350 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-01 20:13:49,350 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-01 20:13:49,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:49,355 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,356 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,362 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,363 - sqlalchemy.engine.Engine - INFO - [cached since 0.007741s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,364 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,365 - sqlalchemy.engine.Engine - INFO - [cached since 0.009576s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,366 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,366 - sqlalchemy.engine.Engine - INFO - [cached since 0.01128s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,368 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,369 - sqlalchemy.engine.Engine - INFO - [cached since 0.0135s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,370 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,370 - sqlalchemy.engine.Engine - INFO - [cached since 0.0152s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-01 20:13:49,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.01669s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-01 20:13:49,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-01 20:13:49,374 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('workflowstatus', 'pg_catalog')
2026-01-01 20:13:49,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:49,380 - app.main - INFO - Database tables created/verified
2026-01-01 20:13:49,381 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-01 20:13:49,381 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-01 20:13:49,382 - app.main - INFO - Examination Middleware started successfully
2026-01-01 20:13:51,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:51,989 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:13:51,990 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:13:52,004 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:13:52,005 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] (datetime.datetime(2026, 1, 1, 14, 43, 52, 2091, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:13:52,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:52,018 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:13:52,140 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:52,145 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:13:52,146 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:13:52,199 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:13:52,201 - sqlalchemy.engine.Engine - INFO - [generated in 0.00192s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:13:52,210 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:13:52,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('19AI405',)
2026-01-01 20:13:52,219 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:13:52,221 - sqlalchemy.engine.Engine - INFO - [cached since 0.01104s ago] ('19AI405',)
2026-01-01 20:13:52,225 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:54,634 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:54,636 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:13:54,637 - sqlalchemy.engine.Engine - INFO - [cached since 2.648s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:13:54,648 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:13:54,649 - sqlalchemy.engine.Engine - INFO - [cached since 2.645s ago] (datetime.datetime(2026, 1, 1, 14, 43, 54, 648121, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:13:54,655 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:54,677 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-01 20:13:54,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:54,829 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:13:54,830 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:13:54,866 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-01 20:13:54,867 - sqlalchemy.engine.Engine - INFO - [cached since 2.657s ago] ('19AI405',)
2026-01-01 20:13:54,876 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_assignment_id=$1::INTEGER WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:13:54,877 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] (2, 3)
2026-01-01 20:13:54,885 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:13:54,886 - sqlalchemy.engine.Engine - INFO - [generated in 0.00156s] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-01 20:13:54,892 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-01 20:13:54,893 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:13:54,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('UPLOADING', 3)
2026-01-01 20:13:55,516 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-01 20:13:55,529 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:13:55,535 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000276CCF67770>
2026-01-01 20:13:55,541 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:13:55,543 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:13:55,543 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:13:55,545 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:13:55,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:13:55,671 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:43:55 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:43:55 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'281'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-01 20:13:55,673 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:13:55,674 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:13:55,676 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:13:55,677 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:13:55,680 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 294740899, 'license': 'unknown', 'author': 'Kavin D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-01 20:13:55,681 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 294740899
2026-01-01 20:13:55,684 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:13:55,685 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] (294740899, 3)
2026-01-01 20:13:55,688 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-01 20:13:55,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:13:55,694 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:13:55,694 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:13:55,696 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:13:55,697 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:13:55,905 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:43:55 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:13:55,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:13:55,907 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:13:55,909 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:13:55,910 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:13:55,912 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-01 20:13:55,913 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-01 20:13:55,915 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-01 20:13:55,916 - sqlalchemy.engine.Engine - INFO - [cached since 1.023s ago] ('SUBMITTING', 3)
2026-01-01 20:13:55,919 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 294740899
2026-01-01 20:13:55,925 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:13:55,926 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:13:55,927 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:13:55,928 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:13:55,928 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:13:58,500 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:43:55 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:13:58,501 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:13:58,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:13:58,504 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:13:58,504 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:13:58,506 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-01 20:13:58,507 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-01 20:13:58,507 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-01 20:13:58,512 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:13:58,514 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:13:58,514 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:13:58,516 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:13:58,517 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:13:58,700 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:43:58 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-01 20:13:58,700 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:13:58,701 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:13:58,702 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:13:58,702 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:13:58,704 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767278636, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 188644, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767278636, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-01 20:13:58,704 - app.services.submission_service - INFO - Submission status: submitted
2026-01-01 20:13:58,705 - app.services.submission_service - INFO - Submission ID: 3
2026-01-01 20:13:58,706 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-01 20:13:58,707 - app.services.submission_service - INFO - Submission timemodified: 1767278636
2026-01-01 20:13:58,707 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-01 20:13:58,708 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-01 20:13:58,708 - app.services.submission_service - INFO - Can edit: True
2026-01-01 20:13:58,709 - app.services.submission_service - INFO - Can submit: False
2026-01-01 20:13:58,710 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-01 20:13:58,711 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-01 20:13:58,711 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-01 20:13:58,713 - httpcore.connection - DEBUG - close.started
2026-01-01 20:13:58,713 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:13:58,714 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 294740899, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260101144358'}
2026-01-01 20:13:58,714 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-01 20:13:58,717 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:13:58,718 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] (3,)
2026-01-01 20:13:58,723 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2026-01-01 20:13:58,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('COMPLETED', '3', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260101144358', datetime.datetime(2026, 1, 1, 14, 43, 58, 722066), datetime.datetime(2026, 1, 1, 14, 43, 58, 722082), 3)
2026-01-01 20:13:58,729 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-01 20:13:58,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] (3,)
2026-01-01 20:13:58,733 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-01 20:13:58,734 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-01 20:13:58,734 - sqlalchemy.engine.Engine - INFO - [cached since 3.85s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 294740899, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260101144358"}', None, None)
2026-01-01 20:13:58,738 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:58,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:58,842 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-01 20:13:58,843 - sqlalchemy.engine.Engine - INFO - [cached since 4.014s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-01 20:13:58,885 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:59,009 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:59,010 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:13:59,011 - sqlalchemy.engine.Engine - INFO - [cached since 7.022s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:13:59,020 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:13:59,021 - sqlalchemy.engine.Engine - INFO - [cached since 7.017s ago] (datetime.datetime(2026, 1, 1, 14, 43, 59, 20161, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:13:59,025 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:13:59,031 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:13:59,169 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:13:59,170 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:13:59,171 - sqlalchemy.engine.Engine - INFO - [cached since 7.026s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:13:59,208 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:13:59,209 - sqlalchemy.engine.Engine - INFO - [cached since 7.01s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:13:59,214 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:14:04,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:14:04,561 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:14:04,562 - sqlalchemy.engine.Engine - INFO - [cached since 12.57s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:14:04,569 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:14:04,570 - sqlalchemy.engine.Engine - INFO - [cached since 12.57s ago] (datetime.datetime(2026, 1, 1, 14, 44, 4, 569464, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:14:04,573 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:14:04,581 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:14:04,708 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:14:04,709 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:14:04,710 - sqlalchemy.engine.Engine - INFO - [cached since 12.57s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:14:04,758 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:14:04,759 - sqlalchemy.engine.Engine - INFO - [cached since 12.56s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:14:04,764 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:14:05,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:14:05,596 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:14:05,597 - sqlalchemy.engine.Engine - INFO - [cached since 13.61s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:14:05,607 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:14:05,610 - sqlalchemy.engine.Engine - INFO - [cached since 13.61s ago] (datetime.datetime(2026, 1, 1, 14, 44, 5, 606884, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:14:05,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:14:05,619 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:14:05,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:14:05,749 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:14:05,751 - sqlalchemy.engine.Engine - INFO - [cached since 13.61s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:14:05,801 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:14:05,803 - sqlalchemy.engine.Engine - INFO - [cached since 13.6s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:14:05,807 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:09,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:09,331 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:26:09,332 - sqlalchemy.engine.Engine - INFO - [cached since 737.3s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:26:09,340 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:26:09,341 - sqlalchemy.engine.Engine - INFO - [cached since 737.3s ago] (datetime.datetime(2026, 1, 1, 14, 56, 9, 339640, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:26:09,344 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:09,360 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:26:09,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:09,495 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:26:09,497 - sqlalchemy.engine.Engine - INFO - [cached since 737.4s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:26:09,549 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:26:09,550 - sqlalchemy.engine.Engine - INFO - [cached since 737.4s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:26:09,555 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:10,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:10,293 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:26:10,295 - sqlalchemy.engine.Engine - INFO - [cached since 738.3s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:26:10,306 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:26:10,310 - sqlalchemy.engine.Engine - INFO - [cached since 738.3s ago] (datetime.datetime(2026, 1, 1, 14, 56, 10, 305737, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:26:10,314 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:10,324 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:26:10,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:10,445 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:26:10,446 - sqlalchemy.engine.Engine - INFO - [cached since 738.3s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:26:10,491 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:26:10,492 - sqlalchemy.engine.Engine - INFO - [cached since 738.3s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:26:10,497 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:11,122 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:11,124 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:26:11,125 - sqlalchemy.engine.Engine - INFO - [cached since 739.1s ago] ('pXa-qClam61rwiICVqguboz5n4Y3kKDdGoF1A5GNYMA',)
2026-01-01 20:26:11,136 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:26:11,137 - sqlalchemy.engine.Engine - INFO - [cached since 739.1s ago] (datetime.datetime(2026, 1, 1, 14, 56, 11, 135293, tzinfo=datetime.timezone.utc), 5)
2026-01-01 20:26:11,141 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:11,147 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:26:11,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:11,277 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:26:11,278 - sqlalchemy.engine.Engine - INFO - [cached since 739.1s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:26:11,305 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:26:11,307 - sqlalchemy.engine.Engine - INFO - [cached since 739.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:26:11,312 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:20,620 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-01 20:26:21,211 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-01 20:26:21,216 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-01 20:26:21,221 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000276CD005A90>
2026-01-01 20:26:21,227 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:26:21,229 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:26:21,230 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:26:21,231 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:26:21,232 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:26:21,422 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:56:21 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Thu, 01 Jan 2026 14:56:21 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-01 20:26:21,423 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:26:21,423 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:26:21,425 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:26:21,426 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:26:21,428 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-01 20:26:21,434 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-01 20:26:21,435 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-01 20:26:21,436 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-01 20:26:21,438 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-01 20:26:21,438 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-01 20:26:21,592 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 01 Jan 2026 14:56:21 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-01 20:26:21,594 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-01 20:26:21,598 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-01 20:26:21,600 - httpcore.http11 - DEBUG - response_closed.started
2026-01-01 20:26:21,601 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-01 20:26:21,605 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-01 20:26:21,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:21,745 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-01 20:26:21,745 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('z5c4rVav1IE5Sdn4AgJppLJ_KCCs4-C4hExXgeGSgwE', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWb3NWcVhuN3FJd3l0Yk1wWWFPdk9xSDlmWFdpLTlzTjZaS0sxRkRjeEpidC1ER1M2eHp6SE5KZ2dQRVJ3UFlLbUZiMk9BQ3lRdC1IYWpvbnZwS0kyc21INGZ3TXA2NzRGSHUyTzdpQWp4MVlIcWZlWEJ1WFBQUXpUaThvOHhhYlR5X00=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 1, 15, 56, 21, 605541, tzinfo=datetime.timezone.utc))
2026-01-01 20:26:21,751 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:21,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:21,907 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:26:21,909 - sqlalchemy.engine.Engine - INFO - [cached since 749.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:26:21,955 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 0
2026-01-01 20:26:21,957 - httpcore.connection - DEBUG - close.started
2026-01-01 20:26:21,958 - httpcore.connection - DEBUG - close.complete
2026-01-01 20:26:21,960 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:22,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:22,092 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-01 20:26:22,092 - sqlalchemy.engine.Engine - INFO - [cached since 750.1s ago] ('z5c4rVav1IE5Sdn4AgJppLJ_KCCs4-C4hExXgeGSgwE',)
2026-01-01 20:26:22,099 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-01 20:26:22,099 - sqlalchemy.engine.Engine - INFO - [cached since 750.1s ago] (datetime.datetime(2026, 1, 1, 14, 56, 22, 98971, tzinfo=datetime.timezone.utc), 6)
2026-01-01 20:26:22,103 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:26:22,108 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-01 20:26:22,216 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-01 20:26:22,217 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-01 20:26:22,218 - sqlalchemy.engine.Engine - INFO - [cached since 750.1s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-01 20:26:22,258 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-01 20:26:22,260 - sqlalchemy.engine.Engine - INFO - [cached since 750.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-01 20:26:22,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-01 20:30:00,168 - app.main - INFO - Shutting down Examination Middleware...
2026-01-01 20:30:00,170 - app.main - INFO - Database connections closed
2026-01-02 14:00:41,122 - app.main - INFO - Starting Examination Middleware...
2026-01-02 14:00:41,229 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 14:00:41,229 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:00:41,247 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 14:00:41,248 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:00:41,251 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 14:00:41,252 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:00:41,256 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:00:41,260 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,261 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,280 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,281 - sqlalchemy.engine.Engine - INFO - [cached since 0.02075s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,282 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,283 - sqlalchemy.engine.Engine - INFO - [cached since 0.02271s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,284 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,284 - sqlalchemy.engine.Engine - INFO - [cached since 0.02461s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,286 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,286 - sqlalchemy.engine.Engine - INFO - [cached since 0.02639s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,288 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,288 - sqlalchemy.engine.Engine - INFO - [cached since 0.02821s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,289 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:00:41,290 - sqlalchemy.engine.Engine - INFO - [cached since 0.02984s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:00:41,292 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 14:00:41,292 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('workflowstatus', 'pg_catalog')
2026-01-02 14:00:41,297 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:00:41,303 - app.main - INFO - Database tables created/verified
2026-01-02 14:00:41,304 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 14:00:41,304 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 14:00:41,305 - app.main - INFO - Examination Middleware started successfully
2026-01-02 14:01:23,377 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:23,378 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:01:23,379 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 14:01:23,380 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:23,381 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:23,382 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 14:01:23,385 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:23,386 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:23,390 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 14:01:23,393 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 14:01:23,395 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:23,396 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:23,398 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 14:01:23,400 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:23,401 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:01:23,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:01:23,631 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 14:01:23,638 - sqlalchemy.engine.Engine - INFO - [generated in 0.00717s] ('admin',)
2026-01-02 14:01:24,241 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 14:01:24,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] (datetime.datetime(2026, 1, 2, 8, 31, 24, 238238, tzinfo=datetime.timezone.utc), 1)
2026-01-02 14:01:24,245 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:24,246 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:01:24,246 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 14:01:24,247 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:24,248 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:24,249 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 14:01:24,250 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:24,251 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:24,252 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 14:01:24,254 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 14:01:24,255 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:24,256 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:24,259 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 14:01:24,259 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:24,263 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:01:24,277 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:01:24,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:01:24,477 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 14:01:24,478 - sqlalchemy.engine.Engine - INFO - [cached since 0.8465s ago] ('admin',)
2026-01-02 14:01:25,090 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 14:01:25,091 - sqlalchemy.engine.Engine - INFO - [cached since 0.8507s ago] (datetime.datetime(2026, 1, 2, 8, 31, 25, 89090, tzinfo=datetime.timezone.utc), 1)
2026-01-02 14:01:25,095 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:01:53,306 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:53,307 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:01:53,308 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 14:01:53,308 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:53,309 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 14:01:53,310 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 14:01:53,310 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:53,311 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:53,312 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:65536]
2026-01-02 14:01:53,318 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-02 14:01:53,319 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-02 14:01:53,320 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-02 14:01:53,321 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:16384]
2026-01-02 14:01:53,323 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:32768]
2026-01-02 14:01:53,325 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:24962]
2026-01-02 14:01:53,325 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:53,326 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:01:53,327 - python_multipart.multipart - DEBUG - Calling on_header_field with data[25006:25025]
2026-01-02 14:01:53,328 - python_multipart.multipart - DEBUG - Calling on_header_value with data[25027:25057]
2026-01-02 14:01:53,328 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:01:53,329 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:01:53,330 - python_multipart.multipart - DEBUG - Calling on_part_data with data[25061:25069]
2026-01-02 14:01:53,331 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:01:53,333 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:01:53,486 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:01:53,489 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 14:01:53,490 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] (1,)
2026-01-02 14:01:53,514 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 14:01:53,524 - app.services.file_processor - INFO - Saved file: ./uploads/pending/57ff337970eb4c619325b791f18be55a.pdf (hash: 69530c94d1cfd882...)
2026-01-02 14:01:53,530 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 14:01:53,532 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 14:01:53,596 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 14:01:53,599 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 14:01:53,601 - sqlalchemy.engine.Engine - INFO - [generated in 0.00164s] ('./uploads/pending/57ff337970eb4c619325b791f18be55a.pdf', 'PENDING', None, 3)
2026-01-02 14:01:53,612 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 14:01:53,614 - sqlalchemy.engine.Engine - INFO - [generated in 0.00192s] (3,)
2026-01-02 14:01:53,628 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 14:01:53,630 - sqlalchemy.engine.Engine - INFO - [generated in 0.00258s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 14:01:53,646 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:02:15,238 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 14:02:16,453 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 14:02:16,458 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 14:02:16,465 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002512BDBFA10>
2026-01-02 14:02:16,468 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:02:16,469 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:02:16,470 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:02:16,471 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:02:16,472 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:02:16,873 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:32:16 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 08:32:16 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 14:02:16,877 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:02:16,877 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:02:16,880 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:02:16,885 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:02:16,888 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 14:02:16,892 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:02:16,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:02:16,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:02:16,897 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:02:16,897 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:02:19,295 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:32:16 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 14:02:19,297 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:02:19,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:02:19,307 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:02:19,308 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:02:19,311 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 14:02:19,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:02:19,493 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 14:02:19,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNEtUUmFzYXVxSXUyakxuWjdwVjAxdmRWUW1BeFBHeU0xQUNZeVc4V2pseWxoaXhyWEx0N2gtcG9JRE4zcGlQRWRJZlVGaGhFV3FfQkdmcGpfNll3eUpJMk5lVUZqOHp6VXdhRnliVjFVZ1dSbnc1V2xQQzJGSmI2UHZXSXh6bTJHUDg=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 9, 32, 19, 312899, tzinfo=datetime.timezone.utc))
2026-01-02 14:02:19,503 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:02:19,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:02:19,657 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:02:19,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00178s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:02:19,706 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 14:02:19,709 - httpcore.connection - DEBUG - close.started
2026-01-02 14:02:19,710 - httpcore.connection - DEBUG - close.complete
2026-01-02 14:02:19,727 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:02:19,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:02:19,881 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:02:19,882 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:02:19,909 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:02:19,910 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] (datetime.datetime(2026, 1, 2, 8, 32, 19, 908196, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:02:19,913 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:02:19,923 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:02:20,062 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:02:20,066 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:02:20,069 - sqlalchemy.engine.Engine - INFO - [cached since 0.4122s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:02:20,126 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:02:20,129 - sqlalchemy.engine.Engine - INFO - [generated in 0.00305s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:02:20,139 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:02:20,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00222s] ('19AI405',)
2026-01-02 14:02:20,153 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:02:20,155 - sqlalchemy.engine.Engine - INFO - [cached since 0.01663s ago] ('19AI405',)
2026-01-02 14:02:20,161 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:02:44,621 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 14:05:18,951 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:18,952 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:18,953 - sqlalchemy.engine.Engine - INFO - [cached since 179.1s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:18,964 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:18,966 - sqlalchemy.engine.Engine - INFO - [cached since 179.1s ago] (datetime.datetime(2026, 1, 2, 8, 35, 18, 964315, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:18,971 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:18,991 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:19,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:19,152 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:19,154 - sqlalchemy.engine.Engine - INFO - [cached since 179.5s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:19,206 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:19,207 - sqlalchemy.engine.Engine - INFO - [cached since 179.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:19,211 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:19,213 - sqlalchemy.engine.Engine - INFO - [cached since 179.1s ago] ('19AI405',)
2026-01-02 14:05:19,221 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:19,222 - sqlalchemy.engine.Engine - INFO - [cached since 179.1s ago] ('19AI405',)
2026-01-02 14:05:19,226 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:20,080 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:20,082 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:20,083 - sqlalchemy.engine.Engine - INFO - [cached since 180.2s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:20,095 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:20,097 - sqlalchemy.engine.Engine - INFO - [cached since 180.2s ago] (datetime.datetime(2026, 1, 2, 8, 35, 20, 94783, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:20,102 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:20,124 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:20,275 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:20,278 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:20,297 - sqlalchemy.engine.Engine - INFO - [cached since 180.6s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:20,351 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:20,354 - sqlalchemy.engine.Engine - INFO - [cached since 180.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:20,359 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:20,364 - sqlalchemy.engine.Engine - INFO - [cached since 180.2s ago] ('19AI405',)
2026-01-02 14:05:20,374 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:20,376 - sqlalchemy.engine.Engine - INFO - [cached since 180.2s ago] ('19AI405',)
2026-01-02 14:05:20,381 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:21,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:21,028 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:21,030 - sqlalchemy.engine.Engine - INFO - [cached since 181.1s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:21,043 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:21,043 - sqlalchemy.engine.Engine - INFO - [cached since 181.1s ago] (datetime.datetime(2026, 1, 2, 8, 35, 21, 42506, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:21,049 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:21,075 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:21,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:21,230 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:21,232 - sqlalchemy.engine.Engine - INFO - [cached since 181.6s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:21,285 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:21,287 - sqlalchemy.engine.Engine - INFO - [cached since 181.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:21,291 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:21,292 - sqlalchemy.engine.Engine - INFO - [cached since 181.2s ago] ('19AI405',)
2026-01-02 14:05:21,301 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:21,305 - sqlalchemy.engine.Engine - INFO - [cached since 181.2s ago] ('19AI405',)
2026-01-02 14:05:21,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:21,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:21,663 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:21,664 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:21,675 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:21,676 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] (datetime.datetime(2026, 1, 2, 8, 35, 21, 674581, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:21,684 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:21,704 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:21,854 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:21,856 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:21,857 - sqlalchemy.engine.Engine - INFO - [cached since 182.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:21,906 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:21,908 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:21,915 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:21,918 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] ('19AI405',)
2026-01-02 14:05:21,926 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:21,931 - sqlalchemy.engine.Engine - INFO - [cached since 181.8s ago] ('19AI405',)
2026-01-02 14:05:21,936 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:22,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:22,391 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:22,392 - sqlalchemy.engine.Engine - INFO - [cached since 182.5s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:22,403 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:22,408 - sqlalchemy.engine.Engine - INFO - [cached since 182.5s ago] (datetime.datetime(2026, 1, 2, 8, 35, 22, 403179, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:22,414 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:22,437 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:22,698 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:22,699 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:22,701 - sqlalchemy.engine.Engine - INFO - [cached since 183s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:22,753 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:22,755 - sqlalchemy.engine.Engine - INFO - [cached since 182.6s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:22,759 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:22,761 - sqlalchemy.engine.Engine - INFO - [cached since 182.6s ago] ('19AI405',)
2026-01-02 14:05:22,771 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:22,773 - sqlalchemy.engine.Engine - INFO - [cached since 182.6s ago] ('19AI405',)
2026-01-02 14:05:22,778 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:25,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:25,740 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:25,741 - sqlalchemy.engine.Engine - INFO - [cached since 185.9s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:25,751 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:25,753 - sqlalchemy.engine.Engine - INFO - [cached since 185.8s ago] (datetime.datetime(2026, 1, 2, 8, 35, 25, 751253, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:25,757 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:25,769 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:25,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:26,001 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:26,003 - sqlalchemy.engine.Engine - INFO - [cached since 186.3s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:26,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:26,019 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:26,022 - sqlalchemy.engine.Engine - INFO - [cached since 186.1s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:26,035 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:26,038 - sqlalchemy.engine.Engine - INFO - [cached since 186.1s ago] (datetime.datetime(2026, 1, 2, 8, 35, 26, 34163, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:26,042 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:26,066 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:26,079 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:26,082 - sqlalchemy.engine.Engine - INFO - [cached since 186s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:26,088 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,090 - sqlalchemy.engine.Engine - INFO - [cached since 186s ago] ('19AI405',)
2026-01-02 14:05:26,100 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,102 - sqlalchemy.engine.Engine - INFO - [cached since 186s ago] ('19AI405',)
2026-01-02 14:05:26,106 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:26,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:26,235 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:26,237 - sqlalchemy.engine.Engine - INFO - [cached since 186.6s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:26,285 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:26,287 - sqlalchemy.engine.Engine - INFO - [cached since 186.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:26,290 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,291 - sqlalchemy.engine.Engine - INFO - [cached since 186.2s ago] ('19AI405',)
2026-01-02 14:05:26,305 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,306 - sqlalchemy.engine.Engine - INFO - [cached since 186.2s ago] ('19AI405',)
2026-01-02 14:05:26,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:26,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:26,433 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:26,434 - sqlalchemy.engine.Engine - INFO - [cached since 186.6s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:26,443 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:26,444 - sqlalchemy.engine.Engine - INFO - [cached since 186.5s ago] (datetime.datetime(2026, 1, 2, 8, 35, 26, 443391, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:26,450 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:26,473 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:26,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:26,632 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:26,633 - sqlalchemy.engine.Engine - INFO - [cached since 187s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:26,678 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:26,680 - sqlalchemy.engine.Engine - INFO - [cached since 186.6s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:26,686 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,688 - sqlalchemy.engine.Engine - INFO - [cached since 186.5s ago] ('19AI405',)
2026-01-02 14:05:26,697 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:26,699 - sqlalchemy.engine.Engine - INFO - [cached since 186.6s ago] ('19AI405',)
2026-01-02 14:05:26,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:31,991 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 14:05:31,992 - app.main - INFO - Database connections closed
2026-01-02 14:05:39,547 - app.main - INFO - Starting Examination Middleware...
2026-01-02 14:05:39,621 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 14:05:39,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:05:39,625 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 14:05:39,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:05:39,627 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 14:05:39,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:05:39,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:39,637 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,637 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,646 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,647 - sqlalchemy.engine.Engine - INFO - [cached since 0.01006s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,648 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,649 - sqlalchemy.engine.Engine - INFO - [cached since 0.01208s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.01385s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.01569s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.01737s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:05:39,656 - sqlalchemy.engine.Engine - INFO - [cached since 0.01933s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:05:39,658 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 14:05:39,659 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('workflowstatus', 'pg_catalog')
2026-01-02 14:05:39,663 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:39,667 - app.main - INFO - Database tables created/verified
2026-01-02 14:05:39,667 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 14:05:39,668 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 14:05:39,669 - app.main - INFO - Examination Middleware started successfully
2026-01-02 14:05:46,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:46,544 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:46,545 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:46,554 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:46,555 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] (datetime.datetime(2026, 1, 2, 8, 35, 46, 553150, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:46,557 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:46,562 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:46,642 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:46,646 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:46,648 - sqlalchemy.engine.Engine - INFO - [generated in 0.00208s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:46,687 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:46,688 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:46,692 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:46,693 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('19AI405',)
2026-01-02 14:05:46,700 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:46,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.008518s ago] ('19AI405',)
2026-01-02 14:05:46,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:55,317 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:05:55,318 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:05:55,319 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 14:05:55,320 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:05:55,320 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:05:55,321 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 14:05:55,321 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:05:55,322 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:05:55,323 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 14:05:55,323 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 14:05:55,325 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:05:55,326 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:05:55,326 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 14:05:55,327 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:05:55,328 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:05:55,491 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:55,500 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 14:05:55,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00463s] ('admin',)
2026-01-02 14:05:56,124 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 14:05:56,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00239s] (datetime.datetime(2026, 1, 2, 8, 35, 56, 122355, tzinfo=datetime.timezone.utc), 1)
2026-01-02 14:05:56,131 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:59,645 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:59,647 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:05:59,648 - sqlalchemy.engine.Engine - INFO - [cached since 13.1s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:05:59,659 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:05:59,661 - sqlalchemy.engine.Engine - INFO - [cached since 13.11s ago] (datetime.datetime(2026, 1, 2, 8, 35, 59, 659359, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:05:59,665 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:05:59,686 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:05:59,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:05:59,838 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:05:59,840 - sqlalchemy.engine.Engine - INFO - [cached since 13.19s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:05:59,884 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:05:59,886 - sqlalchemy.engine.Engine - INFO - [cached since 13.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:05:59,892 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:59,893 - sqlalchemy.engine.Engine - INFO - [cached since 13.2s ago] ('19AI405',)
2026-01-02 14:05:59,900 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:05:59,902 - sqlalchemy.engine.Engine - INFO - [cached since 13.21s ago] ('19AI405',)
2026-01-02 14:05:59,906 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:00,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:00,490 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:00,492 - sqlalchemy.engine.Engine - INFO - [cached since 13.95s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:00,503 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:00,507 - sqlalchemy.engine.Engine - INFO - [cached since 13.95s ago] (datetime.datetime(2026, 1, 2, 8, 36, 0, 502566, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:00,513 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:00,533 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:00,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:00,677 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:00,687 - sqlalchemy.engine.Engine - INFO - [cached since 14.04s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:00,733 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:00,736 - sqlalchemy.engine.Engine - INFO - [cached since 14.05s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:00,741 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:00,743 - sqlalchemy.engine.Engine - INFO - [cached since 14.05s ago] ('19AI405',)
2026-01-02 14:06:00,751 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:00,753 - sqlalchemy.engine.Engine - INFO - [cached since 14.06s ago] ('19AI405',)
2026-01-02 14:06:00,757 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:10,399 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:10,401 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:10,403 - sqlalchemy.engine.Engine - INFO - [cached since 23.86s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:10,417 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:10,418 - sqlalchemy.engine.Engine - INFO - [cached since 23.86s ago] (datetime.datetime(2026, 1, 2, 8, 36, 10, 417236, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:10,423 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:10,446 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:10,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:10,608 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:10,609 - sqlalchemy.engine.Engine - INFO - [cached since 23.96s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:10,648 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:10,650 - sqlalchemy.engine.Engine - INFO - [cached since 23.96s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:10,654 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:10,655 - sqlalchemy.engine.Engine - INFO - [cached since 23.96s ago] ('19AI405',)
2026-01-02 14:06:10,754 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:10,756 - sqlalchemy.engine.Engine - INFO - [cached since 24.06s ago] ('19AI405',)
2026-01-02 14:06:10,758 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:10,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:10,762 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:10,764 - sqlalchemy.engine.Engine - INFO - [cached since 24.22s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:10,774 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:10,774 - sqlalchemy.engine.Engine - INFO - [cached since 24.22s ago] (datetime.datetime(2026, 1, 2, 8, 36, 10, 773583, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:10,779 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:10,802 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:10,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:10,964 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:10,966 - sqlalchemy.engine.Engine - INFO - [cached since 24.32s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:11,026 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:11,031 - sqlalchemy.engine.Engine - INFO - [cached since 24.34s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:11,038 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:11,042 - sqlalchemy.engine.Engine - INFO - [cached since 24.35s ago] ('19AI405',)
2026-01-02 14:06:11,050 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:11,051 - sqlalchemy.engine.Engine - INFO - [cached since 24.36s ago] ('19AI405',)
2026-01-02 14:06:11,057 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:11,979 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:11,982 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:11,983 - sqlalchemy.engine.Engine - INFO - [cached since 25.44s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:11,993 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:11,995 - sqlalchemy.engine.Engine - INFO - [cached since 25.44s ago] (datetime.datetime(2026, 1, 2, 8, 36, 11, 993213, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:11,999 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:12,022 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:12,180 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:12,181 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:12,183 - sqlalchemy.engine.Engine - INFO - [cached since 25.54s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:12,234 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:12,235 - sqlalchemy.engine.Engine - INFO - [cached since 25.55s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:12,239 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:12,241 - sqlalchemy.engine.Engine - INFO - [cached since 25.55s ago] ('19AI405',)
2026-01-02 14:06:12,250 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:12,254 - sqlalchemy.engine.Engine - INFO - [cached since 25.56s ago] ('19AI405',)
2026-01-02 14:06:12,263 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:51,710 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:51,713 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:51,714 - sqlalchemy.engine.Engine - INFO - [cached since 65.17s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:51,723 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:51,724 - sqlalchemy.engine.Engine - INFO - [cached since 65.17s ago] (datetime.datetime(2026, 1, 2, 8, 36, 51, 723345, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:51,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:51,737 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:51,876 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:51,878 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:51,880 - sqlalchemy.engine.Engine - INFO - [cached since 65.23s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:51,924 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:51,926 - sqlalchemy.engine.Engine - INFO - [cached since 65.24s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:51,931 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:51,932 - sqlalchemy.engine.Engine - INFO - [cached since 65.24s ago] ('19AI405',)
2026-01-02 14:06:51,940 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:51,941 - sqlalchemy.engine.Engine - INFO - [cached since 65.25s ago] ('19AI405',)
2026-01-02 14:06:51,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:58,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:58,208 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:06:58,209 - sqlalchemy.engine.Engine - INFO - [cached since 71.67s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:06:58,223 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:06:58,224 - sqlalchemy.engine.Engine - INFO - [cached since 71.67s ago] (datetime.datetime(2026, 1, 2, 8, 36, 58, 222904, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:06:58,230 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:06:58,252 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:06:58,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:06:58,395 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:06:58,396 - sqlalchemy.engine.Engine - INFO - [cached since 71.75s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:06:58,447 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:06:58,449 - sqlalchemy.engine.Engine - INFO - [cached since 71.76s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:06:58,453 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:58,455 - sqlalchemy.engine.Engine - INFO - [cached since 71.76s ago] ('19AI405',)
2026-01-02 14:06:58,463 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:06:58,465 - sqlalchemy.engine.Engine - INFO - [cached since 71.77s ago] ('19AI405',)
2026-01-02 14:06:58,469 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:03,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:03,189 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:07:03,190 - sqlalchemy.engine.Engine - INFO - [cached since 76.65s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:07:03,202 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:07:03,204 - sqlalchemy.engine.Engine - INFO - [cached since 76.65s ago] (datetime.datetime(2026, 1, 2, 8, 37, 3, 201834, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:07:03,209 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:03,234 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:07:03,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:03,385 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:07:03,387 - sqlalchemy.engine.Engine - INFO - [cached since 76.74s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:07:03,443 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:07:03,447 - sqlalchemy.engine.Engine - INFO - [cached since 76.76s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:07:03,453 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:03,455 - sqlalchemy.engine.Engine - INFO - [cached since 76.76s ago] ('19AI405',)
2026-01-02 14:07:03,463 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:03,467 - sqlalchemy.engine.Engine - INFO - [cached since 76.77s ago] ('19AI405',)
2026-01-02 14:07:03,472 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:04,177 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:04,180 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:07:04,182 - sqlalchemy.engine.Engine - INFO - [cached since 77.64s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:07:04,194 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:07:04,196 - sqlalchemy.engine.Engine - INFO - [cached since 77.64s ago] (datetime.datetime(2026, 1, 2, 8, 37, 4, 193469, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:07:04,201 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:04,223 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:07:04,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:04,374 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:07:04,376 - sqlalchemy.engine.Engine - INFO - [cached since 77.73s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:07:04,430 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:07:04,432 - sqlalchemy.engine.Engine - INFO - [cached since 77.74s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:07:04,437 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:04,438 - sqlalchemy.engine.Engine - INFO - [cached since 77.75s ago] ('19AI405',)
2026-01-02 14:07:04,447 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:04,449 - sqlalchemy.engine.Engine - INFO - [cached since 77.76s ago] ('19AI405',)
2026-01-02 14:07:04,454 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:05,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:05,030 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:07:05,031 - sqlalchemy.engine.Engine - INFO - [cached since 78.49s ago] ('DI3zVAn4z_boKsO-BRNA8quuwtqud0VAKANuyl-h-yA',)
2026-01-02 14:07:05,042 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:07:05,043 - sqlalchemy.engine.Engine - INFO - [cached since 78.49s ago] (datetime.datetime(2026, 1, 2, 8, 37, 5, 41710, tzinfo=datetime.timezone.utc), 7)
2026-01-02 14:07:05,048 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:05,071 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:07:05,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:05,223 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:07:05,225 - sqlalchemy.engine.Engine - INFO - [cached since 78.58s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:07:05,283 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:07:05,286 - sqlalchemy.engine.Engine - INFO - [cached since 78.6s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:07:05,291 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:05,292 - sqlalchemy.engine.Engine - INFO - [cached since 78.6s ago] ('19AI405',)
2026-01-02 14:07:05,300 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:05,301 - sqlalchemy.engine.Engine - INFO - [cached since 78.61s ago] ('19AI405',)
2026-01-02 14:07:05,308 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:27,615 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 14:07:28,607 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 14:07:28,616 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 14:07:28,624 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026D84BF38C0>
2026-01-02 14:07:28,628 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:07:28,629 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:07:28,630 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:07:28,633 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:07:28,633 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:07:28,854 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:37:28 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 08:37:28 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 14:07:28,856 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:07:28,857 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:07:28,859 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:07:28,860 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:07:28,864 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 14:07:28,868 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:07:28,869 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:07:28,871 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:07:28,872 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:07:28,872 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:07:29,009 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:37:28 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 14:07:29,013 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:07:29,015 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:07:29,017 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:07:29,019 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:07:29,023 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 14:07:29,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:29,184 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 14:07:29,186 - sqlalchemy.engine.Engine - INFO - [generated in 0.00278s] ('SFWg1OoRFLf3hAcZt3Naps1PAUU7nu0S0yeFGkD1siQ', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNFBKVUNYLXJrM2tyS1ZRdjU1YWtkZE1QUlZJb2RvWWVlV2MtRktOWTdCNTB1R05leGFlQTU0aGpLNmlGTjhMM1hUSGlsczg5ajVGQm0wek8tVFNfaFlSWnVpZ3BfRzd1VDNOeWJmZnhzZ0RzRGFVZUp6OTRtd2c5U3RVWm5CeVFUM3U=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 9, 37, 29, 23992, tzinfo=datetime.timezone.utc))
2026-01-02 14:07:29,196 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:29,359 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:29,367 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:07:29,369 - sqlalchemy.engine.Engine - INFO - [cached since 102.7s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:07:29,414 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 14:07:29,418 - httpcore.connection - DEBUG - close.started
2026-01-02 14:07:29,419 - httpcore.connection - DEBUG - close.complete
2026-01-02 14:07:29,421 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:29,575 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:29,581 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:07:29,584 - sqlalchemy.engine.Engine - INFO - [cached since 103s ago] ('SFWg1OoRFLf3hAcZt3Naps1PAUU7nu0S0yeFGkD1siQ',)
2026-01-02 14:07:29,595 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:07:29,597 - sqlalchemy.engine.Engine - INFO - [cached since 103s ago] (datetime.datetime(2026, 1, 2, 8, 37, 29, 594639, tzinfo=datetime.timezone.utc), 8)
2026-01-02 14:07:29,602 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:29,614 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:07:29,760 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:29,781 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:07:29,783 - sqlalchemy.engine.Engine - INFO - [cached since 103.1s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:07:29,835 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:07:29,838 - sqlalchemy.engine.Engine - INFO - [cached since 103.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:07:29,842 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:29,845 - sqlalchemy.engine.Engine - INFO - [cached since 103.2s ago] ('19AI405',)
2026-01-02 14:07:29,852 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:07:29,855 - sqlalchemy.engine.Engine - INFO - [cached since 103.2s ago] ('19AI405',)
2026-01-02 14:07:29,860 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:55,573 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:07:55,574 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:07:55,574 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 14:07:55,574 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:07:55,575 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:07:55,575 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 14:07:55,576 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:07:55,586 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:07:55,587 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 14:07:55,588 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 14:07:55,589 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:07:55,589 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:07:55,594 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 14:07:55,595 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:07:55,596 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:07:55,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:55,745 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 14:07:55,747 - sqlalchemy.engine.Engine - INFO - [cached since 120.2s ago] ('admin',)
2026-01-02 14:07:56,363 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 14:07:56,365 - sqlalchemy.engine.Engine - INFO - [cached since 120.2s ago] (datetime.datetime(2026, 1, 2, 8, 37, 56, 362421, tzinfo=datetime.timezone.utc), 1)
2026-01-02 14:07:56,369 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:07:56,372 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:07:56,375 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 14:07:56,376 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:07:56,379 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:07:56,380 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 14:07:56,380 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:07:56,381 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:07:56,381 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 14:07:56,382 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 14:07:56,383 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:07:56,384 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:07:56,386 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 14:07:56,387 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:07:56,387 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:07:56,390 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:07:56,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:07:56,540 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 14:07:56,541 - sqlalchemy.engine.Engine - INFO - [cached since 121s ago] ('admin',)
2026-01-02 14:07:57,105 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 14:07:57,107 - sqlalchemy.engine.Engine - INFO - [cached since 121s ago] (datetime.datetime(2026, 1, 2, 8, 37, 57, 105076, tzinfo=datetime.timezone.utc), 1)
2026-01-02 14:07:57,112 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:25,764 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:09:25,764 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 14:09:25,765 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 14:09:25,765 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:09:25,766 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 14:09:25,766 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 14:09:25,766 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:09:25,767 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:09:25,767 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:188802]
2026-01-02 14:09:25,768 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:09:25,769 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 14:09:25,769 - python_multipart.multipart - DEBUG - Calling on_header_field with data[188846:188865]
2026-01-02 14:09:25,769 - python_multipart.multipart - DEBUG - Calling on_header_value with data[188867:188897]
2026-01-02 14:09:25,770 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 14:09:25,771 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 14:09:25,771 - python_multipart.multipart - DEBUG - Calling on_part_data with data[188901:188909]
2026-01-02 14:09:25,772 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 14:09:25,772 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 14:09:25,917 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:25,920 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 14:09:25,921 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] (1,)
2026-01-02 14:09:25,933 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 14:09:25,937 - app.services.file_processor - INFO - Saved file: ./uploads/pending/c9418097580743e1baae77094ed0c5ab.pdf (hash: 69530c94d1cfd882...)
2026-01-02 14:09:25,940 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 14:09:25,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00170s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 14:09:25,974 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 14:09:25,979 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 14:09:25,980 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('./uploads/pending/c9418097580743e1baae77094ed0c5ab.pdf', 3)
2026-01-02 14:09:25,986 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 14:09:25,987 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] (3,)
2026-01-02 14:09:25,998 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 14:09:26,000 - sqlalchemy.engine.Engine - INFO - [generated in 0.00223s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 14:09:26,006 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:36,817 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 14:09:37,717 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 14:09:37,722 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 14:09:37,731 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026D84C947D0>
2026-01-02 14:09:37,743 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:37,748 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:37,752 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:37,755 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:37,761 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:37,939 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:37 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 08:39:37 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 14:09:37,940 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:37,941 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:37,943 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:37,944 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:37,947 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 14:09:37,951 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:37,952 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:37,953 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:37,954 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:37,955 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:38,093 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:37 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 14:09:38,094 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:38,097 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:38,099 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:38,099 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:38,103 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 14:09:38,246 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:38,248 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 14:09:38,250 - sqlalchemy.engine.Engine - INFO - [cached since 129.1s ago] ('zocW4t8PR2k6F2w2-bnl9fSACaErgbj51udUu6wO43s', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNFJLTXd2eGw3bGIyVEhLVlBieVJXQV9jejFVUk5xb3VIaEszcUJycC11Mm1uZWJTVFJlSWV4NDc1WXRqWXNEX1V2dEs2eHU4dGFLd0VBdnhZaEhKdHlIZGVmOUM1V1luLTJ3cWZRZnZBeEdrM183MXlaSjFIZUlpREFPUlBOdFhwcng=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 9, 39, 38, 103709, tzinfo=datetime.timezone.utc))
2026-01-02 14:09:38,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:38,435 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:38,437 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:09:38,438 - sqlalchemy.engine.Engine - INFO - [cached since 231.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:09:38,481 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 14:09:38,483 - httpcore.connection - DEBUG - close.started
2026-01-02 14:09:38,485 - httpcore.connection - DEBUG - close.complete
2026-01-02 14:09:38,487 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:38,644 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:38,646 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:09:38,647 - sqlalchemy.engine.Engine - INFO - [cached since 232.1s ago] ('zocW4t8PR2k6F2w2-bnl9fSACaErgbj51udUu6wO43s',)
2026-01-02 14:09:38,657 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:09:38,659 - sqlalchemy.engine.Engine - INFO - [cached since 232.1s ago] (datetime.datetime(2026, 1, 2, 8, 39, 38, 657364, tzinfo=datetime.timezone.utc), 9)
2026-01-02 14:09:38,663 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:38,684 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:09:38,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:38,827 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:09:38,829 - sqlalchemy.engine.Engine - INFO - [cached since 232.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:09:38,873 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:09:38,876 - sqlalchemy.engine.Engine - INFO - [cached since 232.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:09:38,881 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:09:38,883 - sqlalchemy.engine.Engine - INFO - [cached since 232.2s ago] ('19AI405',)
2026-01-02 14:09:38,890 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 14:09:38,894 - sqlalchemy.engine.Engine - INFO - [cached since 232.2s ago] ('19AI405',)
2026-01-02 14:09:38,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:41,589 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 14:09:45,264 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:45,267 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:09:45,268 - sqlalchemy.engine.Engine - INFO - [cached since 238.7s ago] ('zocW4t8PR2k6F2w2-bnl9fSACaErgbj51udUu6wO43s',)
2026-01-02 14:09:45,280 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:09:45,282 - sqlalchemy.engine.Engine - INFO - [cached since 238.7s ago] (datetime.datetime(2026, 1, 2, 8, 39, 45, 279566, tzinfo=datetime.timezone.utc), 9)
2026-01-02 14:09:45,287 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:45,312 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-02 14:09:45,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:45,463 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 14:09:45,465 - sqlalchemy.engine.Engine - INFO - [generated in 0.00213s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 14:09:45,527 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 14:09:45,529 - sqlalchemy.engine.Engine - INFO - [cached since 19.53s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-02 14:09:45,536 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 14:09:45,541 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 14:09:45,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00372s] ('UPLOADING', 3)
2026-01-02 14:09:46,511 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (188644 bytes)
2026-01-02 14:09:46,516 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 14:09:46,521 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000026D84C95F90>
2026-01-02 14:09:46,524 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:46,526 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:46,527 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:46,529 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:46,530 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:47,124 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:46 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 08:39:46 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'285'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 14:09:47,127 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:47,127 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:47,129 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:47,130 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:47,132 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 131271368, 'license': 'unknown', 'author': 'Kavinraja D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 188644}]
2026-01-02 14:09:47,133 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 131271368
2026-01-02 14:09:47,137 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 14:09:47,138 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] (131271368, 3)
2026-01-02 14:09:47,145 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 14:09:47,149 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:47,150 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:47,151 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:47,152 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:47,152 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:47,729 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:47 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 14:09:47,730 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:47,730 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:47,732 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:47,733 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:47,734 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 14:09:47,735 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 14:09:47,736 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 14:09:47,737 - sqlalchemy.engine.Engine - INFO - [cached since 2.196s ago] ('SUBMITTING', 3)
2026-01-02 14:09:47,738 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 131271368
2026-01-02 14:09:47,742 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:47,743 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:47,743 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:47,744 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:47,745 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:50,006 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:47 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 14:09:50,007 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:50,008 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:50,010 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:50,011 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:50,013 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 14:09:50,013 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 14:09:50,014 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 14:09:50,019 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 14:09:50,021 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 14:09:50,022 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 14:09:50,024 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 14:09:50,025 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 14:09:50,231 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 08:39:50 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 14:09:50,232 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 14:09:50,233 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 14:09:50,235 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 14:09:50,235 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 14:09:50,238 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767343188, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 188644, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767343187, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 14:09:50,238 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 14:09:50,239 - app.services.submission_service - INFO - Submission ID: 3
2026-01-02 14:09:50,239 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-02 14:09:50,239 - app.services.submission_service - INFO - Submission timemodified: 1767343188
2026-01-02 14:09:50,240 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 14:09:50,240 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 14:09:50,241 - app.services.submission_service - INFO - Can edit: True
2026-01-02 14:09:50,242 - app.services.submission_service - INFO - Can submit: False
2026-01-02 14:09:50,242 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 14:09:50,243 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-02 14:09:50,243 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 14:09:50,246 - httpcore.connection - DEBUG - close.started
2026-01-02 14:09:50,247 - httpcore.connection - DEBUG - close.complete
2026-01-02 14:09:50,248 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 131271368, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102083950'}
2026-01-02 14:09:50,248 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 14:09:50,251 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 14:09:50,252 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] (3,)
2026-01-02 14:09:50,264 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 14:09:50,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('COMPLETED', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102083950', datetime.datetime(2026, 1, 2, 8, 39, 50, 261510), datetime.datetime(2026, 1, 2, 8, 39, 50, 261539), 3)
2026-01-02 14:09:50,268 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 14:09:50,270 - sqlalchemy.engine.Engine - INFO - [cached since 24.28s ago] (3,)
2026-01-02 14:09:50,277 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-02 14:09:50,279 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 14:09:50,280 - sqlalchemy.engine.Engine - INFO - [cached since 24.28s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 131271368, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102083950"}', None, None)
2026-01-02 14:09:50,283 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:50,460 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:50,461 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 14:09:50,462 - sqlalchemy.engine.Engine - INFO - [cached since 4.999s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 14:09:50,496 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:50,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:50,683 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 14:09:50,684 - sqlalchemy.engine.Engine - INFO - [cached since 244.1s ago] ('zocW4t8PR2k6F2w2-bnl9fSACaErgbj51udUu6wO43s',)
2026-01-02 14:09:50,695 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 14:09:50,696 - sqlalchemy.engine.Engine - INFO - [cached since 244.1s ago] (datetime.datetime(2026, 1, 2, 8, 39, 50, 694462, tzinfo=datetime.timezone.utc), 9)
2026-01-02 14:09:50,701 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:09:50,710 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 14:09:50,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:09:50,851 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 14:09:50,852 - sqlalchemy.engine.Engine - INFO - [cached since 244.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 14:09:50,889 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 14:09:50,891 - sqlalchemy.engine.Engine - INFO - [cached since 244.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 14:09:50,896 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:19:07,906 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 14:19:07,907 - app.main - INFO - Database connections closed
2026-01-02 14:51:54,153 - app.main - INFO - Starting Examination Middleware...
2026-01-02 14:51:54,268 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 14:51:54,268 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:51:54,296 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 14:51:54,296 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:51:54,301 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 14:51:54,301 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 14:51:54,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 14:51:54,311 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,311 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,338 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,339 - sqlalchemy.engine.Engine - INFO - [cached since 0.02823s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,340 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,341 - sqlalchemy.engine.Engine - INFO - [cached since 0.03041s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,342 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,343 - sqlalchemy.engine.Engine - INFO - [cached since 0.03246s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,344 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.03435s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.03689s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,349 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 14:51:54,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.03893s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 14:51:54,352 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 14:51:54,352 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('workflowstatus', 'pg_catalog')
2026-01-02 14:51:54,357 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 14:51:54,362 - app.main - INFO - Database tables created/verified
2026-01-02 14:51:54,363 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 14:51:54,364 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 14:51:54,364 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:03:36,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:03:36,773 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:03:36,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('zocW4t8PR2k6F2w2-bnl9fSACaErgbj51udUu6wO43s',)
2026-01-02 15:03:36,790 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:03:36,790 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] (datetime.datetime(2026, 1, 2, 9, 33, 36, 789003, tzinfo=datetime.timezone.utc), 9)
2026-01-02 15:03:36,796 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:03:36,803 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:03:36,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:03:36,877 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:03:36,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:03:36,917 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:03:36,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:03:36,925 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:38,220 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 15:28:39,672 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 15:28:39,723 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 15:28:39,737 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001820934AF90>
2026-01-02 15:28:39,741 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:28:39,744 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:28:39,745 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:28:39,749 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:28:39,751 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:28:40,578 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 09:58:39 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 09:58:40 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 15:28:40,582 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:28:40,583 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:28:40,584 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:28:40,585 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:28:40,588 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 15:28:40,591 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:28:40,592 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:28:40,593 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:28:40,595 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:28:40,595 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:28:41,187 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 09:58:40 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 15:28:41,188 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:28:41,190 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:28:41,192 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:28:41,192 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:28:41,194 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 15:28:41,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:28:41,407 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 15:28:41,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNWJSc3E1cUdwQnRzeUJsc2FmSC1mT0tHYTVoME1LVW1temtESTJBRE1YMnZod2JNWGZJeVJlWDh5Vk54S0x1d2JwWDNxNHlnZzB2ZnlfeGVoVFVyQVhlMmFGdEViVUUzOVVtZkZmOVE4VkNUVDZYSnhrbjVTbktLYmdKa3djSVBQd0Q=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 10, 58, 41, 194816, tzinfo=datetime.timezone.utc))
2026-01-02 15:28:41,439 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:41,577 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:28:41,578 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:28:41,580 - sqlalchemy.engine.Engine - INFO - [cached since 1505s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:28:41,642 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 0
2026-01-02 15:28:41,644 - httpcore.connection - DEBUG - close.started
2026-01-02 15:28:41,645 - httpcore.connection - DEBUG - close.complete
2026-01-02 15:28:41,649 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:41,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:28:41,803 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:28:41,804 - sqlalchemy.engine.Engine - INFO - [cached since 1505s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:28:41,815 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:28:41,815 - sqlalchemy.engine.Engine - INFO - [cached since 1505s ago] (datetime.datetime(2026, 1, 2, 9, 58, 41, 814514, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:28:41,826 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:41,837 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:28:42,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:28:42,002 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:28:42,004 - sqlalchemy.engine.Engine - INFO - [cached since 1505s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:28:42,057 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:28:42,059 - sqlalchemy.engine.Engine - INFO - [cached since 1505s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:28:42,065 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:42,781 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:28:42,783 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:28:42,784 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 15:28:42,785 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:28:42,786 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:28:42,788 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 15:28:42,789 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:28:42,791 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:28:42,792 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 15:28:42,793 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 15:28:42,794 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:28:42,795 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:28:42,797 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 15:28:42,798 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:28:42,799 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:28:42,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:28:42,972 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 15:28:42,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('admin',)
2026-01-02 15:28:43,396 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 15:28:43,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00327s] (datetime.datetime(2026, 1, 2, 9, 58, 43, 393824, tzinfo=datetime.timezone.utc), 1)
2026-01-02 15:28:43,405 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:28:50,172 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 15:32:15,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:15,584 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:15,587 - sqlalchemy.engine.Engine - INFO - [cached since 1719s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:15,604 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:15,605 - sqlalchemy.engine.Engine - INFO - [cached since 1719s ago] (datetime.datetime(2026, 1, 2, 10, 2, 15, 603000, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:15,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:15,633 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:15,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:15,860 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:15,862 - sqlalchemy.engine.Engine - INFO - [cached since 1719s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:15,921 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:15,924 - sqlalchemy.engine.Engine - INFO - [cached since 1719s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:15,933 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:26,741 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:32:26,742 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:32:26,743 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 15:32:26,743 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:32:26,744 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 15:32:26,744 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 15:32:26,745 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:32:26,745 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:32:26,746 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 15:32:26,746 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:32:26,747 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:32:26,747 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 15:32:26,749 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 15:32:26,749 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:32:26,749 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:32:26,750 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 15:32:26,750 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:32:26,750 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:32:26,918 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:26,922 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 15:32:26,924 - sqlalchemy.engine.Engine - INFO - [generated in 0.00166s] (1,)
2026-01-02 15:32:26,939 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 15:32:26,952 - app.services.file_processor - INFO - Saved file: ./uploads/pending/a6525adde8cb4c6cb633ab20e4bcf2c5.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 15:32:26,958 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 15:32:26,962 - sqlalchemy.engine.Engine - INFO - [generated in 0.00329s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 15:32:27,015 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 15:32:27,019 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, file_hash=$2::VARCHAR, file_size_bytes=$3::BIGINT, workflow_status=$4::workflowstatus WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 15:32:27,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('./uploads/pending/a6525adde8cb4c6cb633ab20e4bcf2c5.pdf', '3b5d0cdd7dd98e90b760efbe3faaa56b12fb1be732e85cd5e2fcd39628b4638d', 309, 'PENDING', 3)
2026-01-02 15:32:27,049 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:32:27,052 - sqlalchemy.engine.Engine - INFO - [generated in 0.00341s] (3,)
2026-01-02 15:32:27,070 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:32:27,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00248s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 15:32:27,086 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:31,437 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:31,439 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:31,440 - sqlalchemy.engine.Engine - INFO - [cached since 1735s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:31,456 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:31,458 - sqlalchemy.engine.Engine - INFO - [cached since 1735s ago] (datetime.datetime(2026, 1, 2, 10, 2, 31, 455848, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:31,464 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:31,491 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:31,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:31,643 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:31,645 - sqlalchemy.engine.Engine - INFO - [cached since 1735s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:31,689 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:31,690 - sqlalchemy.engine.Engine - INFO - [cached since 1735s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:31,700 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:32:31,702 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] ('19AI405',)
2026-01-02 15:32:31,721 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:32:31,722 - sqlalchemy.engine.Engine - INFO - [cached since 0.02209s ago] ('19AI405',)
2026-01-02 15:32:31,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:39,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:39,964 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:39,966 - sqlalchemy.engine.Engine - INFO - [cached since 1743s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:39,987 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:39,989 - sqlalchemy.engine.Engine - INFO - [cached since 1743s ago] (datetime.datetime(2026, 1, 2, 10, 2, 39, 986852, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:39,997 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:40,023 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-02 15:32:40,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:40,201 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 15:32:40,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00197s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 15:32:40,276 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:32:40,278 - sqlalchemy.engine.Engine - INFO - [cached since 13.21s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-02 15:32:40,293 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 15:32:40,295 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:32:40,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00285s] ('UPLOADING', 3)
2026-01-02 15:32:41,496 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (309 bytes)
2026-01-02 15:32:41,506 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 15:32:41,520 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001820945CF50>
2026-01-02 15:32:41,524 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:32:41,528 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:32:41,529 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:32:41,534 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:32:41,535 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:32:42,338 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:02:41 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 10:02:41 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 15:32:42,340 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:32:42,341 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:32:42,345 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:32:42,346 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:32:42,351 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 909838973, 'license': 'unknown', 'author': 'Kavinraja D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 309}]
2026-01-02 15:32:42,352 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 909838973
2026-01-02 15:32:42,356 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:32:42,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] (909838973, 3)
2026-01-02 15:32:42,373 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 15:32:42,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:32:42,386 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:32:42,387 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:32:42,389 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:32:42,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:32:43,423 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:02:42 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:32:43,425 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:32:43,426 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:32:43,431 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:32:43,433 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:32:43,436 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 15:32:43,437 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 15:32:43,439 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:32:43,442 - sqlalchemy.engine.Engine - INFO - [cached since 3.147s ago] ('SUBMITTING', 3)
2026-01-02 15:32:43,448 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 909838973
2026-01-02 15:32:43,455 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:32:43,456 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:32:43,457 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:32:43,459 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:32:43,461 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:32:48,297 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:02:43 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:32:48,299 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:32:48,300 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:32:48,304 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:32:48,306 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:32:48,311 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 15:32:48,312 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 15:32:48,314 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 15:32:48,320 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:32:48,321 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:32:48,321 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:32:48,322 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:32:48,324 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:32:48,458 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:02:48 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'966'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:32:48,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:32:48,461 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:32:48,465 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:32:48,466 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:32:48,471 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767348163, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 309, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767348163, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 15:32:48,472 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 15:32:48,473 - app.services.submission_service - INFO - Submission ID: 3
2026-01-02 15:32:48,474 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-02 15:32:48,475 - app.services.submission_service - INFO - Submission timemodified: 1767348163
2026-01-02 15:32:48,476 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 15:32:48,478 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 15:32:48,479 - app.services.submission_service - INFO - Can edit: True
2026-01-02 15:32:48,481 - app.services.submission_service - INFO - Can submit: False
2026-01-02 15:32:48,482 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 15:32:48,482 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-02 15:32:48,483 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 15:32:48,484 - httpcore.connection - DEBUG - close.started
2026-01-02 15:32:48,486 - httpcore.connection - DEBUG - close.complete
2026-01-02 15:32:48,486 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 909838973, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102100248'}
2026-01-02 15:32:48,487 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 15:32:48,491 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:32:48,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00299s] (3,)
2026-01-02 15:32:48,505 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 15:32:48,507 - sqlalchemy.engine.Engine - INFO - [generated in 0.00207s] ('COMPLETED', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102100248', datetime.datetime(2026, 1, 2, 10, 2, 48, 502748), datetime.datetime(2026, 1, 2, 10, 2, 48, 502795), 3)
2026-01-02 15:32:48,517 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:32:48,520 - sqlalchemy.engine.Engine - INFO - [cached since 21.47s ago] (3,)
2026-01-02 15:32:48,524 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-02 15:32:48,527 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:32:48,530 - sqlalchemy.engine.Engine - INFO - [cached since 21.46s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 909838973, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102100248"}', None, None)
2026-01-02 15:32:48,536 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:48,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:48,713 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 15:32:48,715 - sqlalchemy.engine.Engine - INFO - [cached since 8.514s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 15:32:48,771 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:48,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:48,987 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:48,989 - sqlalchemy.engine.Engine - INFO - [cached since 1752s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:49,016 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:49,019 - sqlalchemy.engine.Engine - INFO - [cached since 1752s ago] (datetime.datetime(2026, 1, 2, 10, 2, 49, 14453, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:49,026 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:49,042 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:49,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:49,281 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:49,284 - sqlalchemy.engine.Engine - INFO - [cached since 1752s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:49,357 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:49,359 - sqlalchemy.engine.Engine - INFO - [cached since 1752s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:49,369 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:52,682 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:52,684 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:52,685 - sqlalchemy.engine.Engine - INFO - [cached since 1756s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:52,699 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:52,702 - sqlalchemy.engine.Engine - INFO - [cached since 1756s ago] (datetime.datetime(2026, 1, 2, 10, 2, 52, 698618, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:52,707 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:52,715 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:52,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:52,840 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:52,842 - sqlalchemy.engine.Engine - INFO - [cached since 1756s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:52,898 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:52,900 - sqlalchemy.engine.Engine - INFO - [cached since 1756s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:52,908 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:54,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:54,448 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:54,450 - sqlalchemy.engine.Engine - INFO - [cached since 1758s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:54,472 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:54,474 - sqlalchemy.engine.Engine - INFO - [cached since 1758s ago] (datetime.datetime(2026, 1, 2, 10, 2, 54, 472218, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:54,481 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:54,493 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:54,648 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:54,651 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:54,652 - sqlalchemy.engine.Engine - INFO - [cached since 1758s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:54,717 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:54,719 - sqlalchemy.engine.Engine - INFO - [cached since 1758s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:54,727 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:55,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:55,284 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:55,286 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:55,301 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:55,303 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] (datetime.datetime(2026, 1, 2, 10, 2, 55, 301568, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:55,307 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:55,316 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:55,453 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:55,455 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:55,456 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:55,514 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:55,517 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:55,524 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:56,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:56,044 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:56,046 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:56,058 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:56,059 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] (datetime.datetime(2026, 1, 2, 10, 2, 56, 57488, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:56,065 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:56,074 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:56,266 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:56,268 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:56,269 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:56,321 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:56,323 - sqlalchemy.engine.Engine - INFO - [cached since 1759s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:56,329 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:56,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:56,841 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:56,842 - sqlalchemy.engine.Engine - INFO - [cached since 1760s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:56,850 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:56,851 - sqlalchemy.engine.Engine - INFO - [cached since 1760s ago] (datetime.datetime(2026, 1, 2, 10, 2, 56, 850353, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:56,855 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:56,865 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:57,006 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:57,007 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:57,009 - sqlalchemy.engine.Engine - INFO - [cached since 1760s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:57,046 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:57,047 - sqlalchemy.engine.Engine - INFO - [cached since 1760s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:57,051 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:57,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:57,586 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:57,587 - sqlalchemy.engine.Engine - INFO - [cached since 1761s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:57,597 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:57,599 - sqlalchemy.engine.Engine - INFO - [cached since 1761s ago] (datetime.datetime(2026, 1, 2, 10, 2, 57, 597310, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:57,604 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:57,614 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:57,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:57,760 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:57,762 - sqlalchemy.engine.Engine - INFO - [cached since 1761s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:57,816 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:57,818 - sqlalchemy.engine.Engine - INFO - [cached since 1761s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:57,824 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:58,559 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:58,560 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:58,560 - sqlalchemy.engine.Engine - INFO - [cached since 1762s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:58,570 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:58,571 - sqlalchemy.engine.Engine - INFO - [cached since 1762s ago] (datetime.datetime(2026, 1, 2, 10, 2, 58, 570477, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:58,578 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:58,586 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:58,727 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:58,729 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:58,732 - sqlalchemy.engine.Engine - INFO - [cached since 1762s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:58,817 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:58,820 - sqlalchemy.engine.Engine - INFO - [cached since 1762s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:58,832 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:59,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:59,419 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:32:59,420 - sqlalchemy.engine.Engine - INFO - [cached since 1763s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:32:59,434 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:32:59,435 - sqlalchemy.engine.Engine - INFO - [cached since 1763s ago] (datetime.datetime(2026, 1, 2, 10, 2, 59, 433782, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:32:59,440 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:32:59,449 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:32:59,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:32:59,623 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:32:59,629 - sqlalchemy.engine.Engine - INFO - [cached since 1763s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:32:59,700 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:32:59,702 - sqlalchemy.engine.Engine - INFO - [cached since 1763s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:32:59,710 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:33:00,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:33:00,296 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:33:00,297 - sqlalchemy.engine.Engine - INFO - [cached since 1764s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:33:00,309 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:33:00,312 - sqlalchemy.engine.Engine - INFO - [cached since 1764s ago] (datetime.datetime(2026, 1, 2, 10, 3, 0, 308829, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:33:00,318 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:33:00,327 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:33:00,460 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:33:00,463 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:33:00,464 - sqlalchemy.engine.Engine - INFO - [cached since 1764s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:33:00,527 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:33:00,529 - sqlalchemy.engine.Engine - INFO - [cached since 1764s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:33:00,537 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:35:19,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:35:19,389 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:35:19,390 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:35:19,403 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:35:19,404 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] (datetime.datetime(2026, 1, 2, 10, 5, 19, 402462, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:35:19,410 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:35:19,437 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:35:19,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:35:19,597 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:35:19,604 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:35:19,676 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:35:19,678 - sqlalchemy.engine.Engine - INFO - [cached since 1903s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:35:19,686 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:39:14,862 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 15:39:14,863 - app.main - INFO - Database connections closed
2026-01-02 15:39:17,906 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:39:17,978 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:39:17,978 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:39:17,981 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:39:17,982 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:39:17,983 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:39:17,983 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:39:17,987 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:39:17,992 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:17,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,002 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,002 - sqlalchemy.engine.Engine - INFO - [cached since 0.01008s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,005 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,006 - sqlalchemy.engine.Engine - INFO - [cached since 0.01356s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,007 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,009 - sqlalchemy.engine.Engine - INFO - [cached since 0.01646s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,011 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,012 - sqlalchemy.engine.Engine - INFO - [cached since 0.01944s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,013 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,014 - sqlalchemy.engine.Engine - INFO - [cached since 0.02162s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,015 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:39:18,016 - sqlalchemy.engine.Engine - INFO - [cached since 0.02419s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:39:18,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:39:18,021 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:39:18,026 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:39:18,031 - app.main - INFO - Database tables created/verified
2026-01-02 15:39:18,032 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:39:18,032 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:39:18,033 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:40:24,260 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:40:24,302 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:40:24,304 - sqlalchemy.engine.Engine - INFO - [generated in 0.00209s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:40:24,333 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:40:24,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00219s] (datetime.datetime(2026, 1, 2, 10, 10, 24, 327135, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:40:24,342 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:40:24,356 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:40:24,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:40:24,577 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:40:24,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00350s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:40:24,673 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:40:24,675 - sqlalchemy.engine.Engine - INFO - [generated in 0.00332s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:40:24,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:40:27,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:40:27,768 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:40:27,771 - sqlalchemy.engine.Engine - INFO - [cached since 3.469s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:40:27,791 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:40:27,793 - sqlalchemy.engine.Engine - INFO - [cached since 3.46s ago] (datetime.datetime(2026, 1, 2, 10, 10, 27, 790118, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:40:27,800 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:40:27,837 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:40:28,074 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:40:28,077 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:40:28,078 - sqlalchemy.engine.Engine - INFO - [cached since 3.502s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:40:28,120 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:40:28,122 - sqlalchemy.engine.Engine - INFO - [cached since 3.45s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:40:28,130 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:17,274 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 15:47:17,275 - app.main - INFO - Database connections closed
2026-01-02 15:47:32,239 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:47:32,314 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:47:32,315 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:47:32,317 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:47:32,318 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:47:32,319 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:47:32,320 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:47:32,324 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:32,327 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,328 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.008101s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,337 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,337 - sqlalchemy.engine.Engine - INFO - [cached since 0.009918s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,338 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,338 - sqlalchemy.engine.Engine - INFO - [cached since 0.01125s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,339 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,340 - sqlalchemy.engine.Engine - INFO - [cached since 0.0126s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,341 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,341 - sqlalchemy.engine.Engine - INFO - [cached since 0.01423s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,343 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:47:32,343 - sqlalchemy.engine.Engine - INFO - [cached since 0.01615s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:47:32,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:47:32,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:47:32,349 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:32,352 - app.main - INFO - Database tables created/verified
2026-01-02 15:47:32,353 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:47:32,354 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:47:32,354 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:47:38,917 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:38,971 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:47:38,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:47:38,995 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:47:38,996 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] (datetime.datetime(2026, 1, 2, 10, 17, 38, 990813, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:47:39,006 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:39,028 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:47:39,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:39,227 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:47:39,228 - sqlalchemy.engine.Engine - INFO - [generated in 0.00142s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:47:39,294 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:47:39,296 - sqlalchemy.engine.Engine - INFO - [generated in 0.00213s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:47:39,305 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:42,592 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:42,594 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:47:42,595 - sqlalchemy.engine.Engine - INFO - [cached since 3.624s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:47:42,608 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:47:42,611 - sqlalchemy.engine.Engine - INFO - [cached since 3.616s ago] (datetime.datetime(2026, 1, 2, 10, 17, 42, 607484, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:47:42,619 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:42,632 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:47:42,791 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:42,793 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:47:42,795 - sqlalchemy.engine.Engine - INFO - [cached since 3.569s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:47:42,853 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:47:42,854 - sqlalchemy.engine.Engine - INFO - [cached since 3.56s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:47:42,860 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:48,968 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:47:48,969 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:47:48,969 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 15:47:48,969 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:47:48,970 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 15:47:48,970 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 15:47:48,970 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:47:48,971 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:47:48,971 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 15:47:48,971 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:47:48,972 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:47:48,972 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 15:47:48,972 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 15:47:48,972 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:47:48,973 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:47:48,973 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 15:47:48,974 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:47:48,974 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:47:49,142 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:49,146 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 15:47:49,147 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] (1,)
2026-01-02 15:47:49,154 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 15:47:49,158 - app.services.file_processor - INFO - Saved file: ./uploads/pending/cc2eb3f6372c4726912ee2ea09e6be12.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 15:47:49,161 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 15:47:49,163 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 15:47:49,187 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 15:47:49,190 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 15:47:49,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('./uploads/pending/cc2eb3f6372c4726912ee2ea09e6be12.pdf', 'PENDING', 3)
2026-01-02 15:47:49,203 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:47:49,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00238s] (3,)
2026-01-02 15:47:49,218 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:47:49,220 - sqlalchemy.engine.Engine - INFO - [generated in 0.00231s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 15:47:49,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:53,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:53,235 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:47:53,238 - sqlalchemy.engine.Engine - INFO - [cached since 14.27s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:47:53,255 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:47:53,256 - sqlalchemy.engine.Engine - INFO - [cached since 14.26s ago] (datetime.datetime(2026, 1, 2, 10, 17, 53, 254258, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:47:53,260 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:47:53,290 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:47:53,449 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:47:53,450 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:47:53,451 - sqlalchemy.engine.Engine - INFO - [cached since 14.22s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:47:53,504 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:47:53,506 - sqlalchemy.engine.Engine - INFO - [cached since 14.21s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:47:53,518 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:47:53,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00215s] ('19AI405',)
2026-01-02 15:47:53,532 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:47:53,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.01754s ago] ('19AI405',)
2026-01-02 15:47:53,542 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:15,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:15,648 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:48:15,649 - sqlalchemy.engine.Engine - INFO - [cached since 36.68s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:48:15,658 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:48:15,661 - sqlalchemy.engine.Engine - INFO - [cached since 36.67s ago] (datetime.datetime(2026, 1, 2, 10, 18, 15, 658205, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:48:15,668 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:15,686 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:48:15,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:15,882 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:48:15,884 - sqlalchemy.engine.Engine - INFO - [cached since 36.66s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:48:15,937 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:48:15,939 - sqlalchemy.engine.Engine - INFO - [cached since 36.64s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:48:15,945 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:15,948 - sqlalchemy.engine.Engine - INFO - [cached since 22.43s ago] ('19AI405',)
2026-01-02 15:48:15,958 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:15,960 - sqlalchemy.engine.Engine - INFO - [cached since 22.44s ago] ('19AI405',)
2026-01-02 15:48:15,967 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:17,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:17,248 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:48:17,250 - sqlalchemy.engine.Engine - INFO - [cached since 38.28s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:48:17,267 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:48:17,268 - sqlalchemy.engine.Engine - INFO - [cached since 38.27s ago] (datetime.datetime(2026, 1, 2, 10, 18, 17, 266661, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:48:17,283 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:17,290 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:48:17,440 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:17,441 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:48:17,442 - sqlalchemy.engine.Engine - INFO - [cached since 38.22s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:48:17,484 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:48:17,486 - sqlalchemy.engine.Engine - INFO - [cached since 38.19s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:48:17,489 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:17,490 - sqlalchemy.engine.Engine - INFO - [cached since 23.97s ago] ('19AI405',)
2026-01-02 15:48:17,498 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:17,499 - sqlalchemy.engine.Engine - INFO - [cached since 23.98s ago] ('19AI405',)
2026-01-02 15:48:17,503 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:18,599 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:18,603 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:48:18,615 - sqlalchemy.engine.Engine - INFO - [cached since 39.64s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:48:18,632 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:48:18,634 - sqlalchemy.engine.Engine - INFO - [cached since 39.64s ago] (datetime.datetime(2026, 1, 2, 10, 18, 18, 631122, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:48:18,640 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:18,653 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:48:18,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:18,926 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:48:18,927 - sqlalchemy.engine.Engine - INFO - [cached since 39.7s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:48:18,981 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:48:18,982 - sqlalchemy.engine.Engine - INFO - [cached since 39.69s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:48:18,986 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:18,987 - sqlalchemy.engine.Engine - INFO - [cached since 25.47s ago] ('19AI405',)
2026-01-02 15:48:18,991 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:18,992 - sqlalchemy.engine.Engine - INFO - [cached since 25.47s ago] ('19AI405',)
2026-01-02 15:48:18,998 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:21,047 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:21,048 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:48:21,049 - sqlalchemy.engine.Engine - INFO - [cached since 42.08s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:48:21,057 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:48:21,057 - sqlalchemy.engine.Engine - INFO - [cached since 42.06s ago] (datetime.datetime(2026, 1, 2, 10, 18, 21, 56750, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:48:21,061 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:21,068 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:48:21,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:21,224 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:48:21,226 - sqlalchemy.engine.Engine - INFO - [cached since 42s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:48:21,257 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:48:21,259 - sqlalchemy.engine.Engine - INFO - [cached since 41.96s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:48:21,266 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:21,268 - sqlalchemy.engine.Engine - INFO - [cached since 27.75s ago] ('19AI405',)
2026-01-02 15:48:21,276 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:21,277 - sqlalchemy.engine.Engine - INFO - [cached since 27.76s ago] ('19AI405',)
2026-01-02 15:48:21,288 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:21,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:21,711 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:48:21,713 - sqlalchemy.engine.Engine - INFO - [cached since 42.74s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:48:21,725 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:48:21,727 - sqlalchemy.engine.Engine - INFO - [cached since 42.73s ago] (datetime.datetime(2026, 1, 2, 10, 18, 21, 724679, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:48:21,734 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:48:21,741 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:48:21,875 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:48:21,877 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:48:21,879 - sqlalchemy.engine.Engine - INFO - [cached since 42.65s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:48:21,940 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:48:21,942 - sqlalchemy.engine.Engine - INFO - [cached since 42.65s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:48:21,947 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:21,949 - sqlalchemy.engine.Engine - INFO - [cached since 28.43s ago] ('19AI405',)
2026-01-02 15:48:21,958 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:48:21,961 - sqlalchemy.engine.Engine - INFO - [cached since 28.44s ago] ('19AI405',)
2026-01-02 15:48:21,968 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:49:48,690 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:49:48,691 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:49:48,694 - sqlalchemy.engine.Engine - INFO - [cached since 129.7s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:49:48,713 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:49:48,715 - sqlalchemy.engine.Engine - INFO - [cached since 129.7s ago] (datetime.datetime(2026, 1, 2, 10, 19, 48, 712074, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:49:48,722 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:49:48,751 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-02 15:49:49,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:49:49,029 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 15:49:49,032 - sqlalchemy.engine.Engine - INFO - [generated in 0.00275s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 15:49:49,123 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:49:49,129 - sqlalchemy.engine.Engine - INFO - [cached since 119.9s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-02 15:49:49,138 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 15:49:49,140 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:49:49,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00342s] ('UPLOADING', 3)
2026-01-02 15:49:50,312 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (309 bytes)
2026-01-02 15:49:50,324 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 15:49:50,331 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C0F95E3CB0>
2026-01-02 15:49:50,333 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:49:50,334 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:49:50,334 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:49:50,336 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:49:50,337 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:49:50,502 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:19:50 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 10:19:50 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 15:49:50,505 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:49:50,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:49:50,508 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:49:50,510 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:49:50,515 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 903537677, 'license': 'unknown', 'author': 'Kavinraja D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 309}]
2026-01-02 15:49:50,516 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 903537677
2026-01-02 15:49:50,519 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:49:50,521 - sqlalchemy.engine.Engine - INFO - [generated in 0.00175s] (903537677, 3)
2026-01-02 15:49:50,533 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 15:49:50,538 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:49:50,538 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:49:50,539 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:49:50,540 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:49:50,541 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:49:50,752 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:19:50 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:49:50,754 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:49:50,755 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:49:50,757 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:49:50,759 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:49:50,763 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 15:49:50,764 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 15:49:50,765 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:49:50,767 - sqlalchemy.engine.Engine - INFO - [cached since 1.627s ago] ('SUBMITTING', 3)
2026-01-02 15:49:50,771 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 903537677
2026-01-02 15:49:50,780 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:49:50,783 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:49:50,784 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:49:50,786 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:49:50,787 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:49:51,225 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:19:50 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:49:51,227 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:49:51,229 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:49:51,233 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:49:51,234 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:49:51,239 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 15:49:51,240 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 15:49:51,241 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 15:49:51,255 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 15:49:51,257 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 15:49:51,259 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 15:49:51,263 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 15:49:51,264 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 15:49:51,452 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:19:51 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'966'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 15:49:51,453 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 15:49:51,454 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 15:49:51,456 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 15:49:51,456 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 15:49:51,457 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767349190, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 309, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767349190, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 15:49:51,458 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 15:49:51,459 - app.services.submission_service - INFO - Submission ID: 3
2026-01-02 15:49:51,460 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-02 15:49:51,461 - app.services.submission_service - INFO - Submission timemodified: 1767349190
2026-01-02 15:49:51,461 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 15:49:51,462 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 15:49:51,463 - app.services.submission_service - INFO - Can edit: True
2026-01-02 15:49:51,463 - app.services.submission_service - INFO - Can submit: False
2026-01-02 15:49:51,464 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 15:49:51,465 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-02 15:49:51,466 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 15:49:51,469 - httpcore.connection - DEBUG - close.started
2026-01-02 15:49:51,470 - httpcore.connection - DEBUG - close.complete
2026-01-02 15:49:51,471 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 903537677, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102101951'}
2026-01-02 15:49:51,471 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 15:49:51,473 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:49:51,474 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] (3,)
2026-01-02 15:49:51,479 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 15:49:51,480 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('COMPLETED', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102101951', datetime.datetime(2026, 1, 2, 10, 19, 51, 477901), datetime.datetime(2026, 1, 2, 10, 19, 51, 477922), 3)
2026-01-02 15:49:51,484 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:49:51,485 - sqlalchemy.engine.Engine - INFO - [cached since 122.3s ago] (3,)
2026-01-02 15:49:51,488 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-02 15:49:51,489 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:49:51,490 - sqlalchemy.engine.Engine - INFO - [cached since 122.3s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 903537677, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102101951"}', None, None)
2026-01-02 15:49:51,493 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:49:51,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:49:51,688 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 15:49:51,690 - sqlalchemy.engine.Engine - INFO - [cached since 2.661s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 15:49:51,766 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:49:51,922 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:49:51,922 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:49:51,923 - sqlalchemy.engine.Engine - INFO - [cached since 133s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:49:51,940 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:49:51,941 - sqlalchemy.engine.Engine - INFO - [cached since 132.9s ago] (datetime.datetime(2026, 1, 2, 10, 19, 51, 939654, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:49:51,951 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:49:51,972 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:49:52,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:49:52,223 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:49:52,225 - sqlalchemy.engine.Engine - INFO - [cached since 133s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:49:52,293 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:49:52,296 - sqlalchemy.engine.Engine - INFO - [cached since 133s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:49:52,303 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:50:08,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:50:08,264 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:50:08,266 - sqlalchemy.engine.Engine - INFO - [cached since 149.3s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:50:08,284 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:50:08,286 - sqlalchemy.engine.Engine - INFO - [cached since 149.3s ago] (datetime.datetime(2026, 1, 2, 10, 20, 8, 283838, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:50:08,293 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:50:08,322 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:50:08,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:50:08,528 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:50:08,530 - sqlalchemy.engine.Engine - INFO - [cached since 149.3s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:50:08,604 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:50:08,606 - sqlalchemy.engine.Engine - INFO - [cached since 149.3s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:50:08,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:50:13,093 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 15:50:13,096 - app.main - INFO - Database connections closed
2026-01-02 15:50:14,996 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:50:15,083 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:50:15,083 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:15,086 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:50:15,086 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:15,088 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:50:15,088 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:15,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:50:15,093 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,094 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,103 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,103 - sqlalchemy.engine.Engine - INFO - [cached since 0.0102s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,105 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.01208s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,106 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,107 - sqlalchemy.engine.Engine - INFO - [cached since 0.01363s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,109 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,111 - sqlalchemy.engine.Engine - INFO - [cached since 0.01746s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,113 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,113 - sqlalchemy.engine.Engine - INFO - [cached since 0.02s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,115 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:15,116 - sqlalchemy.engine.Engine - INFO - [cached since 0.02299s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:15,119 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:50:15,120 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:50:15,124 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:50:15,132 - app.main - INFO - Database tables created/verified
2026-01-02 15:50:15,134 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:50:15,135 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:50:15,136 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:50:26,920 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 15:50:26,921 - app.main - INFO - Database connections closed
2026-01-02 15:50:28,355 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:50:28,432 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:50:28,433 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:28,435 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:50:28,435 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:28,436 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:50:28,437 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:50:28,438 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:50:28,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,443 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,448 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,449 - sqlalchemy.engine.Engine - INFO - [cached since 0.007263s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,450 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,451 - sqlalchemy.engine.Engine - INFO - [cached since 0.008917s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.01022s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.01144s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.0127s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,456 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:50:28,456 - sqlalchemy.engine.Engine - INFO - [cached since 0.01421s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:50:28,459 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:50:28,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00060s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:50:28,462 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:50:28,465 - app.main - INFO - Database tables created/verified
2026-01-02 15:50:28,466 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:50:28,467 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:50:28,468 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:51:03,074 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:03,076 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:51:03,077 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 15:51:03,079 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:03,079 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 15:51:03,080 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 15:51:03,083 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:03,085 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:03,087 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 15:51:03,088 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:03,091 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:03,092 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 15:51:03,093 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 15:51:03,094 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:03,094 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:03,095 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 15:51:03,095 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:03,096 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:51:03,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:03,322 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 15:51:03,324 - sqlalchemy.engine.Engine - INFO - [generated in 0.00239s] (1,)
2026-01-02 15:51:03,341 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 15:51:03,351 - app.services.file_processor - INFO - Saved file: ./uploads/pending/ecfdc1d3fd154a559d77c4af9f1d55a4.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 15:51:03,363 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 15:51:03,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.00278s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 15:51:03,432 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 15:51:03,438 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 15:51:03,439 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] ('./uploads/pending/ecfdc1d3fd154a559d77c4af9f1d55a4.pdf', 'PENDING', 3)
2026-01-02 15:51:03,453 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:51:03,455 - sqlalchemy.engine.Engine - INFO - [generated in 0.00232s] (3,)
2026-01-02 15:51:03,471 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:51:03,473 - sqlalchemy.engine.Engine - INFO - [generated in 0.00257s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 15:51:03,485 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:11,607 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:11,612 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:51:11,613 - sqlalchemy.engine.Engine - INFO - [generated in 0.00185s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:51:11,636 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:51:11,638 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] (datetime.datetime(2026, 1, 2, 10, 21, 11, 634099, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:51:11,643 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:11,668 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:51:11,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:11,853 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:51:11,854 - sqlalchemy.engine.Engine - INFO - [generated in 0.00205s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:51:11,913 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:51:11,915 - sqlalchemy.engine.Engine - INFO - [generated in 0.00278s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:51:11,925 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:11,927 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('19AI405',)
2026-01-02 15:51:11,940 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:11,942 - sqlalchemy.engine.Engine - INFO - [cached since 0.01706s ago] ('19AI405',)
2026-01-02 15:51:11,950 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:18,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:18,858 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:51:18,859 - sqlalchemy.engine.Engine - INFO - [cached since 7.248s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:51:18,873 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:51:18,880 - sqlalchemy.engine.Engine - INFO - [cached since 7.244s ago] (datetime.datetime(2026, 1, 2, 10, 21, 18, 872802, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:51:18,887 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:18,902 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:51:19,055 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:19,056 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:51:19,057 - sqlalchemy.engine.Engine - INFO - [cached since 7.205s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:51:19,102 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:51:19,105 - sqlalchemy.engine.Engine - INFO - [cached since 7.193s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:51:19,110 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:19,111 - sqlalchemy.engine.Engine - INFO - [cached since 7.186s ago] ('19AI405',)
2026-01-02 15:51:19,121 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:19,123 - sqlalchemy.engine.Engine - INFO - [cached since 7.197s ago] ('19AI405',)
2026-01-02 15:51:19,132 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:34,808 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 15:51:34,809 - app.main - INFO - Database connections closed
2026-01-02 15:51:40,006 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:51:40,092 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:51:40,093 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:51:40,095 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:51:40,096 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:51:40,097 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:51:40,098 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:51:40,100 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:40,103 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,112 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,113 - sqlalchemy.engine.Engine - INFO - [cached since 0.009681s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,115 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,116 - sqlalchemy.engine.Engine - INFO - [cached since 0.01266s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,117 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,118 - sqlalchemy.engine.Engine - INFO - [cached since 0.01505s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,119 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,120 - sqlalchemy.engine.Engine - INFO - [cached since 0.017s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,121 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,122 - sqlalchemy.engine.Engine - INFO - [cached since 0.0188s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,123 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:51:40,124 - sqlalchemy.engine.Engine - INFO - [cached since 0.02059s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:51:40,126 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:51:40,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:51:40,144 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:40,150 - app.main - INFO - Database tables created/verified
2026-01-02 15:51:40,152 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:51:40,153 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:51:40,155 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:51:44,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:44,601 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:51:44,602 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:51:44,627 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:51:44,629 - sqlalchemy.engine.Engine - INFO - [generated in 0.00206s] (datetime.datetime(2026, 1, 2, 10, 21, 44, 621769, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:51:44,637 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:44,664 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:51:44,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:44,842 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:51:44,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00307s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:51:44,906 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:51:44,908 - sqlalchemy.engine.Engine - INFO - [generated in 0.00283s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:51:44,921 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:44,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00209s] ('19AI405',)
2026-01-02 15:51:44,934 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:51:44,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.01527s ago] ('19AI405',)
2026-01-02 15:51:44,942 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:49,142 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:49,143 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:51:49,145 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 15:51:49,146 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:49,146 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:49,147 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 15:51:49,148 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:49,149 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:49,150 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 15:51:49,151 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 15:51:49,152 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:49,153 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:49,154 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 15:51:49,156 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:49,158 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:51:49,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:49,411 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 15:51:49,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] ('admin',)
2026-01-02 15:51:49,833 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 15:51:49,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] (datetime.datetime(2026, 1, 2, 10, 21, 49, 832098, tzinfo=datetime.timezone.utc), 1)
2026-01-02 15:51:49,838 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:51:55,841 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:55,842 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:51:55,843 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 15:51:55,844 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:55,844 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 15:51:55,845 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 15:51:55,846 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:55,846 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:55,847 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 15:51:55,848 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:55,850 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:51:55,851 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 15:51:55,852 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 15:51:55,854 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:51:55,855 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:51:55,856 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 15:51:55,857 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:51:55,859 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:51:56,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:51:56,034 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 15:51:56,036 - sqlalchemy.engine.Engine - INFO - [generated in 0.00154s] (1,)
2026-01-02 15:51:56,053 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 15:51:56,064 - app.services.file_processor - INFO - Saved file: ./uploads/pending/19dd02f14ee149858d23c09a5ccfb8f2.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 15:51:56,070 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 15:51:56,072 - sqlalchemy.engine.Engine - INFO - [generated in 0.00234s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 15:51:56,120 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 15:51:56,124 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:51:56,125 - sqlalchemy.engine.Engine - INFO - [generated in 0.00182s] ('./uploads/pending/19dd02f14ee149858d23c09a5ccfb8f2.pdf', 3)
2026-01-02 15:51:56,139 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:51:56,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00230s] (3,)
2026-01-02 15:51:56,158 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:51:56,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00244s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 15:51:56,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:56:27,427 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:56:27,428 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 15:56:27,428 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 15:56:27,429 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:56:27,429 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 15:56:27,429 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 15:56:27,430 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:56:27,430 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:56:27,431 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 15:56:27,431 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:56:27,432 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 15:56:27,432 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 15:56:27,433 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 15:56:27,433 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 15:56:27,434 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 15:56:27,435 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 15:56:27,436 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 15:56:27,436 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 15:56:27,547 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:56:27,547 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 15:56:27,548 - sqlalchemy.engine.Engine - INFO - [cached since 271.5s ago] (1,)
2026-01-02 15:56:27,555 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 15:56:27,560 - app.services.file_processor - INFO - Saved file: ./uploads/pending/0ce377c044f8461d84643c9a6606a746.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 15:56:27,561 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 15:56:27,562 - sqlalchemy.engine.Engine - INFO - [cached since 271.5s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 15:56:27,599 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 15:56:27,599 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 15:56:27,600 - sqlalchemy.engine.Engine - INFO - [cached since 271.5s ago] ('./uploads/pending/0ce377c044f8461d84643c9a6606a746.pdf', 3)
2026-01-02 15:56:27,604 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 15:56:27,605 - sqlalchemy.engine.Engine - INFO - [cached since 271.5s ago] (3,)
2026-01-02 15:56:27,608 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 15:56:27,609 - sqlalchemy.engine.Engine - INFO - [cached since 271.5s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 15:56:27,613 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:57:52,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:57:52,454 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:57:52,457 - sqlalchemy.engine.Engine - INFO - [cached since 367.9s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:57:52,476 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:57:52,477 - sqlalchemy.engine.Engine - INFO - [cached since 367.9s ago] (datetime.datetime(2026, 1, 2, 10, 27, 52, 475833, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:57:52,489 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:57:52,505 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:57:52,636 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:57:52,637 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:57:52,638 - sqlalchemy.engine.Engine - INFO - [cached since 367.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:57:52,684 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:57:52,686 - sqlalchemy.engine.Engine - INFO - [cached since 367.8s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:57:52,689 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:57:52,692 - sqlalchemy.engine.Engine - INFO - [cached since 367.8s ago] ('19AI405',)
2026-01-02 15:57:52,701 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:57:52,702 - sqlalchemy.engine.Engine - INFO - [cached since 367.8s ago] ('19AI405',)
2026-01-02 15:57:52,707 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:57:54,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:57:54,060 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:57:54,061 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:57:54,086 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:57:54,087 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] (datetime.datetime(2026, 1, 2, 10, 27, 54, 85185, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:57:54,094 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:57:54,109 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:57:54,300 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:57:54,302 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:57:54,305 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:57:54,365 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:57:54,367 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:57:54,373 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:57:54,374 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] ('19AI405',)
2026-01-02 15:57:54,381 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:57:54,382 - sqlalchemy.engine.Engine - INFO - [cached since 369.5s ago] ('19AI405',)
2026-01-02 15:57:54,389 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:58:51,939 - app.main - INFO - Starting Examination Middleware...
2026-01-02 15:58:52,017 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 15:58:52,017 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:58:52,019 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 15:58:52,019 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:58:52,021 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 15:58:52,021 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 15:58:52,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:58:52,026 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,027 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,034 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,035 - sqlalchemy.engine.Engine - INFO - [cached since 0.008825s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,036 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,037 - sqlalchemy.engine.Engine - INFO - [cached since 0.01066s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,038 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,039 - sqlalchemy.engine.Engine - INFO - [cached since 0.01277s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,040 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,041 - sqlalchemy.engine.Engine - INFO - [cached since 0.01475s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,042 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,042 - sqlalchemy.engine.Engine - INFO - [cached since 0.01639s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,043 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 15:58:52,044 - sqlalchemy.engine.Engine - INFO - [cached since 0.01783s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 15:58:52,046 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 15:58:52,046 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] ('workflowstatus', 'pg_catalog')
2026-01-02 15:58:52,049 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:58:52,053 - app.main - INFO - Database tables created/verified
2026-01-02 15:58:52,054 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 15:58:52,055 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 15:58:52,056 - app.main - INFO - Examination Middleware started successfully
2026-01-02 15:59:15,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:59:15,360 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 15:59:15,361 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 15:59:15,381 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 15:59:15,383 - sqlalchemy.engine.Engine - INFO - [generated in 0.00220s] (datetime.datetime(2026, 1, 2, 10, 29, 15, 376330, tzinfo=datetime.timezone.utc), 10)
2026-01-02 15:59:15,390 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 15:59:15,418 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 15:59:15,726 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 15:59:15,736 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 15:59:15,738 - sqlalchemy.engine.Engine - INFO - [generated in 0.00243s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 15:59:15,806 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 15:59:15,809 - sqlalchemy.engine.Engine - INFO - [generated in 0.00300s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 15:59:15,820 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:59:15,821 - sqlalchemy.engine.Engine - INFO - [generated in 0.00182s] ('19AI405',)
2026-01-02 15:59:15,833 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 15:59:15,835 - sqlalchemy.engine.Engine - INFO - [cached since 0.01511s ago] ('19AI405',)
2026-01-02 15:59:15,842 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:01:35,921 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 16:01:35,922 - app.main - INFO - Database connections closed
2026-01-02 16:01:37,558 - app.main - INFO - Starting Examination Middleware...
2026-01-02 16:01:37,637 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 16:01:37,638 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:37,640 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 16:01:37,640 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:37,641 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 16:01:37,642 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:37,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:01:37,646 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,647 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.007679s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,656 - sqlalchemy.engine.Engine - INFO - [cached since 0.00948s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,657 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,657 - sqlalchemy.engine.Engine - INFO - [cached since 0.01085s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,658 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,659 - sqlalchemy.engine.Engine - INFO - [cached since 0.01232s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,660 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,661 - sqlalchemy.engine.Engine - INFO - [cached since 0.01457s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,662 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:37,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.01639s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:37,665 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 16:01:37,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('workflowstatus', 'pg_catalog')
2026-01-02 16:01:37,670 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:01:37,673 - app.main - INFO - Database tables created/verified
2026-01-02 16:01:37,674 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 16:01:37,674 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 16:01:37,675 - app.main - INFO - Examination Middleware started successfully
2026-01-02 16:01:39,022 - app.main - INFO - Starting Examination Middleware...
2026-01-02 16:01:39,097 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 16:01:39,098 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:39,100 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 16:01:39,101 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:39,102 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 16:01:39,103 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 16:01:39,104 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:01:39,107 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,108 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,115 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,116 - sqlalchemy.engine.Engine - INFO - [cached since 0.008489s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,117 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,118 - sqlalchemy.engine.Engine - INFO - [cached since 0.0107s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,119 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,119 - sqlalchemy.engine.Engine - INFO - [cached since 0.01212s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,120 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,121 - sqlalchemy.engine.Engine - INFO - [cached since 0.01342s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,122 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,122 - sqlalchemy.engine.Engine - INFO - [cached since 0.01497s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,123 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 16:01:39,124 - sqlalchemy.engine.Engine - INFO - [cached since 0.01643s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 16:01:39,125 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 16:01:39,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] ('workflowstatus', 'pg_catalog')
2026-01-02 16:01:39,129 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:01:39,132 - app.main - INFO - Database tables created/verified
2026-01-02 16:01:39,133 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 16:01:39,134 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 16:01:39,135 - app.main - INFO - Examination Middleware started successfully
2026-01-02 16:01:54,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:01:54,250 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:01:54,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:01:54,260 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:01:54,261 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] (datetime.datetime(2026, 1, 2, 10, 31, 54, 257893, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:01:54,263 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:01:54,268 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:01:54,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:01:54,390 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:01:54,391 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:01:54,445 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:01:54,447 - sqlalchemy.engine.Engine - INFO - [generated in 0.00178s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:01:54,457 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:01:54,458 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] ('19AI405',)
2026-01-02 16:01:54,468 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:01:54,472 - sqlalchemy.engine.Engine - INFO - [cached since 0.01445s ago] ('19AI405',)
2026-01-02 16:01:54,479 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:03:28,610 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:03:28,611 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 16:03:28,611 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 16:03:28,612 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:03:28,613 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 16:03:28,613 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 16:03:28,614 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:03:28,614 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:03:28,615 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 16:03:28,615 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:03:28,616 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:03:28,617 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 16:03:28,619 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 16:03:28,620 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:03:28,621 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:03:28,622 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 16:03:28,623 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:03:28,624 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 16:03:28,833 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:03:28,835 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:03:28,836 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (1,)
2026-01-02 16:03:28,846 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 16:03:28,851 - app.services.file_processor - INFO - Saved file: ./uploads/pending/9a474cccd9964d9aa5a7916b075698d3.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 16:03:28,854 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 16:03:28,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00157s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 16:03:28,898 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 16:03:28,904 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 16:03:28,905 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('./uploads/pending/9a474cccd9964d9aa5a7916b075698d3.pdf', 3)
2026-01-02 16:03:28,918 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 16:03:28,922 - sqlalchemy.engine.Engine - INFO - [generated in 0.00404s] (3,)
2026-01-02 16:03:28,940 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 16:03:28,944 - sqlalchemy.engine.Engine - INFO - [generated in 0.00469s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 16:03:28,955 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:03:38,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:03:38,362 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:03:38,365 - sqlalchemy.engine.Engine - INFO - [cached since 104.1s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:03:38,374 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:03:38,375 - sqlalchemy.engine.Engine - INFO - [cached since 104.1s ago] (datetime.datetime(2026, 1, 2, 10, 33, 38, 373466, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:03:38,382 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:03:38,398 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:03:38,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:03:38,551 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:03:38,552 - sqlalchemy.engine.Engine - INFO - [cached since 104.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:03:38,622 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:03:38,625 - sqlalchemy.engine.Engine - INFO - [cached since 104.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:03:38,631 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:03:38,633 - sqlalchemy.engine.Engine - INFO - [cached since 104.2s ago] ('19AI405',)
2026-01-02 16:03:38,644 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:03:38,646 - sqlalchemy.engine.Engine - INFO - [cached since 104.2s ago] ('19AI405',)
2026-01-02 16:03:38,652 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:05:44,646 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:05:44,646 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 16:05:44,646 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 16:05:44,647 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:05:44,647 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 16:05:44,647 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 16:05:44,648 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:05:44,648 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:05:44,648 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 16:05:44,649 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:05:44,649 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:05:44,649 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 16:05:44,649 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 16:05:44,650 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:05:44,650 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:05:44,650 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 16:05:44,651 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:05:44,651 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 16:05:44,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:05:44,766 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:05:44,767 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] (1,)
2026-01-02 16:05:44,772 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 16:05:44,776 - app.services.file_processor - INFO - Saved file: ./uploads/pending/5e66c92feb684d9bac7c5215715f90b4.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 16:05:44,778 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 16:05:44,781 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 16:05:44,817 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 16:05:44,818 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 16:05:44,819 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] ('./uploads/pending/5e66c92feb684d9bac7c5215715f90b4.pdf', 3)
2026-01-02 16:05:44,821 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 16:05:44,822 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] (3,)
2026-01-02 16:05:44,825 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 16:05:44,826 - sqlalchemy.engine.Engine - INFO - [cached since 135.9s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 16:05:44,833 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:30,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:30,999 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:31,000 - sqlalchemy.engine.Engine - INFO - [cached since 242.2s ago] (1,)
2026-01-02 16:07:31,010 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:31,013 - sqlalchemy.engine.Engine - INFO - [generated in 0.00325s] ()
2026-01-02 16:07:31,073 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:31,075 - sqlalchemy.engine.Engine - INFO - [generated in 0.00197s] (50, 0)
2026-01-02 16:07:31,084 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:34,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:34,346 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:34,347 - sqlalchemy.engine.Engine - INFO - [cached since 245.5s ago] (1,)
2026-01-02 16:07:34,353 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:34,354 - sqlalchemy.engine.Engine - INFO - [cached since 3.344s ago] ()
2026-01-02 16:07:34,392 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:34,394 - sqlalchemy.engine.Engine - INFO - [cached since 3.321s ago] (50, 0)
2026-01-02 16:07:34,404 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:35,284 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:35,286 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:35,288 - sqlalchemy.engine.Engine - INFO - [cached since 246.5s ago] (1,)
2026-01-02 16:07:35,308 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:35,311 - sqlalchemy.engine.Engine - INFO - [cached since 4.301s ago] ()
2026-01-02 16:07:35,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:35,433 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:35,434 - sqlalchemy.engine.Engine - INFO - [cached since 246.6s ago] (1,)
2026-01-02 16:07:35,437 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:35,439 - sqlalchemy.engine.Engine - INFO - [cached since 4.366s ago] (50, 0)
2026-01-02 16:07:35,446 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:35,463 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:35,466 - sqlalchemy.engine.Engine - INFO - [cached since 4.456s ago] ()
2026-01-02 16:07:35,513 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:35,516 - sqlalchemy.engine.Engine - INFO - [cached since 4.443s ago] (50, 0)
2026-01-02 16:07:35,521 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:36,409 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:36,410 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:07:36,411 - sqlalchemy.engine.Engine - INFO - [cached since 342.2s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:07:36,431 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:07:36,433 - sqlalchemy.engine.Engine - INFO - [cached since 342.2s ago] (datetime.datetime(2026, 1, 2, 10, 37, 36, 430122, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:07:36,438 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:36,467 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:07:36,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:36,627 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:07:36,628 - sqlalchemy.engine.Engine - INFO - [cached since 342.2s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:07:36,689 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:07:36,690 - sqlalchemy.engine.Engine - INFO - [cached since 342.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:07:36,697 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:07:36,699 - sqlalchemy.engine.Engine - INFO - [cached since 342.2s ago] ('19AI405',)
2026-01-02 16:07:36,711 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:07:36,713 - sqlalchemy.engine.Engine - INFO - [cached since 342.3s ago] ('19AI405',)
2026-01-02 16:07:36,719 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:39,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:39,730 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:07:39,731 - sqlalchemy.engine.Engine - INFO - [cached since 345.5s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:07:39,747 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:07:39,748 - sqlalchemy.engine.Engine - INFO - [cached since 345.5s ago] (datetime.datetime(2026, 1, 2, 10, 37, 39, 746733, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:07:39,754 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:39,764 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-02 16:07:40,038 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:40,041 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 16:07:40,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 16:07:40,098 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 16:07:40,101 - sqlalchemy.engine.Engine - INFO - [cached since 251.2s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-02 16:07:40,113 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 16:07:40,116 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 16:07:40,118 - sqlalchemy.engine.Engine - INFO - [generated in 0.00193s] ('UPLOADING', 3)
2026-01-02 16:07:40,861 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (309 bytes)
2026-01-02 16:07:40,892 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 16:07:40,903 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000230F8A9BE00>
2026-01-02 16:07:40,908 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:07:40,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:07:40,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:07:40,918 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:07:40,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:07:41,458 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:37:40 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 10:37:41 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 16:07:41,462 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:07:41,463 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:07:41,468 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:07:41,470 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:07:41,475 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 650962680, 'license': 'unknown', 'author': 'Kavinraja D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 309}]
2026-01-02 16:07:41,476 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 650962680
2026-01-02 16:07:41,480 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 16:07:41,482 - sqlalchemy.engine.Engine - INFO - [generated in 0.00247s] (650962680, 3)
2026-01-02 16:07:41,494 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 16:07:41,503 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:07:41,504 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:07:41,505 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:07:41,507 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:07:41,508 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:07:41,781 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:37:41 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 16:07:41,782 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:07:41,782 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:07:41,784 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:07:41,784 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:07:41,786 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 16:07:41,786 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 16:07:41,787 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 16:07:41,787 - sqlalchemy.engine.Engine - INFO - [cached since 1.671s ago] ('SUBMITTING', 3)
2026-01-02 16:07:41,789 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 650962680
2026-01-02 16:07:41,797 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:07:41,798 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:07:41,799 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:07:41,800 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:07:41,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:07:42,206 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:37:41 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 16:07:42,208 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:07:42,209 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:07:42,213 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:07:42,214 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:07:42,218 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 16:07:42,219 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 16:07:42,219 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 16:07:42,229 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:07:42,232 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:07:42,233 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:07:42,235 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:07:42,235 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:07:42,447 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 10:37:42 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'966'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 16:07:42,449 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:07:42,450 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:07:42,452 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:07:42,453 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:07:42,458 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767350261, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 309, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767350261, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 16:07:42,459 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 16:07:42,460 - app.services.submission_service - INFO - Submission ID: 3
2026-01-02 16:07:42,462 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-02 16:07:42,463 - app.services.submission_service - INFO - Submission timemodified: 1767350261
2026-01-02 16:07:42,464 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 16:07:42,465 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 16:07:42,466 - app.services.submission_service - INFO - Can edit: True
2026-01-02 16:07:42,467 - app.services.submission_service - INFO - Can submit: False
2026-01-02 16:07:42,468 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 16:07:42,469 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-02 16:07:42,470 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 16:07:42,473 - httpcore.connection - DEBUG - close.started
2026-01-02 16:07:42,476 - httpcore.connection - DEBUG - close.complete
2026-01-02 16:07:42,477 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 650962680, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102103742'}
2026-01-02 16:07:42,479 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 16:07:42,487 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 16:07:42,488 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] (3,)
2026-01-02 16:07:42,497 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 16:07:42,502 - sqlalchemy.engine.Engine - INFO - [generated in 0.00455s] ('COMPLETED', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102103742', datetime.datetime(2026, 1, 2, 10, 37, 42, 494811), datetime.datetime(2026, 1, 2, 10, 37, 42, 494871), 3)
2026-01-02 16:07:42,512 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 16:07:42,515 - sqlalchemy.engine.Engine - INFO - [cached since 253.6s ago] (3,)
2026-01-02 16:07:42,519 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-02 16:07:42,520 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 16:07:42,521 - sqlalchemy.engine.Engine - INFO - [cached since 253.6s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 650962680, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102103742"}', None, None)
2026-01-02 16:07:42,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:42,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:42,676 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 16:07:42,676 - sqlalchemy.engine.Engine - INFO - [cached since 2.636s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 16:07:42,738 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:42,908 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:42,909 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:07:42,910 - sqlalchemy.engine.Engine - INFO - [cached since 348.7s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:07:42,920 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:07:42,921 - sqlalchemy.engine.Engine - INFO - [cached since 348.7s ago] (datetime.datetime(2026, 1, 2, 10, 37, 42, 920304, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:07:42,924 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:42,948 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:07:43,118 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:43,120 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:07:43,121 - sqlalchemy.engine.Engine - INFO - [cached since 348.7s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:07:43,188 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:07:43,189 - sqlalchemy.engine.Engine - INFO - [cached since 348.7s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:07:43,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:45,318 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:45,320 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:45,322 - sqlalchemy.engine.Engine - INFO - [cached since 256.5s ago] (1,)
2026-01-02 16:07:45,339 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:45,344 - sqlalchemy.engine.Engine - INFO - [cached since 14.33s ago] ()
2026-01-02 16:07:45,390 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:45,392 - sqlalchemy.engine.Engine - INFO - [cached since 14.32s ago] (50, 0)
2026-01-02 16:07:45,400 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:07:46,472 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:07:46,473 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:07:46,474 - sqlalchemy.engine.Engine - INFO - [cached since 257.6s ago] (1,)
2026-01-02 16:07:46,486 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:07:46,488 - sqlalchemy.engine.Engine - INFO - [cached since 15.48s ago] ()
2026-01-02 16:07:46,553 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:07:46,555 - sqlalchemy.engine.Engine - INFO - [cached since 15.48s ago] (50, 0)
2026-01-02 16:07:46,563 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:11:55,948 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:11:55,949 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:11:55,950 - sqlalchemy.engine.Engine - INFO - [cached since 507.1s ago] (1,)
2026-01-02 16:11:55,960 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:11:55,962 - sqlalchemy.engine.Engine - INFO - [cached since 265s ago] ()
2026-01-02 16:11:56,015 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:11:56,017 - sqlalchemy.engine.Engine - INFO - [cached since 264.9s ago] (50, 0)
2026-01-02 16:11:56,025 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:06,734 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:12:06,734 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 16:12:06,735 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 16:12:06,735 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:12:06,735 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 16:12:06,736 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 16:12:06,736 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:12:06,736 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:12:06,737 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 16:12:06,737 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:12:06,738 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 16:12:06,738 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 16:12:06,738 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 16:12:06,739 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 16:12:06,739 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 16:12:06,739 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 16:12:06,740 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 16:12:06,740 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 16:12:06,950 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:06,951 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:12:06,951 - sqlalchemy.engine.Engine - INFO - [cached since 518.1s ago] (1,)
2026-01-02 16:12:06,959 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 16:12:06,963 - app.services.file_processor - INFO - Saved file: ./uploads/pending/0d57cc72530b4b25a5de0015c1abd36a.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 16:12:06,963 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 16:12:06,964 - sqlalchemy.engine.Engine - INFO - [cached since 518.1s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 16:12:06,993 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 16:12:06,995 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 16:12:06,995 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('./uploads/pending/0d57cc72530b4b25a5de0015c1abd36a.pdf', 'PENDING', 3)
2026-01-02 16:12:06,998 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 16:12:06,999 - sqlalchemy.engine.Engine - INFO - [cached since 518.1s ago] (3,)
2026-01-02 16:12:07,001 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 16:12:07,002 - sqlalchemy.engine.Engine - INFO - [cached since 518.1s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 16:12:07,009 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:07,139 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:07,158 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:12:07,159 - sqlalchemy.engine.Engine - INFO - [cached since 518.3s ago] (1,)
2026-01-02 16:12:07,167 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:12:07,167 - sqlalchemy.engine.Engine - INFO - [cached since 276.2s ago] ()
2026-01-02 16:12:07,199 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:12:07,200 - sqlalchemy.engine.Engine - INFO - [cached since 276.1s ago] (50, 0)
2026-01-02 16:12:07,203 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:13,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:13,145 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:12:13,147 - sqlalchemy.engine.Engine - INFO - [cached since 524.3s ago] (1,)
2026-01-02 16:12:13,164 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:12:13,168 - sqlalchemy.engine.Engine - INFO - [cached since 282.2s ago] ()
2026-01-02 16:12:13,201 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:12:13,202 - sqlalchemy.engine.Engine - INFO - [cached since 282.1s ago] (50, 0)
2026-01-02 16:12:13,207 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:14,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:14,730 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:12:14,731 - sqlalchemy.engine.Engine - INFO - [cached since 525.9s ago] (1,)
2026-01-02 16:12:14,749 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:12:14,751 - sqlalchemy.engine.Engine - INFO - [cached since 283.7s ago] ()
2026-01-02 16:12:14,798 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:12:14,800 - sqlalchemy.engine.Engine - INFO - [cached since 283.7s ago] (50, 0)
2026-01-02 16:12:14,806 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:18,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:18,458 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:12:18,460 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:12:18,472 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:12:18,475 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] (datetime.datetime(2026, 1, 2, 10, 42, 18, 471713, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:12:18,481 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:12:18,493 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:12:18,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:12:18,648 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:12:18,649 - sqlalchemy.engine.Engine - INFO - [cached since 624.3s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:12:18,688 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:12:18,690 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:12:18,694 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:12:18,695 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('19AI405',)
2026-01-02 16:12:18,701 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:12:18,702 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('19AI405',)
2026-01-02 16:12:18,706 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:33,125 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:33,127 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:33,128 - sqlalchemy.engine.Engine - INFO - [cached since 844.3s ago] (1,)
2026-01-02 16:17:33,146 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:33,149 - sqlalchemy.engine.Engine - INFO - [cached since 602.1s ago] ()
2026-01-02 16:17:33,221 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:33,223 - sqlalchemy.engine.Engine - INFO - [cached since 602.2s ago] (50, 0)
2026-01-02 16:17:33,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:37,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:37,939 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:37,940 - sqlalchemy.engine.Engine - INFO - [cached since 849.1s ago] (1,)
2026-01-02 16:17:37,949 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:37,950 - sqlalchemy.engine.Engine - INFO - [cached since 606.9s ago] ()
2026-01-02 16:17:38,008 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:38,009 - sqlalchemy.engine.Engine - INFO - [cached since 606.9s ago] (50, 0)
2026-01-02 16:17:38,012 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:38,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:38,791 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:38,791 - sqlalchemy.engine.Engine - INFO - [cached since 850s ago] (1,)
2026-01-02 16:17:38,798 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:38,799 - sqlalchemy.engine.Engine - INFO - [cached since 607.8s ago] ()
2026-01-02 16:17:38,839 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:38,840 - sqlalchemy.engine.Engine - INFO - [cached since 607.8s ago] (50, 0)
2026-01-02 16:17:38,845 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:39,350 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:39,351 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:39,351 - sqlalchemy.engine.Engine - INFO - [cached since 850.5s ago] (1,)
2026-01-02 16:17:39,361 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:39,362 - sqlalchemy.engine.Engine - INFO - [cached since 608.4s ago] ()
2026-01-02 16:17:39,408 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:39,409 - sqlalchemy.engine.Engine - INFO - [cached since 608.3s ago] (50, 0)
2026-01-02 16:17:39,415 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:39,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:39,725 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:39,726 - sqlalchemy.engine.Engine - INFO - [cached since 850.9s ago] (1,)
2026-01-02 16:17:39,736 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:39,740 - sqlalchemy.engine.Engine - INFO - [cached since 608.7s ago] ()
2026-01-02 16:17:39,779 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:39,781 - sqlalchemy.engine.Engine - INFO - [cached since 608.7s ago] (50, 0)
2026-01-02 16:17:39,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:40,157 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:40,159 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:40,160 - sqlalchemy.engine.Engine - INFO - [cached since 851.3s ago] (1,)
2026-01-02 16:17:40,171 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:40,172 - sqlalchemy.engine.Engine - INFO - [cached since 609.2s ago] ()
2026-01-02 16:17:40,230 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:40,233 - sqlalchemy.engine.Engine - INFO - [cached since 609.2s ago] (50, 0)
2026-01-02 16:17:40,242 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:40,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:40,428 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:40,429 - sqlalchemy.engine.Engine - INFO - [cached since 851.6s ago] (1,)
2026-01-02 16:17:40,437 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:40,438 - sqlalchemy.engine.Engine - INFO - [cached since 609.4s ago] ()
2026-01-02 16:17:40,476 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:40,477 - sqlalchemy.engine.Engine - INFO - [cached since 609.4s ago] (50, 0)
2026-01-02 16:17:40,480 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:40,712 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:40,713 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:40,714 - sqlalchemy.engine.Engine - INFO - [cached since 851.9s ago] (1,)
2026-01-02 16:17:40,722 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:40,723 - sqlalchemy.engine.Engine - INFO - [cached since 609.7s ago] ()
2026-01-02 16:17:40,765 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:40,768 - sqlalchemy.engine.Engine - INFO - [cached since 609.7s ago] (50, 0)
2026-01-02 16:17:40,777 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:41,589 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:41,590 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:17:41,591 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:17:41,599 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:17:41,600 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] (datetime.datetime(2026, 1, 2, 10, 47, 41, 599480, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:17:41,606 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:41,614 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:17:41,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:41,737 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:17:41,738 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:17:41,788 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:17:41,789 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:17:41,793 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:17:41,794 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] ('19AI405',)
2026-01-02 16:17:41,800 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:17:41,802 - sqlalchemy.engine.Engine - INFO - [cached since 947.3s ago] ('19AI405',)
2026-01-02 16:17:41,805 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:47,099 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:47,100 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:17:47,101 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:17:47,111 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:17:47,112 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] (datetime.datetime(2026, 1, 2, 10, 47, 47, 111164, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:17:47,115 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:47,123 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:17:47,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:47,296 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:17:47,298 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:17:47,363 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:17:47,365 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:17:47,372 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:17:47,374 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] ('19AI405',)
2026-01-02 16:17:47,387 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:17:47,389 - sqlalchemy.engine.Engine - INFO - [cached since 952.9s ago] ('19AI405',)
2026-01-02 16:17:47,394 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:50,548 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:50,550 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:50,552 - sqlalchemy.engine.Engine - INFO - [cached since 861.7s ago] (1,)
2026-01-02 16:17:50,560 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:50,561 - sqlalchemy.engine.Engine - INFO - [cached since 619.6s ago] ()
2026-01-02 16:17:50,611 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:50,613 - sqlalchemy.engine.Engine - INFO - [cached since 619.5s ago] (50, 0)
2026-01-02 16:17:50,624 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:51,306 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:51,307 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:51,307 - sqlalchemy.engine.Engine - INFO - [cached since 862.5s ago] (1,)
2026-01-02 16:17:51,317 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:51,319 - sqlalchemy.engine.Engine - INFO - [cached since 620.3s ago] ()
2026-01-02 16:17:51,376 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:51,378 - sqlalchemy.engine.Engine - INFO - [cached since 620.3s ago] (50, 0)
2026-01-02 16:17:51,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:51,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:51,888 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:51,888 - sqlalchemy.engine.Engine - INFO - [cached since 863.1s ago] (1,)
2026-01-02 16:17:51,894 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:51,895 - sqlalchemy.engine.Engine - INFO - [cached since 620.9s ago] ()
2026-01-02 16:17:51,932 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:51,936 - sqlalchemy.engine.Engine - INFO - [cached since 620.9s ago] (50, 0)
2026-01-02 16:17:51,943 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:17:52,463 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:17:52,464 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:17:52,465 - sqlalchemy.engine.Engine - INFO - [cached since 863.6s ago] (1,)
2026-01-02 16:17:52,475 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:17:52,477 - sqlalchemy.engine.Engine - INFO - [cached since 621.5s ago] ()
2026-01-02 16:17:52,530 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:17:52,533 - sqlalchemy.engine.Engine - INFO - [cached since 621.5s ago] (50, 0)
2026-01-02 16:17:52,541 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:06,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:06,429 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:18:06,430 - sqlalchemy.engine.Engine - INFO - [cached since 877.6s ago] (1,)
2026-01-02 16:18:06,442 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:18:06,444 - sqlalchemy.engine.Engine - INFO - [cached since 635.4s ago] ()
2026-01-02 16:18:06,508 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:18:06,510 - sqlalchemy.engine.Engine - INFO - [cached since 635.4s ago] (50, 0)
2026-01-02 16:18:06,517 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:08,390 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:08,391 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:18:08,392 - sqlalchemy.engine.Engine - INFO - [cached since 879.6s ago] (1,)
2026-01-02 16:18:08,404 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:18:08,406 - sqlalchemy.engine.Engine - INFO - [cached since 637.4s ago] ()
2026-01-02 16:18:08,475 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:18:08,476 - sqlalchemy.engine.Engine - INFO - [cached since 637.4s ago] (50, 0)
2026-01-02 16:18:08,479 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:09,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:09,272 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:18:09,273 - sqlalchemy.engine.Engine - INFO - [cached since 975s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:18:09,289 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:18:09,290 - sqlalchemy.engine.Engine - INFO - [cached since 975s ago] (datetime.datetime(2026, 1, 2, 10, 48, 9, 288320, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:18:09,293 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:09,308 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:18:09,509 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:09,512 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:18:09,513 - sqlalchemy.engine.Engine - INFO - [cached since 975.1s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:18:09,576 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:18:09,578 - sqlalchemy.engine.Engine - INFO - [cached since 975.1s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:18:09,584 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:18:09,585 - sqlalchemy.engine.Engine - INFO - [cached since 975.1s ago] ('19AI405',)
2026-01-02 16:18:09,596 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:18:09,599 - sqlalchemy.engine.Engine - INFO - [cached since 975.1s ago] ('19AI405',)
2026-01-02 16:18:09,605 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:19,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:19,958 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:18:19,958 - sqlalchemy.engine.Engine - INFO - [cached since 985.7s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:18:19,969 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:18:19,969 - sqlalchemy.engine.Engine - INFO - [cached since 985.7s ago] (datetime.datetime(2026, 1, 2, 10, 48, 19, 968576, tzinfo=datetime.timezone.utc), 10)
2026-01-02 16:18:19,973 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:19,994 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:18:20,149 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:20,151 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:18:20,153 - sqlalchemy.engine.Engine - INFO - [cached since 985.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:18:20,212 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:18:20,214 - sqlalchemy.engine.Engine - INFO - [cached since 985.8s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:18:20,221 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:18:20,223 - sqlalchemy.engine.Engine - INFO - [cached since 985.8s ago] ('19AI405',)
2026-01-02 16:18:20,233 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:18:20,237 - sqlalchemy.engine.Engine - INFO - [cached since 985.8s ago] ('19AI405',)
2026-01-02 16:18:20,244 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:18:22,118 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:18:22,119 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:18:22,120 - sqlalchemy.engine.Engine - INFO - [cached since 893.3s ago] (1,)
2026-01-02 16:18:22,130 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:18:22,131 - sqlalchemy.engine.Engine - INFO - [cached since 651.1s ago] ()
2026-01-02 16:18:22,176 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:18:22,177 - sqlalchemy.engine.Engine - INFO - [cached since 651.1s ago] (50, 0)
2026-01-02 16:18:22,185 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:35,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:35,948 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 16:42:35,950 - sqlalchemy.engine.Engine - INFO - [cached since 2347s ago] (1,)
2026-01-02 16:42:35,966 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 16:42:35,968 - sqlalchemy.engine.Engine - INFO - [cached since 2105s ago] ()
2026-01-02 16:42:36,009 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 16:42:36,011 - sqlalchemy.engine.Engine - INFO - [cached since 2105s ago] (50, 0)
2026-01-02 16:42:36,016 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:44,260 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:44,261 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:42:44,262 - sqlalchemy.engine.Engine - INFO - [cached since 2450s ago] ('L_sn5Gf9nluT7VMIQQWXhu3XaZFtEVIpfDvNc_Q-btk',)
2026-01-02 16:42:44,276 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_sessions WHERE student_sessions.id = $1::INTEGER
2026-01-02 16:42:44,277 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] (10,)
2026-01-02 16:42:44,284 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:44,300 - app.db.database - ERROR - Database session error: 401: Session expired
2026-01-02 16:42:56,124 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 16:42:57,214 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 16:42:57,224 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 16:42:57,234 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000230F8B34A50>
2026-01-02 16:42:57,236 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:42:57,238 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:42:57,239 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:42:57,241 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:42:57,243 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:42:57,647 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 11:12:57 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 11:12:57 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 16:42:57,648 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:42:57,649 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:42:57,650 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:42:57,651 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:42:57,653 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 16:42:57,660 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 16:42:57,662 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 16:42:57,663 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 16:42:57,664 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 16:42:57,666 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 16:42:58,021 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 11:12:57 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 16:42:58,022 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 16:42:58,026 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 16:42:58,031 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 16:42:58,032 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 16:42:58,036 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 16:42:58,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:58,209 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 16:42:58,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] ('GO61lWY2UtS6AcwMlSvNLElYqCQDY266TUdOmOychWI', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNmc2bWhqWkl3bWJHNFRmTlZBSTJMdnZoNlNWSnNMVl9zWHdTWTVKVjA5X25uOEFYbE9zb1dwSTU4a19QS3BFQ2hXZGtVakJ1RFNaN1BQcGR6LXZKNTc5NzBPQzhzUTlMTHBlc1JuZ1ZQQlJnaFZ1eGJyR016amtha01DQkVzTHc4NWg=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 12, 12, 58, 37521, tzinfo=datetime.timezone.utc))
2026-01-02 16:42:58,223 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:58,411 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:58,414 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:42:58,417 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:42:58,475 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 16:42:58,478 - httpcore.connection - DEBUG - close.started
2026-01-02 16:42:58,480 - httpcore.connection - DEBUG - close.complete
2026-01-02 16:42:58,486 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:58,661 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:58,662 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:42:58,663 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('GO61lWY2UtS6AcwMlSvNLElYqCQDY266TUdOmOychWI',)
2026-01-02 16:42:58,673 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:42:58,674 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] (datetime.datetime(2026, 1, 2, 11, 12, 58, 673438, tzinfo=datetime.timezone.utc), 11)
2026-01-02 16:42:58,678 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:42:58,686 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:42:58,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:42:58,830 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:42:58,832 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:42:58,900 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:42:58,901 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:42:58,907 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:42:58,908 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('19AI405',)
2026-01-02 16:42:58,919 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:42:58,921 - sqlalchemy.engine.Engine - INFO - [cached since 2464s ago] ('19AI405',)
2026-01-02 16:42:58,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:50:04,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:50:04,814 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 16:50:04,816 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] ('GO61lWY2UtS6AcwMlSvNLElYqCQDY266TUdOmOychWI',)
2026-01-02 16:50:04,833 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 16:50:04,834 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] (datetime.datetime(2026, 1, 2, 11, 20, 4, 832167, tzinfo=datetime.timezone.utc), 11)
2026-01-02 16:50:04,842 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:50:04,866 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 16:50:05,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 16:50:05,070 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 16:50:05,072 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 16:50:05,142 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 16:50:05,143 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 16:50:05,147 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:50:05,150 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] ('19AI405',)
2026-01-02 16:50:05,162 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 16:50:05,163 - sqlalchemy.engine.Engine - INFO - [cached since 2891s ago] ('19AI405',)
2026-01-02 16:50:05,169 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 16:50:07,362 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 17:06:33,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:06:33,625 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:06:33,627 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] ('GO61lWY2UtS6AcwMlSvNLElYqCQDY266TUdOmOychWI',)
2026-01-02 17:06:33,663 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:06:33,664 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] (datetime.datetime(2026, 1, 2, 11, 36, 33, 662427, tzinfo=datetime.timezone.utc), 11)
2026-01-02 17:06:33,671 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:06:33,682 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:06:33,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:06:33,840 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:06:33,842 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:06:33,898 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:06:33,901 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:06:33,908 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:06:33,910 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] ('19AI405',)
2026-01-02 17:06:33,923 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:06:33,926 - sqlalchemy.engine.Engine - INFO - [cached since 3879s ago] ('19AI405',)
2026-01-02 17:06:33,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:06:46,745 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 17:06:46,747 - app.main - INFO - Database connections closed
2026-01-02 17:06:50,872 - app.main - INFO - Starting Examination Middleware...
2026-01-02 17:06:51,115 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 17:06:51,117 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 17:06:51,128 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 17:06:51,130 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 17:06:51,140 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 17:06:51,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 17:06:51,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:06:51,162 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,164 - sqlalchemy.engine.Engine - INFO - [generated in 0.00173s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,197 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,199 - sqlalchemy.engine.Engine - INFO - [cached since 0.03656s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,204 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,206 - sqlalchemy.engine.Engine - INFO - [cached since 0.0437s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,211 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,214 - sqlalchemy.engine.Engine - INFO - [cached since 0.05148s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,219 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,222 - sqlalchemy.engine.Engine - INFO - [cached since 0.05948s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.0676s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,234 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 17:06:51,236 - sqlalchemy.engine.Engine - INFO - [cached since 0.07346s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 17:06:51,246 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 17:06:51,249 - sqlalchemy.engine.Engine - INFO - [generated in 0.00271s] ('workflowstatus', 'pg_catalog')
2026-01-02 17:06:51,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:06:51,282 - app.main - INFO - Database tables created/verified
2026-01-02 17:06:51,285 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 17:06:51,287 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 17:06:51,288 - app.main - INFO - Examination Middleware started successfully
2026-01-02 17:07:00,110 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:07:00,111 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 17:07:00,112 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 17:07:00,114 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:07:00,115 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:07:00,117 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 17:07:00,117 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:07:00,118 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:07:00,119 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 17:07:00,120 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 17:07:00,122 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:07:00,124 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:07:00,125 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 17:07:00,127 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:07:00,128 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 17:07:00,417 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:07:00,472 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 17:07:00,476 - sqlalchemy.engine.Engine - INFO - [generated in 0.00359s] ('admin',)
2026-01-02 17:07:00,923 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 17:07:00,923 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] (datetime.datetime(2026, 1, 2, 11, 37, 0, 921234, tzinfo=datetime.timezone.utc), 1)
2026-01-02 17:07:00,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:07:01,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:07:01,085 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:07:01,086 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] (1,)
2026-01-02 17:07:01,103 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:07:01,106 - sqlalchemy.engine.Engine - INFO - [generated in 0.00292s] ()
2026-01-02 17:07:01,180 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:07:01,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00195s] (50, 0)
2026-01-02 17:07:01,189 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:07:33,331 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:07:33,332 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 17:07:33,333 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 17:07:33,334 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:07:33,335 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:07:33,336 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 17:07:33,337 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:07:33,338 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:07:33,339 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 17:07:33,340 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 17:07:33,341 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:07:33,342 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:07:33,343 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 17:07:33,344 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:07:33,345 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 17:07:33,510 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:07:33,511 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 17:07:33,512 - sqlalchemy.engine.Engine - INFO - [cached since 33.04s ago] ('admin',)
2026-01-02 17:07:33,959 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 17:07:33,960 - sqlalchemy.engine.Engine - INFO - [cached since 33.04s ago] (datetime.datetime(2026, 1, 2, 11, 37, 33, 958585, tzinfo=datetime.timezone.utc), 1)
2026-01-02 17:07:33,963 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:07:34,153 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:07:34,155 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:07:34,156 - sqlalchemy.engine.Engine - INFO - [cached since 33.07s ago] (1,)
2026-01-02 17:07:34,165 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:07:34,170 - sqlalchemy.engine.Engine - INFO - [cached since 33.07s ago] ()
2026-01-02 17:07:34,232 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:07:34,234 - sqlalchemy.engine.Engine - INFO - [cached since 33.05s ago] (50, 0)
2026-01-02 17:07:34,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:30,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:30,623 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:30,624 - sqlalchemy.engine.Engine - INFO - [cached since 809.5s ago] (1,)
2026-01-02 17:20:30,631 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:30,633 - sqlalchemy.engine.Engine - INFO - [cached since 809.5s ago] ()
2026-01-02 17:20:30,702 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:30,707 - sqlalchemy.engine.Engine - INFO - [cached since 809.5s ago] (50, 0)
2026-01-02 17:20:30,716 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:38,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:38,644 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:20:38,649 - sqlalchemy.engine.Engine - INFO - [generated in 0.00500s] ('GO61lWY2UtS6AcwMlSvNLElYqCQDY266TUdOmOychWI',)
2026-01-02 17:20:38,665 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:20:38,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] (datetime.datetime(2026, 1, 2, 11, 50, 38, 663292, tzinfo=datetime.timezone.utc), 11)
2026-01-02 17:20:38,673 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:38,697 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:20:38,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:38,871 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:20:38,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00458s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:20:38,942 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:20:38,950 - sqlalchemy.engine.Engine - INFO - [generated in 0.00856s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:20:38,967 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:20:38,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00644s] ('19AI405',)
2026-01-02 17:20:38,990 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:20:38,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.02733s ago] ('19AI405',)
2026-01-02 17:20:39,002 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:44,571 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:44,573 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:44,577 - sqlalchemy.engine.Engine - INFO - [cached since 823.5s ago] (1,)
2026-01-02 17:20:44,599 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:44,604 - sqlalchemy.engine.Engine - INFO - [cached since 823.5s ago] ()
2026-01-02 17:20:44,658 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:44,663 - sqlalchemy.engine.Engine - INFO - [cached since 823.5s ago] (50, 0)
2026-01-02 17:20:44,675 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:45,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:45,528 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:45,529 - sqlalchemy.engine.Engine - INFO - [cached since 824.4s ago] (1,)
2026-01-02 17:20:45,539 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:45,541 - sqlalchemy.engine.Engine - INFO - [cached since 824.4s ago] ()
2026-01-02 17:20:45,584 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:45,586 - sqlalchemy.engine.Engine - INFO - [cached since 824.4s ago] (50, 0)
2026-01-02 17:20:45,593 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:45,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:45,938 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:45,939 - sqlalchemy.engine.Engine - INFO - [cached since 824.9s ago] (1,)
2026-01-02 17:20:45,948 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:45,949 - sqlalchemy.engine.Engine - INFO - [cached since 824.8s ago] ()
2026-01-02 17:20:45,998 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:45,999 - sqlalchemy.engine.Engine - INFO - [cached since 824.8s ago] (50, 0)
2026-01-02 17:20:46,005 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:46,298 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:46,300 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:46,301 - sqlalchemy.engine.Engine - INFO - [cached since 825.2s ago] (1,)
2026-01-02 17:20:46,312 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:46,314 - sqlalchemy.engine.Engine - INFO - [cached since 825.2s ago] ()
2026-01-02 17:20:46,362 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:46,364 - sqlalchemy.engine.Engine - INFO - [cached since 825.2s ago] (50, 0)
2026-01-02 17:20:46,373 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:46,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:46,708 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:46,709 - sqlalchemy.engine.Engine - INFO - [cached since 825.6s ago] (1,)
2026-01-02 17:20:46,717 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:46,718 - sqlalchemy.engine.Engine - INFO - [cached since 825.6s ago] ()
2026-01-02 17:20:46,759 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:46,760 - sqlalchemy.engine.Engine - INFO - [cached since 825.6s ago] (50, 0)
2026-01-02 17:20:46,765 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:47,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:47,102 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:47,103 - sqlalchemy.engine.Engine - INFO - [cached since 826s ago] (1,)
2026-01-02 17:20:47,113 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:47,115 - sqlalchemy.engine.Engine - INFO - [cached since 826s ago] ()
2026-01-02 17:20:47,161 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:47,162 - sqlalchemy.engine.Engine - INFO - [cached since 826s ago] (50, 0)
2026-01-02 17:20:47,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:20:58,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:20:58,362 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:20:58,364 - sqlalchemy.engine.Engine - INFO - [cached since 837.3s ago] (1,)
2026-01-02 17:20:58,376 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:20:58,378 - sqlalchemy.engine.Engine - INFO - [cached since 837.3s ago] ()
2026-01-02 17:20:58,428 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:20:58,430 - sqlalchemy.engine.Engine - INFO - [cached since 837.3s ago] (50, 0)
2026-01-02 17:20:58,439 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:05,781 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:28:05,782 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 17:28:05,783 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 17:28:05,783 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:28:05,784 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:28:05,784 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 17:28:05,785 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:28:05,786 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:28:05,787 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 17:28:05,787 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 17:28:05,787 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:28:05,788 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:28:05,789 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 17:28:05,790 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:28:05,791 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 17:28:05,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:05,975 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 17:28:05,975 - sqlalchemy.engine.Engine - INFO - [cached since 1266s ago] ('admin',)
2026-01-02 17:28:06,593 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 17:28:06,594 - sqlalchemy.engine.Engine - INFO - [cached since 1266s ago] (datetime.datetime(2026, 1, 2, 11, 58, 6, 592112, tzinfo=datetime.timezone.utc), 1)
2026-01-02 17:28:06,599 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:06,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:06,841 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:28:06,843 - sqlalchemy.engine.Engine - INFO - [cached since 1266s ago] (1,)
2026-01-02 17:28:06,859 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:28:06,861 - sqlalchemy.engine.Engine - INFO - [cached since 1266s ago] ()
2026-01-02 17:28:06,918 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:28:06,920 - sqlalchemy.engine.Engine - INFO - [cached since 1266s ago] (50, 0)
2026-01-02 17:28:06,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:11,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:11,423 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:28:11,424 - sqlalchemy.engine.Engine - INFO - [cached since 1270s ago] (1,)
2026-01-02 17:28:11,441 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:28:11,442 - sqlalchemy.engine.Engine - INFO - [cached since 1270s ago] ()
2026-01-02 17:28:11,507 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:28:11,508 - sqlalchemy.engine.Engine - INFO - [cached since 1270s ago] (50, 0)
2026-01-02 17:28:11,515 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:23,319 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 17:28:24,747 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 17:28:24,760 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 17:28:24,773 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027C9074FA10>
2026-01-02 17:28:24,778 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 17:28:24,782 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 17:28:24,783 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 17:28:24,785 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 17:28:24,786 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 17:28:25,725 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 11:58:24 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 11:58:25 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 17:28:25,729 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 17:28:25,730 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 17:28:25,735 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 17:28:25,736 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 17:28:25,743 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 17:28:25,753 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 17:28:25,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 17:28:25,756 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 17:28:25,758 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 17:28:25,760 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 17:28:26,167 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 11:58:25 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 17:28:26,170 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 17:28:26,178 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 17:28:26,182 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 17:28:26,183 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 17:28:26,189 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 17:28:26,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:26,442 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 17:28:26,444 - sqlalchemy.engine.Engine - INFO - [generated in 0.00255s] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWN0xpWkEtTzUwdnloN1RGMUxoeHJENmEtc1JRUWN0QmJDNzRZTnJTNjFmWFlmaTNZNTllMFVrTkVwZ1hkdVZ2aHhvc1dlc1I2X1dJdXVLM1MxT095Nmg3ZnNYX0lhQmo1Y0NpLV9KQ0h2VjJuWUtMakhWa213dFZETUlldGdJSUNleW4=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 12, 58, 26, 190608, tzinfo=datetime.timezone.utc))
2026-01-02 17:28:26,459 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:26,709 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:26,712 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:28:26,715 - sqlalchemy.engine.Engine - INFO - [cached since 467.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:28:26,790 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 17:28:26,794 - httpcore.connection - DEBUG - close.started
2026-01-02 17:28:26,795 - httpcore.connection - DEBUG - close.complete
2026-01-02 17:28:26,798 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:27,010 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:27,012 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:28:27,014 - sqlalchemy.engine.Engine - INFO - [cached since 468.4s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:28:27,032 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:28:27,034 - sqlalchemy.engine.Engine - INFO - [cached since 468.4s ago] (datetime.datetime(2026, 1, 2, 11, 58, 27, 31191, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:28:27,041 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:28:27,068 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:28:27,310 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:28:27,313 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:28:27,315 - sqlalchemy.engine.Engine - INFO - [cached since 468.4s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:28:27,391 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:28:27,393 - sqlalchemy.engine.Engine - INFO - [cached since 468.5s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:28:27,399 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:28:27,401 - sqlalchemy.engine.Engine - INFO - [cached since 468.4s ago] ('19AI405',)
2026-01-02 17:28:27,413 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:28:27,415 - sqlalchemy.engine.Engine - INFO - [cached since 468.4s ago] ('19AI405',)
2026-01-02 17:28:27,421 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:32:05,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:32:05,370 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:32:05,372 - sqlalchemy.engine.Engine - INFO - [cached since 686.7s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:32:05,398 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:32:05,400 - sqlalchemy.engine.Engine - INFO - [cached since 686.7s ago] (datetime.datetime(2026, 1, 2, 12, 2, 5, 396366, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:32:05,407 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:32:05,429 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:32:05,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:32:05,620 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:32:05,622 - sqlalchemy.engine.Engine - INFO - [cached since 686.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:32:05,691 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:32:05,694 - sqlalchemy.engine.Engine - INFO - [cached since 686.8s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:32:05,699 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:32:05,700 - sqlalchemy.engine.Engine - INFO - [cached since 686.7s ago] ('19AI405',)
2026-01-02 17:32:05,710 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:32:05,713 - sqlalchemy.engine.Engine - INFO - [cached since 686.7s ago] ('19AI405',)
2026-01-02 17:32:05,719 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:32:21,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:32:21,364 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:32:21,372 - sqlalchemy.engine.Engine - INFO - [cached since 702.7s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:32:21,400 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:32:21,405 - sqlalchemy.engine.Engine - INFO - [cached since 702.7s ago] (datetime.datetime(2026, 1, 2, 12, 2, 21, 400164, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:32:21,417 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:32:21,430 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:32:21,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:32:21,623 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:32:21,625 - sqlalchemy.engine.Engine - INFO - [cached since 702.8s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:32:21,682 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:32:21,685 - sqlalchemy.engine.Engine - INFO - [cached since 702.7s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:32:21,691 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:32:21,692 - sqlalchemy.engine.Engine - INFO - [cached since 702.7s ago] ('19AI405',)
2026-01-02 17:32:21,703 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:32:21,705 - sqlalchemy.engine.Engine - INFO - [cached since 702.7s ago] ('19AI405',)
2026-01-02 17:32:21,712 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:37:05,369 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:37:05,370 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 17:37:05,370 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 17:37:05,371 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:37:05,371 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:37:05,372 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 17:37:05,372 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:37:05,373 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:37:05,373 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 17:37:05,374 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 17:37:05,375 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:37:05,375 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:37:05,376 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 17:37:05,377 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:37:05,377 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 17:37:05,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:37:05,544 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 17:37:05,545 - sqlalchemy.engine.Engine - INFO - [cached since 1805s ago] ('admin',)
2026-01-02 17:37:06,126 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 17:37:06,127 - sqlalchemy.engine.Engine - INFO - [cached since 1805s ago] (datetime.datetime(2026, 1, 2, 12, 7, 6, 125597, tzinfo=datetime.timezone.utc), 1)
2026-01-02 17:37:06,131 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:37:06,324 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:37:06,325 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:37:06,326 - sqlalchemy.engine.Engine - INFO - [cached since 1805s ago] (1,)
2026-01-02 17:37:06,335 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:37:06,337 - sqlalchemy.engine.Engine - INFO - [cached since 1805s ago] ()
2026-01-02 17:37:06,387 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:37:06,391 - sqlalchemy.engine.Engine - INFO - [cached since 1805s ago] (50, 0)
2026-01-02 17:37:06,401 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:37:31,017 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:37:31,019 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:37:31,021 - sqlalchemy.engine.Engine - INFO - [cached since 1830s ago] (1,)
2026-01-02 17:37:31,035 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:37:31,038 - sqlalchemy.engine.Engine - INFO - [cached since 1830s ago] ()
2026-01-02 17:37:31,099 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:37:31,101 - sqlalchemy.engine.Engine - INFO - [cached since 1830s ago] (50, 0)
2026-01-02 17:37:31,109 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:37:32,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:37:32,501 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:37:32,503 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:37:32,520 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:37:32,522 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] (datetime.datetime(2026, 1, 2, 12, 7, 32, 519157, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:37:32,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:37:32,555 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:37:32,775 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:37:32,778 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:37:32,780 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:37:32,863 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:37:32,865 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:37:32,874 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:37:32,875 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] ('19AI405',)
2026-01-02 17:37:32,889 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:37:32,892 - sqlalchemy.engine.Engine - INFO - [cached since 1014s ago] ('19AI405',)
2026-01-02 17:37:32,898 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:40:58,492 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:40:58,495 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:40:58,498 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:40:58,507 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:40:58,509 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] (datetime.datetime(2026, 1, 2, 12, 10, 58, 507355, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:40:58,512 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:40:58,519 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:40:58,639 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:40:58,642 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:40:58,644 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:40:58,685 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:40:58,687 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:40:58,691 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:40:58,694 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] ('19AI405',)
2026-01-02 17:40:58,701 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:40:58,704 - sqlalchemy.engine.Engine - INFO - [cached since 1220s ago] ('19AI405',)
2026-01-02 17:40:58,708 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:41:30,042 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:41:30,043 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 17:41:30,044 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 17:41:30,044 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:41:30,045 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:41:30,045 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 17:41:30,046 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:41:30,047 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 17:41:30,048 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 17:41:30,049 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 17:41:30,050 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 17:41:30,050 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 17:41:30,051 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 17:41:30,052 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 17:41:30,053 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 17:41:30,239 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:41:30,241 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 17:41:30,242 - sqlalchemy.engine.Engine - INFO - [cached since 2070s ago] ('admin',)
2026-01-02 17:41:30,858 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 17:41:30,861 - sqlalchemy.engine.Engine - INFO - [cached since 2070s ago] (datetime.datetime(2026, 1, 2, 12, 11, 30, 858032, tzinfo=datetime.timezone.utc), 1)
2026-01-02 17:41:30,866 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:41:31,050 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:41:31,051 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:41:31,053 - sqlalchemy.engine.Engine - INFO - [cached since 2070s ago] (1,)
2026-01-02 17:41:31,066 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:41:31,067 - sqlalchemy.engine.Engine - INFO - [cached since 2070s ago] ()
2026-01-02 17:41:31,114 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:41:31,115 - sqlalchemy.engine.Engine - INFO - [cached since 2070s ago] (50, 0)
2026-01-02 17:41:31,120 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:44:38,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:44:38,010 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 17:44:38,011 - sqlalchemy.engine.Engine - INFO - [cached since 2257s ago] (1,)
2026-01-02 17:44:38,023 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 17:44:38,024 - sqlalchemy.engine.Engine - INFO - [cached since 2257s ago] ()
2026-01-02 17:44:38,077 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 17:44:38,079 - sqlalchemy.engine.Engine - INFO - [cached since 2257s ago] (50, 0)
2026-01-02 17:44:38,088 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:44:43,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:44:43,929 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:44:43,930 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:44:43,959 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:44:43,960 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] (datetime.datetime(2026, 1, 2, 12, 14, 43, 958974, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:44:43,964 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:44:43,973 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:44:44,123 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:44:44,124 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:44:44,126 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:44:44,178 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:44:44,180 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:44:44,184 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:44:44,187 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] ('19AI405',)
2026-01-02 17:44:44,194 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:44:44,198 - sqlalchemy.engine.Engine - INFO - [cached since 1445s ago] ('19AI405',)
2026-01-02 17:44:44,207 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:45:04,357 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:45:04,358 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 17:45:04,359 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 17:45:04,368 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 17:45:04,369 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] (datetime.datetime(2026, 1, 2, 12, 15, 4, 367820, tzinfo=datetime.timezone.utc), 12)
2026-01-02 17:45:04,373 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 17:45:04,393 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 17:45:04,540 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 17:45:04,541 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 17:45:04,543 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 17:45:04,591 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 17:45:04,593 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 17:45:04,597 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:45:04,599 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] ('19AI405',)
2026-01-02 17:45:04,606 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 17:45:04,608 - sqlalchemy.engine.Engine - INFO - [cached since 1466s ago] ('19AI405',)
2026-01-02 17:45:04,612 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:06:31,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:06:31,384 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:06:31,384 - sqlalchemy.engine.Engine - INFO - [cached since 3570s ago] (1,)
2026-01-02 18:06:31,395 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:06:31,397 - sqlalchemy.engine.Engine - INFO - [cached since 3570s ago] ()
2026-01-02 18:06:31,449 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:06:31,450 - sqlalchemy.engine.Engine - INFO - [cached since 3570s ago] (50, 0)
2026-01-02 18:06:31,456 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:06:41,755 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:06:41,756 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:06:41,757 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:06:41,769 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:06:41,770 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] (datetime.datetime(2026, 1, 2, 12, 36, 41, 768971, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:06:41,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:06:41,783 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:06:41,905 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:06:41,906 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:06:41,907 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:06:41,951 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:06:41,952 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:06:41,957 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:06:41,958 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] ('19AI405',)
2026-01-02 18:06:41,964 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:06:41,965 - sqlalchemy.engine.Engine - INFO - [cached since 2763s ago] ('19AI405',)
2026-01-02 18:06:41,968 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:06:50,807 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:06:50,809 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 18:06:50,810 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 18:06:50,811 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:06:50,811 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:06:50,812 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 18:06:50,813 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:06:50,814 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:06:50,815 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 18:06:50,816 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 18:06:50,817 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:06:50,817 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:06:50,818 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 18:06:50,819 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:06:50,820 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 18:06:50,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:06:50,940 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 18:06:50,941 - sqlalchemy.engine.Engine - INFO - [cached since 3590s ago] ('admin',)
2026-01-02 18:06:51,300 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 18:06:51,302 - sqlalchemy.engine.Engine - INFO - [cached since 3590s ago] (datetime.datetime(2026, 1, 2, 12, 36, 51, 300050, tzinfo=datetime.timezone.utc), 1)
2026-01-02 18:06:51,307 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:07:01,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:07:01,959 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:07:01,960 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:07:01,970 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:07:01,970 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] (datetime.datetime(2026, 1, 2, 12, 37, 1, 969484, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:07:01,974 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:07:01,981 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:07:02,097 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:07:02,099 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:07:02,100 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:07:02,150 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:07:02,152 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:07:02,155 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:07:02,156 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] ('19AI405',)
2026-01-02 18:07:02,161 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:07:02,162 - sqlalchemy.engine.Engine - INFO - [cached since 2783s ago] ('19AI405',)
2026-01-02 18:07:02,166 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:07:03,463 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:08:29,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:29,206 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:08:29,208 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:08:29,221 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:08:29,223 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] (datetime.datetime(2026, 1, 2, 12, 38, 29, 221289, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:08:29,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:29,251 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:08:29,419 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:29,421 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:08:29,423 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:08:29,494 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:08:29,496 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:08:29,502 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:08:29,503 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] ('19AI405',)
2026-01-02 18:08:29,514 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:08:29,515 - sqlalchemy.engine.Engine - INFO - [cached since 2871s ago] ('19AI405',)
2026-01-02 18:08:29,520 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:30,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:30,290 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:08:30,292 - sqlalchemy.engine.Engine - INFO - [cached since 3689s ago] (1,)
2026-01-02 18:08:30,304 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:08:30,306 - sqlalchemy.engine.Engine - INFO - [cached since 3689s ago] ()
2026-01-02 18:08:30,373 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:08:30,375 - sqlalchemy.engine.Engine - INFO - [cached since 3689s ago] (50, 0)
2026-01-02 18:08:30,381 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:38,682 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:08:38,683 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 18:08:38,684 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 18:08:38,685 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:08:38,686 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 18:08:38,686 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 18:08:38,687 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:08:38,687 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:08:38,688 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 18:08:38,689 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:08:38,689 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:08:38,690 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 18:08:38,690 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 18:08:38,690 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:08:38,691 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:08:38,691 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 18:08:38,692 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:08:38,692 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 18:08:38,807 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:38,808 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:08:38,809 - sqlalchemy.engine.Engine - INFO - [cached since 3698s ago] (1,)
2026-01-02 18:08:38,816 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 18:08:38,826 - app.services.file_processor - INFO - Saved file: ./uploads/pending/38588eb632424070b38b1c4db5aac158.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 18:08:38,830 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 18:08:38,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 18:08:38,864 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 18:08:38,868 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 18:08:38,869 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('./uploads/pending/38588eb632424070b38b1c4db5aac158.pdf', 3)
2026-01-02 18:08:38,877 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 18:08:38,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] (3,)
2026-01-02 18:08:38,887 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 18:08:38,887 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 18:08:38,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:39,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:39,029 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:08:39,030 - sqlalchemy.engine.Engine - INFO - [cached since 3698s ago] (1,)
2026-01-02 18:08:39,038 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:08:39,039 - sqlalchemy.engine.Engine - INFO - [cached since 3698s ago] ()
2026-01-02 18:08:39,080 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:08:39,082 - sqlalchemy.engine.Engine - INFO - [cached since 3698s ago] (50, 0)
2026-01-02 18:08:39,090 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:45,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:45,074 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:08:45,075 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:08:45,084 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:08:45,085 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] (datetime.datetime(2026, 1, 2, 12, 38, 45, 84397, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:08:45,087 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:45,093 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:08:45,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:45,218 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:08:45,219 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:08:45,254 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:08:45,255 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:08:45,259 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:08:45,259 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] ('19AI405',)
2026-01-02 18:08:45,265 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:08:45,265 - sqlalchemy.engine.Engine - INFO - [cached since 2886s ago] ('19AI405',)
2026-01-02 18:08:45,268 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:51,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:51,241 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:08:51,242 - sqlalchemy.engine.Engine - INFO - [cached since 2893s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:08:51,253 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:08:51,254 - sqlalchemy.engine.Engine - INFO - [cached since 2893s ago] (datetime.datetime(2026, 1, 2, 12, 38, 51, 253222, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:08:51,260 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:51,272 - app.api.routes.student - INFO - Submit attempt for 6df8d217-3358-4f07-b1d4-ae887c6c89f4 by register_number: 212222240047
2026-01-02 18:08:51,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:51,436 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 18:08:51,437 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 18:08:51,483 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 18:08:51,485 - sqlalchemy.engine.Engine - INFO - [cached since 12.6s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', 'null', None, None)
2026-01-02 18:08:51,494 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 18:08:51,496 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 18:08:51,498 - sqlalchemy.engine.Engine - INFO - [generated in 0.00152s] ('UPLOADING', 3)
2026-01-02 18:08:52,054 - app.services.moodle_client - INFO - Uploading file: 212222240047_19AI405.pdf (309 bytes)
2026-01-02 18:08:52,060 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 18:08:52,065 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027C907F5BD0>
2026-01-02 18:08:52,068 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:08:52,069 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:08:52,070 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:08:52,073 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:08:52,073 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:08:52,297 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:38:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 12:38:52 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 18:08:52,298 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:08:52,299 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:08:52,301 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:08:52,301 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:08:52,303 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 22, 'userid': '3', 'filearea': 'draft', 'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'itemid': 955551583, 'license': 'unknown', 'author': 'Kavinraja D', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212222240047_19AI405.pdf";}', 'filesize': 309}]
2026-01-02 18:08:52,303 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 955551583
2026-01-02 18:08:52,304 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 18:08:52,305 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] (955551583, 3)
2026-01-02 18:08:52,311 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 18:08:52,314 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:08:52,315 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:08:52,315 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:08:52,316 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:08:52,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:08:52,471 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:38:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 18:08:52,472 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:08:52,473 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:08:52,475 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:08:52,475 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:08:52,477 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 18:08:52,478 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 18:08:52,479 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 18:08:52,480 - sqlalchemy.engine.Engine - INFO - [cached since 0.9837s ago] ('SUBMITTING', 3)
2026-01-02 18:08:52,482 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 955551583
2026-01-02 18:08:52,489 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:08:52,491 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:08:52,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:08:52,493 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:08:52,494 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:08:53,887 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:38:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 18:08:53,888 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:08:53,888 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:08:53,890 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:08:53,891 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:08:53,893 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 18:08:53,893 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 18:08:53,894 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 18:08:53,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:08:53,899 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:08:53,900 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:08:53,902 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:08:53,903 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:08:54,092 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:38:53 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'966'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 18:08:54,093 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:08:54,094 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:08:54,096 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:08:54,097 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:08:54,099 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 3, 'userid': 3, 'attemptnumber': 0, 'timecreated': 1767274363, 'timemodified': 1767357532, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212222240047_19AI405.pdf', 'filepath': '/', 'filesize': 309, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/3/212222240047_19AI405.pdf', 'timemodified': 1767357532, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 18:08:54,099 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 18:08:54,100 - app.services.submission_service - INFO - Submission ID: 3
2026-01-02 18:08:54,101 - app.services.submission_service - INFO - Submission timecreated: 1767274363
2026-01-02 18:08:54,102 - app.services.submission_service - INFO - Submission timemodified: 1767357532
2026-01-02 18:08:54,102 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 18:08:54,103 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 18:08:54,104 - app.services.submission_service - INFO - Can edit: True
2026-01-02 18:08:54,104 - app.services.submission_service - INFO - Can submit: False
2026-01-02 18:08:54,105 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 18:08:54,106 - app.services.submission_service - INFO - Verified files: ['212222240047_19AI405.pdf']
2026-01-02 18:08:54,107 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 18:08:54,110 - httpcore.connection - DEBUG - close.started
2026-01-02 18:08:54,111 - httpcore.connection - DEBUG - close.complete
2026-01-02 18:08:54,112 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 955551583, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '3', 'verified_files': ['212222240047_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102123854'}
2026-01-02 18:08:54,112 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 18:08:54,120 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 18:08:54,122 - sqlalchemy.engine.Engine - INFO - [generated in 0.00149s] (3,)
2026-01-02 18:08:54,128 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 18:08:54,129 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('COMPLETED', 'TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102123854', datetime.datetime(2026, 1, 2, 12, 38, 54, 127366), datetime.datetime(2026, 1, 2, 12, 38, 54, 127394), 3)
2026-01-02 18:08:54,134 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 18:08:54,135 - sqlalchemy.engine.Engine - INFO - [cached since 15.26s ago] (3,)
2026-01-02 18:08:54,138 - app.services.artifact_service - INFO - Artifact 3 marked as submitted
2026-01-02 18:08:54,140 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 18:08:54,141 - sqlalchemy.engine.Engine - INFO - [cached since 15.26s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '3', '22007928', '127.0.0.1', 3, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 955551583, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212222240047_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_6df8d217-3358-4f07-b1d4-ae887c6c89f4_20260102123854"}', None, None)
2026-01-02 18:08:54,147 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:54,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:54,303 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 18:08:54,304 - sqlalchemy.engine.Engine - INFO - [cached since 2.868s ago] ('6df8d217-3358-4f07-b1d4-ae887c6c89f4',)
2026-01-02 18:08:54,359 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:54,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:54,513 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:08:54,514 - sqlalchemy.engine.Engine - INFO - [cached since 2896s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:08:54,523 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:08:54,524 - sqlalchemy.engine.Engine - INFO - [cached since 2896s ago] (datetime.datetime(2026, 1, 2, 12, 38, 54, 523386, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:08:54,528 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:08:54,533 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:08:54,682 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:08:54,683 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:08:54,684 - sqlalchemy.engine.Engine - INFO - [cached since 2896s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:08:54,744 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:08:54,746 - sqlalchemy.engine.Engine - INFO - [cached since 2896s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:08:54,754 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:06,267 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:09:06,268 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 18:09:06,270 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 18:09:06,271 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:09:06,272 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 18:09:06,273 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 18:09:06,273 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:09:06,275 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:09:06,276 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 18:09:06,277 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:09:06,278 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:09:06,278 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 18:09:06,280 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 18:09:06,280 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:09:06,281 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:09:06,282 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 18:09:06,284 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:09:06,286 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 18:09:06,437 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:06,438 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:09:06,439 - sqlalchemy.engine.Engine - INFO - [cached since 3725s ago] (1,)
2026-01-02 18:09:06,445 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 18:09:06,450 - app.services.file_processor - INFO - Saved file: ./uploads/pending/8978c955e06e4257af7d557207df814c.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 18:09:06,452 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 18:09:06,454 - sqlalchemy.engine.Engine - INFO - [cached since 27.62s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 18:09:06,496 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 18:09:06,498 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 18:09:06,500 - sqlalchemy.engine.Engine - INFO - [generated in 0.00162s] ('./uploads/pending/8978c955e06e4257af7d557207df814c.pdf', 'PENDING', 3)
2026-01-02 18:09:06,508 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 18:09:06,510 - sqlalchemy.engine.Engine - INFO - [cached since 27.63s ago] (3,)
2026-01-02 18:09:06,518 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 18:09:06,520 - sqlalchemy.engine.Engine - INFO - [cached since 27.63s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 18:09:06,531 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:06,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:06,721 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:09:06,721 - sqlalchemy.engine.Engine - INFO - [cached since 3726s ago] (1,)
2026-01-02 18:09:06,728 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:09:06,729 - sqlalchemy.engine.Engine - INFO - [cached since 3726s ago] ()
2026-01-02 18:09:06,755 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:09:06,756 - sqlalchemy.engine.Engine - INFO - [cached since 3726s ago] (50, 0)
2026-01-02 18:09:06,761 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:07,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:07,566 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:09:07,567 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:09:07,575 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:09:07,576 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] (datetime.datetime(2026, 1, 2, 12, 39, 7, 575294, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:09:07,580 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:07,591 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:09:07,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:07,741 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:09:07,742 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:09:07,801 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:09:07,804 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:09:07,810 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:09:07,811 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] ('19AI405',)
2026-01-02 18:09:07,818 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:09:07,820 - sqlalchemy.engine.Engine - INFO - [cached since 2909s ago] ('19AI405',)
2026-01-02 18:09:07,826 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:30,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:30,181 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:09:30,182 - sqlalchemy.engine.Engine - INFO - [cached since 3749s ago] (1,)
2026-01-02 18:09:30,190 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:09:30,191 - sqlalchemy.engine.Engine - INFO - [cached since 3749s ago] ()
2026-01-02 18:09:30,242 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:09:30,244 - sqlalchemy.engine.Engine - INFO - [cached since 3749s ago] (50, 0)
2026-01-02 18:09:30,250 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:32,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:32,992 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:09:32,993 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:09:33,005 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:09:33,006 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] (datetime.datetime(2026, 1, 2, 12, 39, 33, 4669, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:09:33,010 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:33,033 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:09:33,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:09:33,166 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:09:33,166 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:09:33,222 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:09:33,224 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:09:33,229 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:09:33,230 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] ('19AI405',)
2026-01-02 18:09:33,240 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:09:33,241 - sqlalchemy.engine.Engine - INFO - [cached since 2934s ago] ('19AI405',)
2026-01-02 18:09:33,245 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:09:43,418 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:10:23,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:10:23,199 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:10:23,200 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:10:23,221 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:10:23,223 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] (datetime.datetime(2026, 1, 2, 12, 40, 23, 221309, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:10:23,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:10:23,240 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:10:23,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:10:23,521 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:10:23,522 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:10:23,578 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:10:23,579 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:10:23,584 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:10:23,585 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] ('19AI405',)
2026-01-02 18:10:23,594 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:10:23,595 - sqlalchemy.engine.Engine - INFO - [cached since 2985s ago] ('19AI405',)
2026-01-02 18:10:23,600 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:10:24,630 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:11:44,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:11:44,983 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:11:44,984 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:11:44,994 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:11:44,996 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] (datetime.datetime(2026, 1, 2, 12, 41, 44, 994415, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:11:45,000 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:11:45,009 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:11:45,155 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:11:45,157 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:11:45,158 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:11:45,209 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:11:45,210 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:11:45,214 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:11:45,216 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('19AI405',)
2026-01-02 18:11:45,223 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:11:45,225 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('19AI405',)
2026-01-02 18:11:45,229 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:11:46,677 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:13:31,761 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:13:31,763 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:13:31,764 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:13:31,775 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:13:31,776 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] (datetime.datetime(2026, 1, 2, 12, 43, 31, 774651, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:13:31,782 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:13:31,790 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:13:31,937 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:13:31,938 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:13:31,939 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:13:31,991 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:13:31,992 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:13:31,997 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:13:31,999 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] ('19AI405',)
2026-01-02 18:13:32,008 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:13:32,010 - sqlalchemy.engine.Engine - INFO - [cached since 3173s ago] ('19AI405',)
2026-01-02 18:13:32,014 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:13:33,159 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:14:14,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:14,574 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:14:14,575 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] ('sozoQSpIaUhwtGgx6tNjpuiDz2HBsRCQOJwLFWdTM_k',)
2026-01-02 18:14:14,585 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:14:14,586 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] (datetime.datetime(2026, 1, 2, 12, 44, 14, 585048, tzinfo=datetime.timezone.utc), 12)
2026-01-02 18:14:14,591 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:14,601 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:14:14,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:14,746 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:14:14,748 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:14:14,801 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:14:14,802 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:14:14,807 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:14:14,808 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] ('19AI405',)
2026-01-02 18:14:14,818 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:14:14,820 - sqlalchemy.engine.Engine - INFO - [cached since 3216s ago] ('19AI405',)
2026-01-02 18:14:14,825 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:29,807 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 18:14:30,458 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 18:14:30,464 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 18:14:30,469 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027C907F4690>
2026-01-02 18:14:30,471 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:14:30,472 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:14:30,473 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:14:30,474 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:14:30,474 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:14:30,721 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:44:30 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 12:44:30 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 18:14:30,722 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:14:30,723 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:14:30,725 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:14:30,726 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:14:30,727 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 18:14:30,733 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 18:14:30,734 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 18:14:30,735 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 18:14:30,736 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 18:14:30,736 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 18:14:30,961 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 12:44:30 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 18:14:30,963 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 18:14:30,967 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 18:14:30,970 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 18:14:30,971 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 18:14:30,973 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 18:14:31,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:31,131 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 18:14:31,132 - sqlalchemy.engine.Engine - INFO - [cached since 2765s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWNzJ1MHdPbmN1TDB1Z2ZjOEJvdGxDMG5Sa0pJVkVsZFdnNURwSlpFZm9BVGFVMUJuX2lTLVRMVnp1czVWNWxnQi11cEZXQW5xZnRXTndkOE5sLTZ3VUJyUFlVQTRfTWs4Qk5lbjY4NjNmdGdtZE1wS0dwa0p1bHlVSjF1cy1Yb0ozUzM=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 13, 44, 30, 974066, tzinfo=datetime.timezone.utc))
2026-01-02 18:14:31,141 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:31,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:31,283 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:14:31,284 - sqlalchemy.engine.Engine - INFO - [cached since 3232s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:14:31,324 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 18:14:31,326 - httpcore.connection - DEBUG - close.started
2026-01-02 18:14:31,326 - httpcore.connection - DEBUG - close.complete
2026-01-02 18:14:31,332 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:31,465 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:31,466 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:14:31,467 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:14:31,477 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:14:31,477 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] (datetime.datetime(2026, 1, 2, 12, 44, 31, 476717, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:14:31,481 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:31,487 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:14:31,607 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:31,608 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:14:31,609 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:14:31,667 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:14:31,669 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:14:31,674 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:14:31,675 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] ('19AI405',)
2026-01-02 18:14:31,683 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:14:31,685 - sqlalchemy.engine.Engine - INFO - [cached since 3233s ago] ('19AI405',)
2026-01-02 18:14:31,689 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:45,025 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:14:45,026 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 18:14:45,027 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 18:14:45,027 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:14:45,028 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:14:45,029 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 18:14:45,029 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:14:45,030 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:14:45,031 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 18:14:45,032 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 18:14:45,033 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:14:45,034 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:14:45,035 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 18:14:45,036 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:14:45,036 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 18:14:45,200 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:45,201 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 18:14:45,202 - sqlalchemy.engine.Engine - INFO - [cached since 4065s ago] ('admin',)
2026-01-02 18:14:45,561 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 18:14:45,561 - sqlalchemy.engine.Engine - INFO - [cached since 4065s ago] (datetime.datetime(2026, 1, 2, 12, 44, 45, 560534, tzinfo=datetime.timezone.utc), 1)
2026-01-02 18:14:45,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:45,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:45,842 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:14:45,843 - sqlalchemy.engine.Engine - INFO - [cached since 4065s ago] (1,)
2026-01-02 18:14:45,854 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:14:45,864 - sqlalchemy.engine.Engine - INFO - [cached since 4065s ago] ()
2026-01-02 18:14:45,918 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:14:45,920 - sqlalchemy.engine.Engine - INFO - [cached since 4065s ago] (50, 0)
2026-01-02 18:14:45,926 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:14:46,835 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:14:46,836 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:14:46,837 - sqlalchemy.engine.Engine - INFO - [cached since 4066s ago] (1,)
2026-01-02 18:14:46,847 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:14:46,849 - sqlalchemy.engine.Engine - INFO - [cached since 4066s ago] ()
2026-01-02 18:14:46,899 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:14:46,900 - sqlalchemy.engine.Engine - INFO - [cached since 4066s ago] (50, 0)
2026-01-02 18:14:46,905 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:15:15,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:15:15,885 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:15:15,886 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:15:15,899 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:15:15,900 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] (datetime.datetime(2026, 1, 2, 12, 45, 15, 898611, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:15:15,905 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:15:15,916 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:15:16,060 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:15:16,061 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:15:16,062 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:15:16,106 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:15:16,108 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:15:16,113 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:15:16,115 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] ('19AI405',)
2026-01-02 18:15:16,125 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:15:16,127 - sqlalchemy.engine.Engine - INFO - [cached since 3277s ago] ('19AI405',)
2026-01-02 18:15:16,132 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:15:17,189 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:21:25,016 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:21:25,017 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:21:25,018 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:21:25,034 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:21:25,035 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] (datetime.datetime(2026, 1, 2, 12, 51, 25, 33383, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:21:25,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:21:25,066 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:21:25,338 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:21:25,340 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:21:25,341 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:21:25,401 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:21:25,402 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:21:25,408 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:21:25,409 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] ('19AI405',)
2026-01-02 18:21:25,418 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:21:25,419 - sqlalchemy.engine.Engine - INFO - [cached since 3646s ago] ('19AI405',)
2026-01-02 18:21:25,424 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:21:26,590 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:21:28,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:21:28,010 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:21:28,011 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:21:28,023 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:21:28,024 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] (datetime.datetime(2026, 1, 2, 12, 51, 28, 22756, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:21:28,029 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:21:28,037 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:21:28,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:21:28,313 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:21:28,314 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:21:28,374 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:21:28,376 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:21:28,381 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:21:28,383 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] ('19AI405',)
2026-01-02 18:21:28,391 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:21:28,393 - sqlalchemy.engine.Engine - INFO - [cached since 3649s ago] ('19AI405',)
2026-01-02 18:21:28,399 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:00,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:00,634 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:00,635 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:00,648 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:00,650 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] (datetime.datetime(2026, 1, 2, 12, 52, 0, 648311, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:00,654 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:00,667 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:00,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:00,865 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:00,866 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:00,957 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:00,957 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:00,964 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:00,964 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('19AI405',)
2026-01-02 18:22:00,970 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:00,971 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('19AI405',)
2026-01-02 18:22:00,973 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,117 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,119 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:01,121 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:01,139 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:01,141 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] (datetime.datetime(2026, 1, 2, 12, 52, 1, 138700, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:01,151 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,168 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:01,359 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,361 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:01,363 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:01,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,368 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:01,369 - sqlalchemy.engine.Engine - INFO - [cached since 3682s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:01,403 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:01,405 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] (datetime.datetime(2026, 1, 2, 12, 52, 1, 402257, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:01,412 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,435 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:01,492 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:01,495 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:01,507 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:01,511 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:01,524 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:01,526 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:01,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,632 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:01,633 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:01,760 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,762 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:01,764 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:01,786 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:01,794 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] (datetime.datetime(2026, 1, 2, 12, 52, 1, 785088, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:01,802 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,826 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:01,834 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:01,834 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:01,840 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:01,842 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:01,922 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:01,924 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:01,941 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:01,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:01,947 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:01,950 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:02,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:02,074 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:02,075 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:02,083 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:02,085 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] (datetime.datetime(2026, 1, 2, 12, 52, 2, 83431, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:02,091 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:02,103 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:02,134 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:02,136 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:02,141 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,142 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:02,148 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,149 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:02,151 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:02,221 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:02,224 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:02,225 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:02,306 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:02,308 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:02,310 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:02,312 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:02,313 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] (datetime.datetime(2026, 1, 2, 12, 52, 2, 311697, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:02,317 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:02,328 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:02,385 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:02,386 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:02,392 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,393 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:02,398 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,398 - sqlalchemy.engine.Engine - INFO - [cached since 3683s ago] ('19AI405',)
2026-01-02 18:22:02,400 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:02,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:02,501 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:02,502 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:02,569 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:02,571 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:02,577 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,579 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] ('19AI405',)
2026-01-02 18:22:02,588 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:02,589 - sqlalchemy.engine.Engine - INFO - [cached since 3684s ago] ('19AI405',)
2026-01-02 18:22:02,595 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:04,039 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:22:06,061 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:06,062 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:22:06,063 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:22:06,073 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:22:06,074 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] (datetime.datetime(2026, 1, 2, 12, 52, 6, 72862, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:22:06,078 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:06,085 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:22:06,240 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:06,241 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:22:06,242 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:22:06,297 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:22:06,299 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:22:06,303 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:06,305 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] ('19AI405',)
2026-01-02 18:22:06,314 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:22:06,316 - sqlalchemy.engine.Engine - INFO - [cached since 3687s ago] ('19AI405',)
2026-01-02 18:22:06,321 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:07,835 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:07,836 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:22:07,839 - sqlalchemy.engine.Engine - INFO - [cached since 4507s ago] (1,)
2026-01-02 18:22:07,851 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:22:07,852 - sqlalchemy.engine.Engine - INFO - [cached since 4507s ago] ()
2026-01-02 18:22:07,911 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:22:07,924 - sqlalchemy.engine.Engine - INFO - [cached since 4507s ago] (50, 0)
2026-01-02 18:22:07,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:22:09,680 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:22:09,681 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:22:09,682 - sqlalchemy.engine.Engine - INFO - [cached since 4509s ago] (1,)
2026-01-02 18:22:09,692 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:22:09,694 - sqlalchemy.engine.Engine - INFO - [cached since 4509s ago] ()
2026-01-02 18:22:09,748 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:22:09,749 - sqlalchemy.engine.Engine - INFO - [cached since 4509s ago] (50, 0)
2026-01-02 18:22:09,756 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:25:50,873 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 18:25:50,876 - app.main - INFO - Database connections closed
2026-01-02 18:25:59,663 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:25:59,752 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:25:59,753 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:25:59,755 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:25:59,756 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:25:59,757 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:25:59,758 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:25:59,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:25:59,763 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,763 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,773 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,774 - sqlalchemy.engine.Engine - INFO - [cached since 0.01104s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,775 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,775 - sqlalchemy.engine.Engine - INFO - [cached since 0.01275s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,776 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,777 - sqlalchemy.engine.Engine - INFO - [cached since 0.01423s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,778 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,778 - sqlalchemy.engine.Engine - INFO - [cached since 0.01564s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,779 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,780 - sqlalchemy.engine.Engine - INFO - [cached since 0.01714s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,780 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:25:59,781 - sqlalchemy.engine.Engine - INFO - [cached since 0.01838s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:25:59,783 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:25:59,784 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:25:59,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:25:59,799 - app.main - INFO - Database tables created/verified
2026-01-02 18:25:59,801 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:25:59,803 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:25:59,805 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:26:00,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:26:00,034 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 18:26:00,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 18:26:00,042 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 18:26:00,043 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] (datetime.datetime(2026, 1, 2, 12, 56, 0, 41379, tzinfo=datetime.timezone.utc), 13)
2026-01-02 18:26:00,045 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:26:00,062 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 18:26:00,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:26:00,154 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 18:26:00,155 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 18:26:00,182 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 18:26:00,184 - sqlalchemy.engine.Engine - INFO - [generated in 0.00226s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 18:26:00,190 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:26:00,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('19AI405',)
2026-01-02 18:26:00,194 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 18:26:00,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.005194s ago] ('19AI405',)
2026-01-02 18:26:00,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:26:02,163 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:26:02,166 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:26:02,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] (1,)
2026-01-02 18:26:02,178 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:26:02,180 - sqlalchemy.engine.Engine - INFO - [generated in 0.00203s] ()
2026-01-02 18:26:02,236 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:26:02,239 - sqlalchemy.engine.Engine - INFO - [generated in 0.00332s] (50, 0)
2026-01-02 18:26:02,247 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:26:03,587 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 18:26:05,994 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:26:05,996 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:26:05,998 - sqlalchemy.engine.Engine - INFO - [cached since 3.832s ago] (1,)
2026-01-02 18:26:06,015 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:26:06,019 - sqlalchemy.engine.Engine - INFO - [cached since 3.841s ago] ()
2026-01-02 18:26:06,081 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:26:06,082 - sqlalchemy.engine.Engine - INFO - [cached since 3.847s ago] (50, 0)
2026-01-02 18:26:06,089 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:35:11,780 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:35:11,781 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 18:35:11,781 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 18:35:11,782 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:35:11,783 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:35:11,783 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 18:35:11,784 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:35:11,785 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 18:35:11,785 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 18:35:11,786 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 18:35:11,787 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 18:35:11,788 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 18:35:11,788 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 18:35:11,789 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 18:35:11,790 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 18:35:11,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:35:11,937 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 18:35:11,938 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('admin',)
2026-01-02 18:35:12,305 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 18:35:12,306 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] (datetime.datetime(2026, 1, 2, 13, 5, 12, 304160, tzinfo=datetime.timezone.utc), 1)
2026-01-02 18:35:12,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:35:12,477 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:35:12,479 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 18:35:12,480 - sqlalchemy.engine.Engine - INFO - [cached since 550.3s ago] (1,)
2026-01-02 18:35:12,489 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 18:35:12,491 - sqlalchemy.engine.Engine - INFO - [cached since 550.3s ago] ()
2026-01-02 18:35:12,543 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 18:35:12,544 - sqlalchemy.engine.Engine - INFO - [cached since 550.3s ago] (50, 0)
2026-01-02 18:35:12,550 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:35:54,459 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 18:35:54,459 - app.main - INFO - Database connections closed
2026-01-02 18:35:56,554 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:35:56,632 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:35:56,632 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:56,635 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:35:56,635 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:56,637 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:35:56,638 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:56,639 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:35:56,643 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,644 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.01067s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,655 - sqlalchemy.engine.Engine - INFO - [cached since 0.0126s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,657 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,658 - sqlalchemy.engine.Engine - INFO - [cached since 0.01493s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,659 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.01687s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,661 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.0187s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,663 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:56,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.02037s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:56,665 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:35:56,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:35:56,669 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:35:56,673 - app.main - INFO - Database tables created/verified
2026-01-02 18:35:56,674 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:35:56,674 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:35:56,675 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:35:57,886 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 18:35:57,886 - app.main - INFO - Database connections closed
2026-01-02 18:35:59,305 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:35:59,381 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:35:59,382 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:59,384 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:35:59,385 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:59,386 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:35:59,387 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:35:59,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:35:59,392 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,392 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.00905s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.01087s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,404 - sqlalchemy.engine.Engine - INFO - [cached since 0.01219s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,405 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.01364s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,406 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,407 - sqlalchemy.engine.Engine - INFO - [cached since 0.0154s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,408 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:35:59,409 - sqlalchemy.engine.Engine - INFO - [cached since 0.01731s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:35:59,411 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:35:59,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:35:59,414 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:35:59,418 - app.main - INFO - Database tables created/verified
2026-01-02 18:35:59,419 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:35:59,419 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:35:59,420 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:36:00,947 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 18:36:00,948 - app.main - INFO - Database connections closed
2026-01-02 18:36:02,581 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:36:02,672 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:36:02,673 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:02,676 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:36:02,676 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:02,679 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:36:02,680 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:02,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:36:02,685 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,686 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,696 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,697 - sqlalchemy.engine.Engine - INFO - [cached since 0.01169s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,698 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,699 - sqlalchemy.engine.Engine - INFO - [cached since 0.01381s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,700 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.01582s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,702 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,703 - sqlalchemy.engine.Engine - INFO - [cached since 0.01774s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,704 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,705 - sqlalchemy.engine.Engine - INFO - [cached since 0.0195s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,706 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:02,706 - sqlalchemy.engine.Engine - INFO - [cached since 0.02121s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:02,709 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:36:02,709 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:36:02,713 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:36:02,717 - app.main - INFO - Database tables created/verified
2026-01-02 18:36:02,718 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:36:02,718 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:36:02,719 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:36:04,299 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:36:04,400 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:36:04,400 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:04,403 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:36:04,404 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:04,407 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:36:04,407 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:04,409 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:36:04,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,414 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,422 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,422 - sqlalchemy.engine.Engine - INFO - [cached since 0.008971s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,424 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,425 - sqlalchemy.engine.Engine - INFO - [cached since 0.01149s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.01361s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,429 - sqlalchemy.engine.Engine - INFO - [cached since 0.01554s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,430 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,431 - sqlalchemy.engine.Engine - INFO - [cached since 0.01727s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:04,432 - sqlalchemy.engine.Engine - INFO - [cached since 0.01917s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:04,435 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:36:04,435 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:36:04,439 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:36:04,444 - app.main - INFO - Database tables created/verified
2026-01-02 18:36:04,445 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:36:04,446 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:36:04,447 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:36:06,256 - app.main - INFO - Starting Examination Middleware...
2026-01-02 18:36:06,349 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 18:36:06,349 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:06,352 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 18:36:06,353 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:06,355 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 18:36:06,356 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 18:36:06,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 18:36:06,362 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,363 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.01004s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.01235s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,376 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,376 - sqlalchemy.engine.Engine - INFO - [cached since 0.01464s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,378 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,378 - sqlalchemy.engine.Engine - INFO - [cached since 0.01674s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,380 - sqlalchemy.engine.Engine - INFO - [cached since 0.01885s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 18:36:06,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.02084s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 18:36:06,385 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 18:36:06,385 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('workflowstatus', 'pg_catalog')
2026-01-02 18:36:06,389 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 18:36:06,393 - app.main - INFO - Database tables created/verified
2026-01-02 18:36:06,394 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 18:36:06,395 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 18:36:06,395 - app.main - INFO - Examination Middleware started successfully
2026-01-02 18:36:10,238 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 18:36:10,239 - app.main - INFO - Database connections closed
2026-01-02 19:56:07,945 - app.main - INFO - Starting Examination Middleware...
2026-01-02 19:56:07,964 - app.main - INFO - Starting Examination Middleware...
2026-01-02 19:56:08,043 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 19:56:08,044 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,047 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 19:56:08,047 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,050 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 19:56:08,050 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:08,055 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 19:56:08,055 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,056 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,057 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,058 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 19:56:08,058 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,061 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 19:56:08,061 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 19:56:08,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:08,068 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,068 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,071 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,071 - sqlalchemy.engine.Engine - INFO - [cached since 0.01488s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,072 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,073 - sqlalchemy.engine.Engine - INFO - [cached since 0.01673s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,074 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,075 - sqlalchemy.engine.Engine - INFO - [cached since 0.01873s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,077 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,077 - sqlalchemy.engine.Engine - INFO - [cached since 0.009786s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,077 - sqlalchemy.engine.Engine - INFO - [cached since 0.02111s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,079 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,079 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,079 - sqlalchemy.engine.Engine - INFO - [cached since 0.02293s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,079 - sqlalchemy.engine.Engine - INFO - [cached since 0.01171s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,081 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,081 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,081 - sqlalchemy.engine.Engine - INFO - [cached since 0.02481s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,081 - sqlalchemy.engine.Engine - INFO - [cached since 0.0136s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,082 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,083 - sqlalchemy.engine.Engine - INFO - [cached since 0.01535s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,084 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 19:56:08,084 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,084 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('workflowstatus', 'pg_catalog')
2026-01-02 19:56:08,085 - sqlalchemy.engine.Engine - INFO - [cached since 0.01713s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,086 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 19:56:08,086 - sqlalchemy.engine.Engine - INFO - [cached since 0.01886s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 19:56:08,088 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:08,089 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 19:56:08,090 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('workflowstatus', 'pg_catalog')
2026-01-02 19:56:08,092 - app.main - INFO - Database tables created/verified
2026-01-02 19:56:08,093 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 19:56:08,094 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:08,094 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 19:56:08,095 - app.main - INFO - Examination Middleware started successfully
2026-01-02 19:56:08,097 - app.main - INFO - Database tables created/verified
2026-01-02 19:56:08,098 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 19:56:08,099 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 19:56:08,100 - app.main - INFO - Examination Middleware started successfully
2026-01-02 19:56:08,280 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-02 19:56:08,327 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:08,341 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 19:56:08,342 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('baiNng-PgQooir83PPuZqleZQsLPvuU4CnvLOUQFfDc',)
2026-01-02 19:56:08,351 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_sessions WHERE student_sessions.id = $1::INTEGER
2026-01-02 19:56:08,351 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (13,)
2026-01-02 19:56:08,354 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:08,359 - app.db.database - ERROR - Database session error: 401: Session expired
2026-01-02 19:56:28,360 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 19:56:28,362 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 19:56:28,363 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 19:56:28,364 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 19:56:28,365 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 19:56:28,366 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 19:56:28,367 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 19:56:28,368 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 19:56:28,369 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 19:56:28,370 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 19:56:28,371 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 19:56:28,372 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 19:56:28,373 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 19:56:28,373 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 19:56:28,374 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 19:56:28,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:28,555 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 19:56:28,557 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('admin',)
2026-01-02 19:56:28,958 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 19:56:28,959 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] (datetime.datetime(2026, 1, 2, 14, 26, 28, 956294, tzinfo=datetime.timezone.utc), 1)
2026-01-02 19:56:28,964 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:29,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:29,133 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 19:56:29,134 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] (1,)
2026-01-02 19:56:29,146 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 19:56:29,147 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] ()
2026-01-02 19:56:29,204 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 19:56:29,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] (50, 0)
2026-01-02 19:56:29,210 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:48,391 - app.api.routes.auth - INFO - Authenticating student: 22007928
2026-01-02 19:56:49,219 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 19:56:49,224 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 19:56:49,230 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000029BE2B6F770>
2026-01-02 19:56:49,231 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 19:56:49,232 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 19:56:49,233 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 19:56:49,234 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 19:56:49,234 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 19:56:49,785 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 14:26:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 14:26:49 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 19:56:49,787 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 19:56:49,788 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 19:56:49,790 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 19:56:49,791 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 19:56:49,795 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 19:56:49,801 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 19:56:49,803 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 19:56:49,803 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 19:56:49,805 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 19:56:49,806 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 19:56:49,972 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 14:26:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 19:56:49,974 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 19:56:49,977 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 19:56:49,979 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 19:56:49,980 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 19:56:49,982 - app.services.moodle_client - INFO - Got site info for user: 22007928
2026-01-02 19:56:50,106 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:50,111 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 19:56:50,113 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] ('PoSRh_ZM87KmGJyRGKP6HZijM3pOZR3dKWjApY8qi_s', 3, '22007928', 'Kavinraja D', '212222240047', 'Z0FBQUFBQnBWOVdwRWlyWU4yZHR1NkFwcWNqXzNsLWF0dm1jREVsSEdXWURwdmEwUmhKSkdRZEwydVdRM2xmMFNMZjlrN1I1bnE4bUtjT1NRMlVxRm1PS2JDb19fSWJVdndEMlFycHVJSXItVkQ3SEhITlM5S3Z1RDdGYVIzSVRYZzM2dFFPTWR0YWg=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 15, 26, 49, 983051, tzinfo=datetime.timezone.utc))
2026-01-02 19:56:50,121 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:50,320 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:50,323 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 19:56:50,324 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 19:56:50,371 - app.api.routes.auth - INFO - Student 22007928 (reg: 212222240047) logged in. Pending papers: 1
2026-01-02 19:56:50,373 - httpcore.connection - DEBUG - close.started
2026-01-02 19:56:50,374 - httpcore.connection - DEBUG - close.complete
2026-01-02 19:56:50,381 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:50,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:50,573 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 19:56:50,574 - sqlalchemy.engine.Engine - INFO - [generated in 0.00156s] ('PoSRh_ZM87KmGJyRGKP6HZijM3pOZR3dKWjApY8qi_s',)
2026-01-02 19:56:50,592 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 19:56:50,593 - sqlalchemy.engine.Engine - INFO - [generated in 0.00152s] (datetime.datetime(2026, 1, 2, 14, 26, 50, 590626, tzinfo=datetime.timezone.utc), 14)
2026-01-02 19:56:50,602 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:56:50,615 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 19:56:50,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 19:56:50,791 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 19:56:50,794 - sqlalchemy.engine.Engine - INFO - [cached since 0.4715s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 19:56:50,856 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 19:56:50,857 - sqlalchemy.engine.Engine - INFO - [generated in 0.00163s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 19:56:50,865 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 19:56:50,867 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] ('19AI405',)
2026-01-02 19:56:50,875 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 19:56:50,878 - sqlalchemy.engine.Engine - INFO - [cached since 0.01254s ago] ('19AI405',)
2026-01-02 19:56:50,884 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 19:57:05,562 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 19:57:05,563 - app.main - INFO - Database connections closed
2026-01-02 20:02:42,026 - app.main - INFO - Starting Examination Middleware...
2026-01-02 20:02:42,111 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 20:02:42,112 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:02:42,114 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 20:02:42,115 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:02:42,116 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 20:02:42,117 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:02:42,118 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:02:42,122 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,123 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,129 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,130 - sqlalchemy.engine.Engine - INFO - [cached since 0.008111s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,131 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,132 - sqlalchemy.engine.Engine - INFO - [cached since 0.0102s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,133 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,134 - sqlalchemy.engine.Engine - INFO - [cached since 0.01204s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,135 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,136 - sqlalchemy.engine.Engine - INFO - [cached since 0.01393s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,137 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,138 - sqlalchemy.engine.Engine - INFO - [cached since 0.01602s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,139 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:02:42,139 - sqlalchemy.engine.Engine - INFO - [cached since 0.0176s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:02:42,141 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 20:02:42,142 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] ('workflowstatus', 'pg_catalog')
2026-01-02 20:02:42,145 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:02:42,149 - app.main - INFO - Database tables created/verified
2026-01-02 20:02:42,150 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 20:02:42,150 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 20:02:42,151 - app.main - INFO - Examination Middleware started successfully
2026-01-02 20:02:53,730 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:02:53,731 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 20:02:53,731 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 20:02:53,732 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:02:53,733 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:02:53,733 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 20:02:53,734 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:02:53,734 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:02:53,735 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 20:02:53,736 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 20:02:53,736 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:02:53,738 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:02:53,739 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 20:02:53,740 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:02:53,741 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 20:02:53,896 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:02:53,914 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 20:02:53,914 - sqlalchemy.engine.Engine - INFO - [generated in 0.00095s] ('admin',)
2026-01-02 20:02:54,421 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 20:02:54,422 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] (datetime.datetime(2026, 1, 2, 14, 32, 54, 417454, tzinfo=datetime.timezone.utc), 1)
2026-01-02 20:02:54,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:02:54,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:02:54,605 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:02:54,605 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] (1,)
2026-01-02 20:02:54,618 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:02:54,619 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] ()
2026-01-02 20:02:54,664 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:02:54,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00168s] (50, 0)
2026-01-02 20:02:54,672 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:02,166 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:02,170 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 20:03:02,171 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ('PoSRh_ZM87KmGJyRGKP6HZijM3pOZR3dKWjApY8qi_s',)
2026-01-02 20:03:02,181 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 20:03:02,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] (datetime.datetime(2026, 1, 2, 14, 33, 2, 180123, tzinfo=datetime.timezone.utc), 14)
2026-01-02 20:03:02,185 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:02,210 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 20:03:02,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:02,375 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 20:03:02,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 20:03:02,408 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 20:03:02,409 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 20:03:02,415 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:03:02,415 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('19AI405',)
2026-01-02 20:03:02,422 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:03:02,423 - sqlalchemy.engine.Engine - INFO - [cached since 0.008744s ago] ('19AI405',)
2026-01-02 20:03:02,426 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:10,639 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:03:10,639 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 20:03:10,640 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 20:03:10,640 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:10,640 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 20:03:10,641 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 20:03:10,641 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:10,642 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:03:10,642 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 20:03:10,643 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:03:10,643 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:03:10,644 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 20:03:10,645 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:562]
2026-01-02 20:03:10,645 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:10,646 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:03:10,646 - python_multipart.multipart - DEBUG - Calling on_part_data with data[566:574]
2026-01-02 20:03:10,647 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:03:10,647 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 20:03:10,784 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:10,785 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:03:10,785 - sqlalchemy.engine.Engine - INFO - [cached since 16.18s ago] (1,)
2026-01-02 20:03:10,796 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 20:03:10,801 - app.services.file_processor - INFO - Saved file: ./uploads/pending/34256d33b0bd421a9ba4bcab033d6141.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 20:03:10,805 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 20:03:10,807 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 20:03:10,853 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 20:03:10,857 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 20:03:10,858 - sqlalchemy.engine.Engine - INFO - [generated in 0.00102s] ('./uploads/pending/34256d33b0bd421a9ba4bcab033d6141.pdf', 3)
2026-01-02 20:03:10,870 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 20:03:10,872 - sqlalchemy.engine.Engine - INFO - [generated in 0.00332s] (3,)
2026-01-02 20:03:10,884 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 20:03:10,885 - sqlalchemy.engine.Engine - INFO - [generated in 0.00164s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 20:03:10,906 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:11,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:11,084 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:03:11,085 - sqlalchemy.engine.Engine - INFO - [cached since 16.48s ago] (1,)
2026-01-02 20:03:11,096 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:03:11,098 - sqlalchemy.engine.Engine - INFO - [cached since 16.48s ago] ()
2026-01-02 20:03:11,149 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:03:11,151 - sqlalchemy.engine.Engine - INFO - [cached since 16.49s ago] (50, 0)
2026-01-02 20:03:11,159 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:29,796 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:03:29,797 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 20:03:29,798 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 20:03:29,798 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:29,799 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 20:03:29,800 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 20:03:29,801 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:29,801 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:03:29,804 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:467]
2026-01-02 20:03:29,805 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:03:29,806 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:03:29,807 - python_multipart.multipart - DEBUG - Calling on_header_field with data[511:530]
2026-01-02 20:03:29,808 - python_multipart.multipart - DEBUG - Calling on_header_value with data[532:592]
2026-01-02 20:03:29,809 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:29,810 - python_multipart.multipart - DEBUG - Calling on_header_field with data[594:606]
2026-01-02 20:03:29,810 - python_multipart.multipart - DEBUG - Calling on_header_value with data[608:623]
2026-01-02 20:03:29,811 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:29,812 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:03:29,814 - python_multipart.multipart - DEBUG - Calling on_part_data with data[627:16384]
2026-01-02 20:03:29,817 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:184574]
2026-01-02 20:03:29,818 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:03:29,818 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 20:03:29,821 - python_multipart.multipart - DEBUG - Calling on_header_field with data[184618:184637]
2026-01-02 20:03:29,822 - python_multipart.multipart - DEBUG - Calling on_header_value with data[184639:184669]
2026-01-02 20:03:29,823 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 20:03:29,824 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 20:03:29,825 - python_multipart.multipart - DEBUG - Calling on_part_data with data[184673:184681]
2026-01-02 20:03:29,825 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 20:03:29,826 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 20:03:29,966 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:29,968 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:03:29,970 - sqlalchemy.engine.Engine - INFO - [cached since 35.36s ago] (1,)
2026-01-02 20:03:29,981 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-02 20:03:29,987 - app.services.file_processor - INFO - Saved file: ./uploads/pending/d410863d82e94ca585dd4a25550c43e1.pdf (hash: 3b5d0cdd7dd98e90...)
2026-01-02 20:03:29,989 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 20:03:29,992 - sqlalchemy.engine.Engine - INFO - [cached since 19.19s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-02 20:03:30,048 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-02 20:03:30,049 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 20:03:30,050 - sqlalchemy.engine.Engine - INFO - [cached since 19.19s ago] ('./uploads/pending/d410863d82e94ca585dd4a25550c43e1.pdf', 3)
2026-01-02 20:03:30,055 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 20:03:30,057 - sqlalchemy.engine.Engine - INFO - [cached since 19.19s ago] (3,)
2026-01-02 20:03:30,062 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-02 20:03:30,069 - app.services.file_processor - INFO - Saved file: ./uploads/pending/6feb089cf1884897b3ae79b2682cc231.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 20:03:30,071 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 20:03:30,073 - sqlalchemy.engine.Engine - INFO - [cached since 19.27s ago] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-02 20:03:30,080 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-02 20:03:30,082 - sqlalchemy.engine.Engine - INFO - [generated in 0.00200s] (UUID('875568b4-9178-4f37-b8bf-42678001475f'), '212221230038_19AI405.pdf', '212221230038_19AI405.pdf', '212221230038', '19AI405', './uploads/pending/6feb089cf1884897b3ae79b2682cc231.pdf', '33d8582fd3cd24748c47705bac581cac9452738f1d9b409c437e67822359d9d7', 200331, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, '848d726dde17c0bdf54eb26601965e86', None, None, None, 1, None, '[{"timestamp": "2026-01-02T14:33:30.076718", "action": "created", "details": {"filename": "212221230038_19AI405.pdf", "parsed_reg_no": "212221230038", "parsed_subject_code": "19AI405"}}]', None, 0)
2026-01-02 20:03:30,093 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 20:03:30,095 - sqlalchemy.engine.Engine - INFO - [cached since 19.23s ago] (4,)
2026-01-02 20:03:30,099 - app.services.artifact_service - INFO - Created artifact: 875568b4-9178-4f37-b8bf-42678001475f
2026-01-02 20:03:30,101 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 20:03:30,103 - sqlalchemy.engine.Engine - INFO - [cached since 19.22s ago] ('bulk_upload', 'upload', 'Bulk upload: 2 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 2, "successful": 2, "failed": 0}', 'null', None, None)
2026-01-02 20:03:30,113 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:30,265 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:30,266 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:03:30,267 - sqlalchemy.engine.Engine - INFO - [cached since 35.66s ago] (1,)
2026-01-02 20:03:30,276 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:03:30,277 - sqlalchemy.engine.Engine - INFO - [cached since 35.66s ago] ()
2026-01-02 20:03:30,324 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:03:30,325 - sqlalchemy.engine.Engine - INFO - [cached since 35.66s ago] (50, 0)
2026-01-02 20:03:30,331 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:03:46,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:03:46,567 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:03:46,568 - sqlalchemy.engine.Engine - INFO - [cached since 51.96s ago] (1,)
2026-01-02 20:03:46,582 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:03:46,584 - sqlalchemy.engine.Engine - INFO - [cached since 51.97s ago] ()
2026-01-02 20:03:46,637 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:03:46,640 - sqlalchemy.engine.Engine - INFO - [cached since 51.98s ago] (50, 0)
2026-01-02 20:03:46,647 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:05:24,123 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:05:24,124 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 20:05:24,125 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] ('PoSRh_ZM87KmGJyRGKP6HZijM3pOZR3dKWjApY8qi_s',)
2026-01-02 20:05:24,136 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 20:05:24,137 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] (datetime.datetime(2026, 1, 2, 14, 35, 24, 135667, tzinfo=datetime.timezone.utc), 14)
2026-01-02 20:05:24,140 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:05:24,148 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 20:05:24,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:05:24,303 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 20:05:24,304 - sqlalchemy.engine.Engine - INFO - [cached since 141.9s ago] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 20:05:24,363 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 20:05:24,365 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 20:05:24,370 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:05:24,371 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] ('19AI405',)
2026-01-02 20:05:24,381 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:05:24,382 - sqlalchemy.engine.Engine - INFO - [cached since 142s ago] ('19AI405',)
2026-01-02 20:05:24,387 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:10:11,795 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 20:10:11,796 - app.main - INFO - Database connections closed
2026-01-02 20:10:24,298 - app.main - INFO - Starting Examination Middleware...
2026-01-02 20:10:24,382 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 20:10:24,383 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:10:24,386 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 20:10:24,386 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:10:24,388 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 20:10:24,388 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:10:24,389 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:10:24,393 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,393 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.009077s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.01088s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,404 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.01246s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,406 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,406 - sqlalchemy.engine.Engine - INFO - [cached since 0.01407s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,408 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,408 - sqlalchemy.engine.Engine - INFO - [cached since 0.01602s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,410 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:10:24,410 - sqlalchemy.engine.Engine - INFO - [cached since 0.01793s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:10:24,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 20:10:24,414 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('workflowstatus', 'pg_catalog')
2026-01-02 20:10:24,417 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:10:24,421 - app.main - INFO - Database tables created/verified
2026-01-02 20:10:24,421 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 20:10:24,422 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 20:10:24,423 - app.main - INFO - Examination Middleware started successfully
2026-01-02 20:10:33,053 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:10:33,084 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 20:10:33,085 - sqlalchemy.engine.Engine - INFO - [generated in 0.00157s] ('PoSRh_ZM87KmGJyRGKP6HZijM3pOZR3dKWjApY8qi_s',)
2026-01-02 20:10:33,102 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 20:10:33,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00197s] (datetime.datetime(2026, 1, 2, 14, 40, 33, 97778, tzinfo=datetime.timezone.utc), 14)
2026-01-02 20:10:33,111 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:10:33,123 - app.api.routes.student - INFO - Dashboard for register_number: 212222240047
2026-01-02 20:10:33,276 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:10:33,284 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 20:10:33,286 - sqlalchemy.engine.Engine - INFO - [generated in 0.00228s] ('212222240047', '212222240047', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 20:10:33,361 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 20:10:33,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00333s] ('212222240047', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 20:10:33,375 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:10:33,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('19AI405',)
2026-01-02 20:10:33,388 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:10:33,389 - sqlalchemy.engine.Engine - INFO - [cached since 0.01454s ago] ('19AI405',)
2026-01-02 20:10:33,395 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:13:18,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:13:18,494 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:13:18,495 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] (1,)
2026-01-02 20:13:18,507 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:13:18,508 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ()
2026-01-02 20:13:18,576 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:13:18,578 - sqlalchemy.engine.Engine - INFO - [generated in 0.00258s] (50, 0)
2026-01-02 20:13:18,586 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:14:22,536 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:14:22,537 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:14:22,539 - sqlalchemy.engine.Engine - INFO - [cached since 64.04s ago] (1,)
2026-01-02 20:14:22,552 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:14:22,554 - sqlalchemy.engine.Engine - INFO - [cached since 64.05s ago] ()
2026-01-02 20:14:22,620 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:14:22,622 - sqlalchemy.engine.Engine - INFO - [cached since 64.05s ago] (50, 0)
2026-01-02 20:14:22,631 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:14:26,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:14:26,202 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:14:26,203 - sqlalchemy.engine.Engine - INFO - [cached since 67.71s ago] (1,)
2026-01-02 20:14:26,219 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:14:26,221 - sqlalchemy.engine.Engine - INFO - [cached since 67.71s ago] ()
2026-01-02 20:14:26,267 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:14:26,268 - sqlalchemy.engine.Engine - INFO - [cached since 67.69s ago] (50, 0)
2026-01-02 20:14:26,274 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:14:26,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:14:26,796 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:14:26,796 - sqlalchemy.engine.Engine - INFO - [cached since 68.3s ago] (1,)
2026-01-02 20:14:26,802 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:14:26,803 - sqlalchemy.engine.Engine - INFO - [cached since 68.3s ago] ()
2026-01-02 20:14:26,835 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:14:26,836 - sqlalchemy.engine.Engine - INFO - [cached since 68.26s ago] (50, 0)
2026-01-02 20:14:26,842 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:14:49,538 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:14:49,539 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:14:49,540 - sqlalchemy.engine.Engine - INFO - [cached since 91.05s ago] (1,)
2026-01-02 20:14:49,550 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:14:49,552 - sqlalchemy.engine.Engine - INFO - [cached since 91.05s ago] ()
2026-01-02 20:14:49,609 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:14:49,612 - sqlalchemy.engine.Engine - INFO - [cached since 91.04s ago] (50, 0)
2026-01-02 20:14:49,619 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:18:11,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:18:11,890 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:18:11,890 - sqlalchemy.engine.Engine - INFO - [cached since 293.4s ago] (1,)
2026-01-02 20:18:11,905 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:18:11,907 - sqlalchemy.engine.Engine - INFO - [cached since 293.4s ago] ()
2026-01-02 20:18:11,950 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:18:11,951 - sqlalchemy.engine.Engine - INFO - [cached since 293.4s ago] (50, 0)
2026-01-02 20:18:11,961 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:19:07,753 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 20:19:07,754 - app.main - INFO - Database connections closed
2026-01-02 20:19:09,932 - app.main - INFO - Starting Examination Middleware...
2026-01-02 20:19:10,020 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 20:19:10,020 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:19:10,023 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 20:19:10,023 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:19:10,025 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 20:19:10,026 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:19:10,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:19:10,033 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,033 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,042 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,042 - sqlalchemy.engine.Engine - INFO - [cached since 0.009888s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,044 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,044 - sqlalchemy.engine.Engine - INFO - [cached since 0.01186s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,046 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,046 - sqlalchemy.engine.Engine - INFO - [cached since 0.0137s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,047 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,048 - sqlalchemy.engine.Engine - INFO - [cached since 0.01543s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,049 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,050 - sqlalchemy.engine.Engine - INFO - [cached since 0.01729s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:19:10,052 - sqlalchemy.engine.Engine - INFO - [cached since 0.01909s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:19:10,054 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 20:19:10,055 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] ('workflowstatus', 'pg_catalog')
2026-01-02 20:19:10,058 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:19:10,063 - app.main - INFO - Database tables created/verified
2026-01-02 20:19:10,063 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 20:19:10,064 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 20:19:10,065 - app.main - INFO - Examination Middleware started successfully
2026-01-02 20:19:15,097 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 20:19:15,097 - app.main - INFO - Database connections closed
2026-01-02 20:20:44,255 - app.main - INFO - Starting Examination Middleware...
2026-01-02 20:20:44,340 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 20:20:44,340 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:20:44,343 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 20:20:44,344 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:20:44,346 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 20:20:44,347 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 20:20:44,349 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:20:44,354 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,355 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,364 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,365 - sqlalchemy.engine.Engine - INFO - [cached since 0.01075s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,366 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,367 - sqlalchemy.engine.Engine - INFO - [cached since 0.01273s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,369 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,369 - sqlalchemy.engine.Engine - INFO - [cached since 0.01521s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.01737s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.01938s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,375 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 20:20:44,375 - sqlalchemy.engine.Engine - INFO - [cached since 0.02122s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 20:20:44,378 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 20:20:44,379 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('workflowstatus', 'pg_catalog')
2026-01-02 20:20:44,383 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:20:44,388 - app.main - INFO - Database tables created/verified
2026-01-02 20:20:44,389 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 20:20:44,389 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 20:20:44,390 - app.main - INFO - Examination Middleware started successfully
2026-01-02 20:20:48,127 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:20:48,179 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:20:48,180 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] (1,)
2026-01-02 20:20:48,209 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:20:48,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00294s] ()
2026-01-02 20:20:48,286 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:20:48,288 - sqlalchemy.engine.Engine - INFO - [generated in 0.00236s] (50, 0)
2026-01-02 20:20:48,296 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:20:50,686 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:20:50,687 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:20:50,688 - sqlalchemy.engine.Engine - INFO - [cached since 2.509s ago] (1,)
2026-01-02 20:20:50,701 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:20:50,703 - sqlalchemy.engine.Engine - INFO - [cached since 2.495s ago] ()
2026-01-02 20:20:50,760 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:20:50,762 - sqlalchemy.engine.Engine - INFO - [cached since 2.476s ago] (50, 0)
2026-01-02 20:20:50,767 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:21:03,369 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:21:03,373 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 20:21:03,375 - sqlalchemy.engine.Engine - INFO - [cached since 15.2s ago] (1,)
2026-01-02 20:21:03,389 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 20:21:03,390 - sqlalchemy.engine.Engine - INFO - [cached since 15.18s ago] ()
2026-01-02 20:21:03,442 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 20:21:03,444 - sqlalchemy.engine.Engine - INFO - [cached since 15.16s ago] (50, 0)
2026-01-02 20:21:03,449 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:24:26,253 - app.api.routes.auth - INFO - Authenticating student: 22008388
2026-01-02 20:24:27,043 - app.services.moodle_client - INFO - Authenticating user: 22008388
2026-01-02 20:24:27,056 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 20:24:27,061 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED953BB380>
2026-01-02 20:24:27,063 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 20:24:27,064 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 20:24:27,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 20:24:27,067 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 20:24:27,067 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 20:24:27,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 14:54:27 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 14:54:27 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 20:24:27,350 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 20:24:27,351 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 20:24:27,354 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 20:24:27,354 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 20:24:27,357 - app.services.moodle_client - INFO - Successfully authenticated user: 22008388
2026-01-02 20:24:27,362 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 20:24:27,364 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 20:24:27,365 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 20:24:27,366 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 20:24:27,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 20:24:27,583 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 14:54:27 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 20:24:27,584 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 20:24:27,587 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 20:24:27,589 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 20:24:27,590 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 20:24:27,593 - app.services.moodle_client - INFO - Got site info for user: 22008388
2026-01-02 20:24:27,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:24:27,861 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 20:24:27,862 - sqlalchemy.engine.Engine - INFO - [generated in 0.00111s] ('DA6WE9JZiHFePDaCg-n0_BySrHdEqNTQi75Pzj10yrQ', 4, '22008388', 'Kishore S', '212221230038', 'Z0FBQUFBQnBWOXdqQnRLVWFqMjAyQUVkandtY2ZzWVRXZUxtY2diRGlHVURkQzNJOWtMUGNZX0RHWTVLeVo5TDJyY2pfUm8zMEM4QzNOeWFVQkNBLXIwR2huX253WWFhaXhkN1FDQ2RFQ09wbExkcFpiWV9CdkI3OUZ4NVpvZnBzWnJZaGNvaVYzTGs=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 15, 54, 27, 593686, tzinfo=datetime.timezone.utc))
2026-01-02 20:24:27,869 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:24:28,036 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:24:28,040 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 20:24:28,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 20:24:28,095 - app.api.routes.auth - INFO - Student 22008388 (reg: 212221230038) logged in. Pending papers: 1
2026-01-02 20:24:28,097 - httpcore.connection - DEBUG - close.started
2026-01-02 20:24:28,099 - httpcore.connection - DEBUG - close.complete
2026-01-02 20:24:28,105 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:24:28,305 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:24:28,308 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 20:24:28,310 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] ('DA6WE9JZiHFePDaCg-n0_BySrHdEqNTQi75Pzj10yrQ',)
2026-01-02 20:24:28,325 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 20:24:28,326 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] (datetime.datetime(2026, 1, 2, 14, 54, 28, 322683, tzinfo=datetime.timezone.utc), 15)
2026-01-02 20:24:28,331 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 20:24:28,342 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 20:24:28,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 20:24:28,527 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 20:24:28,529 - sqlalchemy.engine.Engine - INFO - [cached since 0.4893s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 20:24:28,618 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 20:24:28,621 - sqlalchemy.engine.Engine - INFO - [generated in 0.00289s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 20:24:28,633 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:24:28,635 - sqlalchemy.engine.Engine - INFO - [generated in 0.00199s] ('19AI405',)
2026-01-02 20:24:28,648 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 20:24:28,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.01701s ago] ('19AI405',)
2026-01-02 20:24:28,658 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:05,494 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:05,495 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:08:05,496 - sqlalchemy.engine.Engine - INFO - [cached since 6217s ago] ('DA6WE9JZiHFePDaCg-n0_BySrHdEqNTQi75Pzj10yrQ',)
2026-01-02 22:08:05,506 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_sessions WHERE student_sessions.id = $1::INTEGER
2026-01-02 22:08:05,507 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] (15,)
2026-01-02 22:08:05,510 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:05,535 - app.db.database - ERROR - Database session error: 401: Session expired
2026-01-02 22:08:12,629 - app.api.routes.auth - INFO - Authenticating student: 22008388
2026-01-02 22:08:13,223 - app.services.moodle_client - INFO - Authenticating user: 22008388
2026-01-02 22:08:13,227 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:08:13,232 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED9549C410>
2026-01-02 22:08:13,234 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:08:13,235 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:08:13,235 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:08:13,236 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:08:13,237 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:08:13,618 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:38:13 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:38:13 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 22:08:13,620 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:08:13,621 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:08:13,622 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:08:13,623 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:08:13,625 - app.services.moodle_client - INFO - Successfully authenticated user: 22008388
2026-01-02 22:08:13,630 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:08:13,631 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:08:13,631 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:08:13,632 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:08:13,632 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:08:13,857 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:38:13 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-02 22:08:13,858 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:08:13,860 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:08:13,862 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:08:13,862 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:08:13,865 - app.services.moodle_client - INFO - Got site info for user: 22008388
2026-01-02 22:08:13,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:13,984 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-02 22:08:13,985 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw', 4, '22008388', 'Kishore S', '212221230038', 'Z0FBQUFBQnBWX1IxLXY1TzRGODlBeml1bGJpTk91b0hGTUIyOG42QU5TNWJYcUVqakY4N2RlRUM2cF9qVklMLTFsTV9KMmp5NXVSejR6cmZuRktXNHNqZFdDSVFIX1lBRUZDXzdiZnczQ0hJV3F4TEtWbUJ3c1g5TFhjUU1TRmJMLTVLVVpJcFVKX3Q=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 17, 38, 13, 865604, tzinfo=datetime.timezone.utc))
2026-01-02 22:08:13,990 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:14,112 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:14,113 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:08:14,115 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:08:14,168 - app.api.routes.auth - INFO - Student 22008388 (reg: 212221230038) logged in. Pending papers: 1
2026-01-02 22:08:14,170 - httpcore.connection - DEBUG - close.started
2026-01-02 22:08:14,171 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:08:14,175 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:14,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:14,303 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:08:14,304 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:08:14,312 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:08:14,314 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] (datetime.datetime(2026, 1, 2, 16, 38, 14, 312103, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:08:14,317 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:14,325 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:08:14,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:14,459 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:08:14,461 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:08:14,506 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:08:14,508 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:08:14,512 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:08:14,513 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('19AI405',)
2026-01-02 22:08:14,522 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:08:14,523 - sqlalchemy.engine.Engine - INFO - [cached since 6226s ago] ('19AI405',)
2026-01-02 22:08:14,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:18,792 - app.db.database - ERROR - Database session error: 1 validation error:
  {'type': 'missing', 'loc': ('header', 'X-Session-ID'), 'msg': 'Field required', 'input': None}

  File "C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\app\api\routes\student.py", line 191, in view_paper_file
    GET /student/paper/{artifact_uuid}/view
2026-01-02 22:08:29,958 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:08:29,960 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 22:08:29,961 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-02 22:08:29,962 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:08:29,962 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:08:29,963 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-02 22:08:29,964 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:08:29,966 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:08:29,967 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-02 22:08:29,967 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-02 22:08:29,968 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:08:29,969 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:08:29,970 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-02 22:08:29,970 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:08:29,972 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 22:08:30,094 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:30,096 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-02 22:08:30,097 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('admin',)
2026-01-02 22:08:30,456 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-02 22:08:30,456 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] (datetime.datetime(2026, 1, 2, 16, 38, 30, 454753, tzinfo=datetime.timezone.utc), 1)
2026-01-02 22:08:30,459 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:08:30,584 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:08:30,586 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:08:30,587 - sqlalchemy.engine.Engine - INFO - [cached since 6462s ago] (1,)
2026-01-02 22:08:30,598 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:08:30,600 - sqlalchemy.engine.Engine - INFO - [cached since 6462s ago] ()
2026-01-02 22:08:30,645 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:08:30,646 - sqlalchemy.engine.Engine - INFO - [cached since 6462s ago] (50, 0)
2026-01-02 22:08:30,651 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:02,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:02,137 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:09:02,138 - sqlalchemy.engine.Engine - INFO - [cached since 6274s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:09:02,146 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:09:02,148 - sqlalchemy.engine.Engine - INFO - [cached since 6274s ago] (datetime.datetime(2026, 1, 2, 16, 39, 2, 146485, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:09:02,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:02,169 - app.api.routes.student - INFO - Submit attempt for 875568b4-9178-4f37-b8bf-42678001475f by register_number: 212221230038
2026-01-02 22:09:02,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:02,284 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:09:02,286 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-02 22:09:02,333 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:09:02,335 - sqlalchemy.engine.Engine - INFO - [cached since 6274s ago] ('19AI405',)
2026-01-02 22:09:02,343 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:09:02,344 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] (4, '22008388', 2, 4)
2026-01-02 22:09:02,350 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:09:02,352 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', 'null', None, None)
2026-01-02 22:09:02,359 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 22:09:02,360 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:09:02,362 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] ('UPLOADING', 4)
2026-01-02 22:09:02,906 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI405.pdf (200331 bytes)
2026-01-02 22:09:02,911 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:09:02,915 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED954C4690>
2026-01-02 22:09:02,916 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:09:02,917 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:09:02,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:09:02,920 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:09:02,920 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,066 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:39:02 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:39:02 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 22:09:03,068 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,069 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:09:03,072 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:09:03,072 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:09:03,075 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'itemid': 894962511, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI405.pdf";}', 'filesize': 200331}]
2026-01-02 22:09:03,075 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 894962511
2026-01-02 22:09:03,077 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:09:03,078 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] (894962511, 4)
2026-01-02 22:09:03,082 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 22:09:03,087 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,088 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:09:03,089 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,090 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:09:03,090 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,227 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:39:03 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:09:03,228 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,230 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:09:03,232 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:09:03,233 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:09:03,236 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 22:09:03,237 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 22:09:03,238 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:09:03,239 - sqlalchemy.engine.Engine - INFO - [cached since 0.8791s ago] ('SUBMITTING', 4)
2026-01-02 22:09:03,243 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 894962511
2026-01-02 22:09:03,249 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,251 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:09:03,252 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,254 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:09:03,254 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,929 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:39:03 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:09:03,930 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,931 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:09:03,932 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:09:03,933 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:09:03,935 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 22:09:03,935 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 22:09:03,936 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 22:09:03,938 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:09:03,939 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:09:03,940 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:09:03,941 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:09:03,941 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:09:04,093 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:39:03 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:09:04,094 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:09:04,094 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:09:04,096 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:09:04,096 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:09:04,098 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 4, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767365566, 'timemodified': 1767371943, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/4/212221230038_19AI405.pdf', 'timemodified': 1767371943, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 22:09:04,098 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 22:09:04,099 - app.services.submission_service - INFO - Submission ID: 4
2026-01-02 22:09:04,099 - app.services.submission_service - INFO - Submission timecreated: 1767365566
2026-01-02 22:09:04,100 - app.services.submission_service - INFO - Submission timemodified: 1767371943
2026-01-02 22:09:04,100 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 22:09:04,100 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 22:09:04,101 - app.services.submission_service - INFO - Can edit: True
2026-01-02 22:09:04,101 - app.services.submission_service - INFO - Can submit: False
2026-01-02 22:09:04,102 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 22:09:04,102 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI405.pdf']
2026-01-02 22:09:04,103 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 22:09:04,105 - httpcore.connection - DEBUG - close.started
2026-01-02 22:09:04,105 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:09:04,106 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 894962511, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '4', 'verified_files': ['212221230038_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102163904'}
2026-01-02 22:09:04,106 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 22:09:04,108 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:09:04,109 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] (4,)
2026-01-02 22:09:04,114 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2026-01-02 22:09:04,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] ('COMPLETED', '4', 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102163904', datetime.datetime(2026, 1, 2, 16, 39, 4, 113155), datetime.datetime(2026, 1, 2, 16, 39, 4, 113174), 4)
2026-01-02 22:09:04,120 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:09:04,121 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] (4,)
2026-01-02 22:09:04,123 - app.services.artifact_service - INFO - Artifact 4 marked as submitted
2026-01-02 22:09:04,124 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:09:04,125 - sqlalchemy.engine.Engine - INFO - [cached since 1.775s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 894962511, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212221230038_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102163904"}', None, None)
2026-01-02 22:09:04,127 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:04,242 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:04,244 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:09:04,245 - sqlalchemy.engine.Engine - INFO - [cached since 1.96s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-02 22:09:04,280 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:04,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:04,403 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:09:04,404 - sqlalchemy.engine.Engine - INFO - [cached since 6276s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:09:04,414 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:09:04,415 - sqlalchemy.engine.Engine - INFO - [cached since 6276s ago] (datetime.datetime(2026, 1, 2, 16, 39, 4, 413588, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:09:04,418 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:04,426 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:09:04,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:04,574 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:09:04,575 - sqlalchemy.engine.Engine - INFO - [cached since 6277s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:09:04,612 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:09:04,613 - sqlalchemy.engine.Engine - INFO - [cached since 6276s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:09:04,617 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:09:07,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:09:07,813 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:09:07,814 - sqlalchemy.engine.Engine - INFO - [cached since 6500s ago] (1,)
2026-01-02 22:09:07,823 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:09:07,824 - sqlalchemy.engine.Engine - INFO - [cached since 6500s ago] ()
2026-01-02 22:09:07,874 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:09:07,875 - sqlalchemy.engine.Engine - INFO - [cached since 6500s ago] (50, 0)
2026-01-02 22:09:07,880 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:10:55,938 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:10:55,938 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 22:10:55,939 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 22:10:55,939 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:10:55,939 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 22:10:55,939 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 22:10:55,940 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:10:55,940 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:10:55,940 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:196608]
2026-01-02 22:10:55,941 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:3881]
2026-01-02 22:10:55,941 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:10:55,942 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:10:55,942 - python_multipart.multipart - DEBUG - Calling on_header_field with data[3925:3944]
2026-01-02 22:10:55,942 - python_multipart.multipart - DEBUG - Calling on_header_value with data[3946:3976]
2026-01-02 22:10:55,943 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:10:55,943 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:10:55,944 - python_multipart.multipart - DEBUG - Calling on_part_data with data[3980:3988]
2026-01-02 22:10:55,944 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:10:55,944 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 22:10:56,169 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:10:56,170 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:10:56,171 - sqlalchemy.engine.Engine - INFO - [cached since 6608s ago] (1,)
2026-01-02 22:10:56,178 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-02 22:10:56,185 - app.services.file_processor - INFO - Saved file: ./uploads/pending/92693e246f564c5fb86b2ebafe97bd66.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 22:10:56,187 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 22:10:56,188 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-02 22:10:56,232 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-02 22:10:56,233 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 22:10:56,234 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('./uploads/pending/92693e246f564c5fb86b2ebafe97bd66.pdf', 'PENDING', 4)
2026-01-02 22:10:56,237 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:10:56,238 - sqlalchemy.engine.Engine - INFO - [cached since 112.1s ago] (4,)
2026-01-02 22:10:56,241 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:10:56,242 - sqlalchemy.engine.Engine - INFO - [cached since 113.9s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 22:10:56,247 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:10:56,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:10:56,409 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:10:56,409 - sqlalchemy.engine.Engine - INFO - [cached since 6608s ago] (1,)
2026-01-02 22:10:56,417 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:10:56,418 - sqlalchemy.engine.Engine - INFO - [cached since 6608s ago] ()
2026-01-02 22:10:56,457 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:10:56,458 - sqlalchemy.engine.Engine - INFO - [cached since 6608s ago] (50, 0)
2026-01-02 22:10:56,468 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:03,484 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:03,485 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:11:03,487 - sqlalchemy.engine.Engine - INFO - [cached since 6395s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:11:03,503 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:11:03,504 - sqlalchemy.engine.Engine - INFO - [cached since 6395s ago] (datetime.datetime(2026, 1, 2, 16, 41, 3, 502653, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:11:03,509 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:03,522 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:11:03,690 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:03,692 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:11:03,695 - sqlalchemy.engine.Engine - INFO - [cached since 6396s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:11:03,751 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:11:03,753 - sqlalchemy.engine.Engine - INFO - [cached since 6395s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:11:03,757 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:11:03,758 - sqlalchemy.engine.Engine - INFO - [cached since 6395s ago] ('19AI405',)
2026-01-02 22:11:03,768 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:11:03,770 - sqlalchemy.engine.Engine - INFO - [cached since 6395s ago] ('19AI405',)
2026-01-02 22:11:03,775 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:07,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:07,279 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:11:07,280 - sqlalchemy.engine.Engine - INFO - [cached since 6399s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:11:07,291 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:11:07,292 - sqlalchemy.engine.Engine - INFO - [cached since 6399s ago] (datetime.datetime(2026, 1, 2, 16, 41, 7, 290719, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:11:07,297 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:07,305 - app.api.routes.student - INFO - Submit attempt for 875568b4-9178-4f37-b8bf-42678001475f by register_number: 212221230038
2026-01-02 22:11:07,468 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:07,469 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:11:07,470 - sqlalchemy.engine.Engine - INFO - [cached since 125.2s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-02 22:11:07,524 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:11:07,525 - sqlalchemy.engine.Engine - INFO - [cached since 125.2s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', 'null', None, None)
2026-01-02 22:11:07,533 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 22:11:07,534 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:11:07,535 - sqlalchemy.engine.Engine - INFO - [cached since 125.2s ago] ('UPLOADING', 4)
2026-01-02 22:11:08,151 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI405.pdf (200331 bytes)
2026-01-02 22:11:08,155 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:11:08,159 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED954C8B00>
2026-01-02 22:11:08,161 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:11:08,162 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,164 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:11:08,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,295 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:41:08 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:41:08 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 22:11:08,296 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,297 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:11:08,299 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:11:08,300 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:11:08,302 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'itemid': 314942543, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI405.pdf";}', 'filesize': 200331}]
2026-01-02 22:11:08,303 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 314942543
2026-01-02 22:11:08,304 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:11:08,305 - sqlalchemy.engine.Engine - INFO - [cached since 125.2s ago] (314942543, 4)
2026-01-02 22:11:08,315 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-02 22:11:08,320 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,321 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:11:08,322 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,323 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:11:08,324 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,489 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:41:08 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:11:08,490 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,491 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:11:08,494 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:11:08,495 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:11:08,498 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-02 22:11:08,499 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-02 22:11:08,500 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:11:08,501 - sqlalchemy.engine.Engine - INFO - [cached since 126.1s ago] ('SUBMITTING', 4)
2026-01-02 22:11:08,504 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 314942543
2026-01-02 22:11:08,508 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:11:08,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,512 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:11:08,512 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,804 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:41:08 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:11:08,805 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,806 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:11:08,807 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:11:08,808 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:11:08,811 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-02 22:11:08,812 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-02 22:11:08,813 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-02 22:11:08,817 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:11:08,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,820 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:11:08,820 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:11:08,990 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:41:08 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:11:08,991 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:11:08,992 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:11:08,995 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:11:08,996 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:11:08,999 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 4, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767365566, 'timemodified': 1767372068, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/4/212221230038_19AI405.pdf', 'timemodified': 1767372068, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-02 22:11:08,999 - app.services.submission_service - INFO - Submission status: submitted
2026-01-02 22:11:09,000 - app.services.submission_service - INFO - Submission ID: 4
2026-01-02 22:11:09,000 - app.services.submission_service - INFO - Submission timecreated: 1767365566
2026-01-02 22:11:09,001 - app.services.submission_service - INFO - Submission timemodified: 1767372068
2026-01-02 22:11:09,002 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-02 22:11:09,002 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-02 22:11:09,003 - app.services.submission_service - INFO - Can edit: True
2026-01-02 22:11:09,003 - app.services.submission_service - INFO - Can submit: False
2026-01-02 22:11:09,004 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-02 22:11:09,004 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI405.pdf']
2026-01-02 22:11:09,005 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-02 22:11:09,007 - httpcore.connection - DEBUG - close.started
2026-01-02 22:11:09,009 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:11:09,010 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 314942543, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '4', 'verified_files': ['212221230038_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102164109'}
2026-01-02 22:11:09,010 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-02 22:11:09,012 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:11:09,014 - sqlalchemy.engine.Engine - INFO - [cached since 124.9s ago] (4,)
2026-01-02 22:11:09,020 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-02 22:11:09,021 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] ('COMPLETED', 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102164109', datetime.datetime(2026, 1, 2, 16, 41, 9, 18766), datetime.datetime(2026, 1, 2, 16, 41, 9, 18780), 4)
2026-01-02 22:11:09,025 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:11:09,028 - sqlalchemy.engine.Engine - INFO - [cached since 124.9s ago] (4,)
2026-01-02 22:11:09,031 - app.services.artifact_service - INFO - Artifact 4 marked as submitted
2026-01-02 22:11:09,034 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:11:09,036 - sqlalchemy.engine.Engine - INFO - [cached since 126.7s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 314942543, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212221230038_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102164109"}', None, None)
2026-01-02 22:11:09,039 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:09,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:09,189 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:11:09,190 - sqlalchemy.engine.Engine - INFO - [cached since 126.9s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-02 22:11:09,239 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:09,391 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:09,392 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:11:09,394 - sqlalchemy.engine.Engine - INFO - [cached since 6401s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:11:09,408 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:11:09,409 - sqlalchemy.engine.Engine - INFO - [cached since 6401s ago] (datetime.datetime(2026, 1, 2, 16, 41, 9, 407465, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:11:09,415 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:11:09,428 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:11:09,587 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:11:09,588 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:11:09,589 - sqlalchemy.engine.Engine - INFO - [cached since 6402s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:11:09,649 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:11:09,651 - sqlalchemy.engine.Engine - INFO - [cached since 6401s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:11:09,656 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:01,033 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:15:01,034 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 22:15:01,035 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 22:15:01,036 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:15:01,036 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 22:15:01,037 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 22:15:01,037 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:15:01,038 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:15:01,054 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:49152]
2026-01-02 22:15:01,059 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:151337]
2026-01-02 22:15:01,060 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:15:01,061 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:15:01,061 - python_multipart.multipart - DEBUG - Calling on_header_field with data[151381:151400]
2026-01-02 22:15:01,062 - python_multipart.multipart - DEBUG - Calling on_header_value with data[151402:151462]
2026-01-02 22:15:01,063 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:15:01,063 - python_multipart.multipart - DEBUG - Calling on_header_field with data[151464:151476]
2026-01-02 22:15:01,064 - python_multipart.multipart - DEBUG - Calling on_header_value with data[151478:151493]
2026-01-02 22:15:01,064 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:15:01,065 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:15:01,066 - python_multipart.multipart - DEBUG - Calling on_part_data with data[151497:212992]
2026-01-02 22:15:01,067 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:138836]
2026-01-02 22:15:01,068 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:15:01,069 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:15:01,070 - python_multipart.multipart - DEBUG - Calling on_header_field with data[138880:138899]
2026-01-02 22:15:01,071 - python_multipart.multipart - DEBUG - Calling on_header_value with data[138901:138931]
2026-01-02 22:15:01,072 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:15:01,072 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:15:01,073 - python_multipart.multipart - DEBUG - Calling on_part_data with data[138935:138943]
2026-01-02 22:15:01,074 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:15:01,075 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 22:15:01,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:01,199 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:15:01,200 - sqlalchemy.engine.Engine - INFO - [cached since 6853s ago] (1,)
2026-01-02 22:15:01,207 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-02 22:15:01,212 - app.services.file_processor - INFO - Saved file: ./uploads/pending/8c1caa8903774c2490f48a7b44d08251.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 22:15:01,214 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 22:15:01,215 - sqlalchemy.engine.Engine - INFO - [cached since 245s ago] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-02 22:15:01,251 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-02 22:15:01,252 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-02 22:15:01,253 - sqlalchemy.engine.Engine - INFO - [cached since 245s ago] ('./uploads/pending/8c1caa8903774c2490f48a7b44d08251.pdf', 'PENDING', 4)
2026-01-02 22:15:01,258 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:15:01,259 - sqlalchemy.engine.Engine - INFO - [cached since 357.1s ago] (4,)
2026-01-02 22:15:01,263 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-02 22:15:01,269 - app.services.file_processor - INFO - Saved file: ./uploads/pending/f4b61d9a3b55493da2f29ab61123f8e4.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 22:15:01,270 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 22:15:01,272 - sqlalchemy.engine.Engine - INFO - [cached since 245.1s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-02 22:15:01,284 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-02 22:15:01,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00180s] (UUID('ffe8b273-da46-401a-afbb-c7fce6e26996'), '212221230038_19AI411.pdf', '212221230038_19AI411.pdf', '212221230038', '19AI411', './uploads/pending/f4b61d9a3b55493da2f29ab61123f8e4.pdf', '33d8582fd3cd24748c47705bac581cac9452738f1d9b409c437e67822359d9d7', 200331, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, '4f81e6ea3435481878fc6f8a8f066815', None, None, None, 1, None, '[{"timestamp": "2026-01-02T16:45:01.274859", "action": "created", "details": {"filename": "212221230038_19AI411.pdf", "parsed_reg_no": "212221230038", "parsed_subject_code": "19AI411"}}]', None, 0)
2026-01-02 22:15:01,293 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:15:01,295 - sqlalchemy.engine.Engine - INFO - [cached since 357.2s ago] (5,)
2026-01-02 22:15:01,299 - app.services.artifact_service - INFO - Created artifact: ffe8b273-da46-401a-afbb-c7fce6e26996
2026-01-02 22:15:01,300 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:15:01,302 - sqlalchemy.engine.Engine - INFO - [cached since 359s ago] ('bulk_upload', 'upload', 'Bulk upload: 2 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 2, "successful": 2, "failed": 0}', 'null', None, None)
2026-01-02 22:15:01,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:01,471 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:01,472 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:15:01,473 - sqlalchemy.engine.Engine - INFO - [cached since 6853s ago] (1,)
2026-01-02 22:15:01,481 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:15:01,483 - sqlalchemy.engine.Engine - INFO - [cached since 6853s ago] ()
2026-01-02 22:15:01,522 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:15:01,523 - sqlalchemy.engine.Engine - INFO - [cached since 6853s ago] (50, 0)
2026-01-02 22:15:01,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:04,079 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:04,081 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:15:04,082 - sqlalchemy.engine.Engine - INFO - [cached since 6856s ago] (1,)
2026-01-02 22:15:04,092 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:15:04,093 - sqlalchemy.engine.Engine - INFO - [cached since 6856s ago] ()
2026-01-02 22:15:04,135 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:15:04,136 - sqlalchemy.engine.Engine - INFO - [cached since 6856s ago] (50, 0)
2026-01-02 22:15:04,141 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:06,837 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:06,838 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:15:06,839 - sqlalchemy.engine.Engine - INFO - [cached since 6639s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:15:06,847 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:15:06,848 - sqlalchemy.engine.Engine - INFO - [cached since 6639s ago] (datetime.datetime(2026, 1, 2, 16, 45, 6, 847047, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:15:06,852 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:06,861 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:15:06,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:06,998 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:15:06,999 - sqlalchemy.engine.Engine - INFO - [cached since 6639s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:15:07,051 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:15:07,053 - sqlalchemy.engine.Engine - INFO - [cached since 6638s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:15:07,057 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:15:07,058 - sqlalchemy.engine.Engine - INFO - [cached since 6638s ago] ('19AI411',)
2026-01-02 22:15:07,065 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:15:07,067 - sqlalchemy.engine.Engine - INFO - [cached since 6638s ago] ('19AI411',)
2026-01-02 22:15:07,070 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:15:07,072 - sqlalchemy.engine.Engine - INFO - [cached since 6638s ago] ('19AI405',)
2026-01-02 22:15:07,075 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:15:07,076 - sqlalchemy.engine.Engine - INFO - [cached since 6638s ago] ('19AI405',)
2026-01-02 22:15:07,079 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:31,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:31,090 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:15:31,092 - sqlalchemy.engine.Engine - INFO - [cached since 6663s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:15:31,102 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:15:31,103 - sqlalchemy.engine.Engine - INFO - [cached since 6663s ago] (datetime.datetime(2026, 1, 2, 16, 45, 31, 102002, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:15:31,107 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:31,131 - app.api.routes.student - INFO - Submit attempt for ffe8b273-da46-401a-afbb-c7fce6e26996 by register_number: 212221230038
2026-01-02 22:15:31,258 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:15:31,259 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:15:31,260 - sqlalchemy.engine.Engine - INFO - [cached since 389s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-02 22:15:31,290 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:15:31,291 - sqlalchemy.engine.Engine - INFO - [cached since 6663s ago] ('19AI411',)
2026-01-02 22:15:31,296 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:15:31,296 - sqlalchemy.engine.Engine - INFO - [cached since 389s ago] (4, '22008388', 6, 5)
2026-01-02 22:15:31,299 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:15:31,300 - sqlalchemy.engine.Engine - INFO - [cached since 388.9s ago] ('submission_started', 'submit', 'Starting submission for assignment 6', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', 'null', None, None)
2026-01-02 22:15:31,304 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 22:15:31,305 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:15:31,306 - sqlalchemy.engine.Engine - INFO - [cached since 388.9s ago] ('UPLOADING', 5)
2026-01-02 22:15:31,883 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI411.pdf (200331 bytes)
2026-01-02 22:15:31,886 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:15:31,890 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED954FC640>
2026-01-02 22:15:31,892 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:15:31,893 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:15:31,893 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:15:31,895 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:15:31,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:15:31,965 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:45:31 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:45:31 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 22:15:31,966 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:15:31,967 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:15:31,968 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:15:31,969 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:15:31,970 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'itemid': 474841929, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI411.pdf";}', 'filesize': 200331}]
2026-01-02 22:15:31,971 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 474841929
2026-01-02 22:15:31,972 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:15:31,973 - sqlalchemy.engine.Engine - INFO - [cached since 388.9s ago] (474841929, 5)
2026-01-02 22:15:31,976 - app.services.submission_service - INFO - Verifying assignment 6 exists and is accessible...
2026-01-02 22:15:31,980 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:15:31,980 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:15:31,981 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:15:31,982 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:15:31,982 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:15:32,015 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:45:31 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:15:32,016 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:15:32,016 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:15:32,018 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:15:32,018 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:15:32,020 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-02 22:15:32,021 - app.services.submission_service - ERROR - Assignment 6 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-02 22:15:32,023 - httpcore.connection - DEBUG - close.started
2026-01-02 22:15:32,024 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:15:32,025 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:15:32,026 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:15:32,027 - sqlalchemy.engine.Engine - INFO - [cached since 387.9s ago] (5,)
2026-01-02 22:15:32,030 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:15:32,031 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('FAILED', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 1, 5)
2026-01-02 22:15:32,034 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:15:32,035 - sqlalchemy.engine.Engine - INFO - [cached since 387.9s ago] (5,)
2026-01-02 22:15:32,037 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:15:32,038 - sqlalchemy.engine.Engine - INFO - [cached since 389.7s ago] ('submission_failed', 'error', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', '{"error": "Assignment 6 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-02 22:15:32,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:15:32,045 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:16:20,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:20,202 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:16:20,203 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:16:20,216 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:16:20,218 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] (datetime.datetime(2026, 1, 2, 16, 46, 20, 216222, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:16:20,223 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:20,235 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:16:20,408 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:20,410 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:16:20,411 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:16:20,465 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:16:20,466 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:16:20,471 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:20,473 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] ('19AI405',)
2026-01-02 22:16:20,480 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:20,482 - sqlalchemy.engine.Engine - INFO - [cached since 6712s ago] ('19AI405',)
2026-01-02 22:16:20,486 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:23,730 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:23,731 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:16:23,732 - sqlalchemy.engine.Engine - INFO - [cached since 6715s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:16:23,745 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:16:23,746 - sqlalchemy.engine.Engine - INFO - [cached since 6715s ago] (datetime.datetime(2026, 1, 2, 16, 46, 23, 744387, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:16:23,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:23,760 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:16:23,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:23,923 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:16:23,924 - sqlalchemy.engine.Engine - INFO - [cached since 6716s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:16:23,975 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:16:23,976 - sqlalchemy.engine.Engine - INFO - [cached since 6715s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:16:23,981 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:23,983 - sqlalchemy.engine.Engine - INFO - [cached since 6715s ago] ('19AI405',)
2026-01-02 22:16:23,991 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:23,992 - sqlalchemy.engine.Engine - INFO - [cached since 6715s ago] ('19AI405',)
2026-01-02 22:16:23,998 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:27,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:27,152 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:16:27,153 - sqlalchemy.engine.Engine - INFO - [cached since 6939s ago] (1,)
2026-01-02 22:16:27,163 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:16:27,164 - sqlalchemy.engine.Engine - INFO - [cached since 6939s ago] ()
2026-01-02 22:16:27,219 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:16:27,221 - sqlalchemy.engine.Engine - INFO - [cached since 6939s ago] (50, 0)
2026-01-02 22:16:27,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:28,243 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:28,245 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:16:28,246 - sqlalchemy.engine.Engine - INFO - [cached since 6940s ago] (1,)
2026-01-02 22:16:28,255 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:16:28,256 - sqlalchemy.engine.Engine - INFO - [cached since 6940s ago] ()
2026-01-02 22:16:28,317 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:16:28,319 - sqlalchemy.engine.Engine - INFO - [cached since 6940s ago] (50, 0)
2026-01-02 22:16:28,326 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:34,901 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:16:34,902 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 22:16:34,903 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 22:16:34,904 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:16:34,906 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 22:16:34,907 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 22:16:34,909 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:16:34,910 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:16:34,911 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:16384]
2026-01-02 22:16:34,913 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:184105]
2026-01-02 22:16:34,914 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:16:34,915 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:16:34,916 - python_multipart.multipart - DEBUG - Calling on_header_field with data[184149:184168]
2026-01-02 22:16:34,918 - python_multipart.multipart - DEBUG - Calling on_header_value with data[184170:184200]
2026-01-02 22:16:34,919 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:16:34,920 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:16:34,923 - python_multipart.multipart - DEBUG - Calling on_part_data with data[184204:184212]
2026-01-02 22:16:34,924 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:16:34,925 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 22:16:35,097 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:35,099 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:16:35,100 - sqlalchemy.engine.Engine - INFO - [cached since 6947s ago] (1,)
2026-01-02 22:16:35,110 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-02 22:16:35,117 - app.services.file_processor - INFO - Saved file: ./uploads/pending/49b54850b9a24abd949e62fbde76ecf1.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 22:16:35,118 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 22:16:35,119 - sqlalchemy.engine.Engine - INFO - [cached since 338.9s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-02 22:16:35,176 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-02 22:16:35,178 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:16:35,179 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('./uploads/pending/49b54850b9a24abd949e62fbde76ecf1.pdf', 'PENDING', None, 5)
2026-01-02 22:16:35,184 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:16:35,185 - sqlalchemy.engine.Engine - INFO - [cached since 451.1s ago] (5,)
2026-01-02 22:16:35,190 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:16:35,192 - sqlalchemy.engine.Engine - INFO - [cached since 452.8s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 22:16:35,200 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:35,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:35,383 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:16:35,383 - sqlalchemy.engine.Engine - INFO - [cached since 6947s ago] (1,)
2026-01-02 22:16:35,391 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:16:35,392 - sqlalchemy.engine.Engine - INFO - [cached since 6947s ago] ()
2026-01-02 22:16:35,440 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:16:35,441 - sqlalchemy.engine.Engine - INFO - [cached since 6947s ago] (50, 0)
2026-01-02 22:16:35,447 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:37,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:37,984 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:16:37,985 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:16:37,997 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:16:37,998 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] (datetime.datetime(2026, 1, 2, 16, 46, 37, 996907, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:16:38,003 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:38,014 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:16:38,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:38,177 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:16:38,179 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:16:38,240 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:16:38,241 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:16:38,245 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:38,246 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('19AI411',)
2026-01-02 22:16:38,252 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:38,255 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('19AI411',)
2026-01-02 22:16:38,260 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:38,262 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('19AI405',)
2026-01-02 22:16:38,266 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:38,268 - sqlalchemy.engine.Engine - INFO - [cached since 6730s ago] ('19AI405',)
2026-01-02 22:16:38,274 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:45,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:45,875 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:16:45,876 - sqlalchemy.engine.Engine - INFO - [cached since 6738s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:16:45,886 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:16:45,888 - sqlalchemy.engine.Engine - INFO - [cached since 6738s ago] (datetime.datetime(2026, 1, 2, 16, 46, 45, 886292, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:16:45,892 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:45,912 - app.api.routes.student - INFO - Submit attempt for ffe8b273-da46-401a-afbb-c7fce6e26996 by register_number: 212221230038
2026-01-02 22:16:46,044 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:46,045 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:16:46,046 - sqlalchemy.engine.Engine - INFO - [cached since 463.8s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-02 22:16:46,097 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:16:46,098 - sqlalchemy.engine.Engine - INFO - [cached since 463.7s ago] ('submission_started', 'submit', 'Starting submission for assignment 6', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', 'null', None, None)
2026-01-02 22:16:46,106 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 22:16:46,107 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:16:46,108 - sqlalchemy.engine.Engine - INFO - [cached since 463.7s ago] ('UPLOADING', 5)
2026-01-02 22:16:46,781 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI411.pdf (200331 bytes)
2026-01-02 22:16:46,786 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:16:46,792 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED954CED50>
2026-01-02 22:16:46,794 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:16:46,795 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:16:46,796 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:16:46,798 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:16:46,799 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:16:46,969 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:46:46 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:46:46 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 22:16:46,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:16:46,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:16:46,973 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:16:46,974 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:16:46,976 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'itemid': 244203736, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI411.pdf";}', 'filesize': 200331}]
2026-01-02 22:16:46,977 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 244203736
2026-01-02 22:16:46,979 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:16:46,980 - sqlalchemy.engine.Engine - INFO - [cached since 463.9s ago] (244203736, 5)
2026-01-02 22:16:46,991 - app.services.submission_service - INFO - Verifying assignment 6 exists and is accessible...
2026-01-02 22:16:46,996 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:16:46,998 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:16:46,998 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:16:47,000 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:16:47,000 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:16:47,046 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:46:46 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:16:47,048 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:16:47,048 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:16:47,051 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:16:47,051 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:16:47,055 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-02 22:16:47,056 - app.services.submission_service - ERROR - Assignment 6 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-02 22:16:47,058 - httpcore.connection - DEBUG - close.started
2026-01-02 22:16:47,059 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:16:47,060 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:16:47,062 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:16:47,063 - sqlalchemy.engine.Engine - INFO - [cached since 463s ago] (5,)
2026-01-02 22:16:47,069 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:16:47,070 - sqlalchemy.engine.Engine - INFO - [cached since 75.04s ago] ('FAILED', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 2, 5)
2026-01-02 22:16:47,076 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:16:47,078 - sqlalchemy.engine.Engine - INFO - [cached since 463s ago] (5,)
2026-01-02 22:16:47,082 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:16:47,084 - sqlalchemy.engine.Engine - INFO - [cached since 464.7s ago] ('submission_failed', 'error', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', '{"error": "Assignment 6 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-02 22:16:47,088 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:47,098 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:16:57,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:57,917 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:16:57,919 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:16:57,932 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:16:57,934 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] (datetime.datetime(2026, 1, 2, 16, 46, 57, 931976, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:16:57,939 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:16:57,950 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:16:58,126 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:16:58,127 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:16:58,129 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:16:58,186 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:16:58,189 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:16:58,193 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:58,194 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] ('19AI405',)
2026-01-02 22:16:58,200 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:16:58,201 - sqlalchemy.engine.Engine - INFO - [cached since 6750s ago] ('19AI405',)
2026-01-02 22:16:58,206 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:11,575 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:19:11,576 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-02 22:19:11,576 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-02 22:19:11,577 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:19:11,578 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-02 22:19:11,578 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-02 22:19:11,579 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:19:11,579 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:19:11,580 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:32768]
2026-01-02 22:19:11,581 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:167721]
2026-01-02 22:19:11,582 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:19:11,583 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-02 22:19:11,584 - python_multipart.multipart - DEBUG - Calling on_header_field with data[167765:167784]
2026-01-02 22:19:11,585 - python_multipart.multipart - DEBUG - Calling on_header_value with data[167786:167816]
2026-01-02 22:19:11,586 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-02 22:19:11,587 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-02 22:19:11,588 - python_multipart.multipart - DEBUG - Calling on_part_data with data[167820:167828]
2026-01-02 22:19:11,590 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-02 22:19:11,591 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-02 22:19:11,748 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:11,748 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:19:11,749 - sqlalchemy.engine.Engine - INFO - [cached since 7104s ago] (1,)
2026-01-02 22:19:11,757 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-02 22:19:11,762 - app.services.file_processor - INFO - Saved file: ./uploads/pending/51196b67da6f4d19a669dbff3890f2da.pdf (hash: 33d8582fd3cd2474...)
2026-01-02 22:19:11,763 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-02 22:19:11,764 - sqlalchemy.engine.Engine - INFO - [cached since 495.6s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-02 22:19:11,796 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-02 22:19:11,797 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:19:11,798 - sqlalchemy.engine.Engine - INFO - [cached since 156.6s ago] ('./uploads/pending/51196b67da6f4d19a669dbff3890f2da.pdf', 'PENDING', None, 5)
2026-01-02 22:19:11,804 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:19:11,806 - sqlalchemy.engine.Engine - INFO - [cached since 607.7s ago] (5,)
2026-01-02 22:19:11,813 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:19:11,815 - sqlalchemy.engine.Engine - INFO - [cached since 609.5s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-02 22:19:11,825 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:12,029 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:12,030 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-02 22:19:12,031 - sqlalchemy.engine.Engine - INFO - [cached since 7104s ago] (1,)
2026-01-02 22:19:12,041 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-02 22:19:12,043 - sqlalchemy.engine.Engine - INFO - [cached since 7104s ago] ()
2026-01-02 22:19:12,108 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-02 22:19:12,110 - sqlalchemy.engine.Engine - INFO - [cached since 7104s ago] (50, 0)
2026-01-02 22:19:12,116 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:17,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:17,647 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:19:17,648 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:19:17,662 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:19:17,663 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] (datetime.datetime(2026, 1, 2, 16, 49, 17, 661488, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:19:17,666 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:17,676 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:19:17,840 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:17,841 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:19:17,843 - sqlalchemy.engine.Engine - INFO - [cached since 6890s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:19:17,899 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:19:17,901 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:19:17,907 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:19:17,917 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('19AI411',)
2026-01-02 22:19:17,929 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:19:17,930 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('19AI411',)
2026-01-02 22:19:17,935 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:19:17,937 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('19AI405',)
2026-01-02 22:19:17,942 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:19:17,944 - sqlalchemy.engine.Engine - INFO - [cached since 6889s ago] ('19AI405',)
2026-01-02 22:19:17,950 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:21,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:21,434 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:19:21,436 - sqlalchemy.engine.Engine - INFO - [cached since 6893s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:19:21,444 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:19:21,445 - sqlalchemy.engine.Engine - INFO - [cached since 6893s ago] (datetime.datetime(2026, 1, 2, 16, 49, 21, 443795, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:19:21,449 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:21,458 - app.api.routes.student - INFO - Submit attempt for ffe8b273-da46-401a-afbb-c7fce6e26996 by register_number: 212221230038
2026-01-02 22:19:21,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:19:21,628 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-02 22:19:21,629 - sqlalchemy.engine.Engine - INFO - [cached since 619.3s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-02 22:19:21,684 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:19:21,686 - sqlalchemy.engine.Engine - INFO - [cached since 619.3s ago] ('submission_started', 'submit', 'Starting submission for assignment 6', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', 'null', None, None)
2026-01-02 22:19:21,694 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-02 22:19:21,696 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:19:21,697 - sqlalchemy.engine.Engine - INFO - [cached since 619.3s ago] ('UPLOADING', 5)
2026-01-02 22:19:22,369 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI411.pdf (200331 bytes)
2026-01-02 22:19:22,373 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:19:22,377 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001ED954B9590>
2026-01-02 22:19:22,379 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:19:22,380 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:19:22,380 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:19:22,383 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:19:22,383 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:19:22,496 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:49:22 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 16:49:22 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-02 22:19:22,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:19:22,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:19:22,500 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:19:22,502 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:19:22,505 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'itemid': 155363088, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI411.pdf";}', 'filesize': 200331}]
2026-01-02 22:19:22,506 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 155363088
2026-01-02 22:19:22,507 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-02 22:19:22,508 - sqlalchemy.engine.Engine - INFO - [cached since 619.4s ago] (155363088, 5)
2026-01-02 22:19:22,516 - app.services.submission_service - INFO - Verifying assignment 6 exists and is accessible...
2026-01-02 22:19:22,521 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:19:22,523 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:19:22,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:19:22,525 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:19:22,525 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:19:22,576 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 16:49:22 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:19:22,577 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:19:22,578 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:19:22,580 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:19:22,581 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:19:22,583 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-02 22:19:22,584 - app.services.submission_service - ERROR - Assignment 6 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-02 22:19:22,587 - httpcore.connection - DEBUG - close.started
2026-01-02 22:19:22,588 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:19:22,589 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:19:22,591 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:19:22,593 - sqlalchemy.engine.Engine - INFO - [cached since 618.5s ago] (5,)
2026-01-02 22:19:22,599 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-02 22:19:22,600 - sqlalchemy.engine.Engine - INFO - [cached since 230.6s ago] ('FAILED', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 3, 5)
2026-01-02 22:19:22,606 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-02 22:19:22,608 - sqlalchemy.engine.Engine - INFO - [cached since 618.5s ago] (5,)
2026-01-02 22:19:22,613 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-02 22:19:22,615 - sqlalchemy.engine.Engine - INFO - [cached since 620.3s ago] ('submission_failed', 'error', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', '{"error": "Assignment 6 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-02 22:19:22,620 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:19:22,645 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-02 22:21:48,979 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:21:48,983 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-02 22:21:48,987 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-02 22:21:48,998 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-02 22:21:48,999 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] (datetime.datetime(2026, 1, 2, 16, 51, 48, 997681, tzinfo=datetime.timezone.utc), 16)
2026-01-02 22:21:49,002 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:21:49,022 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-02 22:21:49,142 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:21:49,144 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-02 22:21:49,144 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-02 22:21:49,193 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-02 22:21:49,195 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-02 22:21:49,200 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:21:49,201 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] ('19AI405',)
2026-01-02 22:21:49,217 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-02 22:21:49,218 - sqlalchemy.engine.Engine - INFO - [cached since 7041s ago] ('19AI405',)
2026-01-02 22:21:49,224 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:27:19,500 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 22:27:19,501 - app.main - INFO - Database connections closed
2026-01-02 22:27:21,736 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:27:21,859 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:27:21,859 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:21,864 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:27:21,864 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:21,867 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:27:21,867 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:21,869 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:27:21,872 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,873 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,885 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.01416s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.01608s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.01784s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.01937s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,893 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,895 - sqlalchemy.engine.Engine - INFO - [cached since 0.02235s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:21,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.02554s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:21,904 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:27:21,908 - sqlalchemy.engine.Engine - INFO - [generated in 0.00442s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:27:21,916 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:27:21,923 - app.main - INFO - Database tables created/verified
2026-01-02 22:27:21,924 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:27:21,924 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:27:21,925 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:27:23,648 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:27:23,738 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:27:23,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:23,740 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:27:23,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:23,743 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:27:23,744 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:27:23,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:27:23,749 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,750 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,755 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,755 - sqlalchemy.engine.Engine - INFO - [cached since 0.006551s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,757 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,758 - sqlalchemy.engine.Engine - INFO - [cached since 0.009203s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,759 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,760 - sqlalchemy.engine.Engine - INFO - [cached since 0.01175s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,763 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,763 - sqlalchemy.engine.Engine - INFO - [cached since 0.01464s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,765 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,766 - sqlalchemy.engine.Engine - INFO - [cached since 0.01725s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,767 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:27:23,768 - sqlalchemy.engine.Engine - INFO - [cached since 0.01941s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:27:23,771 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:27:23,771 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:27:23,774 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:27:23,779 - app.main - INFO - Database tables created/verified
2026-01-02 22:27:23,780 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:27:23,780 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:27:23,781 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:28:53,538 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-02 22:29:21,476 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-02 22:29:22,271 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 22:29:22,271 - app.main - INFO - Database connections closed
2026-01-02 22:29:24,238 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:29:24,320 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:29:24,321 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:24,323 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:29:24,323 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:24,325 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:29:24,326 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:24,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:29:24,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,336 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,337 - sqlalchemy.engine.Engine - INFO - [cached since 0.006336s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,338 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,339 - sqlalchemy.engine.Engine - INFO - [cached since 0.008047s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,340 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,340 - sqlalchemy.engine.Engine - INFO - [cached since 0.009409s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,342 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,342 - sqlalchemy.engine.Engine - INFO - [cached since 0.01121s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,343 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,344 - sqlalchemy.engine.Engine - INFO - [cached since 0.01278s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,345 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:24,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.01435s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:24,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:29:24,347 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:29:24,350 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:29:24,353 - app.main - INFO - Database tables created/verified
2026-01-02 22:29:24,354 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:29:24,354 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:29:24,355 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:29:25,682 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:29:25,756 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:29:25,757 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:25,760 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:29:25,760 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:25,761 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:29:25,762 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:25,763 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:29:25,767 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,767 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,773 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,774 - sqlalchemy.engine.Engine - INFO - [cached since 0.006786s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,776 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,776 - sqlalchemy.engine.Engine - INFO - [cached since 0.00961s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,777 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,778 - sqlalchemy.engine.Engine - INFO - [cached since 0.01096s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,779 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,779 - sqlalchemy.engine.Engine - INFO - [cached since 0.01229s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,780 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,781 - sqlalchemy.engine.Engine - INFO - [cached since 0.01413s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,782 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:25,782 - sqlalchemy.engine.Engine - INFO - [cached since 0.0156s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:25,784 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:29:25,785 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:29:25,787 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:29:25,791 - app.main - INFO - Database tables created/verified
2026-01-02 22:29:25,792 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:29:25,793 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:29:25,794 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:29:27,209 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:29:27,285 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:29:27,286 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:27,288 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:29:27,289 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:27,291 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:29:27,291 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:29:27,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:29:27,296 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,297 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,304 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,305 - sqlalchemy.engine.Engine - INFO - [cached since 0.00891s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,307 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,308 - sqlalchemy.engine.Engine - INFO - [cached since 0.01128s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,309 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,310 - sqlalchemy.engine.Engine - INFO - [cached since 0.01356s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,311 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,312 - sqlalchemy.engine.Engine - INFO - [cached since 0.0153s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,313 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,313 - sqlalchemy.engine.Engine - INFO - [cached since 0.0169s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,314 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:29:27,315 - sqlalchemy.engine.Engine - INFO - [cached since 0.01847s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:29:27,317 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:29:27,318 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:29:27,321 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:29:27,325 - app.main - INFO - Database tables created/verified
2026-01-02 22:29:27,325 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:29:27,326 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:29:27,327 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:33:02,679 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 22:33:02,679 - app.main - INFO - Database connections closed
2026-01-02 22:33:04,205 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:33:04,276 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:33:04,277 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:33:04,279 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:33:04,279 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:33:04,281 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:33:04,281 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:33:04,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:33:04,286 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,294 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,294 - sqlalchemy.engine.Engine - INFO - [cached since 0.00813s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,296 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,296 - sqlalchemy.engine.Engine - INFO - [cached since 0.01013s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,297 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,298 - sqlalchemy.engine.Engine - INFO - [cached since 0.01156s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,298 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,299 - sqlalchemy.engine.Engine - INFO - [cached since 0.01287s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,300 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,301 - sqlalchemy.engine.Engine - INFO - [cached since 0.01478s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,302 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:33:04,302 - sqlalchemy.engine.Engine - INFO - [cached since 0.01625s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:33:04,305 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:33:04,305 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:33:04,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:33:04,312 - app.main - INFO - Database tables created/verified
2026-01-02 22:33:04,313 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:33:04,313 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:33:04,314 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:34:27,861 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 22:34:27,861 - app.main - INFO - Database connections closed
2026-01-02 22:34:29,365 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:34:29,443 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:34:29,443 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:34:29,445 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:34:29,446 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:34:29,447 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:34:29,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:34:29,450 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:34:29,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,454 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,460 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,461 - sqlalchemy.engine.Engine - INFO - [cached since 0.007292s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,462 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,463 - sqlalchemy.engine.Engine - INFO - [cached since 0.009416s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,464 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,464 - sqlalchemy.engine.Engine - INFO - [cached since 0.01082s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,465 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,465 - sqlalchemy.engine.Engine - INFO - [cached since 0.01207s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,466 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,467 - sqlalchemy.engine.Engine - INFO - [cached since 0.01344s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,468 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:34:29,468 - sqlalchemy.engine.Engine - INFO - [cached since 0.01483s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:34:29,471 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:34:29,472 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:34:29,476 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:34:29,479 - app.main - INFO - Database tables created/verified
2026-01-02 22:34:29,480 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:34:29,480 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:34:29,481 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:35:04,420 - app.main - INFO - Shutting down Examination Middleware...
2026-01-02 22:35:04,421 - app.main - INFO - Database connections closed
2026-01-02 22:35:06,016 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:35:06,207 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:35:06,208 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:06,211 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:35:06,211 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:06,213 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:35:06,214 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:06,215 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:35:06,220 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,220 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.01047s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,231 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,232 - sqlalchemy.engine.Engine - INFO - [cached since 0.01251s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,233 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,234 - sqlalchemy.engine.Engine - INFO - [cached since 0.01435s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,236 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,236 - sqlalchemy.engine.Engine - INFO - [cached since 0.01687s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,238 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,238 - sqlalchemy.engine.Engine - INFO - [cached since 0.01888s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,240 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:06,240 - sqlalchemy.engine.Engine - INFO - [cached since 0.02091s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:06,243 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:35:06,243 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:35:06,247 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:35:06,251 - app.main - INFO - Database tables created/verified
2026-01-02 22:35:06,251 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:35:06,252 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:35:06,254 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:35:07,961 - app.main - INFO - Starting Examination Middleware...
2026-01-02 22:35:08,060 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-02 22:35:08,061 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:08,063 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-02 22:35:08,064 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:08,066 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-02 22:35:08,066 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-02 22:35:08,068 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-02 22:35:08,072 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,073 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,079 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,080 - sqlalchemy.engine.Engine - INFO - [cached since 0.008171s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,081 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,082 - sqlalchemy.engine.Engine - INFO - [cached since 0.01007s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,083 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,083 - sqlalchemy.engine.Engine - INFO - [cached since 0.01166s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,085 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,086 - sqlalchemy.engine.Engine - INFO - [cached since 0.01385s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,087 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,088 - sqlalchemy.engine.Engine - INFO - [cached since 0.01622s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,089 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-02 22:35:08,090 - sqlalchemy.engine.Engine - INFO - [cached since 0.01818s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-02 22:35:08,092 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-02 22:35:08,092 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('workflowstatus', 'pg_catalog')
2026-01-02 22:35:08,095 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-02 22:35:08,099 - app.main - INFO - Database tables created/verified
2026-01-02 22:35:08,100 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-02 22:35:08,100 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-02 22:35:08,101 - app.main - INFO - Examination Middleware started successfully
2026-01-02 22:35:21,127 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-02 22:35:38,093 - app.services.moodle_client - INFO - Authenticating user: 22007928
2026-01-02 22:35:38,101 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:35:38,108 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001F445C10590>
2026-01-02 22:35:38,109 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:35:38,109 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:35:38,109 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:35:38,110 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:35:38,110 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:35:38,292 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 17:05:38 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 17:05:38 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 22:35:38,293 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:35:38,293 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:35:38,294 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:35:38,294 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:35:38,295 - app.services.moodle_client - INFO - Successfully authenticated user: 22007928
2026-01-02 22:35:38,297 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:35:38,297 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:35:38,297 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:35:38,298 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:35:38,298 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:35:38,416 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 17:05:38 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'200'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:35:38,416 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:35:38,417 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:35:38,417 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:35:38,418 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:35:38,419 - app.services.moodle_client - ERROR - Moodle API error in core_course_get_courses: nopermissions - Sorry, but you do not currently have permissions to do that (View courses without participation). (debug: None)
2026-01-02 22:35:38,422 - httpcore.connection - DEBUG - close.started
2026-01-02 22:35:38,422 - httpcore.connection - DEBUG - close.complete
2026-01-02 22:35:45,517 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-02 22:35:56,760 - app.services.moodle_client - INFO - Authenticating user: admin
2026-01-02 22:35:56,770 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-02 22:35:56,777 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000027D6A5DC590>
2026-01-02 22:35:56,778 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:35:56,779 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:35:56,779 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:35:56,780 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:35:56,780 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:35:56,873 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 17:05:56 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 17:05:56 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-02 22:35:56,874 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:35:56,875 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:35:56,875 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:35:56,876 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:35:56,876 - app.services.moodle_client - INFO - Successfully authenticated user: admin
2026-01-02 22:35:56,878 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:35:56,878 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:35:56,879 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:35:56,879 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:35:56,879 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:35:56,969 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 17:05:56 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'1948'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:35:56,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:35:56,971 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:35:56,972 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:35:56,972 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:35:56,975 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-02 22:35:56,975 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-02 22:35:56,976 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-02 22:35:56,977 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-02 22:35:56,977 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-02 22:35:57,135 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 17:05:56 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'3087'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-02 22:35:57,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-02 22:35:57,138 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-02 22:35:57,139 - httpcore.http11 - DEBUG - response_closed.started
2026-01-02 22:35:57,140 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-02 22:35:57,149 - httpcore.connection - DEBUG - close.started
2026-01-02 22:35:57,150 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:40:08,945 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-03 00:40:12,481 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:40:12,482 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-03 00:40:12,483 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-03 00:40:12,484 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:40:12,484 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:40:12,485 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-03 00:40:12,485 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:40:12,486 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:40:12,487 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-03 00:40:12,487 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-03 00:40:12,488 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:40:12,489 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:40:12,490 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-03 00:40:12,492 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:40:12,492 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-03 00:40:12,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:12,726 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-03 00:40:12,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00198s] ('admin',)
2026-01-03 00:40:13,381 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-03 00:40:13,382 - sqlalchemy.engine.Engine - INFO - [generated in 0.00155s] (datetime.datetime(2026, 1, 2, 19, 10, 13, 375384, tzinfo=datetime.timezone.utc), 1)
2026-01-03 00:40:13,388 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:13,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:13,635 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:40:13,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] (1,)
2026-01-03 00:40:13,652 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 00:40:13,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00133s] ()
2026-01-03 00:40:13,690 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 00:40:13,691 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] (50, 0)
2026-01-03 00:40:13,699 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:15,792 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:15,797 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:40:15,799 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] ('d49MbFKcNSl67xK3mLPWdLNQX0UCGzowO2N2m8ALRUw',)
2026-01-03 00:40:15,816 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_sessions WHERE student_sessions.id = $1::INTEGER
2026-01-03 00:40:15,818 - sqlalchemy.engine.Engine - INFO - [generated in 0.00225s] (16,)
2026-01-03 00:40:15,823 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:15,829 - app.db.database - ERROR - Database session error: 401: Session expired
2026-01-03 00:40:21,862 - app.api.routes.auth - INFO - Authenticating student: 22008388
2026-01-03 00:40:22,993 - app.services.moodle_client - INFO - Authenticating user: 22008388
2026-01-03 00:40:23,000 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 00:40:23,006 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001E0537A7E00>
2026-01-03 00:40:23,009 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:40:23,010 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:40:23,011 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:40:23,012 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:40:23,013 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:40:23,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:10:23 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:10:23 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-03 00:40:23,476 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:40:23,477 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:40:23,479 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:40:23,480 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:40:23,483 - app.services.moodle_client - INFO - Successfully authenticated user: 22008388
2026-01-03 00:40:23,489 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:40:23,490 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:40:23,491 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:40:23,492 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:40:23,493 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:40:23,691 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:10:23 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-03 00:40:23,693 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:40:23,697 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:40:23,700 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:40:23,702 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:40:23,705 - app.services.moodle_client - INFO - Got site info for user: 22008388
2026-01-03 00:40:23,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:23,897 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-03 00:40:23,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY', 4, '22008388', 'Kishore S', '212221230038', 'Z0FBQUFBQnBXQmdmVUlQdGx2dWN1NjR3dmJkckVVLUFrbjgtb05GdmxfOHZGVW5WMjNPd1AzYWxOM2JhQ1dxUElDWWlWWUhVNURlVE9Cdmk3NnBvLTJkWjlORnNKSmdCYXVqcDVGVU1BbTB4RU9rOUdBTkpHWGtqNjRqb1FGaTJ3bG9sU3NrVDl4TmY=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 2, 20, 10, 23, 706265, tzinfo=datetime.timezone.utc))
2026-01-03 00:40:23,908 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:24,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:24,087 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:40:24,089 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:40:24,143 - app.api.routes.auth - INFO - Student 22008388 (reg: 212221230038) logged in. Pending papers: 1
2026-01-03 00:40:24,146 - httpcore.connection - DEBUG - close.started
2026-01-03 00:40:24,147 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:40:24,149 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:24,320 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:24,322 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:40:24,323 - sqlalchemy.engine.Engine - INFO - [cached since 8.526s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:40:24,337 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:40:24,338 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] (datetime.datetime(2026, 1, 2, 19, 10, 24, 335754, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:40:24,342 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:40:24,362 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:40:24,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:40:24,522 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:40:24,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.4367s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:40:24,578 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:40:24,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00191s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:40:24,590 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:40:24,592 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] ('19AI405',)
2026-01-03 00:40:24,601 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:40:24,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.01224s ago] ('19AI405',)
2026-01-03 00:40:24,607 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:41:03,597 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:41:03,598 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-03 00:41:03,599 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-03 00:41:03,599 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:41:03,600 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-03 00:41:03,601 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-03 00:41:03,601 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:41:03,602 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:41:03,603 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:196608]
2026-01-03 00:41:03,606 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:3881]
2026-01-03 00:41:03,606 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:41:03,607 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:41:03,608 - python_multipart.multipart - DEBUG - Calling on_header_field with data[3925:3944]
2026-01-03 00:41:03,609 - python_multipart.multipart - DEBUG - Calling on_header_value with data[3946:3976]
2026-01-03 00:41:03,609 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:41:03,610 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:41:03,611 - python_multipart.multipart - DEBUG - Calling on_part_data with data[3980:3988]
2026-01-03 00:41:03,613 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:41:03,614 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-03 00:41:03,795 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:41:03,797 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:41:03,798 - sqlalchemy.engine.Engine - INFO - [cached since 50.16s ago] (1,)
2026-01-03 00:41:03,810 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-03 00:41:03,820 - app.services.file_processor - INFO - Saved file: ./uploads/pending/ae8d871c0bf749d9add3ad8cf592512b.pdf (hash: 33d8582fd3cd2474...)
2026-01-03 00:41:03,825 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-03 00:41:03,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00286s] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-03 00:41:03,890 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-03 00:41:03,893 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-03 00:41:03,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] ('./uploads/pending/ae8d871c0bf749d9add3ad8cf592512b.pdf', 'PENDING', None, 5)
2026-01-03 00:41:03,906 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:41:03,907 - sqlalchemy.engine.Engine - INFO - [generated in 0.00205s] (5,)
2026-01-03 00:41:03,918 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:41:03,920 - sqlalchemy.engine.Engine - INFO - [generated in 0.00196s] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-03 00:41:03,930 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:41:04,148 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:41:04,150 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:41:04,151 - sqlalchemy.engine.Engine - INFO - [cached since 50.52s ago] (1,)
2026-01-03 00:41:04,163 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 00:41:04,165 - sqlalchemy.engine.Engine - INFO - [cached since 50.51s ago] ()
2026-01-03 00:41:04,224 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 00:41:04,226 - sqlalchemy.engine.Engine - INFO - [cached since 50.54s ago] (50, 0)
2026-01-03 00:41:04,232 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:41:56,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:41:56,915 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:41:56,916 - sqlalchemy.engine.Engine - INFO - [cached since 101.1s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:41:56,929 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:41:56,931 - sqlalchemy.engine.Engine - INFO - [cached since 92.59s ago] (datetime.datetime(2026, 1, 2, 19, 11, 56, 928848, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:41:56,936 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:41:56,960 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:41:57,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:41:57,113 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:41:57,115 - sqlalchemy.engine.Engine - INFO - [cached since 93.03s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:41:57,163 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:41:57,165 - sqlalchemy.engine.Engine - INFO - [cached since 92.59s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:41:57,169 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:41:57,171 - sqlalchemy.engine.Engine - INFO - [cached since 92.58s ago] ('19AI411',)
2026-01-03 00:41:57,178 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:41:57,179 - sqlalchemy.engine.Engine - INFO - [cached since 92.59s ago] ('19AI411',)
2026-01-03 00:41:57,184 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:41:57,185 - sqlalchemy.engine.Engine - INFO - [cached since 92.6s ago] ('19AI405',)
2026-01-03 00:41:57,190 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:41:57,191 - sqlalchemy.engine.Engine - INFO - [cached since 92.6s ago] ('19AI405',)
2026-01-03 00:41:57,196 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:00,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:00,508 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:42:00,510 - sqlalchemy.engine.Engine - INFO - [cached since 104.7s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:42:00,523 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:42:00,526 - sqlalchemy.engine.Engine - INFO - [cached since 96.19s ago] (datetime.datetime(2026, 1, 2, 19, 12, 0, 523172, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:42:00,532 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:00,556 - app.api.routes.student - INFO - Submit attempt for ffe8b273-da46-401a-afbb-c7fce6e26996 by register_number: 212221230038
2026-01-03 00:42:00,706 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:00,710 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 00:42:00,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00744s] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-03 00:42:00,764 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:42:00,766 - sqlalchemy.engine.Engine - INFO - [cached since 56.85s ago] ('submission_started', 'submit', 'Starting submission for assignment 6', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', 'null', None, None)
2026-01-03 00:42:00,772 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-03 00:42:00,775 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:42:00,777 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ('UPLOADING', 5)
2026-01-03 00:42:01,637 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI411.pdf (200331 bytes)
2026-01-03 00:42:01,641 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 00:42:01,650 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001E0538B1D10>
2026-01-03 00:42:01,656 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:01,657 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:01,659 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:01,665 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:01,667 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:01,750 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:01 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:12:01 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-03 00:42:01,751 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:01,752 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:01,754 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:01,755 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:01,758 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'itemid': 27018578, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI411.pdf";}', 'filesize': 200331}]
2026-01-03 00:42:01,759 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 27018578
2026-01-03 00:42:01,762 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:42:01,763 - sqlalchemy.engine.Engine - INFO - [generated in 0.00215s] (27018578, 5)
2026-01-03 00:42:01,772 - app.services.submission_service - INFO - Verifying assignment 6 exists and is accessible...
2026-01-03 00:42:01,777 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:01,779 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:01,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:01,782 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:01,782 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:01,851 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:01 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'127'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:42:01,852 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:01,853 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:01,855 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:01,856 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:01,858 - app.services.moodle_client - ERROR - Moodle API error in mod_assign_get_submission_status: invalidrecordunknown - Can't find data record in database. (debug: None)
2026-01-03 00:42:01,859 - app.services.submission_service - ERROR - Assignment 6 verification failed: Moodle API error: Can't find data record in database.. This usually means the assignment ID is incorrect or the student doesn't have access.
2026-01-03 00:42:01,862 - httpcore.connection - DEBUG - close.started
2026-01-03 00:42:01,865 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:42:01,866 - app.services.submission_service - ERROR - Moodle API error during submission: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-03 00:42:01,870 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:42:01,872 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] (5,)
2026-01-03 00:42:01,878 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, error_message=$2::VARCHAR, retry_count=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-03 00:42:01,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00215s] ('FAILED', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 4, 5)
2026-01-03 00:42:01,886 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:42:01,888 - sqlalchemy.engine.Engine - INFO - [cached since 57.98s ago] (5,)
2026-01-03 00:42:01,891 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:42:01,893 - sqlalchemy.engine.Engine - INFO - [cached since 57.98s ago] ('submission_failed', 'error', "Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', '{"error": "Assignment 6 not found or not accessible: Moodle API error: Can\'t find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).", "queued_for_retry": false}', None, None)
2026-01-03 00:42:01,898 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:01,920 - app.db.database - ERROR - Database session error: 400: Submission failed: Assignment 6 not found or not accessible: Moodle API error: Can't find data record in database.. Please verify the assignment ID in your subject mapping matches the Moodle assignment instance ID (not the course module ID).
2026-01-03 00:42:25,765 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:42:25,766 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-03 00:42:25,767 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-03 00:42:25,768 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:42:25,769 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-03 00:42:25,770 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-03 00:42:25,771 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:42:25,772 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:42:25,775 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:32768]
2026-01-03 00:42:25,779 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:167721]
2026-01-03 00:42:25,781 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:42:25,782 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:42:25,783 - python_multipart.multipart - DEBUG - Calling on_header_field with data[167765:167784]
2026-01-03 00:42:25,784 - python_multipart.multipart - DEBUG - Calling on_header_value with data[167786:167816]
2026-01-03 00:42:25,785 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:42:25,786 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:42:25,788 - python_multipart.multipart - DEBUG - Calling on_part_data with data[167820:167828]
2026-01-03 00:42:25,789 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:42:25,789 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-03 00:42:25,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:25,940 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:42:25,942 - sqlalchemy.engine.Engine - INFO - [cached since 132.3s ago] (1,)
2026-01-03 00:42:25,952 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-03 00:42:25,959 - app.services.file_processor - INFO - Saved file: ./uploads/pending/f2d414cd2b6a4ecb8fa4cf9360802ca9.pdf (hash: 33d8582fd3cd2474...)
2026-01-03 00:42:25,965 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-03 00:42:25,967 - sqlalchemy.engine.Engine - INFO - [cached since 82.14s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-03 00:42:26,014 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-03 00:42:26,016 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus, error_message=$3::VARCHAR WHERE examination_artifacts.id = $4::INTEGER
2026-01-03 00:42:26,018 - sqlalchemy.engine.Engine - INFO - [cached since 82.13s ago] ('./uploads/pending/f2d414cd2b6a4ecb8fa4cf9360802ca9.pdf', 'PENDING', None, 5)
2026-01-03 00:42:26,023 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:42:26,024 - sqlalchemy.engine.Engine - INFO - [cached since 82.12s ago] (5,)
2026-01-03 00:42:26,029 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:42:26,033 - sqlalchemy.engine.Engine - INFO - [cached since 82.12s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-03 00:42:26,041 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:26,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:26,229 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:42:26,231 - sqlalchemy.engine.Engine - INFO - [cached since 132.6s ago] (1,)
2026-01-03 00:42:26,240 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 00:42:26,241 - sqlalchemy.engine.Engine - INFO - [cached since 132.6s ago] ()
2026-01-03 00:42:26,286 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 00:42:26,287 - sqlalchemy.engine.Engine - INFO - [cached since 132.6s ago] (50, 0)
2026-01-03 00:42:26,296 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:29,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:29,641 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:42:29,642 - sqlalchemy.engine.Engine - INFO - [cached since 133.8s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:42:29,655 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:42:29,656 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] (datetime.datetime(2026, 1, 2, 19, 12, 29, 654747, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:42:29,662 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:29,686 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:42:29,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:29,848 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:42:29,850 - sqlalchemy.engine.Engine - INFO - [cached since 125.8s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:42:29,904 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:42:29,907 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:42:29,914 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:29,916 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] ('19AI411',)
2026-01-03 00:42:29,923 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:29,929 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] ('19AI411',)
2026-01-03 00:42:29,933 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:29,934 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] ('19AI405',)
2026-01-03 00:42:29,939 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:29,940 - sqlalchemy.engine.Engine - INFO - [cached since 125.3s ago] ('19AI405',)
2026-01-03 00:42:29,948 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:31,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:31,531 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:42:31,534 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:42:31,546 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:42:31,548 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] (datetime.datetime(2026, 1, 2, 19, 12, 31, 545902, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:42:31,553 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:31,562 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:42:31,713 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:31,715 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:42:31,717 - sqlalchemy.engine.Engine - INFO - [cached since 127.6s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:42:31,765 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:42:31,767 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:42:31,771 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:31,773 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] ('19AI411',)
2026-01-03 00:42:31,781 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:31,783 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] ('19AI411',)
2026-01-03 00:42:31,788 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:31,791 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] ('19AI405',)
2026-01-03 00:42:31,796 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:31,798 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] ('19AI405',)
2026-01-03 00:42:31,803 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:35,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:35,749 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:42:35,750 - sqlalchemy.engine.Engine - INFO - [cached since 140s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:42:35,763 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:42:35,765 - sqlalchemy.engine.Engine - INFO - [cached since 131.4s ago] (datetime.datetime(2026, 1, 2, 19, 12, 35, 763130, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:42:35,771 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:35,796 - app.api.routes.student - INFO - Submit attempt for 875568b4-9178-4f37-b8bf-42678001475f by register_number: 212221230038
2026-01-03 00:42:35,966 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:35,967 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 00:42:35,969 - sqlalchemy.engine.Engine - INFO - [cached since 35.26s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-03 00:42:36,022 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:42:36,023 - sqlalchemy.engine.Engine - INFO - [cached since 92.11s ago] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', 'null', None, None)
2026-01-03 00:42:36,030 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-03 00:42:36,031 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:42:36,034 - sqlalchemy.engine.Engine - INFO - [cached since 35.26s ago] ('UPLOADING', 4)
2026-01-03 00:42:36,869 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI405.pdf (200331 bytes)
2026-01-03 00:42:36,875 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 00:42:36,883 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001E0538B3C50>
2026-01-03 00:42:36,887 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:36,888 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:36,889 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:36,892 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:36,892 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,003 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:36 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:12:36 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-03 00:42:37,005 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,005 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:37,007 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:37,008 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:37,013 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'itemid': 978928840, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI405.pdf";}', 'filesize': 200331}]
2026-01-03 00:42:37,014 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 978928840
2026-01-03 00:42:37,015 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:42:37,016 - sqlalchemy.engine.Engine - INFO - [cached since 35.25s ago] (978928840, 4)
2026-01-03 00:42:37,024 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-03 00:42:37,030 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,032 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:37,033 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,034 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:37,035 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,158 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:37 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:42:37,159 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,159 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:37,162 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:37,163 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:37,167 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-03 00:42:37,168 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-03 00:42:37,169 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:42:37,171 - sqlalchemy.engine.Engine - INFO - [cached since 36.4s ago] ('SUBMITTING', 4)
2026-01-03 00:42:37,174 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 978928840
2026-01-03 00:42:37,181 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,183 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:37,183 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,184 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:37,185 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:37 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:42:37,494 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,495 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:37,497 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:37,498 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:37,501 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-03 00:42:37,501 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-03 00:42:37,502 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-03 00:42:37,506 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,507 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:42:37,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,510 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:42:37,510 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:42:37,634 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:12:37 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:42:37,635 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:42:37,636 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:42:37,638 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:42:37,638 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:42:37,641 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 4, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767365566, 'timemodified': 1767381157, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/4/212221230038_19AI405.pdf', 'timemodified': 1767381157, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-03 00:42:37,641 - app.services.submission_service - INFO - Submission status: submitted
2026-01-03 00:42:37,642 - app.services.submission_service - INFO - Submission ID: 4
2026-01-03 00:42:37,643 - app.services.submission_service - INFO - Submission timecreated: 1767365566
2026-01-03 00:42:37,644 - app.services.submission_service - INFO - Submission timemodified: 1767381157
2026-01-03 00:42:37,645 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-03 00:42:37,646 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-03 00:42:37,648 - app.services.submission_service - INFO - Can edit: True
2026-01-03 00:42:37,650 - app.services.submission_service - INFO - Can submit: False
2026-01-03 00:42:37,651 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-03 00:42:37,652 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI405.pdf']
2026-01-03 00:42:37,652 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-03 00:42:37,654 - httpcore.connection - DEBUG - close.started
2026-01-03 00:42:37,655 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:42:37,656 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 978928840, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '4', 'verified_files': ['212221230038_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102191237'}
2026-01-03 00:42:37,657 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-03 00:42:37,659 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:42:37,661 - sqlalchemy.engine.Engine - INFO - [cached since 35.79s ago] (4,)
2026-01-03 00:42:37,668 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-03 00:42:37,669 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('COMPLETED', 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102191237', datetime.datetime(2026, 1, 2, 19, 12, 37, 666339), datetime.datetime(2026, 1, 2, 19, 12, 37, 666367), 4)
2026-01-03 00:42:37,674 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:42:37,676 - sqlalchemy.engine.Engine - INFO - [cached since 93.77s ago] (4,)
2026-01-03 00:42:37,680 - app.services.artifact_service - INFO - Artifact 4 marked as submitted
2026-01-03 00:42:37,681 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:42:37,683 - sqlalchemy.engine.Engine - INFO - [cached since 93.77s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 978928840, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212221230038_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_875568b4-9178-4f37-b8bf-42678001475f_20260102191237"}', None, None)
2026-01-03 00:42:37,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:37,831 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:37,833 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 00:42:37,834 - sqlalchemy.engine.Engine - INFO - [cached since 37.12s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-03 00:42:37,874 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:38,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:38,022 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:42:38,023 - sqlalchemy.engine.Engine - INFO - [cached since 142.2s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:42:38,034 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:42:38,036 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] (datetime.datetime(2026, 1, 2, 19, 12, 38, 34058, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:42:38,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:42:38,059 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:42:38,228 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:42:38,230 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:42:38,232 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:42:38,273 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:42:38,275 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:42:38,278 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:38,279 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] ('19AI411',)
2026-01-03 00:42:38,285 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:42:38,286 - sqlalchemy.engine.Engine - INFO - [cached since 133.7s ago] ('19AI411',)
2026-01-03 00:42:38,291 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:45:47,305 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 00:45:47,306 - app.main - INFO - Database connections closed
2026-01-03 00:45:49,975 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:45:50,068 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:45:50,068 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:45:50,071 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:45:50,072 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:45:50,074 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:45:50,075 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:45:50,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:45:50,083 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,083 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,094 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,095 - sqlalchemy.engine.Engine - INFO - [cached since 0.01218s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,096 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.01464s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,099 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,100 - sqlalchemy.engine.Engine - INFO - [cached since 0.01709s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,101 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,102 - sqlalchemy.engine.Engine - INFO - [cached since 0.01944s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,104 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.02171s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,106 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:45:50,107 - sqlalchemy.engine.Engine - INFO - [cached since 0.0241s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:45:50,110 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:45:50,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:45:50,115 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:45:50,119 - app.main - INFO - Database tables created/verified
2026-01-03 00:45:50,120 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:45:50,121 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:45:50,122 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:46:55,210 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 00:46:55,210 - app.main - INFO - Database connections closed
2026-01-03 00:46:57,155 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:46:57,245 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:46:57,245 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:57,248 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:46:57,249 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:57,251 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:46:57,251 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:57,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:46:57,258 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.01126s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,270 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,271 - sqlalchemy.engine.Engine - INFO - [cached since 0.01354s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,272 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,273 - sqlalchemy.engine.Engine - INFO - [cached since 0.01542s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,275 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,275 - sqlalchemy.engine.Engine - INFO - [cached since 0.0178s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,277 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,278 - sqlalchemy.engine.Engine - INFO - [cached since 0.02013s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,279 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:57,280 - sqlalchemy.engine.Engine - INFO - [cached since 0.0221s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:57,283 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:46:57,283 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:46:57,288 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:46:57,293 - app.main - INFO - Database tables created/verified
2026-01-03 00:46:57,293 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:46:57,294 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:46:57,295 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:46:59,182 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:46:59,292 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:46:59,293 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:59,296 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:46:59,297 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:59,299 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:46:59,300 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:46:59,302 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:46:59,309 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,310 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,321 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,321 - sqlalchemy.engine.Engine - INFO - [cached since 0.01232s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,323 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,324 - sqlalchemy.engine.Engine - INFO - [cached since 0.01477s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,326 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,326 - sqlalchemy.engine.Engine - INFO - [cached since 0.01738s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,328 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,328 - sqlalchemy.engine.Engine - INFO - [cached since 0.0195s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.02133s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:46:59,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.02329s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:46:59,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:46:59,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:46:59,338 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:46:59,343 - app.main - INFO - Database tables created/verified
2026-01-03 00:46:59,344 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:46:59,345 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:46:59,346 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:47:12,681 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 00:47:12,683 - app.main - INFO - Database connections closed
2026-01-03 00:47:14,138 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:47:14,216 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:47:14,217 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:14,218 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:47:14,219 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:14,220 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:47:14,220 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:14,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:47:14,226 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,226 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,232 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,233 - sqlalchemy.engine.Engine - INFO - [cached since 0.007046s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,234 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,234 - sqlalchemy.engine.Engine - INFO - [cached since 0.008974s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,236 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,236 - sqlalchemy.engine.Engine - INFO - [cached since 0.01068s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,237 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,238 - sqlalchemy.engine.Engine - INFO - [cached since 0.01236s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,240 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,240 - sqlalchemy.engine.Engine - INFO - [cached since 0.01471s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,241 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:14,242 - sqlalchemy.engine.Engine - INFO - [cached since 0.01652s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:14,244 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:47:14,245 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:47:14,248 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:47:14,251 - app.main - INFO - Database tables created/verified
2026-01-03 00:47:14,252 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:47:14,252 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:47:14,253 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:47:18,369 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-03 00:47:18,452 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:47:18,452 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:18,455 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:47:18,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:18,459 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:47:18,459 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:18,461 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:47:18,473 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR ORDER BY examination_artifacts.id DESC
2026-01-03 00:47:18,474 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] ('212221230038',)
2026-01-03 00:47:18,526 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR
2026-01-03 00:47:18,527 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] ('19AI411',)
2026-01-03 00:47:18,536 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-03 00:47:41,757 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 00:47:41,757 - app.main - INFO - Database connections closed
2026-01-03 00:47:43,559 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:47:43,645 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:47:43,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:43,648 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:47:43,649 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:43,651 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:47:43,651 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:43,653 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:47:43,657 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,667 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,667 - sqlalchemy.engine.Engine - INFO - [cached since 0.01011s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,669 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,669 - sqlalchemy.engine.Engine - INFO - [cached since 0.01212s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,671 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,672 - sqlalchemy.engine.Engine - INFO - [cached since 0.01421s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,674 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,674 - sqlalchemy.engine.Engine - INFO - [cached since 0.01696s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,676 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,676 - sqlalchemy.engine.Engine - INFO - [cached since 0.01896s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,678 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:43,679 - sqlalchemy.engine.Engine - INFO - [cached since 0.02122s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:43,681 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:47:43,682 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:47:43,686 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:47:43,691 - app.main - INFO - Database tables created/verified
2026-01-03 00:47:43,691 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:47:43,692 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:47:43,693 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:47:45,420 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:47:45,502 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:47:45,503 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:45,506 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:47:45,506 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:45,509 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:47:45,510 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:45,511 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:47:45,515 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,516 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.01036s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,526 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,527 - sqlalchemy.engine.Engine - INFO - [cached since 0.01221s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,528 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,529 - sqlalchemy.engine.Engine - INFO - [cached since 0.0143s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,530 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,531 - sqlalchemy.engine.Engine - INFO - [cached since 0.01628s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.01839s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:47:45,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.02037s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:47:45,537 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:47:45,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:47:45,542 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:47:45,546 - app.main - INFO - Database tables created/verified
2026-01-03 00:47:45,547 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:47:45,547 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:47:45,548 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:47:48,658 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-03 00:47:48,754 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:47:48,755 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:48,759 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:47:48,760 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:48,762 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:47:48,763 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:47:48,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:47:48,767 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_course_id=$1::INTEGER, moodle_assignment_id=$2::INTEGER, workflow_status=$3::workflowstatus, error_message=$4::VARCHAR WHERE examination_artifacts.id = $5::INTEGER
2026-01-03 00:47:48,768 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] (2, 3, 'PENDING', None, 5)
2026-01-03 00:47:48,799 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:48:00,250 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-03 00:48:00,337 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:48:00,338 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:48:00,340 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:48:00,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:48:00,343 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:48:00,343 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:48:00,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:48:00,357 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR ORDER BY examination_artifacts.id DESC
2026-01-03 00:48:00,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ('212221230038',)
2026-01-03 00:48:00,394 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR
2026-01-03 00:48:00,395 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('19AI411',)
2026-01-03 00:48:00,402 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-03 00:50:40,149 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 00:50:40,149 - app.main - INFO - Database connections closed
2026-01-03 00:50:42,256 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:50:42,420 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:50:42,421 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:42,424 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:50:42,425 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:42,428 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:50:42,429 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:42,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:50:42,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,441 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.01511s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,457 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,458 - sqlalchemy.engine.Engine - INFO - [cached since 0.0181s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,460 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,461 - sqlalchemy.engine.Engine - INFO - [cached since 0.02104s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,463 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,464 - sqlalchemy.engine.Engine - INFO - [cached since 0.02404s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,466 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,467 - sqlalchemy.engine.Engine - INFO - [cached since 0.02703s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,469 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:42,470 - sqlalchemy.engine.Engine - INFO - [cached since 0.03034s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:42,473 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:50:42,474 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:50:42,479 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:50:42,485 - app.main - INFO - Database tables created/verified
2026-01-03 00:50:42,487 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:50:42,488 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:50:42,489 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:50:44,322 - app.main - INFO - Starting Examination Middleware...
2026-01-03 00:50:44,399 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:50:44,399 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:44,401 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:50:44,402 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:44,404 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:50:44,405 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:50:44,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:50:44,410 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.009574s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,421 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,421 - sqlalchemy.engine.Engine - INFO - [cached since 0.0116s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,423 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,423 - sqlalchemy.engine.Engine - INFO - [cached since 0.01347s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,424 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,425 - sqlalchemy.engine.Engine - INFO - [cached since 0.0151s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.01691s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 00:50:44,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.01869s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 00:50:44,431 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 00:50:44,431 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] ('workflowstatus', 'pg_catalog')
2026-01-03 00:50:44,434 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:50:44,438 - app.main - INFO - Database tables created/verified
2026-01-03 00:50:44,439 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 00:50:44,440 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 00:50:44,440 - app.main - INFO - Examination Middleware started successfully
2026-01-03 00:51:18,080 - asyncio - DEBUG - Using proactor: IocpProactor
2026-01-03 00:53:15,231 - app.services.moodle_client - INFO - Authenticating user: admin
2026-01-03 00:53:15,240 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 00:53:15,247 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002252C8AC590>
2026-01-03 00:53:15,248 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,249 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:15,249 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,250 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:15,250 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,364 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:23:15 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-03 00:53:15,365 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,366 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:15,367 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:15,368 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:15,369 - app.services.moodle_client - INFO - Successfully authenticated user: admin
2026-01-03 00:53:15,371 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,372 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:15,372 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,373 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:15,373 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,468 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'1948'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:53:15,469 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,469 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:15,470 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:15,470 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:15,473 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,474 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:15,474 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,474 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:15,475 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:15,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:15 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'4438'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:53:15,581 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:15,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:15,582 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:15,582 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:15,585 - httpcore.connection - DEBUG - close.started
2026-01-03 00:53:15,585 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:53:15,657 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 00:53:15,658 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:53:15,660 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 00:53:15,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:53:15,663 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 00:53:15,664 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 00:53:15,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:15,680 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR
2026-01-03 00:53:15,680 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] ('19AI406',)
2026-01-03 00:53:15,687 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR
2026-01-03 00:53:15,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.008173s ago] ('19AI406',)
2026-01-03 00:53:15,691 - sqlalchemy.engine.Engine - INFO - INSERT INTO subject_mappings (subject_code, subject_name, moodle_course_id, moodle_course_idnumber, moodle_assignment_id, moodle_assignment_name, exam_session, is_active, updated_at, last_verified_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::INTEGER, $6::VARCHAR, $7::VARCHAR, $8::BOOLEAN, $9::TIMESTAMP WITH TIME ZONE, $10::TIMESTAMP WITH TIME ZONE) RETURNING subject_mappings.id, subject_mappings.created_at
2026-01-03 00:53:15,692 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('19AI406', 'Digital image Processing', 2, None, 4, '19AI406', '2025-2026', True, None, None)
2026-01-03 00:53:15,695 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:15,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:15,773 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_subject_code = $1::VARCHAR AND examination_artifacts.moodle_assignment_id != $2::INTEGER
2026-01-03 00:53:15,774 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] ('19AI406', 4)
2026-01-03 00:53:15,800 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-03 00:53:39,728 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:53:39,729 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-03 00:53:39,730 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-03 00:53:39,731 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:53:39,731 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:53:39,733 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-03 00:53:39,734 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:53:39,735 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 00:53:39,736 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-03 00:53:39,737 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-03 00:53:39,738 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 00:53:39,739 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 00:53:39,740 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-03 00:53:39,741 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 00:53:39,743 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-03 00:53:39,902 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:39,935 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-03 00:53:39,937 - sqlalchemy.engine.Engine - INFO - [generated in 0.00228s] ('admin',)
2026-01-03 00:53:40,537 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-03 00:53:40,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00216s] (datetime.datetime(2026, 1, 2, 19, 23, 40, 534723, tzinfo=datetime.timezone.utc), 1)
2026-01-03 00:53:40,544 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:40,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:40,751 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:53:40,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00272s] (1,)
2026-01-03 00:53:40,774 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 00:53:40,777 - sqlalchemy.engine.Engine - INFO - [generated in 0.00250s] ()
2026-01-03 00:53:40,836 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 00:53:40,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00173s] (50, 0)
2026-01-03 00:53:40,844 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:48,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:48,243 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:53:48,244 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:53:48,258 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:53:48,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] (datetime.datetime(2026, 1, 2, 19, 23, 48, 257061, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:53:48,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:48,273 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:53:48,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:48,431 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:53:48,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:53:48,498 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:53:48,500 - sqlalchemy.engine.Engine - INFO - [generated in 0.00235s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:53:48,509 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:53:48,510 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] ('19AI411',)
2026-01-03 00:53:48,520 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 00:53:48,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.01331s ago] ('19AI411',)
2026-01-03 00:53:48,527 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:51,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:51,224 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:53:51,226 - sqlalchemy.engine.Engine - INFO - [cached since 2.983s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:53:51,236 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:53:51,238 - sqlalchemy.engine.Engine - INFO - [cached since 2.98s ago] (datetime.datetime(2026, 1, 2, 19, 23, 51, 236245, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:53:51,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:51,265 - app.api.routes.student - INFO - Submit attempt for ffe8b273-da46-401a-afbb-c7fce6e26996 by register_number: 212221230038
2026-01-03 00:53:51,403 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:51,408 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 00:53:51,414 - sqlalchemy.engine.Engine - INFO - [generated in 0.00654s] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-03 00:53:51,470 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:53:51,473 - sqlalchemy.engine.Engine - INFO - [generated in 0.00276s] ('submission_started', 'submit', 'Starting submission for assignment 3', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', 'null', None, None)
2026-01-03 00:53:51,480 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-03 00:53:51,486 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:53:51,488 - sqlalchemy.engine.Engine - INFO - [generated in 0.00194s] ('UPLOADING', 5)
2026-01-03 00:53:52,418 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI411.pdf (200331 bytes)
2026-01-03 00:53:52,424 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 00:53:52,431 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001BC06D881A0>
2026-01-03 00:53:52,436 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,437 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:52,438 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,441 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:52,442 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,540 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:23:52 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'282'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-03 00:53:52,543 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:52,546 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:52,548 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:52,552 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'itemid': 19957831, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI411.pdf";}', 'filesize': 200331}]
2026-01-03 00:53:52,553 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 19957831
2026-01-03 00:53:52,555 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:53:52,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] (19957831, 5)
2026-01-03 00:53:52,564 - app.services.submission_service - INFO - Verifying assignment 3 exists and is accessible...
2026-01-03 00:53:52,571 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:52,573 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,575 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:52,575 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,649 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:53:52,651 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,652 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:52,654 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:52,654 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:52,657 - app.services.submission_service - INFO - Assignment 3 verified and accessible
2026-01-03 00:53:52,657 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-03 00:53:52,658 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 00:53:52,660 - sqlalchemy.engine.Engine - INFO - [cached since 1.174s ago] ('SUBMITTING', 5)
2026-01-03 00:53:52,663 - app.services.moodle_client - INFO - Saving submission for assignment 3 with item 19957831
2026-01-03 00:53:52,670 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,671 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:52,672 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,673 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:52,674 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,916 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:53:52,918 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,918 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:52,920 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:52,921 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:52,924 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-03 00:53:52,924 - app.services.moodle_client - INFO - Submission saved successfully for assignment 3
2026-01-03 00:53:52,925 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-03 00:53:52,929 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 00:53:52,930 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 00:53:52,930 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 00:53:52,932 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 00:53:52,934 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 00:53:53,084 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:23:52 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 00:53:53,085 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 00:53:53,085 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 00:53:53,088 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 00:53:53,088 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 00:53:53,091 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 6, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767372367, 'timemodified': 1767381832, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 3, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI411.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/33/assignsubmission_file/submission_files/6/212221230038_19AI411.pdf', 'timemodified': 1767381832, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-03 00:53:53,091 - app.services.submission_service - INFO - Submission status: submitted
2026-01-03 00:53:53,092 - app.services.submission_service - INFO - Submission ID: 6
2026-01-03 00:53:53,093 - app.services.submission_service - INFO - Submission timecreated: 1767372367
2026-01-03 00:53:53,094 - app.services.submission_service - INFO - Submission timemodified: 1767381832
2026-01-03 00:53:53,094 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-03 00:53:53,095 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-03 00:53:53,095 - app.services.submission_service - INFO - Can edit: True
2026-01-03 00:53:53,096 - app.services.submission_service - INFO - Can submit: False
2026-01-03 00:53:53,097 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-03 00:53:53,097 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI411.pdf']
2026-01-03 00:53:53,098 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-03 00:53:53,102 - httpcore.connection - DEBUG - close.started
2026-01-03 00:53:53,104 - httpcore.connection - DEBUG - close.complete
2026-01-03 00:53:53,104 - app.services.submission_service - INFO - Submission result: {'assignment_id': 3, 'steps_completed': ['upload', 'save'], 'item_id': 19957831, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '6', 'verified_files': ['212221230038_19AI411.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_ffe8b273-da46-401a-afbb-c7fce6e26996_20260102192353'}
2026-01-03 00:53:53,105 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-03 00:53:53,108 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:53:53,110 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] (5,)
2026-01-03 00:53:53,117 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2026-01-03 00:53:53,118 - sqlalchemy.engine.Engine - INFO - [generated in 0.00185s] ('COMPLETED', '6', 'TXN_ffe8b273-da46-401a-afbb-c7fce6e26996_20260102192353', datetime.datetime(2026, 1, 2, 19, 23, 53, 114871), datetime.datetime(2026, 1, 2, 19, 23, 53, 114899), 5)
2026-01-03 00:53:53,127 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 00:53:53,128 - sqlalchemy.engine.Engine - INFO - [generated in 0.00140s] (5,)
2026-01-03 00:53:53,133 - app.services.artifact_service - INFO - Artifact 5 marked as submitted
2026-01-03 00:53:53,135 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 00:53:53,138 - sqlalchemy.engine.Engine - INFO - [cached since 1.668s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 5, None, None, 'null', '{"assignment_id": 3, "steps_completed": ["upload", "save"], "item_id": 19957831, "save_result": {"success": true, "warnings": []}, "submission_status ... (54 characters truncated) ... : ["212221230038_19AI411.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_ffe8b273-da46-401a-afbb-c7fce6e26996_20260102192353"}', None, None)
2026-01-03 00:53:53,143 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:53,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:53,309 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 00:53:53,311 - sqlalchemy.engine.Engine - INFO - [cached since 1.903s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-03 00:53:53,367 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:53,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:53,515 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 00:53:53,517 - sqlalchemy.engine.Engine - INFO - [cached since 5.274s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 00:53:53,528 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 00:53:53,529 - sqlalchemy.engine.Engine - INFO - [cached since 5.271s ago] (datetime.datetime(2026, 1, 2, 19, 23, 53, 528176, tzinfo=datetime.timezone.utc), 17)
2026-01-03 00:53:53,534 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:53:53,543 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 00:53:53,686 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:53:53,694 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 00:53:53,697 - sqlalchemy.engine.Engine - INFO - [cached since 5.266s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 00:53:53,750 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 00:53:53,752 - sqlalchemy.engine.Engine - INFO - [cached since 5.254s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 00:53:53,759 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 00:54:02,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 00:54:02,927 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 00:54:02,928 - sqlalchemy.engine.Engine - INFO - [cached since 22.18s ago] (1,)
2026-01-03 00:54:02,937 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 00:54:02,939 - sqlalchemy.engine.Engine - INFO - [cached since 22.16s ago] ()
2026-01-03 00:54:02,990 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 00:54:02,991 - sqlalchemy.engine.Engine - INFO - [cached since 22.16s ago] (50, 0)
2026-01-03 00:54:02,997 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:10,305 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:10,306 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 01:02:10,307 - sqlalchemy.engine.Engine - INFO - [cached since 509.6s ago] (1,)
2026-01-03 01:02:10,317 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 01:02:10,319 - sqlalchemy.engine.Engine - INFO - [cached since 509.5s ago] ()
2026-01-03 01:02:10,372 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 01:02:10,373 - sqlalchemy.engine.Engine - INFO - [cached since 509.5s ago] (50, 0)
2026-01-03 01:02:10,381 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:17,097 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 01:02:17,097 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-03 01:02:17,098 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-03 01:02:17,099 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 01:02:17,099 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-03 01:02:17,100 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-03 01:02:17,100 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 01:02:17,101 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 01:02:17,102 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:180224]
2026-01-03 01:02:17,103 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:20265]
2026-01-03 01:02:17,105 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 01:02:17,106 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-03 01:02:17,108 - python_multipart.multipart - DEBUG - Calling on_header_field with data[20309:20328]
2026-01-03 01:02:17,110 - python_multipart.multipart - DEBUG - Calling on_header_value with data[20330:20360]
2026-01-03 01:02:17,112 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-03 01:02:17,113 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-03 01:02:17,114 - python_multipart.multipart - DEBUG - Calling on_part_data with data[20364:20372]
2026-01-03 01:02:17,115 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-03 01:02:17,116 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-03 01:02:17,277 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:17,278 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 01:02:17,279 - sqlalchemy.engine.Engine - INFO - [cached since 516.5s ago] (1,)
2026-01-03 01:02:17,289 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI406
2026-01-03 01:02:17,297 - app.services.file_processor - INFO - Saved file: ./uploads/pending/97f9e5706f7e4a879f310e62d60882e1.pdf (hash: 33d8582fd3cd2474...)
2026-01-03 01:02:17,300 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-03 01:02:17,302 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] ('c2551e3b4672a21f1a0ab25b2196e4fb',)
2026-01-03 01:02:17,358 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-03 01:02:17,360 - sqlalchemy.engine.Engine - INFO - [generated in 0.00268s] (UUID('da821bc2-0a4f-4f70-8377-033ea15e6517'), '212221230038_19AI406.pdf', '212221230038_19AI406.pdf', '212221230038', '19AI406', './uploads/pending/97f9e5706f7e4a879f310e62d60882e1.pdf', '33d8582fd3cd24748c47705bac581cac9452738f1d9b409c437e67822359d9d7', 200331, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, 'c2551e3b4672a21f1a0ab25b2196e4fb', None, None, None, 1, None, '[{"timestamp": "2026-01-02T19:32:17.354905", "action": "created", "details": {"filename": "212221230038_19AI406.pdf", "parsed_reg_no": "212221230038", "parsed_subject_code": "19AI406"}}]', None, 0)
2026-01-03 01:02:17,367 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 01:02:17,368 - sqlalchemy.engine.Engine - INFO - [cached since 504.2s ago] (6,)
2026-01-03 01:02:17,372 - app.services.artifact_service - INFO - Created artifact: da821bc2-0a4f-4f70-8377-033ea15e6517
2026-01-03 01:02:17,376 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 01:02:17,378 - sqlalchemy.engine.Engine - INFO - [cached since 505.9s ago] ('bulk_upload', 'upload', 'Bulk upload: 1 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 1, "successful": 1, "failed": 0}', 'null', None, None)
2026-01-03 01:02:17,385 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:17,548 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:17,550 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-03 01:02:17,551 - sqlalchemy.engine.Engine - INFO - [cached since 516.8s ago] (1,)
2026-01-03 01:02:17,565 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-03 01:02:17,567 - sqlalchemy.engine.Engine - INFO - [cached since 516.8s ago] ()
2026-01-03 01:02:17,611 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-03 01:02:17,613 - sqlalchemy.engine.Engine - INFO - [cached since 516.8s ago] (50, 0)
2026-01-03 01:02:17,622 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:21,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:21,630 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 01:02:21,632 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 01:02:21,644 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 01:02:21,645 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] (datetime.datetime(2026, 1, 2, 19, 32, 21, 644360, tzinfo=datetime.timezone.utc), 17)
2026-01-03 01:02:21,648 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:21,669 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 01:02:21,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:21,813 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 01:02:21,815 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 01:02:21,856 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 01:02:21,866 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 01:02:21,871 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 01:02:21,876 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] ('19AI406',)
2026-01-03 01:02:21,884 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 01:02:21,886 - sqlalchemy.engine.Engine - INFO - [cached since 513.4s ago] ('19AI406',)
2026-01-03 01:02:21,893 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:25,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:25,518 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 01:02:25,519 - sqlalchemy.engine.Engine - INFO - [cached since 517.3s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 01:02:25,528 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 01:02:25,529 - sqlalchemy.engine.Engine - INFO - [cached since 517.3s ago] (datetime.datetime(2026, 1, 2, 19, 32, 25, 528156, tzinfo=datetime.timezone.utc), 17)
2026-01-03 01:02:25,535 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:25,558 - app.api.routes.student - INFO - Submit attempt for da821bc2-0a4f-4f70-8377-033ea15e6517 by register_number: 212221230038
2026-01-03 01:02:25,710 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:25,711 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 01:02:25,712 - sqlalchemy.engine.Engine - INFO - [cached since 514.3s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-03 01:02:25,760 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-03 01:02:25,761 - sqlalchemy.engine.Engine - INFO - [cached since 517.3s ago] ('19AI406',)
2026-01-03 01:02:25,769 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_user_id=$1::BIGINT, moodle_username=$2::VARCHAR, moodle_assignment_id=$3::INTEGER WHERE examination_artifacts.id = $4::INTEGER
2026-01-03 01:02:25,770 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] (4, '22008388', 4, 6)
2026-01-03 01:02:25,775 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 01:02:25,776 - sqlalchemy.engine.Engine - INFO - [cached since 514.3s ago] ('submission_started', 'submit', 'Starting submission for assignment 4', 'student', '4', '22008388', '127.0.0.1', 6, None, None, 'null', 'null', None, None)
2026-01-03 01:02:25,783 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-03 01:02:25,784 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 01:02:25,787 - sqlalchemy.engine.Engine - INFO - [cached since 514.3s ago] ('UPLOADING', 6)
2026-01-03 01:02:26,666 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI406.pdf (200331 bytes)
2026-01-03 01:02:26,671 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-03 01:02:26,680 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001BC06D98A50>
2026-01-03 01:02:26,683 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 01:02:26,685 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 01:02:26,686 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 01:02:26,694 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 01:02:26,695 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 01:02:26,842 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:32:26 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Fri, 02 Jan 2026 19:32:26 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-03 01:02:26,844 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 01:02:26,844 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 01:02:26,846 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 01:02:26,847 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 01:02:26,850 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI406.pdf', 'filepath': '/', 'itemid': 238899153, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI406.pdf";}', 'filesize': 200331}]
2026-01-03 01:02:26,851 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 238899153
2026-01-03 01:02:26,853 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 01:02:26,854 - sqlalchemy.engine.Engine - INFO - [cached since 514.3s ago] (238899153, 6)
2026-01-03 01:02:26,857 - app.services.submission_service - INFO - Verifying assignment 4 exists and is accessible...
2026-01-03 01:02:26,864 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 01:02:26,865 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 01:02:26,866 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 01:02:26,867 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 01:02:26,867 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 01:02:26,992 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:32:26 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'332'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 01:02:26,993 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 01:02:26,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 01:02:26,996 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 01:02:26,997 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 01:02:26,999 - app.services.submission_service - INFO - Assignment 4 verified and accessible
2026-01-03 01:02:27,000 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-03 01:02:27,001 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-03 01:02:27,002 - sqlalchemy.engine.Engine - INFO - [cached since 515.5s ago] ('SUBMITTING', 6)
2026-01-03 01:02:27,004 - app.services.moodle_client - INFO - Saving submission for assignment 4 with item 238899153
2026-01-03 01:02:27,011 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 01:02:27,012 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 01:02:27,013 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 01:02:27,014 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 01:02:27,015 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 01:02:27,455 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:32:27 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 01:02:27,456 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 01:02:27,456 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 01:02:27,460 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 01:02:27,461 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 01:02:27,464 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-03 01:02:27,464 - app.services.moodle_client - INFO - Submission saved successfully for assignment 4
2026-01-03 01:02:27,465 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-03 01:02:27,470 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-03 01:02:27,473 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-03 01:02:27,477 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-03 01:02:27,480 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-03 01:02:27,482 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-03 01:02:27,687 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 02 Jan 2026 19:32:27 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-03 01:02:27,688 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-03 01:02:27,689 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-03 01:02:27,691 - httpcore.http11 - DEBUG - response_closed.started
2026-01-03 01:02:27,692 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-03 01:02:27,695 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 8, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767382346, 'timemodified': 1767382347, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 4, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI406.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/34/assignsubmission_file/submission_files/8/212221230038_19AI406.pdf', 'timemodified': 1767382347, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-03 01:02:27,696 - app.services.submission_service - INFO - Submission status: submitted
2026-01-03 01:02:27,697 - app.services.submission_service - INFO - Submission ID: 8
2026-01-03 01:02:27,698 - app.services.submission_service - INFO - Submission timecreated: 1767382346
2026-01-03 01:02:27,698 - app.services.submission_service - INFO - Submission timemodified: 1767382347
2026-01-03 01:02:27,699 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-03 01:02:27,700 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-03 01:02:27,700 - app.services.submission_service - INFO - Can edit: True
2026-01-03 01:02:27,701 - app.services.submission_service - INFO - Can submit: False
2026-01-03 01:02:27,702 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-03 01:02:27,702 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI406.pdf']
2026-01-03 01:02:27,703 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-03 01:02:27,706 - httpcore.connection - DEBUG - close.started
2026-01-03 01:02:27,708 - httpcore.connection - DEBUG - close.complete
2026-01-03 01:02:27,709 - app.services.submission_service - INFO - Submission result: {'assignment_id': 4, 'steps_completed': ['upload', 'save'], 'item_id': 238899153, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '8', 'verified_files': ['212221230038_19AI406.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_da821bc2-0a4f-4f70-8377-033ea15e6517_20260102193227'}
2026-01-03 01:02:27,710 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-03 01:02:27,712 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 01:02:27,714 - sqlalchemy.engine.Engine - INFO - [cached since 514.6s ago] (6,)
2026-01-03 01:02:27,720 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, moodle_submission_id=$2::VARCHAR, lms_transaction_id=$3::VARCHAR, submit_timestamp=$4::TIMESTAMP WITH TIME ZONE, completed_at=$5::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $6::INTEGER
2026-01-03 01:02:27,722 - sqlalchemy.engine.Engine - INFO - [cached since 514.6s ago] ('COMPLETED', '8', 'TXN_da821bc2-0a4f-4f70-8377-033ea15e6517_20260102193227', datetime.datetime(2026, 1, 2, 19, 32, 27, 720042), datetime.datetime(2026, 1, 2, 19, 32, 27, 720061), 6)
2026-01-03 01:02:27,729 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-03 01:02:27,731 - sqlalchemy.engine.Engine - INFO - [cached since 514.6s ago] (6,)
2026-01-03 01:02:27,735 - app.services.artifact_service - INFO - Artifact 6 marked as submitted
2026-01-03 01:02:27,738 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-03 01:02:27,739 - sqlalchemy.engine.Engine - INFO - [cached since 516.3s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 6, None, None, 'null', '{"assignment_id": 4, "steps_completed": ["upload", "save"], "item_id": 238899153, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212221230038_19AI406.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_da821bc2-0a4f-4f70-8377-033ea15e6517_20260102193227"}', None, None)
2026-01-03 01:02:27,745 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:27,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:27,927 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-03 01:02:27,928 - sqlalchemy.engine.Engine - INFO - [cached since 516.5s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-03 01:02:27,970 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:28,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:28,137 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-03 01:02:28,138 - sqlalchemy.engine.Engine - INFO - [cached since 519.9s ago] ('WuFUyw2VbTvTTCGgVje9SIBtC6Y9V_DndLLIfwhrvdY',)
2026-01-03 01:02:28,150 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-03 01:02:28,152 - sqlalchemy.engine.Engine - INFO - [cached since 519.9s ago] (datetime.datetime(2026, 1, 2, 19, 32, 28, 149904, tzinfo=datetime.timezone.utc), 17)
2026-01-03 01:02:28,157 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:02:28,184 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-03 01:02:28,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:02:28,346 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-03 01:02:28,348 - sqlalchemy.engine.Engine - INFO - [cached since 519.9s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-03 01:02:28,401 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-03 01:02:28,403 - sqlalchemy.engine.Engine - INFO - [cached since 519.9s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-03 01:02:28,409 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:03:39,374 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 01:03:39,375 - app.main - INFO - Database connections closed
2026-01-03 01:03:42,082 - app.main - INFO - Starting Examination Middleware...
2026-01-03 01:03:42,197 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 01:03:42,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:03:42,200 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 01:03:42,201 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:03:42,203 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 01:03:42,204 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:03:42,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:03:42,210 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,220 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,222 - sqlalchemy.engine.Engine - INFO - [cached since 0.01157s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,224 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,225 - sqlalchemy.engine.Engine - INFO - [cached since 0.01502s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.0173s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.01963s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,231 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,232 - sqlalchemy.engine.Engine - INFO - [cached since 0.02205s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,234 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:03:42,234 - sqlalchemy.engine.Engine - INFO - [cached since 0.02431s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:03:42,237 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 01:03:42,238 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] ('workflowstatus', 'pg_catalog')
2026-01-03 01:03:42,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:03:42,249 - app.main - INFO - Database tables created/verified
2026-01-03 01:03:42,250 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 01:03:42,250 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 01:03:42,251 - app.main - INFO - Examination Middleware started successfully
2026-01-03 01:06:35,281 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 01:06:35,282 - app.main - INFO - Database connections closed
2026-01-03 01:06:37,287 - app.main - INFO - Starting Examination Middleware...
2026-01-03 01:06:37,369 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 01:06:37,370 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:06:37,376 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 01:06:37,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:06:37,379 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 01:06:37,380 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:06:37,382 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:06:37,385 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,385 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,397 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,397 - sqlalchemy.engine.Engine - INFO - [cached since 0.0126s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.01474s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.01683s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.01856s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,405 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.02071s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,407 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:06:37,407 - sqlalchemy.engine.Engine - INFO - [cached since 0.02269s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:06:37,409 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 01:06:37,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] ('workflowstatus', 'pg_catalog')
2026-01-03 01:06:37,414 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:06:37,418 - app.main - INFO - Database tables created/verified
2026-01-03 01:06:37,418 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 01:06:37,419 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 01:06:37,420 - app.main - INFO - Examination Middleware started successfully
2026-01-03 01:07:05,301 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 01:07:05,301 - app.main - INFO - Database connections closed
2026-01-03 01:07:06,890 - app.main - INFO - Starting Examination Middleware...
2026-01-03 01:07:06,968 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 01:07:06,969 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:06,972 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 01:07:06,972 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:06,974 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 01:07:06,975 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:06,976 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:07:06,980 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,981 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,989 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,990 - sqlalchemy.engine.Engine - INFO - [cached since 0.01012s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,991 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,991 - sqlalchemy.engine.Engine - INFO - [cached since 0.01189s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.01367s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.01545s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,997 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,997 - sqlalchemy.engine.Engine - INFO - [cached since 0.01759s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:06,999 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:06,999 - sqlalchemy.engine.Engine - INFO - [cached since 0.01948s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:07,001 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 01:07:07,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] ('workflowstatus', 'pg_catalog')
2026-01-03 01:07:07,005 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:07:07,008 - app.main - INFO - Database tables created/verified
2026-01-03 01:07:07,009 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 01:07:07,009 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 01:07:07,010 - app.main - INFO - Examination Middleware started successfully
2026-01-03 01:07:12,257 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 01:07:12,257 - app.main - INFO - Database connections closed
2026-01-03 01:07:13,768 - app.main - INFO - Starting Examination Middleware...
2026-01-03 01:07:13,849 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 01:07:13,858 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:13,860 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 01:07:13,861 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:13,863 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 01:07:13,863 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:13,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:07:13,868 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,869 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,875 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,876 - sqlalchemy.engine.Engine - INFO - [cached since 0.007492s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,877 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,878 - sqlalchemy.engine.Engine - INFO - [cached since 0.00947s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,879 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,879 - sqlalchemy.engine.Engine - INFO - [cached since 0.0112s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,880 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,881 - sqlalchemy.engine.Engine - INFO - [cached since 0.01289s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,882 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,883 - sqlalchemy.engine.Engine - INFO - [cached since 0.01481s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:13,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.01636s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:13,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 01:07:13,887 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('workflowstatus', 'pg_catalog')
2026-01-03 01:07:13,890 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:07:13,894 - app.main - INFO - Database tables created/verified
2026-01-03 01:07:13,895 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 01:07:13,895 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 01:07:13,896 - app.main - INFO - Examination Middleware started successfully
2026-01-03 01:07:19,464 - app.main - INFO - Shutting down Examination Middleware...
2026-01-03 01:07:19,464 - app.main - INFO - Database connections closed
2026-01-03 01:07:21,187 - app.main - INFO - Starting Examination Middleware...
2026-01-03 01:07:21,264 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-03 01:07:21,265 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:21,267 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-03 01:07:21,267 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:21,269 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-03 01:07:21,270 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-03 01:07:21,272 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-03 01:07:21,276 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,277 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,285 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,286 - sqlalchemy.engine.Engine - INFO - [cached since 0.01018s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,288 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,288 - sqlalchemy.engine.Engine - INFO - [cached since 0.01235s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,290 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,290 - sqlalchemy.engine.Engine - INFO - [cached since 0.01412s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,291 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,292 - sqlalchemy.engine.Engine - INFO - [cached since 0.01573s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,293 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,294 - sqlalchemy.engine.Engine - INFO - [cached since 0.01799s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,295 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-03 01:07:21,296 - sqlalchemy.engine.Engine - INFO - [cached since 0.0197s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-03 01:07:21,298 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-03 01:07:21,299 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] ('workflowstatus', 'pg_catalog')
2026-01-03 01:07:21,303 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-03 01:07:21,308 - app.main - INFO - Database tables created/verified
2026-01-03 01:07:21,309 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\uploads
2026-01-03 01:07:21,309 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\LMS-SAE\exam_middleware\storage
2026-01-03 01:07:21,310 - app.main - INFO - Examination Middleware started successfully
2026-01-11 12:38:59,779 - app.main - INFO - Starting Examination Middleware...
2026-01-11 12:38:59,869 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 12:38:59,869 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:38:59,897 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 12:38:59,898 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:38:59,903 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 12:38:59,904 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:38:59,907 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:38:59,911 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,911 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,944 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.03435s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.03675s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.0388s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,951 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,951 - sqlalchemy.engine.Engine - INFO - [cached since 0.04074s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,953 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,953 - sqlalchemy.engine.Engine - INFO - [cached since 0.04283s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,955 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:38:59,955 - sqlalchemy.engine.Engine - INFO - [cached since 0.04482s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:38:59,958 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 12:38:59,958 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ('workflowstatus', 'pg_catalog')
2026-01-11 12:38:59,964 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:38:59,968 - app.main - INFO - Database tables created/verified
2026-01-11 12:38:59,969 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 12:38:59,969 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 12:38:59,970 - app.main - INFO - Examination Middleware started successfully
2026-01-11 12:39:05,538 - app.db.database - ERROR - Database session error: 401: Could not validate credentials
2026-01-11 12:39:06,339 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:06,350 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:06,351 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('VewuvyyXvcOn8lvo-qzmYe3mWg0U7f2fwk20x270Jb0',)
2026-01-11 12:39:06,367 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_sessions WHERE student_sessions.id = $1::INTEGER
2026-01-11 12:39:06,368 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] (87,)
2026-01-11 12:39:06,372 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:06,378 - app.db.database - ERROR - Database session error: 401: Session expired
2026-01-11 12:39:11,966 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:39:11,967 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 12:39:11,968 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-11 12:39:11,968 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:39:11,969 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:39:11,970 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-11 12:39:11,971 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:39:11,972 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:39:11,973 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-11 12:39:11,975 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-11 12:39:11,977 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:39:11,977 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:39:11,980 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-11 12:39:11,981 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:39:11,982 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 12:39:12,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:12,140 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-11 12:39:12,150 - sqlalchemy.engine.Engine - INFO - [generated in 0.00997s] ('admin',)
2026-01-11 12:39:12,716 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-11 12:39:12,719 - sqlalchemy.engine.Engine - INFO - [generated in 0.00314s] (datetime.datetime(2026, 1, 11, 7, 9, 12, 713886, tzinfo=datetime.timezone.utc), 1)
2026-01-11 12:39:12,740 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:12,933 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:12,937 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:39:12,938 - sqlalchemy.engine.Engine - INFO - [generated in 0.00150s] (1,)
2026-01-11 12:39:12,965 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:39:12,968 - sqlalchemy.engine.Engine - INFO - [generated in 0.00319s] ()
2026-01-11 12:39:13,047 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:39:13,048 - sqlalchemy.engine.Engine - INFO - [generated in 0.00158s] (50, 0)
2026-01-11 12:39:13,057 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:20,534 - app.api.routes.auth - INFO - Authenticating student: 22008388
2026-01-11 12:39:21,472 - app.services.moodle_client - INFO - Authenticating user: 22008388
2026-01-11 12:39:21,484 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-11 12:39:21,508 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000286DDB4B8C0>
2026-01-11 12:39:21,513 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:39:21,516 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:39:21,517 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:39:21,520 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:39:21,520 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:39:38,534 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:09:21 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Sun, 11 Jan 2026 07:09:30 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'64'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json; charset=utf-8')])
2026-01-11 12:39:38,536 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:39:38,536 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:39:38,537 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:39:38,538 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:39:38,538 - app.services.moodle_client - INFO - Successfully authenticated user: 22008388
2026-01-11 12:39:38,540 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:39:38,541 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:39:38,542 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:39:38,543 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:39:38,543 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:39:41,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:09:38 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Transfer-Encoding', b'chunked'), (b'Content-Type', b'application/json')])
2026-01-11 12:39:41,497 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:39:41,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:39:41,500 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:39:41,500 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:39:41,501 - app.services.moodle_client - INFO - Got site info for user: 22008388
2026-01-11 12:39:41,570 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:41,571 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_sessions (session_id, moodle_user_id, moodle_username, moodle_fullname, register_number, encrypted_token, token_expires_at, ip_address, user_agent, expires_at) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITH TIME ZONE, $8::VARCHAR, $9::VARCHAR, $10::TIMESTAMP WITH TIME ZONE) RETURNING student_sessions.id, student_sessions.created_at, student_sessions.last_activity_at
2026-01-11 12:39:41,571 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8', 4, '22008388', 'Kishore S', '212221230038', 'Z0FBQUFBQnBZMHkxTUNvWE5ycTFRdl8zNm5WMTZZcmRaTzJicEpKdWNMcHVRYnkyS293aU9IVENDQ1hQblR6dGIxNTRObDVoOWUyX0lYSzJBcGJtVnpCRXRPaXZGcEk4aFM2T1E5d2lPNVVRTmNaWE0wSm1ta1NvODJlUXppREpLcmZVdEhMbWtGcVc=', None, '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', datetime.datetime(2026, 1, 11, 8, 9, 41, 502177, tzinfo=datetime.timezone.utc))
2026-01-11 12:39:41,579 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:41,654 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:41,656 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 12:39:41,657 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 12:39:41,688 - app.api.routes.auth - INFO - Student 22008388 (reg: 212221230038) logged in. Pending papers: 3
2026-01-11 12:39:41,689 - httpcore.connection - DEBUG - close.started
2026-01-11 12:39:41,689 - httpcore.connection - DEBUG - close.complete
2026-01-11 12:39:41,690 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:41,782 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:41,783 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:41,783 - sqlalchemy.engine.Engine - INFO - [cached since 35.43s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:41,790 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:41,791 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] (datetime.datetime(2026, 1, 11, 7, 9, 41, 790049, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:41,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:41,799 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 12:39:41,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:41,878 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 12:39:41,878 - sqlalchemy.engine.Engine - INFO - [cached since 0.2227s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 12:39:41,909 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 12:39:41,910 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 12:39:41,917 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('19AI406',)
2026-01-11 12:39:41,937 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.02019s ago] ('19AI406',)
2026-01-11 12:39:41,938 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,939 - sqlalchemy.engine.Engine - INFO - [cached since 0.02194s ago] ('19AI411',)
2026-01-11 12:39:41,940 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,941 - sqlalchemy.engine.Engine - INFO - [cached since 0.02362s ago] ('19AI411',)
2026-01-11 12:39:41,942 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,942 - sqlalchemy.engine.Engine - INFO - [cached since 0.02505s ago] ('19AI405',)
2026-01-11 12:39:41,943 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,944 - sqlalchemy.engine.Engine - INFO - [cached since 0.02709s ago] ('19AI405',)
2026-01-11 12:39:41,945 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:39:41,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.02872s ago] ('19AI550',)
2026-01-11 12:39:41,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,094 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,095 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,095 - sqlalchemy.engine.Engine - INFO - [cached since 35.75s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,098 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,098 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,098 - sqlalchemy.engine.Engine - INFO - [cached since 35.75s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,102 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,103 - sqlalchemy.engine.Engine - INFO - [cached since 0.3127s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 102440, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,104 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.3145s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 104552, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,106 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,120 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,216 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,218 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,219 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:39:42,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,221 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,221 - sqlalchemy.engine.Engine - INFO - [cached since 0.003374s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:39:42,264 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,268 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,272 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,273 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,355 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,356 - sqlalchemy.engine.Engine - INFO - [cached since 36.01s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,389 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,390 - sqlalchemy.engine.Engine - INFO - [cached since 36.04s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,391 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,392 - sqlalchemy.engine.Engine - INFO - [cached since 0.6017s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 391517, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,395 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,401 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.6116s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 401131, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,433 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,435 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,435 - sqlalchemy.engine.Engine - INFO - [cached since 36.09s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,469 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,469 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,470 - sqlalchemy.engine.Engine - INFO - [cached since 36.12s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,471 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,472 - sqlalchemy.engine.Engine - INFO - [cached since 0.6813s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 471383, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,473 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,478 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,478 - sqlalchemy.engine.Engine - INFO - [cached since 0.6881s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 478028, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,484 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,550 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,551 - sqlalchemy.engine.Engine - INFO - [cached since 0.3333s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:39:42,578 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,579 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,580 - sqlalchemy.engine.Engine - INFO - [cached since 0.3619s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:39:42,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,610 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.3934s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:39:42,615 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,642 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,647 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,647 - sqlalchemy.engine.Engine - INFO - [cached since 0.4294s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:39:42,653 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,657 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,675 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,679 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,688 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,693 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,766 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,766 - sqlalchemy.engine.Engine - INFO - [cached since 36.42s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,771 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,771 - sqlalchemy.engine.Engine - INFO - [cached since 0.9812s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 771086, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,773 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,877 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,878 - sqlalchemy.engine.Engine - INFO - [cached since 0.66s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:39:42,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,881 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:39:42,882 - sqlalchemy.engine.Engine - INFO - [cached since 36.53s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:39:42,888 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:39:42,889 - sqlalchemy.engine.Engine - INFO - [cached since 1.098s ago] (datetime.datetime(2026, 1, 11, 7, 9, 42, 888047, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:39:42,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:39:42,927 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,931 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:39:42,963 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:39:42,964 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:39:42,964 - sqlalchemy.engine.Engine - INFO - [cached since 0.7465s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:39:42,991 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:39:42,996 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:47,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:47,469 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:47,470 - sqlalchemy.engine.Engine - INFO - [cached since 101.1s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:47,481 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:47,482 - sqlalchemy.engine.Engine - INFO - [cached since 65.69s ago] (datetime.datetime(2026, 1, 11, 7, 10, 47, 480910, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:47,487 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:47,494 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 12:40:47,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:47,635 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 12:40:47,637 - sqlalchemy.engine.Engine - INFO - [cached since 65.98s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 12:40:47,688 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 12:40:47,690 - sqlalchemy.engine.Engine - INFO - [cached since 65.78s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 12:40:47,696 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,700 - sqlalchemy.engine.Engine - INFO - [cached since 65.78s ago] ('19AI406',)
2026-01-11 12:40:47,707 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,710 - sqlalchemy.engine.Engine - INFO - [cached since 65.79s ago] ('19AI406',)
2026-01-11 12:40:47,715 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,716 - sqlalchemy.engine.Engine - INFO - [cached since 65.8s ago] ('19AI411',)
2026-01-11 12:40:47,720 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,722 - sqlalchemy.engine.Engine - INFO - [cached since 65.8s ago] ('19AI411',)
2026-01-11 12:40:47,725 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,727 - sqlalchemy.engine.Engine - INFO - [cached since 65.81s ago] ('19AI405',)
2026-01-11 12:40:47,732 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,733 - sqlalchemy.engine.Engine - INFO - [cached since 65.82s ago] ('19AI405',)
2026-01-11 12:40:47,735 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:40:47,737 - sqlalchemy.engine.Engine - INFO - [cached since 65.82s ago] ('19AI550',)
2026-01-11 12:40:47,742 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:47,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:47,901 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:47,903 - sqlalchemy.engine.Engine - INFO - [cached since 101.6s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:48,006 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:48,007 - sqlalchemy.engine.Engine - INFO - [cached since 66.22s ago] (datetime.datetime(2026, 1, 11, 7, 10, 48, 6265, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:48,010 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,012 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:48,017 - sqlalchemy.engine.Engine - INFO - [cached since 101.7s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:48,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:48,032 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:48,036 - sqlalchemy.engine.Engine - INFO - [cached since 66.25s ago] (datetime.datetime(2026, 1, 11, 7, 10, 48, 31991, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:48,044 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:48,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,187 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:48,189 - sqlalchemy.engine.Engine - INFO - [cached since 65.97s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:40:48,356 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,357 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:48,358 - sqlalchemy.engine.Engine - INFO - [cached since 66.14s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:40:48,451 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,454 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:48,455 - sqlalchemy.engine.Engine - INFO - [cached since 102.1s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:48,463 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,467 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:48,468 - sqlalchemy.engine.Engine - INFO - [cached since 102.1s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:48,480 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:48,484 - sqlalchemy.engine.Engine - INFO - [cached since 66.69s ago] (datetime.datetime(2026, 1, 11, 7, 10, 48, 480018, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:48,489 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:48,498 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:48,500 - sqlalchemy.engine.Engine - INFO - [cached since 66.71s ago] (datetime.datetime(2026, 1, 11, 7, 10, 48, 498475, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:48,512 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:48,531 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:48,546 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:48,558 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:48,564 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:48,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,798 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:48,800 - sqlalchemy.engine.Engine - INFO - [cached since 66.58s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:40:48,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,984 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:48,985 - sqlalchemy.engine.Engine - INFO - [cached since 66.77s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:40:48,988 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:48,991 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:48,994 - sqlalchemy.engine.Engine - INFO - [cached since 102.6s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:48,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,000 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:49,001 - sqlalchemy.engine.Engine - INFO - [cached since 102.7s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:49,012 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:49,016 - sqlalchemy.engine.Engine - INFO - [cached since 67.23s ago] (datetime.datetime(2026, 1, 11, 7, 10, 49, 12445, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:49,019 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:49,020 - sqlalchemy.engine.Engine - INFO - [cached since 67.23s ago] (datetime.datetime(2026, 1, 11, 7, 10, 49, 18771, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:49,027 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:49,053 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,068 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,070 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:49,082 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:49,083 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:49,310 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,312 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:49,314 - sqlalchemy.engine.Engine - INFO - [cached since 67.1s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:40:49,495 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,497 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:49,498 - sqlalchemy.engine.Engine - INFO - [cached since 103.1s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:49,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,506 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:49,507 - sqlalchemy.engine.Engine - INFO - [cached since 103.2s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:49,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,516 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:49,522 - sqlalchemy.engine.Engine - INFO - [cached since 67.3s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:40:49,530 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:49,534 - sqlalchemy.engine.Engine - INFO - [cached since 67.74s ago] (datetime.datetime(2026, 1, 11, 7, 10, 49, 530392, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:49,538 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:49,543 - sqlalchemy.engine.Engine - INFO - [cached since 67.75s ago] (datetime.datetime(2026, 1, 11, 7, 10, 49, 537698, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:49,547 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:49,551 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:49,593 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,600 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:49,616 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,700 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:49,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,707 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:49,708 - sqlalchemy.engine.Engine - INFO - [cached since 67.49s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:40:49,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:49,802 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:49,803 - sqlalchemy.engine.Engine - INFO - [cached since 67.59s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:40:49,841 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,853 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:49,859 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:49,866 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:51,360 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:51,362 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:40:51,364 - sqlalchemy.engine.Engine - INFO - [cached since 105s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:40:51,378 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:40:51,383 - sqlalchemy.engine.Engine - INFO - [cached since 69.59s ago] (datetime.datetime(2026, 1, 11, 7, 10, 51, 377442, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:40:51,386 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:51,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:51,563 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:40:51,564 - sqlalchemy.engine.Engine - INFO - [cached since 69.35s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:40:51,619 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:40:51,625 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:40:56,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:56,553 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:56,554 - sqlalchemy.engine.Engine - INFO - [cached since 103.6s ago] (1,)
2026-01-11 12:40:56,564 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:56,566 - sqlalchemy.engine.Engine - INFO - [cached since 103.6s ago] ()
2026-01-11 12:40:56,615 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:56,617 - sqlalchemy.engine.Engine - INFO - [cached since 103.6s ago] (50, 0)
2026-01-11 12:40:56,623 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:57,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:57,225 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:57,226 - sqlalchemy.engine.Engine - INFO - [cached since 104.3s ago] (1,)
2026-01-11 12:40:57,237 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:57,239 - sqlalchemy.engine.Engine - INFO - [cached since 104.3s ago] ()
2026-01-11 12:40:57,290 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:57,292 - sqlalchemy.engine.Engine - INFO - [cached since 104.2s ago] (50, 0)
2026-01-11 12:40:57,298 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:57,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:57,773 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:57,774 - sqlalchemy.engine.Engine - INFO - [cached since 104.8s ago] (1,)
2026-01-11 12:40:57,783 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:57,785 - sqlalchemy.engine.Engine - INFO - [cached since 104.8s ago] ()
2026-01-11 12:40:57,830 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:57,831 - sqlalchemy.engine.Engine - INFO - [cached since 104.8s ago] (50, 0)
2026-01-11 12:40:57,837 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:58,372 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:58,373 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:58,374 - sqlalchemy.engine.Engine - INFO - [cached since 105.4s ago] (1,)
2026-01-11 12:40:58,384 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:58,386 - sqlalchemy.engine.Engine - INFO - [cached since 105.4s ago] ()
2026-01-11 12:40:58,436 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:58,438 - sqlalchemy.engine.Engine - INFO - [cached since 105.4s ago] (50, 0)
2026-01-11 12:40:58,445 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:58,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:58,608 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:58,610 - sqlalchemy.engine.Engine - INFO - [cached since 105.7s ago] (1,)
2026-01-11 12:40:58,621 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:58,623 - sqlalchemy.engine.Engine - INFO - [cached since 105.7s ago] ()
2026-01-11 12:40:58,682 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:58,684 - sqlalchemy.engine.Engine - INFO - [cached since 105.6s ago] (50, 0)
2026-01-11 12:40:58,692 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:40:58,857 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:40:58,859 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:40:58,860 - sqlalchemy.engine.Engine - INFO - [cached since 105.9s ago] (1,)
2026-01-11 12:40:58,873 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:40:58,875 - sqlalchemy.engine.Engine - INFO - [cached since 105.9s ago] ()
2026-01-11 12:40:58,926 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:40:58,928 - sqlalchemy.engine.Engine - INFO - [cached since 105.9s ago] (50, 0)
2026-01-11 12:40:58,934 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:41:33,636 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:41:33,637 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:41:33,639 - sqlalchemy.engine.Engine - INFO - [cached since 140.7s ago] (1,)
2026-01-11 12:41:33,649 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:41:33,651 - sqlalchemy.engine.Engine - INFO - [cached since 140.7s ago] ()
2026-01-11 12:41:33,692 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:41:33,693 - sqlalchemy.engine.Engine - INFO - [cached since 140.6s ago] (50, 0)
2026-01-11 12:41:33,701 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:41:34,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:41:34,675 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:41:34,676 - sqlalchemy.engine.Engine - INFO - [cached since 141.7s ago] (1,)
2026-01-11 12:41:34,685 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:41:34,687 - sqlalchemy.engine.Engine - INFO - [cached since 141.7s ago] ()
2026-01-11 12:41:34,724 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:41:34,725 - sqlalchemy.engine.Engine - INFO - [cached since 141.7s ago] (50, 0)
2026-01-11 12:41:34,732 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:41:42,628 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:41:42,629 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 12:41:42,630 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:89]
2026-01-11 12:41:42,631 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:41:42,632 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:41:42,633 - python_multipart.multipart - DEBUG - Calling on_part_data with data[93:98]
2026-01-11 12:41:42,634 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:41:42,638 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:41:42,640 - python_multipart.multipart - DEBUG - Calling on_header_field with data[142:161]
2026-01-11 12:41:42,642 - python_multipart.multipart - DEBUG - Calling on_header_value with data[163:189]
2026-01-11 12:41:42,644 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:41:42,646 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:41:42,647 - python_multipart.multipart - DEBUG - Calling on_part_data with data[193:201]
2026-01-11 12:41:42,648 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:41:42,649 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 12:41:42,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:41:42,830 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.username = $1::VARCHAR
2026-01-11 12:41:42,831 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] ('admin',)
2026-01-11 12:41:43,487 - sqlalchemy.engine.Engine - INFO - UPDATE staff_users SET last_login_at=$1::TIMESTAMP WITH TIME ZONE WHERE staff_users.id = $2::INTEGER
2026-01-11 12:41:43,489 - sqlalchemy.engine.Engine - INFO - [cached since 150.8s ago] (datetime.datetime(2026, 1, 11, 7, 11, 43, 486476, tzinfo=datetime.timezone.utc), 1)
2026-01-11 12:41:43,494 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:41:43,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:41:43,676 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:41:43,677 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] (1,)
2026-01-11 12:41:43,686 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:41:43,687 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] ()
2026-01-11 12:41:43,722 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:41:43,723 - sqlalchemy.engine.Engine - INFO - [cached since 150.7s ago] (50, 0)
2026-01-11 12:41:43,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:22,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:22,171 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:22,172 - sqlalchemy.engine.Engine - INFO - [cached since 549.2s ago] (1,)
2026-01-11 12:48:22,185 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:22,188 - sqlalchemy.engine.Engine - INFO - [cached since 549.2s ago] ()
2026-01-11 12:48:22,225 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:22,226 - sqlalchemy.engine.Engine - INFO - [cached since 549.2s ago] (50, 0)
2026-01-11 12:48:22,232 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:22,823 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:22,824 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:22,826 - sqlalchemy.engine.Engine - INFO - [cached since 549.9s ago] (1,)
2026-01-11 12:48:22,855 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:22,857 - sqlalchemy.engine.Engine - INFO - [cached since 549.9s ago] ()
2026-01-11 12:48:22,906 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:22,909 - sqlalchemy.engine.Engine - INFO - [cached since 549.9s ago] (50, 0)
2026-01-11 12:48:22,916 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:23,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:23,618 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:23,619 - sqlalchemy.engine.Engine - INFO - [cached since 550.7s ago] (1,)
2026-01-11 12:48:23,630 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:23,636 - sqlalchemy.engine.Engine - INFO - [cached since 550.7s ago] ()
2026-01-11 12:48:23,682 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:23,683 - sqlalchemy.engine.Engine - INFO - [cached since 550.6s ago] (50, 0)
2026-01-11 12:48:23,687 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:23,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:23,851 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:23,853 - sqlalchemy.engine.Engine - INFO - [cached since 550.9s ago] (1,)
2026-01-11 12:48:23,862 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:23,864 - sqlalchemy.engine.Engine - INFO - [cached since 550.9s ago] ()
2026-01-11 12:48:23,898 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:23,899 - sqlalchemy.engine.Engine - INFO - [cached since 550.9s ago] (50, 0)
2026-01-11 12:48:23,905 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:24,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:24,097 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:24,098 - sqlalchemy.engine.Engine - INFO - [cached since 551.2s ago] (1,)
2026-01-11 12:48:24,108 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:24,109 - sqlalchemy.engine.Engine - INFO - [cached since 551.1s ago] ()
2026-01-11 12:48:24,148 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:24,149 - sqlalchemy.engine.Engine - INFO - [cached since 551.1s ago] (50, 0)
2026-01-11 12:48:24,155 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:24,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:24,346 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:48:24,348 - sqlalchemy.engine.Engine - INFO - [cached since 551.4s ago] (1,)
2026-01-11 12:48:24,364 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:48:24,366 - sqlalchemy.engine.Engine - INFO - [cached since 551.4s ago] ()
2026-01-11 12:48:24,404 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:48:24,407 - sqlalchemy.engine.Engine - INFO - [cached since 551.4s ago] (50, 0)
2026-01-11 12:48:24,418 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:27,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:27,044 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:48:27,046 - sqlalchemy.engine.Engine - INFO - [cached since 560.7s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:48:27,054 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:48:27,055 - sqlalchemy.engine.Engine - INFO - [cached since 525.3s ago] (datetime.datetime(2026, 1, 11, 7, 18, 27, 54403, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:48:27,096 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:48:27,246 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:48:27,248 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:48:27,249 - sqlalchemy.engine.Engine - INFO - [cached since 525s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:48:27,312 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-11 12:48:27,319 - app.db.database - ERROR - Database session error: 404: File not found on server
2026-01-11 12:49:58,122 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,123 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 12:49:58,124 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-11 12:49:58,124 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,124 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-11 12:49:58,125 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-11 12:49:58,125 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,126 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,127 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:65536]
2026-01-11 12:49:58,129 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:131072]
2026-01-11 12:49:58,130 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:3881]
2026-01-11 12:49:58,131 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,131 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,132 - python_multipart.multipart - DEBUG - Calling on_header_field with data[3925:3944]
2026-01-11 12:49:58,133 - python_multipart.multipart - DEBUG - Calling on_header_value with data[3946:4006]
2026-01-11 12:49:58,137 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,138 - python_multipart.multipart - DEBUG - Calling on_header_field with data[4008:4020]
2026-01-11 12:49:58,139 - python_multipart.multipart - DEBUG - Calling on_header_value with data[4022:4037]
2026-01-11 12:49:58,140 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,141 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,144 - python_multipart.multipart - DEBUG - Calling on_part_data with data[4041:32768]
2026-01-11 12:49:58,146 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:171604]
2026-01-11 12:49:58,147 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,149 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,150 - python_multipart.multipart - DEBUG - Calling on_header_field with data[171648:171667]
2026-01-11 12:49:58,153 - python_multipart.multipart - DEBUG - Calling on_header_value with data[171669:171729]
2026-01-11 12:49:58,154 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,156 - python_multipart.multipart - DEBUG - Calling on_header_field with data[171731:171743]
2026-01-11 12:49:58,158 - python_multipart.multipart - DEBUG - Calling on_header_value with data[171745:171760]
2026-01-11 12:49:58,159 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,160 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,163 - python_multipart.multipart - DEBUG - Calling on_part_data with data[171764:212992]
2026-01-11 12:49:58,165 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:159103]
2026-01-11 12:49:58,167 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,168 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,170 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159147:159166]
2026-01-11 12:49:58,172 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159168:159228]
2026-01-11 12:49:58,172 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,174 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159230:159242]
2026-01-11 12:49:58,175 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159244:159259]
2026-01-11 12:49:58,176 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,178 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,180 - python_multipart.multipart - DEBUG - Calling on_part_data with data[159263:245760]
2026-01-11 12:49:58,182 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:113834]
2026-01-11 12:49:58,183 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,186 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,188 - python_multipart.multipart - DEBUG - Calling on_header_field with data[113878:113897]
2026-01-11 12:49:58,189 - python_multipart.multipart - DEBUG - Calling on_header_value with data[113899:113959]
2026-01-11 12:49:58,190 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,190 - python_multipart.multipart - DEBUG - Calling on_header_field with data[113961:113973]
2026-01-11 12:49:58,191 - python_multipart.multipart - DEBUG - Calling on_header_value with data[113975:113990]
2026-01-11 12:49:58,192 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,194 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,195 - python_multipart.multipart - DEBUG - Calling on_part_data with data[113994:245760]
2026-01-11 12:49:58,197 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:56878]
2026-01-11 12:49:58,198 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,198 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 12:49:58,200 - python_multipart.multipart - DEBUG - Calling on_header_field with data[56922:56941]
2026-01-11 12:49:58,200 - python_multipart.multipart - DEBUG - Calling on_header_value with data[56943:56973]
2026-01-11 12:49:58,201 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 12:49:58,201 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 12:49:58,203 - python_multipart.multipart - DEBUG - Calling on_part_data with data[56977:56985]
2026-01-11 12:49:58,205 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 12:49:58,208 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 12:49:58,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:49:58,361 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:49:58,363 - sqlalchemy.engine.Engine - INFO - [cached since 645.4s ago] (1,)
2026-01-11 12:49:58,374 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-11 12:49:58,384 - app.services.file_processor - INFO - Saved file: ./uploads/pending/9a0f35c9e8b64af399c5efbba88fd725.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 12:49:58,388 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 12:49:58,392 - sqlalchemy.engine.Engine - INFO - [generated in 0.00333s] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-11 12:49:58,441 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-11 12:49:58,445 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:49:58,446 - sqlalchemy.engine.Engine - INFO - [generated in 0.00149s] ('./uploads/pending/9a0f35c9e8b64af399c5efbba88fd725.pdf', 4)
2026-01-11 12:49:58,463 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:49:58,468 - sqlalchemy.engine.Engine - INFO - [generated in 0.00488s] (4,)
2026-01-11 12:49:58,476 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI406
2026-01-11 12:49:58,486 - app.services.file_processor - INFO - Saved file: ./uploads/pending/f9539e496bc54307bdbc28fc25852b21.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 12:49:58,489 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 12:49:58,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.1022s ago] ('c2551e3b4672a21f1a0ab25b2196e4fb',)
2026-01-11 12:49:58,495 - app.services.artifact_service - WARNING - Duplicate artifact detected: c2551e3b4672a21f1a0ab25b2196e4fb, updating with new file
2026-01-11 12:49:58,497 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:49:58,498 - sqlalchemy.engine.Engine - INFO - [cached since 0.05325s ago] ('./uploads/pending/f9539e496bc54307bdbc28fc25852b21.pdf', 6)
2026-01-11 12:49:58,506 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:49:58,512 - sqlalchemy.engine.Engine - INFO - [cached since 0.04874s ago] (6,)
2026-01-11 12:49:58,515 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-11 12:49:58,539 - app.services.file_processor - INFO - Saved file: ./uploads/pending/d7e1632eed514fb381d158043d00857c.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 12:49:58,541 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 12:49:58,542 - sqlalchemy.engine.Engine - INFO - [cached since 0.1537s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-11 12:49:58,545 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-11 12:49:58,548 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:49:58,550 - sqlalchemy.engine.Engine - INFO - [cached since 0.1049s ago] ('./uploads/pending/d7e1632eed514fb381d158043d00857c.pdf', 5)
2026-01-11 12:49:58,557 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:49:58,559 - sqlalchemy.engine.Engine - INFO - [cached since 0.09664s ago] (5,)
2026-01-11 12:49:58,563 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI550
2026-01-11 12:49:58,571 - app.services.file_processor - INFO - Saved file: ./uploads/pending/d9602259b4074bc28e5effaac5c15b98.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 12:49:58,572 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 12:49:58,576 - sqlalchemy.engine.Engine - INFO - [cached since 0.1874s ago] ('162e03180b2b07f063b98f3a1249fc22',)
2026-01-11 12:49:58,579 - app.services.artifact_service - WARNING - Duplicate artifact detected: 162e03180b2b07f063b98f3a1249fc22, updating with new file
2026-01-11 12:49:58,588 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 12:49:58,590 - sqlalchemy.engine.Engine - INFO - [generated in 0.00176s] ('./uploads/pending/d9602259b4074bc28e5effaac5c15b98.pdf', 'PENDING', 7)
2026-01-11 12:49:58,596 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:49:58,598 - sqlalchemy.engine.Engine - INFO - [cached since 0.1353s ago] (7,)
2026-01-11 12:49:58,605 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-11 12:49:58,611 - app.services.file_processor - INFO - Saved file: ./uploads/pending/3b991ee425444e0d8f94cfa8adabc615.pdf (hash: 69530c94d1cfd882...)
2026-01-11 12:49:58,613 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 12:49:58,615 - sqlalchemy.engine.Engine - INFO - [cached since 0.2266s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-11 12:49:58,621 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-11 12:49:58,623 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 12:49:58,624 - sqlalchemy.engine.Engine - INFO - [cached since 0.03606s ago] ('./uploads/pending/3b991ee425444e0d8f94cfa8adabc615.pdf', 'PENDING', 3)
2026-01-11 12:49:58,630 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:49:58,632 - sqlalchemy.engine.Engine - INFO - [cached since 0.1689s ago] (3,)
2026-01-11 12:49:58,641 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 12:49:58,643 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] ('bulk_upload', 'upload', 'Bulk upload: 5 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 5, "successful": 5, "failed": 0}', 'null', None, None)
2026-01-11 12:49:58,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:49:58,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:49:58,841 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:49:58,842 - sqlalchemy.engine.Engine - INFO - [cached since 645.9s ago] (1,)
2026-01-11 12:49:58,849 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:49:58,850 - sqlalchemy.engine.Engine - INFO - [cached since 645.9s ago] ()
2026-01-11 12:49:58,891 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:49:58,893 - sqlalchemy.engine.Engine - INFO - [cached since 645.8s ago] (50, 0)
2026-01-11 12:49:58,898 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:02,285 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:02,286 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:50:02,287 - sqlalchemy.engine.Engine - INFO - [cached since 649.4s ago] (1,)
2026-01-11 12:50:02,297 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:50:02,298 - sqlalchemy.engine.Engine - INFO - [cached since 649.3s ago] ()
2026-01-11 12:50:02,346 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:50:02,348 - sqlalchemy.engine.Engine - INFO - [cached since 649.3s ago] (50, 0)
2026-01-11 12:50:02,356 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:04,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:04,162 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:04,164 - sqlalchemy.engine.Engine - INFO - [cached since 657.8s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:04,174 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:04,175 - sqlalchemy.engine.Engine - INFO - [cached since 622.4s ago] (datetime.datetime(2026, 1, 11, 7, 20, 4, 173991, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:04,179 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:04,200 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 12:50:04,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:04,344 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 12:50:04,346 - sqlalchemy.engine.Engine - INFO - [cached since 622.7s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 12:50:04,391 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 12:50:04,395 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 12:50:04,400 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,402 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI550',)
2026-01-11 12:50:04,415 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,418 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI550',)
2026-01-11 12:50:04,424 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,426 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI406',)
2026-01-11 12:50:04,429 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,431 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI406',)
2026-01-11 12:50:04,436 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,438 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI411',)
2026-01-11 12:50:04,443 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,445 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI411',)
2026-01-11 12:50:04,449 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,450 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI405',)
2026-01-11 12:50:04,454 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:50:04,456 - sqlalchemy.engine.Engine - INFO - [cached since 622.5s ago] ('19AI405',)
2026-01-11 12:50:04,462 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:04,642 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:04,644 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:04,646 - sqlalchemy.engine.Engine - INFO - [cached since 658.3s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:04,744 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:04,745 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:04,746 - sqlalchemy.engine.Engine - INFO - [cached since 658.4s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:04,748 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:04,749 - sqlalchemy.engine.Engine - INFO - [cached since 623s ago] (datetime.datetime(2026, 1, 11, 7, 20, 4, 748281, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:04,753 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:04,760 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:04,761 - sqlalchemy.engine.Engine - INFO - [cached since 623s ago] (datetime.datetime(2026, 1, 11, 7, 20, 4, 760023, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:04,774 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:04,999 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,001 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:05,003 - sqlalchemy.engine.Engine - INFO - [cached since 622.8s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:50:05,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,180 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:05,181 - sqlalchemy.engine.Engine - INFO - [cached since 623s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:50:05,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,187 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:05,189 - sqlalchemy.engine.Engine - INFO - [cached since 658.8s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:05,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,196 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:05,197 - sqlalchemy.engine.Engine - INFO - [cached since 658.8s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:05,215 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:05,219 - sqlalchemy.engine.Engine - INFO - [cached since 623.4s ago] (datetime.datetime(2026, 1, 11, 7, 20, 5, 214945, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:05,223 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:05,224 - sqlalchemy.engine.Engine - INFO - [cached since 623.4s ago] (datetime.datetime(2026, 1, 11, 7, 20, 5, 222759, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:05,227 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,231 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,253 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:50:05,254 - sqlalchemy.engine.Engine - INFO - [cached since 6.81s ago] ('uploads/pending/f9539e496bc54307bdbc28fc25852b21.pdf', 6)
2026-01-11 12:50:05,259 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:50:05,260 - sqlalchemy.engine.Engine - INFO - [cached since 6.815s ago] ('uploads/pending/d9602259b4074bc28e5effaac5c15b98.pdf', 7)
2026-01-11 12:50:05,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,267 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,408 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:05,410 - sqlalchemy.engine.Engine - INFO - [cached since 623.2s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:50:05,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,522 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:05,524 - sqlalchemy.engine.Engine - INFO - [cached since 623.3s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:50:05,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,630 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:05,631 - sqlalchemy.engine.Engine - INFO - [cached since 659.3s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:05,636 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:50:05,637 - sqlalchemy.engine.Engine - INFO - [cached since 7.193s ago] ('uploads/pending/d7e1632eed514fb381d158043d00857c.pdf', 5)
2026-01-11 12:50:05,746 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,751 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:05,752 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:05,753 - sqlalchemy.engine.Engine - INFO - [cached since 659.4s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:05,757 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:05,758 - sqlalchemy.engine.Engine - INFO - [cached since 624s ago] (datetime.datetime(2026, 1, 11, 7, 20, 5, 756533, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:05,765 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:50:05,766 - sqlalchemy.engine.Engine - INFO - [cached since 7.322s ago] ('uploads/pending/9a0f35c9e8b64af399c5efbba88fd725.pdf', 4)
2026-01-11 12:50:05,771 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,774 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:05,777 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:05,779 - sqlalchemy.engine.Engine - INFO - [cached since 624s ago] (datetime.datetime(2026, 1, 11, 7, 20, 5, 777081, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:05,798 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,006 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,007 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:06,008 - sqlalchemy.engine.Engine - INFO - [cached since 623.8s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:50:06,167 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,168 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:06,169 - sqlalchemy.engine.Engine - INFO - [cached since 659.8s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:06,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,171 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:06,172 - sqlalchemy.engine.Engine - INFO - [cached since 659.8s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:06,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,176 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:06,177 - sqlalchemy.engine.Engine - INFO - [cached since 624s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:50:06,185 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:06,186 - sqlalchemy.engine.Engine - INFO - [cached since 624.4s ago] (datetime.datetime(2026, 1, 11, 7, 20, 6, 185505, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:06,190 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:06,192 - sqlalchemy.engine.Engine - INFO - [cached since 624.4s ago] (datetime.datetime(2026, 1, 11, 7, 20, 6, 189859, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:06,195 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,232 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,447 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:06,448 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:50:06,451 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:06,452 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:06,453 - sqlalchemy.engine.Engine - INFO - [cached since 624.2s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:50:06,491 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:06,495 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:12,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:12,623 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:50:12,625 - sqlalchemy.engine.Engine - INFO - [cached since 666.3s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:50:12,644 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:50:12,646 - sqlalchemy.engine.Engine - INFO - [cached since 630.9s ago] (datetime.datetime(2026, 1, 11, 7, 20, 12, 643872, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:50:12,653 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:50:12,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:50:12,812 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:50:12,813 - sqlalchemy.engine.Engine - INFO - [cached since 630.6s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:50:12,868 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:10,367 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:10,368 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:56:10,369 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (1,)
2026-01-11 12:56:10,380 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:56:10,381 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] ()
2026-01-11 12:56:10,428 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:56:10,429 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (50, 0)
2026-01-11 12:56:10,435 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:25,070 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:25,071 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:25,072 - sqlalchemy.engine.Engine - INFO - [cached since 1039s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:25,085 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:25,086 - sqlalchemy.engine.Engine - INFO - [cached since 1003s ago] (datetime.datetime(2026, 1, 11, 7, 26, 25, 83673, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:25,091 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:25,116 - app.api.routes.student - INFO - Submit attempt for f519994d-9d50-4d62-ae23-cf157d9de0d8 by register_number: 212221230038
2026-01-11 12:56:25,260 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:25,262 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:25,264 - sqlalchemy.engine.Engine - INFO - [cached since 1003s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:56:25,310 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 12:56:25,312 - sqlalchemy.engine.Engine - INFO - [cached since 386.7s ago] ('submission_started', 'submit', 'Starting submission for assignment 5', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', 'null', None, None)
2026-01-11 12:56:25,324 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-11 12:56:25,326 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:56:25,327 - sqlalchemy.engine.Engine - INFO - [generated in 0.00201s] ('UPLOADING', 7)
2026-01-11 12:56:26,044 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI550.pdf (200331 bytes)
2026-01-11 12:56:26,051 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-11 12:56:26,061 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000286DDC99810>
2026-01-11 12:56:26,063 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:56:26,064 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:56:26,066 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:56:26,081 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:56:26,083 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:56:28,230 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:26:26 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Sun, 11 Jan 2026 07:26:26 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-11 12:56:28,232 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:56:28,233 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:56:28,235 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:56:28,235 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:56:28,237 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'itemid': 278255252, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI550.pdf";}', 'filesize': 200331}]
2026-01-11 12:56:28,238 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 278255252
2026-01-11 12:56:28,240 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:56:28,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00160s] (278255252, 7)
2026-01-11 12:56:28,251 - app.services.submission_service - INFO - Verifying assignment 5 exists and is accessible...
2026-01-11 12:56:28,254 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:56:28,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:56:28,256 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:56:28,257 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:56:28,257 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:56:33,144 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:26:28 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'971'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 12:56:33,145 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:56:33,146 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:56:33,148 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:56:33,149 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:56:33,161 - app.services.submission_service - INFO - Assignment 5 verified and accessible
2026-01-11 12:56:33,162 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-11 12:56:33,163 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 12:56:33,168 - sqlalchemy.engine.Engine - INFO - [cached since 7.842s ago] ('SUBMITTING', 7)
2026-01-11 12:56:33,171 - app.services.moodle_client - INFO - Saving submission for assignment 5 with item 278255252
2026-01-11 12:56:33,175 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:56:33,177 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:56:33,181 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:56:33,182 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:56:33,183 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:56:38,946 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:26:33 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 12:56:38,947 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:56:38,948 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:56:38,950 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:56:38,950 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:56:38,952 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-11 12:56:38,952 - app.services.moodle_client - INFO - Submission saved successfully for assignment 5
2026-01-11 12:56:38,953 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-11 12:56:38,957 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 12:56:38,958 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 12:56:38,962 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 12:56:38,963 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 12:56:38,964 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 12:56:39,061 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:26:38 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'971'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 12:56:39,063 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 12:56:39,064 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 12:56:39,066 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 12:56:39,071 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 12:56:39,074 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 10, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767794518, 'timemodified': 1768116393, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 5, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/37/assignsubmission_file/submission_files/10/212221230038_19AI550.pdf', 'timemodified': 1768116393, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-11 12:56:39,075 - app.services.submission_service - INFO - Submission status: submitted
2026-01-11 12:56:39,076 - app.services.submission_service - INFO - Submission ID: 10
2026-01-11 12:56:39,077 - app.services.submission_service - INFO - Submission timecreated: 1767794518
2026-01-11 12:56:39,078 - app.services.submission_service - INFO - Submission timemodified: 1768116393
2026-01-11 12:56:39,079 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-11 12:56:39,079 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-11 12:56:39,080 - app.services.submission_service - INFO - Can edit: True
2026-01-11 12:56:39,084 - app.services.submission_service - INFO - Can submit: False
2026-01-11 12:56:39,084 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-11 12:56:39,085 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI550.pdf']
2026-01-11 12:56:39,086 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-11 12:56:39,088 - httpcore.connection - DEBUG - close.started
2026-01-11 12:56:39,093 - httpcore.connection - DEBUG - close.complete
2026-01-11 12:56:39,094 - app.services.submission_service - INFO - Submission result: {'assignment_id': 5, 'steps_completed': ['upload', 'save'], 'item_id': 278255252, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '10', 'verified_files': ['212221230038_19AI550.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111072639'}
2026-01-11 12:56:39,095 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-11 12:56:39,098 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:56:39,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00594s] (7,)
2026-01-11 12:56:39,111 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-11 12:56:39,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00293s] ('COMPLETED', 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111072639', datetime.datetime(2026, 1, 11, 7, 26, 39, 108300), datetime.datetime(2026, 1, 11, 7, 26, 39, 108324), 7)
2026-01-11 12:56:39,119 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 12:56:39,121 - sqlalchemy.engine.Engine - INFO - [cached since 400.7s ago] (7,)
2026-01-11 12:56:39,123 - app.services.artifact_service - INFO - Artifact 7 marked as submitted
2026-01-11 12:56:39,125 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 12:56:39,128 - sqlalchemy.engine.Engine - INFO - [cached since 400.5s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', '{"assignment_id": 5, "steps_completed": ["upload", "save"], "item_id": 278255252, "save_result": {"success": true, "warnings": []}, "submission_statu ... (56 characters truncated) ... : ["212221230038_19AI550.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111072639"}', None, None)
2026-01-11 12:56:39,133 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:39,279 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:39,281 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:39,282 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:56:39,327 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:39,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:39,469 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:39,471 - sqlalchemy.engine.Engine - INFO - [cached since 1053s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:39,483 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:39,484 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] (datetime.datetime(2026, 1, 11, 7, 26, 39, 481905, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:39,488 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:39,508 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 12:56:39,667 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:39,669 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 12:56:39,672 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 12:56:39,738 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 12:56:39,739 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 12:56:39,744 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,746 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI406',)
2026-01-11 12:56:39,757 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,758 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI406',)
2026-01-11 12:56:39,763 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,764 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI411',)
2026-01-11 12:56:39,768 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,770 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI411',)
2026-01-11 12:56:39,774 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,775 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI405',)
2026-01-11 12:56:39,780 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,781 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI405',)
2026-01-11 12:56:39,787 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 12:56:39,788 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('19AI550',)
2026-01-11 12:56:39,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,017 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,018 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:40,019 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:40,029 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:40,030 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] (datetime.datetime(2026, 1, 11, 7, 26, 40, 28789, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:40,035 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,190 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:40,191 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 12:56:40,264 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,497 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,498 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:40,499 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:40,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,501 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:40,502 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:40,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,506 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 12:56:40,507 - sqlalchemy.engine.Engine - INFO - [cached since 1054s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 12:56:40,513 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:40,514 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (datetime.datetime(2026, 1, 11, 7, 26, 40, 513566, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:40,517 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:40,519 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (datetime.datetime(2026, 1, 11, 7, 26, 40, 517442, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:40,521 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 12:56:40,521 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] (datetime.datetime(2026, 1, 11, 7, 26, 40, 520635, tzinfo=datetime.timezone.utc), 89)
2026-01-11 12:56:40,524 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,527 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,530 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,680 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,683 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:40,685 - sqlalchemy.engine.Engine - INFO - [cached since 1018s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 12:56:40,864 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,866 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:40,868 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 12:56:40,875 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:40,877 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 12:56:40,879 - sqlalchemy.engine.Engine - INFO - [cached since 1019s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 12:56:40,937 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,942 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:40,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:56:43,731 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:56:43,735 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:56:43,736 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-11 12:56:43,750 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:56:43,752 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-11 12:56:43,794 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:56:43,796 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (50, 0)
2026-01-11 12:56:43,805 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:58:14,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:58:14,099 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:58:14,100 - sqlalchemy.engine.Engine - INFO - [cached since 1141s ago] (1,)
2026-01-11 12:58:14,110 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:58:14,115 - sqlalchemy.engine.Engine - INFO - [cached since 1141s ago] ()
2026-01-11 12:58:14,167 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:58:14,169 - sqlalchemy.engine.Engine - INFO - [cached since 1141s ago] (50, 0)
2026-01-11 12:58:14,176 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:58:20,756 - app.main - INFO - Shutting down Examination Middleware...
2026-01-11 12:58:20,757 - app.main - INFO - Database connections closed
2026-01-11 12:58:22,333 - app.main - INFO - Starting Examination Middleware...
2026-01-11 12:58:22,422 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 12:58:22,423 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:58:22,426 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 12:58:22,426 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:58:22,428 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 12:58:22,429 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 12:58:22,430 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:58:22,435 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,448 - sqlalchemy.engine.Engine - INFO - [generated in 0.01246s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,458 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,458 - sqlalchemy.engine.Engine - INFO - [cached since 0.02329s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,460 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,461 - sqlalchemy.engine.Engine - INFO - [cached since 0.0254s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,462 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,463 - sqlalchemy.engine.Engine - INFO - [cached since 0.02773s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,464 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,465 - sqlalchemy.engine.Engine - INFO - [cached since 0.02971s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,466 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,467 - sqlalchemy.engine.Engine - INFO - [cached since 0.03177s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,468 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 12:58:22,469 - sqlalchemy.engine.Engine - INFO - [cached since 0.03385s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 12:58:22,472 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 12:58:22,472 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('workflowstatus', 'pg_catalog')
2026-01-11 12:58:22,476 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 12:58:22,481 - app.main - INFO - Database tables created/verified
2026-01-11 12:58:22,481 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 12:58:22,482 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 12:58:22,484 - app.main - INFO - Examination Middleware started successfully
2026-01-11 12:58:46,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 12:58:46,664 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 12:58:46,665 - sqlalchemy.engine.Engine - INFO - [generated in 0.00161s] (1,)
2026-01-11 12:58:46,688 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 12:58:46,691 - sqlalchemy.engine.Engine - INFO - [generated in 0.00304s] ()
2026-01-11 12:58:46,752 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 12:58:46,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00287s] (50, 0)
2026-01-11 12:58:46,762 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:20,039 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,040 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 13:00:20,041 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-11 13:00:20,042 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,043 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-11 13:00:20,044 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-11 13:00:20,044 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,049 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,050 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:16384]
2026-01-11 13:00:20,052 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:184105]
2026-01-11 13:00:20,054 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,058 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,059 - python_multipart.multipart - DEBUG - Calling on_header_field with data[184149:184168]
2026-01-11 13:00:20,060 - python_multipart.multipart - DEBUG - Calling on_header_value with data[184170:184230]
2026-01-11 13:00:20,062 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,065 - python_multipart.multipart - DEBUG - Calling on_header_field with data[184232:184244]
2026-01-11 13:00:20,067 - python_multipart.multipart - DEBUG - Calling on_header_value with data[184246:184261]
2026-01-11 13:00:20,068 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,070 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,071 - python_multipart.multipart - DEBUG - Calling on_part_data with data[184265:212992]
2026-01-11 13:00:20,074 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:171604]
2026-01-11 13:00:20,075 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,079 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,084 - python_multipart.multipart - DEBUG - Calling on_header_field with data[171648:171667]
2026-01-11 13:00:20,088 - python_multipart.multipart - DEBUG - Calling on_header_value with data[171669:171729]
2026-01-11 13:00:20,092 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,094 - python_multipart.multipart - DEBUG - Calling on_header_field with data[171731:171743]
2026-01-11 13:00:20,097 - python_multipart.multipart - DEBUG - Calling on_header_value with data[171745:171760]
2026-01-11 13:00:20,099 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,100 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,102 - python_multipart.multipart - DEBUG - Calling on_part_data with data[171764:245760]
2026-01-11 13:00:20,104 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:126335]
2026-01-11 13:00:20,107 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,109 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,112 - python_multipart.multipart - DEBUG - Calling on_header_field with data[126379:126398]
2026-01-11 13:00:20,114 - python_multipart.multipart - DEBUG - Calling on_header_value with data[126400:126460]
2026-01-11 13:00:20,116 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,118 - python_multipart.multipart - DEBUG - Calling on_header_field with data[126462:126474]
2026-01-11 13:00:20,120 - python_multipart.multipart - DEBUG - Calling on_header_value with data[126476:126491]
2026-01-11 13:00:20,122 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,124 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,127 - python_multipart.multipart - DEBUG - Calling on_part_data with data[126495:262144]
2026-01-11 13:00:20,131 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:64682]
2026-01-11 13:00:20,132 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,134 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,135 - python_multipart.multipart - DEBUG - Calling on_header_field with data[64726:64745]
2026-01-11 13:00:20,137 - python_multipart.multipart - DEBUG - Calling on_header_value with data[64747:64807]
2026-01-11 13:00:20,139 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,142 - python_multipart.multipart - DEBUG - Calling on_header_field with data[64809:64821]
2026-01-11 13:00:20,145 - python_multipart.multipart - DEBUG - Calling on_header_value with data[64823:64838]
2026-01-11 13:00:20,147 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,148 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,151 - python_multipart.multipart - DEBUG - Calling on_part_data with data[64842:253486]
2026-01-11 13:00:20,152 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,154 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:00:20,156 - python_multipart.multipart - DEBUG - Calling on_header_field with data[253530:253549]
2026-01-11 13:00:20,157 - python_multipart.multipart - DEBUG - Calling on_header_value with data[253551:253581]
2026-01-11 13:00:20,160 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:00:20,163 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:00:20,164 - python_multipart.multipart - DEBUG - Calling on_part_data with data[253585:253593]
2026-01-11 13:00:20,166 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:00:20,168 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 13:00:20,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:20,394 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:20,396 - sqlalchemy.engine.Engine - INFO - [cached since 93.73s ago] (1,)
2026-01-11 13:00:20,405 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-11 13:00:20,414 - app.services.file_processor - INFO - Saved file: ./uploads/pending/fd50477930ed4c9cb3540133fc0b7f2a.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:00:20,418 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:00:20,420 - sqlalchemy.engine.Engine - INFO - [generated in 0.00208s] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-11 13:00:20,470 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-11 13:00:20,474 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:20,475 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] ('./uploads/pending/fd50477930ed4c9cb3540133fc0b7f2a.pdf', 4)
2026-01-11 13:00:20,485 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:20,486 - sqlalchemy.engine.Engine - INFO - [generated in 0.00157s] (4,)
2026-01-11 13:00:20,494 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI406
2026-01-11 13:00:20,501 - app.services.file_processor - INFO - Saved file: ./uploads/pending/2c231b581b6d4afd949c7f8bc3824026.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:00:20,503 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:00:20,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.08703s ago] ('c2551e3b4672a21f1a0ab25b2196e4fb',)
2026-01-11 13:00:20,508 - app.services.artifact_service - WARNING - Duplicate artifact detected: c2551e3b4672a21f1a0ab25b2196e4fb, updating with new file
2026-01-11 13:00:20,511 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:20,512 - sqlalchemy.engine.Engine - INFO - [cached since 0.03797s ago] ('./uploads/pending/2c231b581b6d4afd949c7f8bc3824026.pdf', 6)
2026-01-11 13:00:20,517 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:20,519 - sqlalchemy.engine.Engine - INFO - [cached since 0.03415s ago] (6,)
2026-01-11 13:00:20,523 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-11 13:00:20,532 - app.services.file_processor - INFO - Saved file: ./uploads/pending/19b577d20deb461c8dec878d46446d52.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:00:20,533 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:00:20,536 - sqlalchemy.engine.Engine - INFO - [cached since 0.1179s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-11 13:00:20,539 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-11 13:00:20,543 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:20,545 - sqlalchemy.engine.Engine - INFO - [cached since 0.07042s ago] ('./uploads/pending/19b577d20deb461c8dec878d46446d52.pdf', 5)
2026-01-11 13:00:20,548 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:20,549 - sqlalchemy.engine.Engine - INFO - [cached since 0.06456s ago] (5,)
2026-01-11 13:00:20,553 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI550
2026-01-11 13:00:20,561 - app.services.file_processor - INFO - Saved file: ./uploads/pending/5425fbcc559b4ceb94f6b4a05c2e0163.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:00:20,563 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:00:20,565 - sqlalchemy.engine.Engine - INFO - [cached since 0.1473s ago] ('162e03180b2b07f063b98f3a1249fc22',)
2026-01-11 13:00:20,568 - app.services.artifact_service - WARNING - Duplicate artifact detected: 162e03180b2b07f063b98f3a1249fc22, updating with new file
2026-01-11 13:00:20,572 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 13:00:20,575 - sqlalchemy.engine.Engine - INFO - [generated in 0.00312s] ('./uploads/pending/5425fbcc559b4ceb94f6b4a05c2e0163.pdf', 'PENDING', 7)
2026-01-11 13:00:20,581 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:20,584 - sqlalchemy.engine.Engine - INFO - [cached since 0.09877s ago] (7,)
2026-01-11 13:00:20,587 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-11 13:00:20,595 - app.services.file_processor - INFO - Saved file: ./uploads/pending/3339a25aace54de99bdeff12c9981340.pdf (hash: 69530c94d1cfd882...)
2026-01-11 13:00:20,597 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:00:20,599 - sqlalchemy.engine.Engine - INFO - [cached since 0.1814s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-11 13:00:20,602 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-11 13:00:20,603 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:20,606 - sqlalchemy.engine.Engine - INFO - [cached since 0.1315s ago] ('./uploads/pending/3339a25aace54de99bdeff12c9981340.pdf', 3)
2026-01-11 13:00:20,611 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:20,614 - sqlalchemy.engine.Engine - INFO - [cached since 0.1295s ago] (3,)
2026-01-11 13:00:20,621 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:00:20,623 - sqlalchemy.engine.Engine - INFO - [generated in 0.00186s] ('bulk_upload', 'upload', 'Bulk upload: 5 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 5, "successful": 5, "failed": 0}', 'null', None, None)
2026-01-11 13:00:20,631 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:20,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:20,794 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:20,796 - sqlalchemy.engine.Engine - INFO - [cached since 94.13s ago] (1,)
2026-01-11 13:00:20,804 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:20,808 - sqlalchemy.engine.Engine - INFO - [cached since 94.12s ago] ()
2026-01-11 13:00:20,846 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:20,847 - sqlalchemy.engine.Engine - INFO - [cached since 94.1s ago] (50, 0)
2026-01-11 13:00:20,853 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:23,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:23,546 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:23,547 - sqlalchemy.engine.Engine - INFO - [cached since 96.88s ago] (1,)
2026-01-11 13:00:23,558 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:23,561 - sqlalchemy.engine.Engine - INFO - [cached since 96.87s ago] ()
2026-01-11 13:00:23,601 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:23,602 - sqlalchemy.engine.Engine - INFO - [cached since 96.85s ago] (50, 0)
2026-01-11 13:00:23,611 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:26,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:26,893 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:26,902 - sqlalchemy.engine.Engine - INFO - [generated in 0.00916s] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:26,918 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:26,920 - sqlalchemy.engine.Engine - INFO - [generated in 0.00203s] (datetime.datetime(2026, 1, 11, 7, 30, 26, 916799, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:26,925 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:26,953 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:00:27,095 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,099 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:00:27,100 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:00:27,160 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:00:27,161 - sqlalchemy.engine.Engine - INFO - [generated in 0.00178s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:00:27,169 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,171 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] ('19AI550',)
2026-01-11 13:00:27,181 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.01258s ago] ('19AI550',)
2026-01-11 13:00:27,185 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.01711s ago] ('19AI406',)
2026-01-11 13:00:27,193 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.02579s ago] ('19AI406',)
2026-01-11 13:00:27,199 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.03151s ago] ('19AI411',)
2026-01-11 13:00:27,205 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,206 - sqlalchemy.engine.Engine - INFO - [cached since 0.03718s ago] ('19AI411',)
2026-01-11 13:00:27,211 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,213 - sqlalchemy.engine.Engine - INFO - [cached since 0.04368s ago] ('19AI405',)
2026-01-11 13:00:27,218 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:27,220 - sqlalchemy.engine.Engine - INFO - [cached since 0.05052s ago] ('19AI405',)
2026-01-11 13:00:27,225 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:27,395 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,398 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:27,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.5065s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:27,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,507 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:27,508 - sqlalchemy.engine.Engine - INFO - [cached since 0.6155s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:27,510 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:27,511 - sqlalchemy.engine.Engine - INFO - [cached since 0.5932s ago] (datetime.datetime(2026, 1, 11, 7, 30, 27, 510249, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:27,519 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:27,524 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:27,529 - sqlalchemy.engine.Engine - INFO - [cached since 0.6104s ago] (datetime.datetime(2026, 1, 11, 7, 30, 27, 523573, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:27,535 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:27,684 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,686 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:27,688 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:27,949 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,951 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:27,953 - sqlalchemy.engine.Engine - INFO - [cached since 1.06s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:27,962 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,964 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:27,969 - sqlalchemy.engine.Engine - INFO - [cached since 1.077s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:27,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:27,976 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:27,979 - sqlalchemy.engine.Engine - INFO - [cached since 0.2929s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:00:27,989 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:27,993 - sqlalchemy.engine.Engine - INFO - [cached since 1.075s ago] (datetime.datetime(2026, 1, 11, 7, 30, 27, 989141, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:27,998 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:28,000 - sqlalchemy.engine.Engine - INFO - [cached since 1.083s ago] (datetime.datetime(2026, 1, 11, 7, 30, 27, 997933, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:28,003 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,019 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:28,020 - sqlalchemy.engine.Engine - INFO - [cached since 7.546s ago] ('uploads/pending/5425fbcc559b4ceb94f6b4a05c2e0163.pdf', 7)
2026-01-11 13:00:28,024 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,032 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,045 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:28,046 - sqlalchemy.engine.Engine - INFO - [cached since 7.572s ago] ('uploads/pending/2c231b581b6d4afd949c7f8bc3824026.pdf', 6)
2026-01-11 13:00:28,063 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,176 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:28,178 - sqlalchemy.engine.Engine - INFO - [cached since 0.4918s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:00:28,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,296 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:28,298 - sqlalchemy.engine.Engine - INFO - [cached since 0.6122s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:00:28,374 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:28,374 - sqlalchemy.engine.Engine - INFO - [cached since 7.9s ago] ('uploads/pending/fd50477930ed4c9cb3540133fc0b7f2a.pdf', 4)
2026-01-11 13:00:28,377 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,474 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:28,475 - sqlalchemy.engine.Engine - INFO - [cached since 8.001s ago] ('uploads/pending/19b577d20deb461c8dec878d46446d52.pdf', 5)
2026-01-11 13:00:28,477 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,479 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:28,480 - sqlalchemy.engine.Engine - INFO - [cached since 1.587s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:28,574 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,584 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,587 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:28,589 - sqlalchemy.engine.Engine - INFO - [cached since 1.696s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:28,592 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:28,594 - sqlalchemy.engine.Engine - INFO - [cached since 1.676s ago] (datetime.datetime(2026, 1, 11, 7, 30, 28, 591881, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:28,610 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,618 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:28,619 - sqlalchemy.engine.Engine - INFO - [cached since 1.701s ago] (datetime.datetime(2026, 1, 11, 7, 30, 28, 617811, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:28,630 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:28,748 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,749 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:28,749 - sqlalchemy.engine.Engine - INFO - [cached since 1.857s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:28,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:28,939 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:28,940 - sqlalchemy.engine.Engine - INFO - [cached since 1.254s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:00:29,022 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:29,023 - sqlalchemy.engine.Engine - INFO - [cached since 2.105s ago] (datetime.datetime(2026, 1, 11, 7, 30, 29, 21795, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:29,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:29,025 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:29,026 - sqlalchemy.engine.Engine - INFO - [cached since 1.34s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:29,028 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:29,029 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:29,030 - sqlalchemy.engine.Engine - INFO - [cached since 2.137s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:29,034 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:29,042 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:29,043 - sqlalchemy.engine.Engine - INFO - [cached since 2.125s ago] (datetime.datetime(2026, 1, 11, 7, 30, 29, 41759, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:29,046 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:29,071 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:29,076 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:29,282 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:29,283 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:29,285 - sqlalchemy.engine.Engine - INFO - [cached since 1.598s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:00:29,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:29,292 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:29,294 - sqlalchemy.engine.Engine - INFO - [cached since 1.607s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:00:29,342 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:29,346 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:32,984 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:32,986 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:32,988 - sqlalchemy.engine.Engine - INFO - [cached since 6.095s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:33,002 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:33,003 - sqlalchemy.engine.Engine - INFO - [cached since 6.085s ago] (datetime.datetime(2026, 1, 11, 7, 30, 33, 1528, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:33,009 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:33,035 - app.api.routes.student - INFO - Submit attempt for f519994d-9d50-4d62-ae23-cf157d9de0d8 by register_number: 212221230038
2026-01-11 13:00:33,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:33,188 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:33,189 - sqlalchemy.engine.Engine - INFO - [cached since 5.503s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:33,226 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:00:33,227 - sqlalchemy.engine.Engine - INFO - [cached since 12.61s ago] ('submission_started', 'submit', 'Starting submission for assignment 5', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', 'null', None, None)
2026-01-11 13:00:33,233 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-11 13:00:33,235 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:33,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00153s] ('UPLOADING', 7)
2026-01-11 13:00:34,091 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI550.pdf (200331 bytes)
2026-01-11 13:00:34,099 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-11 13:00:34,110 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001C3ACD2C050>
2026-01-11 13:00:34,115 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,117 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:00:34,118 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,140 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:00:34,142 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,224 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:30:34 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Sun, 11 Jan 2026 07:30:34 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-11 13:00:34,226 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,227 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:00:34,229 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:00:34,230 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:00:34,232 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'itemid': 322103655, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI550.pdf";}', 'filesize': 200331}]
2026-01-11 13:00:34,233 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 322103655
2026-01-11 13:00:34,235 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:34,236 - sqlalchemy.engine.Engine - INFO - [generated in 0.00141s] (322103655, 7)
2026-01-11 13:00:34,248 - app.services.submission_service - INFO - Verifying assignment 5 exists and is accessible...
2026-01-11 13:00:34,254 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,256 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:00:34,257 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,261 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:00:34,262 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,406 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:30:34 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'663'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:00:34,407 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,407 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:00:34,409 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:00:34,410 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:00:34,411 - app.services.submission_service - INFO - Assignment 5 verified and accessible
2026-01-11 13:00:34,412 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-11 13:00:34,413 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:00:34,419 - sqlalchemy.engine.Engine - INFO - [cached since 1.184s ago] ('SUBMITTING', 7)
2026-01-11 13:00:34,423 - app.services.moodle_client - INFO - Saving submission for assignment 5 with item 322103655
2026-01-11 13:00:34,431 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,432 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:00:34,433 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,435 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:00:34,436 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,672 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:30:34 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:00:34,674 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,675 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:00:34,677 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:00:34,686 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:00:34,689 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-11 13:00:34,690 - app.services.moodle_client - INFO - Submission saved successfully for assignment 5
2026-01-11 13:00:34,690 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-11 13:00:34,703 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,706 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:00:34,707 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,708 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:00:34,709 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:00:34,803 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:30:34 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'971'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:00:34,806 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:00:34,807 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:00:34,813 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:00:34,815 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:00:34,820 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 10, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767794518, 'timemodified': 1768116634, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 5, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/37/assignsubmission_file/submission_files/10/212221230038_19AI550.pdf', 'timemodified': 1768116634, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-11 13:00:34,821 - app.services.submission_service - INFO - Submission status: submitted
2026-01-11 13:00:34,822 - app.services.submission_service - INFO - Submission ID: 10
2026-01-11 13:00:34,823 - app.services.submission_service - INFO - Submission timecreated: 1767794518
2026-01-11 13:00:34,824 - app.services.submission_service - INFO - Submission timemodified: 1768116634
2026-01-11 13:00:34,828 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-11 13:00:34,829 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-11 13:00:34,830 - app.services.submission_service - INFO - Can edit: True
2026-01-11 13:00:34,831 - app.services.submission_service - INFO - Can submit: False
2026-01-11 13:00:34,832 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-11 13:00:34,833 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI550.pdf']
2026-01-11 13:00:34,834 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-11 13:00:34,838 - httpcore.connection - DEBUG - close.started
2026-01-11 13:00:34,840 - httpcore.connection - DEBUG - close.complete
2026-01-11 13:00:34,843 - app.services.submission_service - INFO - Submission result: {'assignment_id': 5, 'steps_completed': ['upload', 'save'], 'item_id': 322103655, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '10', 'verified_files': ['212221230038_19AI550.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073034'}
2026-01-11 13:00:34,843 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-11 13:00:34,847 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:34,848 - sqlalchemy.engine.Engine - INFO - [generated in 0.00156s] (7,)
2026-01-11 13:00:34,854 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-11 13:00:34,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] ('COMPLETED', 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073034', datetime.datetime(2026, 1, 11, 7, 30, 34, 852546), datetime.datetime(2026, 1, 11, 7, 30, 34, 852570), 7)
2026-01-11 13:00:34,863 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:00:34,864 - sqlalchemy.engine.Engine - INFO - [cached since 14.38s ago] (7,)
2026-01-11 13:00:34,867 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:34,875 - app.services.artifact_service - INFO - Artifact 7 marked as submitted
2026-01-11 13:00:35,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:35,014 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:00:35,015 - sqlalchemy.engine.Engine - INFO - [cached since 14.39s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', '{"assignment_id": 5, "steps_completed": ["upload", "save"], "item_id": 322103655, "save_result": {"success": true, "warnings": []}, "submission_statu ... (56 characters truncated) ... : ["212221230038_19AI550.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073034"}', None, None)
2026-01-11 13:00:35,039 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:35,196 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:35,199 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:35,200 - sqlalchemy.engine.Engine - INFO - [cached since 7.514s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:35,236 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:35,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:35,394 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:35,396 - sqlalchemy.engine.Engine - INFO - [cached since 8.503s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:35,407 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:35,408 - sqlalchemy.engine.Engine - INFO - [cached since 8.49s ago] (datetime.datetime(2026, 1, 11, 7, 30, 35, 407066, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:35,412 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:35,418 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:00:35,566 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:35,568 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:00:35,570 - sqlalchemy.engine.Engine - INFO - [cached since 8.471s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:00:35,617 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:00:35,625 - sqlalchemy.engine.Engine - INFO - [cached since 8.466s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:00:35,635 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,638 - sqlalchemy.engine.Engine - INFO - [cached since 8.468s ago] ('19AI406',)
2026-01-11 13:00:35,652 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,655 - sqlalchemy.engine.Engine - INFO - [cached since 8.485s ago] ('19AI406',)
2026-01-11 13:00:35,662 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,666 - sqlalchemy.engine.Engine - INFO - [cached since 8.497s ago] ('19AI411',)
2026-01-11 13:00:35,672 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,677 - sqlalchemy.engine.Engine - INFO - [cached since 8.508s ago] ('19AI411',)
2026-01-11 13:00:35,684 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,689 - sqlalchemy.engine.Engine - INFO - [cached since 8.52s ago] ('19AI405',)
2026-01-11 13:00:35,698 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,702 - sqlalchemy.engine.Engine - INFO - [cached since 8.533s ago] ('19AI405',)
2026-01-11 13:00:35,710 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:00:35,715 - sqlalchemy.engine.Engine - INFO - [cached since 8.546s ago] ('19AI550',)
2026-01-11 13:00:35,723 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:35,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:35,940 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:35,941 - sqlalchemy.engine.Engine - INFO - [cached since 9.048s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:35,948 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:35,949 - sqlalchemy.engine.Engine - INFO - [cached since 9.031s ago] (datetime.datetime(2026, 1, 11, 7, 30, 35, 948176, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:35,953 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,058 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:36,059 - sqlalchemy.engine.Engine - INFO - [cached since 9.166s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:36,077 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:36,078 - sqlalchemy.engine.Engine - INFO - [cached since 9.16s ago] (datetime.datetime(2026, 1, 11, 7, 30, 36, 77072, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:36,083 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,235 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:36,237 - sqlalchemy.engine.Engine - INFO - [cached since 8.551s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:00:36,509 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,511 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:36,512 - sqlalchemy.engine.Engine - INFO - [cached since 8.826s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:00:36,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,516 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:36,518 - sqlalchemy.engine.Engine - INFO - [cached since 9.625s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:36,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,524 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:36,526 - sqlalchemy.engine.Engine - INFO - [cached since 9.633s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:36,537 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:36,539 - sqlalchemy.engine.Engine - INFO - [cached since 9.621s ago] (datetime.datetime(2026, 1, 11, 7, 30, 36, 537581, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:36,544 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:36,545 - sqlalchemy.engine.Engine - INFO - [cached since 9.627s ago] (datetime.datetime(2026, 1, 11, 7, 30, 36, 543545, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:36,549 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,567 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,573 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,579 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:36,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,836 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:36,838 - sqlalchemy.engine.Engine - INFO - [cached since 9.152s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:00:36,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:36,844 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:36,845 - sqlalchemy.engine.Engine - INFO - [cached since 9.159s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:37,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,022 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:37,023 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:37,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,027 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:37,029 - sqlalchemy.engine.Engine - INFO - [cached since 10.14s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:37,041 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:37,042 - sqlalchemy.engine.Engine - INFO - [cached since 10.12s ago] (datetime.datetime(2026, 1, 11, 7, 30, 37, 40969, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:37,046 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:37,049 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (datetime.datetime(2026, 1, 11, 7, 30, 37, 45575, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:37,053 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,068 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,074 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,079 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,318 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,319 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:37,320 - sqlalchemy.engine.Engine - INFO - [cached since 9.634s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:00:37,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,545 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:37,546 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:37,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,550 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:37,551 - sqlalchemy.engine.Engine - INFO - [cached since 9.865s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:00:37,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,556 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:00:37,557 - sqlalchemy.engine.Engine - INFO - [cached since 10.66s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:00:37,566 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:37,566 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] (datetime.datetime(2026, 1, 11, 7, 30, 37, 565680, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:37,568 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:00:37,569 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] (datetime.datetime(2026, 1, 11, 7, 30, 37, 568437, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:00:37,571 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,574 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,601 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,606 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,807 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:37,808 - sqlalchemy.engine.Engine - INFO - [cached since 10.12s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:00:37,810 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:37,811 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:00:37,813 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:00:37,853 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:37,857 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:38,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:38,986 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:38,987 - sqlalchemy.engine.Engine - INFO - [cached since 112.3s ago] (1,)
2026-01-11 13:00:38,996 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:38,999 - sqlalchemy.engine.Engine - INFO - [cached since 112.3s ago] ()
2026-01-11 13:00:39,036 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:39,039 - sqlalchemy.engine.Engine - INFO - [cached since 112.3s ago] (50, 0)
2026-01-11 13:00:39,044 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:42,221 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:42,223 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:42,224 - sqlalchemy.engine.Engine - INFO - [cached since 115.6s ago] (1,)
2026-01-11 13:00:42,235 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:42,236 - sqlalchemy.engine.Engine - INFO - [cached since 115.5s ago] ()
2026-01-11 13:00:42,282 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:42,284 - sqlalchemy.engine.Engine - INFO - [cached since 115.5s ago] (50, 0)
2026-01-11 13:00:42,290 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:43,191 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:43,192 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:43,193 - sqlalchemy.engine.Engine - INFO - [cached since 116.5s ago] (1,)
2026-01-11 13:00:43,202 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:43,203 - sqlalchemy.engine.Engine - INFO - [cached since 116.5s ago] ()
2026-01-11 13:00:43,245 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:43,247 - sqlalchemy.engine.Engine - INFO - [cached since 116.5s ago] (50, 0)
2026-01-11 13:00:43,257 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:43,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:43,878 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:43,879 - sqlalchemy.engine.Engine - INFO - [cached since 117.2s ago] (1,)
2026-01-11 13:00:43,888 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:43,890 - sqlalchemy.engine.Engine - INFO - [cached since 117.2s ago] ()
2026-01-11 13:00:43,938 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:43,941 - sqlalchemy.engine.Engine - INFO - [cached since 117.2s ago] (50, 0)
2026-01-11 13:00:43,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:44,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:44,389 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:44,391 - sqlalchemy.engine.Engine - INFO - [cached since 117.7s ago] (1,)
2026-01-11 13:00:44,398 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:44,400 - sqlalchemy.engine.Engine - INFO - [cached since 117.7s ago] ()
2026-01-11 13:00:44,428 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:44,431 - sqlalchemy.engine.Engine - INFO - [cached since 117.7s ago] (50, 0)
2026-01-11 13:00:44,437 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:44,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:44,578 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:44,579 - sqlalchemy.engine.Engine - INFO - [cached since 117.9s ago] (1,)
2026-01-11 13:00:44,587 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:44,592 - sqlalchemy.engine.Engine - INFO - [cached since 117.9s ago] ()
2026-01-11 13:00:44,639 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:44,642 - sqlalchemy.engine.Engine - INFO - [cached since 117.9s ago] (50, 0)
2026-01-11 13:00:44,648 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:44,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:44,796 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:44,797 - sqlalchemy.engine.Engine - INFO - [cached since 118.1s ago] (1,)
2026-01-11 13:00:44,805 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:44,806 - sqlalchemy.engine.Engine - INFO - [cached since 118.1s ago] ()
2026-01-11 13:00:44,851 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:44,853 - sqlalchemy.engine.Engine - INFO - [cached since 118.1s ago] (50, 0)
2026-01-11 13:00:44,858 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:00:45,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:00:45,002 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:00:45,003 - sqlalchemy.engine.Engine - INFO - [cached since 118.3s ago] (1,)
2026-01-11 13:00:45,010 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:00:45,012 - sqlalchemy.engine.Engine - INFO - [cached since 118.3s ago] ()
2026-01-11 13:00:45,047 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:00:45,049 - sqlalchemy.engine.Engine - INFO - [cached since 118.3s ago] (50, 0)
2026-01-11 13:00:45,054 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:01:47,533 - app.main - INFO - Shutting down Examination Middleware...
2026-01-11 13:01:47,534 - app.main - INFO - Database connections closed
2026-01-11 13:01:48,986 - app.main - INFO - Starting Examination Middleware...
2026-01-11 13:01:49,067 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 13:01:49,068 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:01:49,071 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 13:01:49,072 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:01:49,075 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 13:01:49,075 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:01:49,078 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:01:49,081 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,082 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,090 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,091 - sqlalchemy.engine.Engine - INFO - [cached since 0.01029s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,093 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,093 - sqlalchemy.engine.Engine - INFO - [cached since 0.01245s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,095 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,095 - sqlalchemy.engine.Engine - INFO - [cached since 0.01467s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,097 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.01645s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,098 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,099 - sqlalchemy.engine.Engine - INFO - [cached since 0.01831s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,100 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:01:49,101 - sqlalchemy.engine.Engine - INFO - [cached since 0.01983s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:01:49,103 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 13:01:49,103 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ('workflowstatus', 'pg_catalog')
2026-01-11 13:01:49,107 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:01:49,111 - app.main - INFO - Database tables created/verified
2026-01-11 13:01:49,112 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 13:01:49,113 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 13:01:49,113 - app.main - INFO - Examination Middleware started successfully
2026-01-11 13:02:35,543 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:35,577 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:02:35,579 - sqlalchemy.engine.Engine - INFO - [generated in 0.00297s] (1,)
2026-01-11 13:02:35,599 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:02:35,601 - sqlalchemy.engine.Engine - INFO - [generated in 0.00258s] ()
2026-01-11 13:02:35,654 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:02:35,656 - sqlalchemy.engine.Engine - INFO - [generated in 0.00271s] (50, 0)
2026-01-11 13:02:35,666 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:47,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:47,768 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:47,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:47,791 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:47,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00236s] (datetime.datetime(2026, 1, 11, 7, 32, 47, 788301, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:47,802 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:47,827 - app.api.routes.student - INFO - Submit attempt for 875568b4-9178-4f37-b8bf-42678001475f by register_number: 212221230038
2026-01-11 13:02:47,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:47,994 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:47,996 - sqlalchemy.engine.Engine - INFO - [generated in 0.00219s] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:02:48,059 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:02:48,061 - sqlalchemy.engine.Engine - INFO - [generated in 0.00274s] ('submission_started', 'submit', 'Starting submission for assignment 2', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', 'null', None, None)
2026-01-11 13:02:48,070 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-11 13:02:48,076 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:02:48,077 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] ('UPLOADING', 4)
2026-01-11 13:02:49,018 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI405.pdf (200331 bytes)
2026-01-11 13:02:49,039 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-11 13:02:49,047 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001AD57F23620>
2026-01-11 13:02:49,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,056 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:02:49,057 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,063 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:02:49,063 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,175 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:32:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Sun, 11 Jan 2026 07:32:49 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-11 13:02:49,177 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,177 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:02:49,180 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:02:49,180 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:02:49,184 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'itemid': 525686750, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI405.pdf";}', 'filesize': 200331}]
2026-01-11 13:02:49,188 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 525686750
2026-01-11 13:02:49,192 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:02:49,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00470s] (525686750, 4)
2026-01-11 13:02:49,205 - app.services.submission_service - INFO - Verifying assignment 2 exists and is accessible...
2026-01-11 13:02:49,212 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,215 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:02:49,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,217 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:02:49,218 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:32:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'662'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:02:49,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,350 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:02:49,352 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:02:49,353 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:02:49,355 - app.services.submission_service - INFO - Assignment 2 verified and accessible
2026-01-11 13:02:49,357 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-11 13:02:49,361 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:02:49,364 - sqlalchemy.engine.Engine - INFO - [cached since 1.288s ago] ('SUBMITTING', 4)
2026-01-11 13:02:49,367 - app.services.moodle_client - INFO - Saving submission for assignment 2 with item 525686750
2026-01-11 13:02:49,375 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,376 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:02:49,377 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,378 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:02:49,379 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,590 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:32:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:02:49,591 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,591 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:02:49,594 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:02:49,594 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:02:49,597 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-11 13:02:49,597 - app.services.moodle_client - INFO - Submission saved successfully for assignment 2
2026-01-11 13:02:49,598 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-11 13:02:49,610 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,612 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:02:49,613 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,614 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:02:49,615 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:02:49,697 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:32:49 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'969'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:02:49,699 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:02:49,699 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:02:49,702 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:02:49,702 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:02:49,704 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 4, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767365566, 'timemodified': 1768116769, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 2, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI405.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/17/assignsubmission_file/submission_files/4/212221230038_19AI405.pdf', 'timemodified': 1768116769, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-11 13:02:49,705 - app.services.submission_service - INFO - Submission status: submitted
2026-01-11 13:02:49,705 - app.services.submission_service - INFO - Submission ID: 4
2026-01-11 13:02:49,706 - app.services.submission_service - INFO - Submission timecreated: 1767365566
2026-01-11 13:02:49,707 - app.services.submission_service - INFO - Submission timemodified: 1768116769
2026-01-11 13:02:49,708 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-11 13:02:49,708 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-11 13:02:49,709 - app.services.submission_service - INFO - Can edit: True
2026-01-11 13:02:49,710 - app.services.submission_service - INFO - Can submit: False
2026-01-11 13:02:49,711 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-11 13:02:49,713 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI405.pdf']
2026-01-11 13:02:49,714 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-11 13:02:49,716 - httpcore.connection - DEBUG - close.started
2026-01-11 13:02:49,717 - httpcore.connection - DEBUG - close.complete
2026-01-11 13:02:49,718 - app.services.submission_service - INFO - Submission result: {'assignment_id': 2, 'steps_completed': ['upload', 'save'], 'item_id': 525686750, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '4', 'verified_files': ['212221230038_19AI405.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260111073249'}
2026-01-11 13:02:49,719 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-11 13:02:49,723 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:02:49,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00462s] (4,)
2026-01-11 13:02:49,734 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-11 13:02:49,735 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] ('COMPLETED', 'TXN_875568b4-9178-4f37-b8bf-42678001475f_20260111073249', datetime.datetime(2026, 1, 11, 7, 32, 49, 732820, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 1, 11, 7, 32, 49, 732820, tzinfo=datetime.timezone.utc), 4)
2026-01-11 13:02:49,745 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:02:49,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00169s] (4,)
2026-01-11 13:02:49,749 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:49,756 - app.services.artifact_service - INFO - Artifact 4 marked as submitted
2026-01-11 13:02:49,900 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:49,903 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:02:49,905 - sqlalchemy.engine.Engine - INFO - [cached since 1.846s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 4, None, None, 'null', '{"assignment_id": 2, "steps_completed": ["upload", "save"], "item_id": 525686750, "save_result": {"success": true, "warnings": []}, "submission_statu ... (55 characters truncated) ... : ["212221230038_19AI405.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_875568b4-9178-4f37-b8bf-42678001475f_20260111073249"}', None, None)
2026-01-11 13:02:49,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:50,091 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:50,092 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:50,094 - sqlalchemy.engine.Engine - INFO - [cached since 2.1s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:02:50,129 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:50,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:50,291 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:50,292 - sqlalchemy.engine.Engine - INFO - [cached since 2.524s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:50,301 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:50,303 - sqlalchemy.engine.Engine - INFO - [cached since 2.512s ago] (datetime.datetime(2026, 1, 11, 7, 32, 50, 300979, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:50,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:50,331 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:02:50,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:50,498 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:02:50,504 - sqlalchemy.engine.Engine - INFO - [generated in 0.00638s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:02:50,545 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:02:50,546 - sqlalchemy.engine.Engine - INFO - [generated in 0.00205s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:02:50,557 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('19AI406',)
2026-01-11 13:02:50,565 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,568 - sqlalchemy.engine.Engine - INFO - [cached since 0.0108s ago] ('19AI406',)
2026-01-11 13:02:50,571 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,575 - sqlalchemy.engine.Engine - INFO - [cached since 0.01805s ago] ('19AI411',)
2026-01-11 13:02:50,579 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,580 - sqlalchemy.engine.Engine - INFO - [cached since 0.02335s ago] ('19AI411',)
2026-01-11 13:02:50,584 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,585 - sqlalchemy.engine.Engine - INFO - [cached since 0.0284s ago] ('19AI405',)
2026-01-11 13:02:50,590 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:02:50,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.03579s ago] ('19AI550',)
2026-01-11 13:02:50,597 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:50,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:50,814 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:50,815 - sqlalchemy.engine.Engine - INFO - [cached since 3.047s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:50,826 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:50,827 - sqlalchemy.engine.Engine - INFO - [cached since 3.036s ago] (datetime.datetime(2026, 1, 11, 7, 32, 50, 825571, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:50,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,025 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:51,027 - sqlalchemy.engine.Engine - INFO - [cached since 3.034s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:02:51,081 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,341 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,343 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:51,344 - sqlalchemy.engine.Engine - INFO - [cached since 3.577s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:51,347 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,359 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:51,360 - sqlalchemy.engine.Engine - INFO - [cached since 3.593s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:51,363 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,367 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:02:51,369 - sqlalchemy.engine.Engine - INFO - [cached since 3.601s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:02:51,400 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:51,401 - sqlalchemy.engine.Engine - INFO - [cached since 3.61s ago] (datetime.datetime(2026, 1, 11, 7, 32, 51, 399407, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:51,405 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:51,407 - sqlalchemy.engine.Engine - INFO - [cached since 3.616s ago] (datetime.datetime(2026, 1, 11, 7, 32, 51, 404807, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:51,419 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:02:51,421 - sqlalchemy.engine.Engine - INFO - [cached since 3.63s ago] (datetime.datetime(2026, 1, 11, 7, 32, 51, 418960, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:02:51,427 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,445 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,452 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,678 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:51,681 - sqlalchemy.engine.Engine - INFO - [cached since 3.687s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:02:51,758 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,758 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:51,759 - sqlalchemy.engine.Engine - INFO - [cached since 3.766s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:02:51,762 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:51,763 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:02:51,764 - sqlalchemy.engine.Engine - INFO - [cached since 3.771s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:02:51,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,815 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:51,820 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:02:55,235 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:02:55,238 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:02:55,239 - sqlalchemy.engine.Engine - INFO - [cached since 19.66s ago] (1,)
2026-01-11 13:02:55,253 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:02:55,255 - sqlalchemy.engine.Engine - INFO - [cached since 19.66s ago] ()
2026-01-11 13:02:55,309 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:02:55,311 - sqlalchemy.engine.Engine - INFO - [cached since 19.66s ago] (50, 0)
2026-01-11 13:02:55,317 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:20,239 - app.main - INFO - Shutting down Examination Middleware...
2026-01-11 13:03:20,240 - app.main - INFO - Database connections closed
2026-01-11 13:03:22,003 - app.main - INFO - Starting Examination Middleware...
2026-01-11 13:03:22,076 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 13:03:22,076 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:03:22,079 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 13:03:22,079 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:03:22,081 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 13:03:22,082 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:03:22,083 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:22,087 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,088 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,095 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,095 - sqlalchemy.engine.Engine - INFO - [cached since 0.008676s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,096 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,097 - sqlalchemy.engine.Engine - INFO - [cached since 0.01018s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,098 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,098 - sqlalchemy.engine.Engine - INFO - [cached since 0.01151s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,099 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,099 - sqlalchemy.engine.Engine - INFO - [cached since 0.01282s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,101 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,101 - sqlalchemy.engine.Engine - INFO - [cached since 0.01425s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,102 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:03:22,102 - sqlalchemy.engine.Engine - INFO - [cached since 0.01573s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:03:22,105 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 13:03:22,106 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] ('workflowstatus', 'pg_catalog')
2026-01-11 13:03:22,109 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:22,112 - app.main - INFO - Database tables created/verified
2026-01-11 13:03:22,113 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 13:03:22,113 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 13:03:22,114 - app.main - INFO - Examination Middleware started successfully
2026-01-11 13:03:47,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:47,954 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:47,959 - sqlalchemy.engine.Engine - INFO - [generated in 0.00523s] (1,)
2026-01-11 13:03:47,975 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:47,976 - sqlalchemy.engine.Engine - INFO - [generated in 0.00150s] ()
2026-01-11 13:03:48,023 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:48,025 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] (50, 0)
2026-01-11 13:03:48,030 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:48,714 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:48,716 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:48,717 - sqlalchemy.engine.Engine - INFO - [cached since 0.7626s ago] (1,)
2026-01-11 13:03:48,725 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:48,727 - sqlalchemy.engine.Engine - INFO - [cached since 0.7522s ago] ()
2026-01-11 13:03:48,779 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:48,780 - sqlalchemy.engine.Engine - INFO - [cached since 0.7572s ago] (50, 0)
2026-01-11 13:03:48,787 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:49,312 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:49,313 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:49,314 - sqlalchemy.engine.Engine - INFO - [cached since 1.36s ago] (1,)
2026-01-11 13:03:49,324 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:49,325 - sqlalchemy.engine.Engine - INFO - [cached since 1.35s ago] ()
2026-01-11 13:03:49,368 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:49,379 - sqlalchemy.engine.Engine - INFO - [cached since 1.355s ago] (50, 0)
2026-01-11 13:03:49,387 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:49,912 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:49,913 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:49,914 - sqlalchemy.engine.Engine - INFO - [cached since 1.96s ago] (1,)
2026-01-11 13:03:49,925 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:49,928 - sqlalchemy.engine.Engine - INFO - [cached since 1.953s ago] ()
2026-01-11 13:03:49,976 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:49,977 - sqlalchemy.engine.Engine - INFO - [cached since 1.954s ago] (50, 0)
2026-01-11 13:03:49,984 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:50,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:50,810 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:50,811 - sqlalchemy.engine.Engine - INFO - [cached since 2.857s ago] (1,)
2026-01-11 13:03:50,825 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:50,828 - sqlalchemy.engine.Engine - INFO - [cached since 2.853s ago] ()
2026-01-11 13:03:50,872 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:50,874 - sqlalchemy.engine.Engine - INFO - [cached since 2.851s ago] (50, 0)
2026-01-11 13:03:50,880 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:03:51,438 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:03:51,440 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:03:51,441 - sqlalchemy.engine.Engine - INFO - [cached since 3.487s ago] (1,)
2026-01-11 13:03:51,452 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:03:51,459 - sqlalchemy.engine.Engine - INFO - [cached since 3.484s ago] ()
2026-01-11 13:03:51,509 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:03:51,511 - sqlalchemy.engine.Engine - INFO - [cached since 3.487s ago] (50, 0)
2026-01-11 13:03:51,517 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:13,843 - app.main - INFO - Shutting down Examination Middleware...
2026-01-11 13:04:13,844 - app.main - INFO - Database connections closed
2026-01-11 13:04:15,838 - app.main - INFO - Starting Examination Middleware...
2026-01-11 13:04:15,934 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 13:04:15,934 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:04:15,937 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 13:04:15,938 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:04:15,941 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 13:04:15,941 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:04:15,943 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:15,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,949 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,959 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,961 - sqlalchemy.engine.Engine - INFO - [cached since 0.01279s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,963 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,963 - sqlalchemy.engine.Engine - INFO - [cached since 0.01515s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,966 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,967 - sqlalchemy.engine.Engine - INFO - [cached since 0.01911s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,969 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,970 - sqlalchemy.engine.Engine - INFO - [cached since 0.02212s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,972 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,973 - sqlalchemy.engine.Engine - INFO - [cached since 0.02455s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,975 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:04:15,976 - sqlalchemy.engine.Engine - INFO - [cached since 0.02797s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:04:15,979 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 13:04:15,980 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('workflowstatus', 'pg_catalog')
2026-01-11 13:04:15,985 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:15,993 - app.main - INFO - Database tables created/verified
2026-01-11 13:04:15,994 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 13:04:15,995 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 13:04:15,996 - app.main - INFO - Examination Middleware started successfully
2026-01-11 13:04:43,483 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:43,511 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:04:43,514 - sqlalchemy.engine.Engine - INFO - [generated in 0.00308s] (1,)
2026-01-11 13:04:43,530 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:04:43,535 - sqlalchemy.engine.Engine - INFO - [generated in 0.00445s] ()
2026-01-11 13:04:43,586 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:04:43,588 - sqlalchemy.engine.Engine - INFO - [generated in 0.00257s] (50, 0)
2026-01-11 13:04:43,598 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:45,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:45,688 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:04:45,689 - sqlalchemy.engine.Engine - INFO - [cached since 2.179s ago] (1,)
2026-01-11 13:04:45,700 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:04:45,703 - sqlalchemy.engine.Engine - INFO - [cached since 2.173s ago] ()
2026-01-11 13:04:45,741 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:04:45,743 - sqlalchemy.engine.Engine - INFO - [cached since 2.157s ago] (50, 0)
2026-01-11 13:04:45,749 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:47,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:47,149 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:04:47,150 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:04:47,166 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:04:47,170 - sqlalchemy.engine.Engine - INFO - [generated in 0.00379s] (datetime.datetime(2026, 1, 11, 7, 34, 47, 163438, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:04:47,176 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:47,199 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:04:47,338 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:47,342 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:04:47,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00178s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:04:47,409 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:04:47,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:04:47,418 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,424 - sqlalchemy.engine.Engine - INFO - [generated in 0.00645s] ('19AI406',)
2026-01-11 13:04:47,435 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,437 - sqlalchemy.engine.Engine - INFO - [cached since 0.01968s ago] ('19AI406',)
2026-01-11 13:04:47,442 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,444 - sqlalchemy.engine.Engine - INFO - [cached since 0.02699s ago] ('19AI411',)
2026-01-11 13:04:47,448 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,450 - sqlalchemy.engine.Engine - INFO - [cached since 0.03229s ago] ('19AI411',)
2026-01-11 13:04:47,457 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,460 - sqlalchemy.engine.Engine - INFO - [cached since 0.04235s ago] ('19AI405',)
2026-01-11 13:04:47,464 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:04:47,466 - sqlalchemy.engine.Engine - INFO - [cached since 0.0483s ago] ('19AI550',)
2026-01-11 13:04:47,471 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:47,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:47,624 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:04:47,625 - sqlalchemy.engine.Engine - INFO - [cached since 0.4763s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:04:47,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:47,721 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:04:47,723 - sqlalchemy.engine.Engine - INFO - [cached since 0.5743s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:04:47,726 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:04:47,735 - sqlalchemy.engine.Engine - INFO - [cached since 0.5687s ago] (datetime.datetime(2026, 1, 11, 7, 34, 47, 725389, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:04:47,739 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:47,752 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:04:47,752 - sqlalchemy.engine.Engine - INFO - [cached since 0.5862s ago] (datetime.datetime(2026, 1, 11, 7, 34, 47, 751732, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:04:47,763 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:47,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:47,918 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:04:47,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00147s] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:04:48,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:48,164 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:04:48,166 - sqlalchemy.engine.Engine - INFO - [cached since 1.017s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:04:48,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:48,176 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:04:48,178 - sqlalchemy.engine.Engine - INFO - [cached since 1.029s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:04:48,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:48,189 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:04:48,194 - sqlalchemy.engine.Engine - INFO - [cached since 0.2768s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:04:48,201 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:04:48,203 - sqlalchemy.engine.Engine - INFO - [cached since 1.037s ago] (datetime.datetime(2026, 1, 11, 7, 34, 48, 201630, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:04:48,208 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:04:48,209 - sqlalchemy.engine.Engine - INFO - [cached since 1.043s ago] (datetime.datetime(2026, 1, 11, 7, 34, 48, 208385, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:04:48,227 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:48,231 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:48,269 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:48,276 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:48,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:48,494 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:04:48,495 - sqlalchemy.engine.Engine - INFO - [cached since 0.5775s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:04:48,508 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:48,509 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:04:48,510 - sqlalchemy.engine.Engine - INFO - [cached since 0.5929s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:04:48,551 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:48,555 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:58,239 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,240 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 13:04:58,241 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-11 13:04:58,241 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,242 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-11 13:04:58,242 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-11 13:04:58,243 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,244 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,244 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:196608]
2026-01-11 13:04:58,246 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:3881]
2026-01-11 13:04:58,248 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,249 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,252 - python_multipart.multipart - DEBUG - Calling on_header_field with data[3925:3944]
2026-01-11 13:04:58,253 - python_multipart.multipart - DEBUG - Calling on_header_value with data[3946:4006]
2026-01-11 13:04:58,254 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,255 - python_multipart.multipart - DEBUG - Calling on_header_field with data[4008:4020]
2026-01-11 13:04:58,256 - python_multipart.multipart - DEBUG - Calling on_header_value with data[4022:4037]
2026-01-11 13:04:58,259 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,261 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,262 - python_multipart.multipart - DEBUG - Calling on_part_data with data[4041:204372]
2026-01-11 13:04:58,263 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,264 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,266 - python_multipart.multipart - DEBUG - Calling on_header_field with data[204416:204435]
2026-01-11 13:04:58,268 - python_multipart.multipart - DEBUG - Calling on_header_value with data[204437:204497]
2026-01-11 13:04:58,270 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,272 - python_multipart.multipart - DEBUG - Calling on_header_field with data[204499:204511]
2026-01-11 13:04:58,275 - python_multipart.multipart - DEBUG - Calling on_header_value with data[204513:204528]
2026-01-11 13:04:58,276 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,277 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,278 - python_multipart.multipart - DEBUG - Calling on_part_data with data[204532:245760]
2026-01-11 13:04:58,280 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:159103]
2026-01-11 13:04:58,281 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,282 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,283 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159147:159166]
2026-01-11 13:04:58,284 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159168:159228]
2026-01-11 13:04:58,285 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,286 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159230:159242]
2026-01-11 13:04:58,289 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159244:159259]
2026-01-11 13:04:58,291 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,292 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,293 - python_multipart.multipart - DEBUG - Calling on_part_data with data[159263:262144]
2026-01-11 13:04:58,294 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:97450]
2026-01-11 13:04:58,295 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,296 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,298 - python_multipart.multipart - DEBUG - Calling on_header_field with data[97494:97513]
2026-01-11 13:04:58,298 - python_multipart.multipart - DEBUG - Calling on_header_value with data[97515:97575]
2026-01-11 13:04:58,299 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,300 - python_multipart.multipart - DEBUG - Calling on_header_field with data[97577:97589]
2026-01-11 13:04:58,301 - python_multipart.multipart - DEBUG - Calling on_header_value with data[97591:97606]
2026-01-11 13:04:58,302 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,305 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,306 - python_multipart.multipart - DEBUG - Calling on_part_data with data[97610:262144]
2026-01-11 13:04:58,309 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:24110]
2026-01-11 13:04:58,310 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,310 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:04:58,311 - python_multipart.multipart - DEBUG - Calling on_header_field with data[24154:24173]
2026-01-11 13:04:58,312 - python_multipart.multipart - DEBUG - Calling on_header_value with data[24175:24205]
2026-01-11 13:04:58,313 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:04:58,313 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:04:58,314 - python_multipart.multipart - DEBUG - Calling on_part_data with data[24209:24217]
2026-01-11 13:04:58,315 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:04:58,317 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 13:04:58,456 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:58,458 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:04:58,459 - sqlalchemy.engine.Engine - INFO - [cached since 14.95s ago] (1,)
2026-01-11 13:04:58,468 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-11 13:04:58,479 - app.services.file_processor - INFO - Saved file: ./uploads/pending/3dbe936090da47b5881c3200f7ab5294.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:04:58,485 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:04:58,490 - sqlalchemy.engine.Engine - INFO - [generated in 0.00440s] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-11 13:04:58,537 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-11 13:04:58,540 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 13:04:58,541 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] ('./uploads/pending/3dbe936090da47b5881c3200f7ab5294.pdf', 'PENDING', 4)
2026-01-11 13:04:58,550 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:04:58,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00303s] (4,)
2026-01-11 13:04:58,558 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI406
2026-01-11 13:04:58,566 - app.services.file_processor - INFO - Saved file: ./uploads/pending/03fe43a58cbe46a6a9904a80e6b2a1e4.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:04:58,568 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:04:58,570 - sqlalchemy.engine.Engine - INFO - [cached since 0.08439s ago] ('c2551e3b4672a21f1a0ab25b2196e4fb',)
2026-01-11 13:04:58,574 - app.services.artifact_service - WARNING - Duplicate artifact detected: c2551e3b4672a21f1a0ab25b2196e4fb, updating with new file
2026-01-11 13:04:58,576 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:04:58,578 - sqlalchemy.engine.Engine - INFO - [generated in 0.00233s] ('./uploads/pending/03fe43a58cbe46a6a9904a80e6b2a1e4.pdf', 6)
2026-01-11 13:04:58,582 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:04:58,585 - sqlalchemy.engine.Engine - INFO - [cached since 0.03472s ago] (6,)
2026-01-11 13:04:58,588 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-11 13:04:58,595 - app.services.file_processor - INFO - Saved file: ./uploads/pending/8ecb0a3c05e248e1aa3334cffa16773c.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:04:58,597 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:04:58,599 - sqlalchemy.engine.Engine - INFO - [cached since 0.1132s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-11 13:04:58,601 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-11 13:04:58,603 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:04:58,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.02977s ago] ('./uploads/pending/8ecb0a3c05e248e1aa3334cffa16773c.pdf', 5)
2026-01-11 13:04:58,609 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:04:58,610 - sqlalchemy.engine.Engine - INFO - [cached since 0.06028s ago] (5,)
2026-01-11 13:04:58,613 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI550
2026-01-11 13:04:58,620 - app.services.file_processor - INFO - Saved file: ./uploads/pending/8d43afc1040942e4a998a421b0772e4c.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:04:58,623 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:04:58,625 - sqlalchemy.engine.Engine - INFO - [cached since 0.1394s ago] ('162e03180b2b07f063b98f3a1249fc22',)
2026-01-11 13:04:58,628 - app.services.artifact_service - WARNING - Duplicate artifact detected: 162e03180b2b07f063b98f3a1249fc22, updating with new file
2026-01-11 13:04:58,630 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 13:04:58,631 - sqlalchemy.engine.Engine - INFO - [cached since 0.09126s ago] ('./uploads/pending/8d43afc1040942e4a998a421b0772e4c.pdf', 'PENDING', 7)
2026-01-11 13:04:58,635 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:04:58,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.08597s ago] (7,)
2026-01-11 13:04:58,641 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-11 13:04:58,661 - app.services.file_processor - INFO - Saved file: ./uploads/pending/9fac65f9bb15438281eb9ff61c0b67d2.pdf (hash: 69530c94d1cfd882...)
2026-01-11 13:04:58,662 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:04:58,664 - sqlalchemy.engine.Engine - INFO - [cached since 0.1788s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-11 13:04:58,667 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-11 13:04:58,668 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:04:58,672 - sqlalchemy.engine.Engine - INFO - [cached since 0.09582s ago] ('./uploads/pending/9fac65f9bb15438281eb9ff61c0b67d2.pdf', 3)
2026-01-11 13:04:58,676 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:04:58,677 - sqlalchemy.engine.Engine - INFO - [cached since 0.1271s ago] (3,)
2026-01-11 13:04:58,687 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:04:58,690 - sqlalchemy.engine.Engine - INFO - [generated in 0.00306s] ('bulk_upload', 'upload', 'Bulk upload: 5 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 5, "successful": 5, "failed": 0}', 'null', None, None)
2026-01-11 13:04:58,698 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:04:58,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:04:58,856 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:04:58,857 - sqlalchemy.engine.Engine - INFO - [cached since 15.35s ago] (1,)
2026-01-11 13:04:58,876 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:04:58,877 - sqlalchemy.engine.Engine - INFO - [cached since 15.35s ago] ()
2026-01-11 13:04:58,933 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:04:58,936 - sqlalchemy.engine.Engine - INFO - [cached since 15.35s ago] (50, 0)
2026-01-11 13:04:58,942 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:02,727 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:02,728 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:05:02,729 - sqlalchemy.engine.Engine - INFO - [cached since 19.22s ago] (1,)
2026-01-11 13:05:02,737 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:05:02,738 - sqlalchemy.engine.Engine - INFO - [cached since 19.21s ago] ()
2026-01-11 13:05:02,773 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:05:02,775 - sqlalchemy.engine.Engine - INFO - [cached since 19.19s ago] (50, 0)
2026-01-11 13:05:02,780 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:07,959 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:07,961 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:07,962 - sqlalchemy.engine.Engine - INFO - [cached since 20.81s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:07,976 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:07,979 - sqlalchemy.engine.Engine - INFO - [cached since 20.81s ago] (datetime.datetime(2026, 1, 11, 7, 35, 7, 976205, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:07,984 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:07,997 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:05:08,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:08,161 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:05:08,162 - sqlalchemy.engine.Engine - INFO - [cached since 20.82s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:05:08,199 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:05:08,200 - sqlalchemy.engine.Engine - INFO - [cached since 20.79s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:05:08,204 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,205 - sqlalchemy.engine.Engine - INFO - [cached since 20.79s ago] ('19AI550',)
2026-01-11 13:05:08,211 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,212 - sqlalchemy.engine.Engine - INFO - [cached since 20.79s ago] ('19AI550',)
2026-01-11 13:05:08,215 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,216 - sqlalchemy.engine.Engine - INFO - [cached since 20.8s ago] ('19AI406',)
2026-01-11 13:05:08,220 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,222 - sqlalchemy.engine.Engine - INFO - [cached since 20.8s ago] ('19AI406',)
2026-01-11 13:05:08,225 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,226 - sqlalchemy.engine.Engine - INFO - [cached since 20.81s ago] ('19AI411',)
2026-01-11 13:05:08,229 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,231 - sqlalchemy.engine.Engine - INFO - [cached since 20.81s ago] ('19AI411',)
2026-01-11 13:05:08,234 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,235 - sqlalchemy.engine.Engine - INFO - [cached since 20.82s ago] ('19AI405',)
2026-01-11 13:05:08,239 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:08,241 - sqlalchemy.engine.Engine - INFO - [cached since 20.82s ago] ('19AI405',)
2026-01-11 13:05:08,245 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:18,114 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:18,115 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:18,116 - sqlalchemy.engine.Engine - INFO - [cached since 30.97s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:18,128 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:18,130 - sqlalchemy.engine.Engine - INFO - [cached since 30.96s ago] (datetime.datetime(2026, 1, 11, 7, 35, 18, 127827, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:18,134 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:18,144 - app.api.routes.student - INFO - Submit attempt for f519994d-9d50-4d62-ae23-cf157d9de0d8 by register_number: 212221230038
2026-01-11 13:05:18,292 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:18,294 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:18,295 - sqlalchemy.engine.Engine - INFO - [cached since 30.38s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:05:18,339 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:05:18,343 - sqlalchemy.engine.Engine - INFO - [cached since 19.66s ago] ('submission_started', 'submit', 'Starting submission for assignment 5', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', 'null', None, None)
2026-01-11 13:05:18,351 - app.services.submission_service - INFO - Step 1/3: Uploading file to draft area
2026-01-11 13:05:18,354 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:18,356 - sqlalchemy.engine.Engine - INFO - [generated in 0.00210s] ('UPLOADING', 7)
2026-01-11 13:05:19,219 - app.services.moodle_client - INFO - Uploading file: 212221230038_19AI550.pdf (200331 bytes)
2026-01-11 13:05:19,223 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=80 local_address=None timeout=30.0 socket_options=None
2026-01-11 13:05:19,228 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000024754950050>
2026-01-11 13:05:19,234 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,237 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:05:19,239 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,247 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:05:19,249 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,330 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:35:19 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Access-Control-Allow-Origin', b'*'), (b'Cache-Control', b'no-store, no-cache, must-revalidate'), (b'Cache-Control', b'post-check=0, pre-check=0'), (b'Pragma', b'no-cache'), (b'Expires', b'Mon, 20 Aug 1969 09:23:00 GMT'), (b'Last-Modified', b'Sun, 11 Jan 2026 07:35:19 GMT'), (b'Accept-Ranges', b'none'), (b'Content-Length', b'283'), (b'Keep-Alive', b'timeout=5, max=100'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'text/plain; charset=utf-8')])
2026-01-11 13:05:19,331 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,332 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:05:19,334 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:05:19,335 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:05:19,338 - app.services.moodle_client - INFO - Upload response: [{'component': 'user', 'contextid': 28, 'userid': '4', 'filearea': 'draft', 'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'itemid': 735152893, 'license': 'unknown', 'author': 'Kishore S', 'source': 'O:8:"stdClass":1:{s:6:"source";s:24:"212221230038_19AI550.pdf";}', 'filesize': 200331}]
2026-01-11 13:05:19,340 - app.services.moodle_client - INFO - File uploaded successfully. Item ID: 735152893
2026-01-11 13:05:19,344 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET moodle_draft_item_id=$1::BIGINT WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:19,345 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] (735152893, 7)
2026-01-11 13:05:19,355 - app.services.submission_service - INFO - Verifying assignment 5 exists and is accessible...
2026-01-11 13:05:19,361 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,363 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:05:19,364 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,365 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:05:19,366 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,457 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:35:19 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'663'), (b'Keep-Alive', b'timeout=5, max=99'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:05:19,459 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:05:19,462 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:05:19,471 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:05:19,474 - app.services.submission_service - INFO - Assignment 5 verified and accessible
2026-01-11 13:05:19,475 - app.services.submission_service - INFO - Step 2/3: Linking draft to assignment
2026-01-11 13:05:19,476 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:19,479 - sqlalchemy.engine.Engine - INFO - [cached since 1.125s ago] ('SUBMITTING', 7)
2026-01-11 13:05:19,482 - app.services.moodle_client - INFO - Saving submission for assignment 5 with item 735152893
2026-01-11 13:05:19,490 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:05:19,494 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,495 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:05:19,497 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,663 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:35:19 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'2'), (b'Keep-Alive', b'timeout=5, max=98'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:05:19,665 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,666 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:05:19,668 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:05:19,668 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:05:19,671 - app.services.moodle_client - INFO - mod_assign_save_submission response: []
2026-01-11 13:05:19,671 - app.services.moodle_client - INFO - Submission saved successfully for assignment 5
2026-01-11 13:05:19,672 - app.services.submission_service - INFO - Verifying submission status after save...
2026-01-11 13:05:19,676 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,677 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-11 13:05:19,677 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,678 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-11 13:05:19,679 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-11 13:05:19,818 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 11 Jan 2026 07:35:19 GMT'), (b'Server', b'Apache/2.4.56 (Win64) OpenSSL/1.1.1t PHP/8.2.4'), (b'X-Powered-By', b'PHP/8.2.4'), (b'Cache-Control', b'private, must-revalidate, pre-check=0, post-check=0, max-age=0'), (b'Expires', b'Thu, 01 Jan 1970 00:00:00 GMT'), (b'Pragma', b'no-cache'), (b'Accept-Ranges', b'none'), (b'Access-Control-Allow-Origin', b'*'), (b'Content-Length', b'971'), (b'Keep-Alive', b'timeout=5, max=97'), (b'Connection', b'Keep-Alive'), (b'Content-Type', b'application/json')])
2026-01-11 13:05:19,820 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-11 13:05:19,820 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-11 13:05:19,822 - httpcore.http11 - DEBUG - response_closed.started
2026-01-11 13:05:19,823 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-11 13:05:19,827 - app.services.submission_service - INFO - Full submission status response: {'lastattempt': {'submission': {'id': 10, 'userid': 4, 'attemptnumber': 0, 'timecreated': 1767794518, 'timemodified': 1768116919, 'timestarted': None, 'status': 'submitted', 'groupid': 0, 'assignment': 5, 'latest': 1, 'plugins': [{'type': 'file', 'name': 'File submissions', 'fileareas': [{'area': 'submission_files', 'files': [{'filename': '212221230038_19AI550.pdf', 'filepath': '/', 'filesize': 200331, 'fileurl': 'http://localhost/webservice/pluginfile.php/37/assignsubmission_file/submission_files/10/212221230038_19AI550.pdf', 'timemodified': 1768116919, 'mimetype': 'application/pdf', 'isexternalfile': False, 'icon': 'f/pdf'}]}]}, {'type': 'comments', 'name': 'Submission comments'}]}, 'submissiongroupmemberswhoneedtosubmit': [], 'submissionsenabled': True, 'locked': False, 'graded': False, 'canedit': True, 'caneditowner': True, 'cansubmit': False, 'extensionduedate': None, 'timelimit': 0, 'blindmarking': False, 'gradingstatus': 'notgraded', 'usergroups': []}, 'assignmentdata': {'attachments': {'intro': []}}, 'warnings': []}
2026-01-11 13:05:19,827 - app.services.submission_service - INFO - Submission status: submitted
2026-01-11 13:05:19,828 - app.services.submission_service - INFO - Submission ID: 10
2026-01-11 13:05:19,830 - app.services.submission_service - INFO - Submission timecreated: 1767794518
2026-01-11 13:05:19,831 - app.services.submission_service - INFO - Submission timemodified: 1768116919
2026-01-11 13:05:19,832 - app.services.submission_service - INFO - Grading status: notgraded
2026-01-11 13:05:19,834 - app.services.submission_service - INFO - Submissions enabled: True
2026-01-11 13:05:19,835 - app.services.submission_service - INFO - Can edit: True
2026-01-11 13:05:19,837 - app.services.submission_service - INFO - Can submit: False
2026-01-11 13:05:19,838 - app.services.submission_service - INFO - Submission verification - Files found: 1
2026-01-11 13:05:19,840 - app.services.submission_service - INFO - Verified files: ['212221230038_19AI550.pdf']
2026-01-11 13:05:19,841 - app.services.submission_service - INFO - Skipping explicit submit_for_grading call because Moodle reports cansubmit=False. Treating current 'submitted' state as final.
2026-01-11 13:05:19,844 - httpcore.connection - DEBUG - close.started
2026-01-11 13:05:19,845 - httpcore.connection - DEBUG - close.complete
2026-01-11 13:05:19,846 - app.services.submission_service - INFO - Submission result: {'assignment_id': 5, 'steps_completed': ['upload', 'save'], 'item_id': 735152893, 'save_result': {'success': True, 'warnings': []}, 'submission_status': 'submitted', 'submission_id': '10', 'verified_files': ['212221230038_19AI550.pdf'], 'submit_skipped': True, 'success': True, 'transaction_id': 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073519'}
2026-01-11 13:05:19,848 - app.services.submission_service - INFO - Steps completed: ['upload', 'save']
2026-01-11 13:05:19,851 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:05:19,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00335s] (7,)
2026-01-11 13:05:19,860 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET workflow_status=$1::workflowstatus, lms_transaction_id=$2::VARCHAR, submit_timestamp=$3::TIMESTAMP WITH TIME ZONE, completed_at=$4::TIMESTAMP WITH TIME ZONE WHERE examination_artifacts.id = $5::INTEGER
2026-01-11 13:05:19,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00121s] ('COMPLETED', 'TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073519', datetime.datetime(2026, 1, 11, 7, 35, 19, 859200, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 1, 11, 7, 35, 19, 859200, tzinfo=datetime.timezone.utc), 7)
2026-01-11 13:05:19,868 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:05:19,869 - sqlalchemy.engine.Engine - INFO - [cached since 21.32s ago] (7,)
2026-01-11 13:05:19,877 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:19,896 - app.services.artifact_service - INFO - Artifact 7 marked as submitted
2026-01-11 13:05:20,033 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:20,035 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:05:20,036 - sqlalchemy.engine.Engine - INFO - [cached since 21.35s ago] ('submission_completed', 'submit', 'Submission completed successfully', 'student', '4', '22008388', '127.0.0.1', 7, None, None, 'null', '{"assignment_id": 5, "steps_completed": ["upload", "save"], "item_id": 735152893, "save_result": {"success": true, "warnings": []}, "submission_statu ... (56 characters truncated) ... : ["212221230038_19AI550.pdf"], "submit_skipped": true, "success": true, "transaction_id": "TXN_f519994d-9d50-4d62-ae23-cf157d9de0d8_20260111073519"}', None, None)
2026-01-11 13:05:20,055 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:20,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:20,214 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:20,215 - sqlalchemy.engine.Engine - INFO - [cached since 32.3s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:05:20,260 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:20,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:20,403 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:20,405 - sqlalchemy.engine.Engine - INFO - [cached since 33.26s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:20,418 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:20,428 - sqlalchemy.engine.Engine - INFO - [cached since 33.26s ago] (datetime.datetime(2026, 1, 11, 7, 35, 20, 417547, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:20,433 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:20,460 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:05:20,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:20,707 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:05:20,708 - sqlalchemy.engine.Engine - INFO - [cached since 33.37s ago] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:05:20,754 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:05:20,758 - sqlalchemy.engine.Engine - INFO - [cached since 33.35s ago] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:05:20,771 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,773 - sqlalchemy.engine.Engine - INFO - [cached since 33.36s ago] ('19AI406',)
2026-01-11 13:05:20,780 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,781 - sqlalchemy.engine.Engine - INFO - [cached since 33.36s ago] ('19AI406',)
2026-01-11 13:05:20,785 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,790 - sqlalchemy.engine.Engine - INFO - [cached since 33.37s ago] ('19AI411',)
2026-01-11 13:05:20,794 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,795 - sqlalchemy.engine.Engine - INFO - [cached since 33.38s ago] ('19AI411',)
2026-01-11 13:05:20,799 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,800 - sqlalchemy.engine.Engine - INFO - [cached since 33.38s ago] ('19AI405',)
2026-01-11 13:05:20,804 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,806 - sqlalchemy.engine.Engine - INFO - [cached since 33.39s ago] ('19AI405',)
2026-01-11 13:05:20,810 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:05:20,811 - sqlalchemy.engine.Engine - INFO - [cached since 33.39s ago] ('19AI550',)
2026-01-11 13:05:20,815 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,020 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:21,022 - sqlalchemy.engine.Engine - INFO - [cached since 33.87s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:21,033 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:21,035 - sqlalchemy.engine.Engine - INFO - [cached since 33.87s ago] (datetime.datetime(2026, 1, 11, 7, 35, 21, 32604, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:21,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,182 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:21,183 - sqlalchemy.engine.Engine - INFO - [cached since 33.27s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:05:21,252 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:21,256 - sqlalchemy.engine.Engine - INFO - [cached since 22.68s ago] ('uploads/pending/03fe43a58cbe46a6a9904a80e6b2a1e4.pdf', 6)
2026-01-11 13:05:21,261 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,369 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,370 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:21,370 - sqlalchemy.engine.Engine - INFO - [cached since 34.22s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:21,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,522 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:21,524 - sqlalchemy.engine.Engine - INFO - [cached since 34.37s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:21,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,526 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:05:21,527 - sqlalchemy.engine.Engine - INFO - [cached since 34.38s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:05:21,529 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:21,530 - sqlalchemy.engine.Engine - INFO - [cached since 34.36s ago] (datetime.datetime(2026, 1, 11, 7, 35, 21, 529505, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:21,535 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,542 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:21,543 - sqlalchemy.engine.Engine - INFO - [cached since 34.38s ago] (datetime.datetime(2026, 1, 11, 7, 35, 21, 541645, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:21,545 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:05:21,546 - sqlalchemy.engine.Engine - INFO - [cached since 34.38s ago] (datetime.datetime(2026, 1, 11, 7, 35, 21, 545192, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:05:21,549 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,557 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,701 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,702 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:21,703 - sqlalchemy.engine.Engine - INFO - [cached since 33.79s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:05:21,885 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,886 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:21,887 - sqlalchemy.engine.Engine - INFO - [cached since 33.97s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:05:21,890 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:21,892 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:05:21,894 - sqlalchemy.engine.Engine - INFO - [cached since 33.98s ago] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:05:21,931 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:21,932 - sqlalchemy.engine.Engine - INFO - [cached since 23.36s ago] ('uploads/pending/8ecb0a3c05e248e1aa3334cffa16773c.pdf', 5)
2026-01-11 13:05:21,936 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:21,937 - sqlalchemy.engine.Engine - INFO - [cached since 23.36s ago] ('uploads/pending/3dbe936090da47b5881c3200f7ab5294.pdf', 4)
2026-01-11 13:05:21,943 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:05:21,944 - sqlalchemy.engine.Engine - INFO - [cached since 23.37s ago] ('uploads/pending/8d43afc1040942e4a998a421b0772e4c.pdf', 7)
2026-01-11 13:05:21,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,949 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:21,950 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:05:23,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:05:23,938 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:05:23,939 - sqlalchemy.engine.Engine - INFO - [cached since 40.43s ago] (1,)
2026-01-11 13:05:23,956 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:05:23,960 - sqlalchemy.engine.Engine - INFO - [cached since 40.43s ago] ()
2026-01-11 13:05:24,005 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:05:24,006 - sqlalchemy.engine.Engine - INFO - [cached since 40.42s ago] (50, 0)
2026-01-11 13:05:24,011 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:06:25,494 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,496 - python_multipart.multipart - DEBUG - Calling on_header_field with data[42:61]
2026-01-11 13:06:25,497 - python_multipart.multipart - DEBUG - Calling on_header_value with data[63:123]
2026-01-11 13:06:25,498 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,499 - python_multipart.multipart - DEBUG - Calling on_header_field with data[125:137]
2026-01-11 13:06:25,507 - python_multipart.multipart - DEBUG - Calling on_header_value with data[139:154]
2026-01-11 13:06:25,510 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,512 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,514 - python_multipart.multipart - DEBUG - Calling on_part_data with data[158:180224]
2026-01-11 13:06:25,517 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:20265]
2026-01-11 13:06:25,518 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,519 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,519 - python_multipart.multipart - DEBUG - Calling on_header_field with data[20309:20328]
2026-01-11 13:06:25,523 - python_multipart.multipart - DEBUG - Calling on_header_value with data[20330:20390]
2026-01-11 13:06:25,525 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,527 - python_multipart.multipart - DEBUG - Calling on_header_field with data[20392:20404]
2026-01-11 13:06:25,528 - python_multipart.multipart - DEBUG - Calling on_header_value with data[20406:20421]
2026-01-11 13:06:25,528 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,529 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,530 - python_multipart.multipart - DEBUG - Calling on_part_data with data[20425:220756]
2026-01-11 13:06:25,531 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,533 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,534 - python_multipart.multipart - DEBUG - Calling on_header_field with data[220800:220819]
2026-01-11 13:06:25,535 - python_multipart.multipart - DEBUG - Calling on_header_value with data[220821:220881]
2026-01-11 13:06:25,538 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,540 - python_multipart.multipart - DEBUG - Calling on_header_field with data[220883:220895]
2026-01-11 13:06:25,542 - python_multipart.multipart - DEBUG - Calling on_header_value with data[220897:220912]
2026-01-11 13:06:25,543 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,543 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,544 - python_multipart.multipart - DEBUG - Calling on_part_data with data[220916:262144]
2026-01-11 13:06:25,546 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:159103]
2026-01-11 13:06:25,547 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,548 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,549 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159147:159166]
2026-01-11 13:06:25,550 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159168:159228]
2026-01-11 13:06:25,552 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,552 - python_multipart.multipart - DEBUG - Calling on_header_field with data[159230:159242]
2026-01-11 13:06:25,553 - python_multipart.multipart - DEBUG - Calling on_header_value with data[159244:159259]
2026-01-11 13:06:25,555 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,556 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,558 - python_multipart.multipart - DEBUG - Calling on_part_data with data[159263:262144]
2026-01-11 13:06:25,562 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:97450]
2026-01-11 13:06:25,562 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,563 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,564 - python_multipart.multipart - DEBUG - Calling on_header_field with data[97494:97513]
2026-01-11 13:06:25,564 - python_multipart.multipart - DEBUG - Calling on_header_value with data[97515:97575]
2026-01-11 13:06:25,565 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,566 - python_multipart.multipart - DEBUG - Calling on_header_field with data[97577:97589]
2026-01-11 13:06:25,566 - python_multipart.multipart - DEBUG - Calling on_header_value with data[97591:97606]
2026-01-11 13:06:25,567 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,567 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,568 - python_multipart.multipart - DEBUG - Calling on_part_data with data[97610:262144]
2026-01-11 13:06:25,572 - python_multipart.multipart - DEBUG - Calling on_part_data with data[0:24110]
2026-01-11 13:06:25,572 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,573 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,574 - python_multipart.multipart - DEBUG - Calling on_header_field with data[24154:24173]
2026-01-11 13:06:25,575 - python_multipart.multipart - DEBUG - Calling on_header_value with data[24175:24235]
2026-01-11 13:06:25,576 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,576 - python_multipart.multipart - DEBUG - Calling on_header_field with data[24237:24249]
2026-01-11 13:06:25,577 - python_multipart.multipart - DEBUG - Calling on_header_value with data[24251:24266]
2026-01-11 13:06:25,578 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,578 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,579 - python_multipart.multipart - DEBUG - Calling on_part_data with data[24270:224601]
2026-01-11 13:06:25,580 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,580 - python_multipart.multipart - DEBUG - Calling on_part_begin with no data
2026-01-11 13:06:25,582 - python_multipart.multipart - DEBUG - Calling on_header_field with data[224645:224664]
2026-01-11 13:06:25,583 - python_multipart.multipart - DEBUG - Calling on_header_value with data[224666:224696]
2026-01-11 13:06:25,584 - python_multipart.multipart - DEBUG - Calling on_header_end with no data
2026-01-11 13:06:25,585 - python_multipart.multipart - DEBUG - Calling on_headers_finished with no data
2026-01-11 13:06:25,585 - python_multipart.multipart - DEBUG - Calling on_part_data with data[224700:224708]
2026-01-11 13:06:25,587 - python_multipart.multipart - DEBUG - Calling on_part_end with no data
2026-01-11 13:06:25,588 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-01-11 13:06:25,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:06:25,742 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:06:25,743 - sqlalchemy.engine.Engine - INFO - [cached since 102.2s ago] (1,)
2026-01-11 13:06:25,752 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI405
2026-01-11 13:06:25,758 - app.services.file_processor - INFO - Saved file: ./uploads/pending/8f2b52ef5fbc44d6830709ac2d7b020b.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:06:25,760 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,766 - sqlalchemy.engine.Engine - INFO - [cached since 87.28s ago] ('848d726dde17c0bdf54eb26601965e86',)
2026-01-11 13:06:25,814 - app.services.artifact_service - WARNING - Duplicate artifact detected: 848d726dde17c0bdf54eb26601965e86, updating with new file
2026-01-11 13:06:25,815 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:06:25,817 - sqlalchemy.engine.Engine - INFO - [cached since 87.24s ago] ('./uploads/pending/8f2b52ef5fbc44d6830709ac2d7b020b.pdf', 4)
2026-01-11 13:06:25,821 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,823 - sqlalchemy.engine.Engine - INFO - [cached since 87.27s ago] (4,)
2026-01-11 13:06:25,828 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI406
2026-01-11 13:06:25,834 - app.services.file_processor - INFO - Saved file: ./uploads/pending/bf26a11978784e1b925e3f1539ef205c.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:06:25,836 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,840 - sqlalchemy.engine.Engine - INFO - [cached since 87.35s ago] ('c2551e3b4672a21f1a0ab25b2196e4fb',)
2026-01-11 13:06:25,844 - app.services.artifact_service - WARNING - Duplicate artifact detected: c2551e3b4672a21f1a0ab25b2196e4fb, updating with new file
2026-01-11 13:06:25,846 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:06:25,847 - sqlalchemy.engine.Engine - INFO - [cached since 87.27s ago] ('./uploads/pending/bf26a11978784e1b925e3f1539ef205c.pdf', 6)
2026-01-11 13:06:25,853 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,856 - sqlalchemy.engine.Engine - INFO - [cached since 87.31s ago] (6,)
2026-01-11 13:06:25,860 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI411
2026-01-11 13:06:25,869 - app.services.file_processor - INFO - Saved file: ./uploads/pending/7f0c1bec7df0447dbb98685cf6820480.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:06:25,872 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,873 - sqlalchemy.engine.Engine - INFO - [cached since 87.39s ago] ('4f81e6ea3435481878fc6f8a8f066815',)
2026-01-11 13:06:25,878 - app.services.artifact_service - WARNING - Duplicate artifact detected: 4f81e6ea3435481878fc6f8a8f066815, updating with new file
2026-01-11 13:06:25,879 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:06:25,881 - sqlalchemy.engine.Engine - INFO - [cached since 87.31s ago] ('./uploads/pending/7f0c1bec7df0447dbb98685cf6820480.pdf', 5)
2026-01-11 13:06:25,888 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,890 - sqlalchemy.engine.Engine - INFO - [cached since 87.34s ago] (5,)
2026-01-11 13:06:25,894 - app.services.file_processor - INFO - Parsed filename (strict): 212221230038, 19AI550
2026-01-11 13:06:25,900 - app.services.file_processor - INFO - Saved file: ./uploads/pending/888626c5010e4a46a1c768ebc10153d2.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:06:25,903 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,906 - sqlalchemy.engine.Engine - INFO - [cached since 87.42s ago] ('162e03180b2b07f063b98f3a1249fc22',)
2026-01-11 13:06:25,908 - app.services.artifact_service - WARNING - Duplicate artifact detected: 162e03180b2b07f063b98f3a1249fc22, updating with new file
2026-01-11 13:06:25,910 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR, workflow_status=$2::workflowstatus WHERE examination_artifacts.id = $3::INTEGER
2026-01-11 13:06:25,911 - sqlalchemy.engine.Engine - INFO - [cached since 87.37s ago] ('./uploads/pending/888626c5010e4a46a1c768ebc10153d2.pdf', 'PENDING', 7)
2026-01-11 13:06:25,917 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,922 - sqlalchemy.engine.Engine - INFO - [cached since 87.37s ago] (7,)
2026-01-11 13:06:25,924 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI405
2026-01-11 13:06:25,932 - app.services.file_processor - INFO - Saved file: ./uploads/pending/f9cbdc97dcf44a588a1bef4c46511ec1.pdf (hash: 69530c94d1cfd882...)
2026-01-11 13:06:25,933 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,937 - sqlalchemy.engine.Engine - INFO - [cached since 87.45s ago] ('68db98da00992eb3382cdfa22fe26d97',)
2026-01-11 13:06:25,941 - app.services.artifact_service - WARNING - Duplicate artifact detected: 68db98da00992eb3382cdfa22fe26d97, updating with new file
2026-01-11 13:06:25,942 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:06:25,943 - sqlalchemy.engine.Engine - INFO - [cached since 87.37s ago] ('./uploads/pending/f9cbdc97dcf44a588a1bef4c46511ec1.pdf', 3)
2026-01-11 13:06:25,947 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,948 - sqlalchemy.engine.Engine - INFO - [cached since 87.4s ago] (3,)
2026-01-11 13:06:25,952 - app.services.file_processor - INFO - Parsed filename (strict): 212222240047, 19AI550
2026-01-11 13:06:25,958 - app.services.file_processor - INFO - Saved file: ./uploads/pending/b5ee52ad3c3c4f548a64686a7e4e6d55.pdf (hash: 33d8582fd3cd2474...)
2026-01-11 13:06:25,960 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.transaction_id = $1::VARCHAR
2026-01-11 13:06:25,962 - sqlalchemy.engine.Engine - INFO - [cached since 87.48s ago] ('3f05d2a7124279855aa026454e988667',)
2026-01-11 13:06:25,971 - sqlalchemy.engine.Engine - INFO - INSERT INTO examination_artifacts (artifact_uuid, raw_filename, original_filename, parsed_reg_no, parsed_subject_code, file_blob_path, file_hash, file_size_bytes, mime_type, moodle_user_id, moodle_username, moodle_course_id, moodle_assignment_id, workflow_status, moodle_draft_item_id, moodle_submission_id, lms_transaction_id, transaction_id, validated_at, submit_timestamp, completed_at, uploaded_by_staff_id, submitted_by_user_id, transaction_log, error_message, retry_count) VALUES ($1::UUID, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::BIGINT, $9::VARCHAR, $10::BIGINT, $11::VARCHAR, $12::INTEGER, $13::INTEGER, $14::workflowstatus, $15::BIGINT, $16::VARCHAR, $17::VARCHAR, $18::VARCHAR, $19::TIMESTAMP WITH TIME ZONE, $20::TIMESTAMP WITH TIME ZONE, $21::TIMESTAMP WITH TIME ZONE, $22::INTEGER, $23::BIGINT, $24::JSONB, $25::VARCHAR, $26::INTEGER) RETURNING examination_artifacts.id, examination_artifacts.uploaded_at
2026-01-11 13:06:25,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00248s] (UUID('6b6b4095-b24b-4a2f-8db0-4d15664cce3f'), '212222240047_19AI550.pdf', '212222240047_19AI550.pdf', '212222240047', '19AI550', './uploads/pending/b5ee52ad3c3c4f548a64686a7e4e6d55.pdf', '33d8582fd3cd24748c47705bac581cac9452738f1d9b409c437e67822359d9d7', 200331, 'application/pdf', None, None, None, None, 'PENDING', None, None, None, '3f05d2a7124279855aa026454e988667', None, None, None, 1, None, '[{"timestamp": "2026-01-11T07:36:25.966478", "action": "created", "details": {"filename": "212222240047_19AI550.pdf", "parsed_reg_no": "212222240047", "parsed_subject_code": "19AI550"}}]', None, 0)
2026-01-11 13:06:25,980 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.id = $1::INTEGER
2026-01-11 13:06:25,983 - sqlalchemy.engine.Engine - INFO - [cached since 87.43s ago] (8,)
2026-01-11 13:06:25,985 - app.services.artifact_service - INFO - Created artifact: 6b6b4095-b24b-4a2f-8db0-4d15664cce3f
2026-01-11 13:06:25,987 - sqlalchemy.engine.Engine - INFO - INSERT INTO audit_logs (action, action_category, description, actor_type, actor_id, actor_username, actor_ip, artifact_id, target_type, target_id, request_data, response_data, moodle_api_function, moodle_response_code) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::VARCHAR, $11::JSONB, $12::JSONB, $13::VARCHAR, $14::INTEGER) RETURNING audit_logs.id, audit_logs.created_at
2026-01-11 13:06:25,988 - sqlalchemy.engine.Engine - INFO - [cached since 87.3s ago] ('bulk_upload', 'upload', 'Bulk upload: 6 successful, 0 failed', 'staff', '1', 'admin', '127.0.0.1', None, None, None, '{"total": 6, "successful": 6, "failed": 0}', 'null', None, None)
2026-01-11 13:06:25,993 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:06:26,147 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:06:26,152 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:06:26,155 - sqlalchemy.engine.Engine - INFO - [cached since 102.6s ago] (1,)
2026-01-11 13:06:26,166 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:06:26,168 - sqlalchemy.engine.Engine - INFO - [cached since 102.6s ago] ()
2026-01-11 13:06:26,199 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:06:26,202 - sqlalchemy.engine.Engine - INFO - [cached since 102.6s ago] (50, 0)
2026-01-11 13:06:26,209 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:20,957 - app.main - INFO - Shutting down Examination Middleware...
2026-01-11 13:07:20,958 - app.main - INFO - Database connections closed
2026-01-11 13:07:22,449 - app.main - INFO - Starting Examination Middleware...
2026-01-11 13:07:22,525 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-01-11 13:07:22,525 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:07:22,528 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-01-11 13:07:22,529 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:07:22,532 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-01-11 13:07:22,533 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-11 13:07:22,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:22,538 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] ('examination_artifacts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,548 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,548 - sqlalchemy.engine.Engine - INFO - [cached since 0.009933s ago] ('subject_mappings', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,550 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,550 - sqlalchemy.engine.Engine - INFO - [cached since 0.01216s ago] ('staff_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,552 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,553 - sqlalchemy.engine.Engine - INFO - [cached since 0.01443s ago] ('student_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,554 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,555 - sqlalchemy.engine.Engine - INFO - [cached since 0.01641s ago] ('audit_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,556 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,557 - sqlalchemy.engine.Engine - INFO - [cached since 0.01852s ago] ('submission_queue', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,558 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-01-11 13:07:22,559 - sqlalchemy.engine.Engine - INFO - [cached since 0.02074s ago] ('system_config', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-01-11 13:07:22,562 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = $1::VARCHAR AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != $2::VARCHAR
2026-01-11 13:07:22,562 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] ('workflowstatus', 'pg_catalog')
2026-01-11 13:07:22,566 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:22,570 - app.main - INFO - Database tables created/verified
2026-01-11 13:07:22,571 - app.main - INFO - Upload directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\uploads
2026-01-11 13:07:22,572 - app.main - INFO - Storage directory: C:\Users\SEC\Downloads\Saveetha - B-tech AIML\ML_PROJECTS\FInal-Year-PH-2\Smart-answer-sheet-processor-for-LMS\exam_middleware\storage
2026-01-11 13:07:22,573 - app.main - INFO - Examination Middleware started successfully
2026-01-11 13:07:32,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:32,924 - sqlalchemy.engine.Engine - INFO - SELECT staff_users.id, staff_users.username, staff_users.email, staff_users.hashed_password, staff_users.full_name, staff_users.role, staff_users.is_active, staff_users.created_at, staff_users.last_login_at 
FROM staff_users 
WHERE staff_users.id = $1::INTEGER
2026-01-11 13:07:32,926 - sqlalchemy.engine.Engine - INFO - [generated in 0.00225s] (1,)
2026-01-11 13:07:32,948 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts
2026-01-11 13:07:32,951 - sqlalchemy.engine.Engine - INFO - [generated in 0.00292s] ()
2026-01-11 13:07:33,013 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts ORDER BY examination_artifacts.uploaded_at DESC 
 LIMIT $1::INTEGER OFFSET $2::INTEGER
2026-01-11 13:07:33,014 - sqlalchemy.engine.Engine - INFO - [generated in 0.00164s] (50, 0)
2026-01-11 13:07:33,022 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:33,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:33,891 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:07:33,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00142s] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:07:33,909 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:07:33,911 - sqlalchemy.engine.Engine - INFO - [generated in 0.00244s] (datetime.datetime(2026, 1, 11, 7, 37, 33, 904685, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:07:33,917 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:33,941 - app.api.routes.student - INFO - Dashboard for register_number: 212221230038
2026-01-11 13:07:34,084 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,089 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE (examination_artifacts.parsed_reg_no = $1::VARCHAR OR examination_artifacts.moodle_username = $2::VARCHAR) AND examination_artifacts.workflow_status IN ($3::workflowstatus, $4::workflowstatus, $5::workflowstatus, $6::workflowstatus) ORDER BY examination_artifacts.uploaded_at DESC
2026-01-11 13:07:34,099 - sqlalchemy.engine.Engine - INFO - [generated in 0.01046s] ('212221230038', '212221230038', 'PENDING', 'PENDING_REVIEW', 'VALIDATED', 'READY_FOR_REVIEW')
2026-01-11 13:07:34,151 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.parsed_reg_no = $1::VARCHAR AND examination_artifacts.workflow_status IN ($2::workflowstatus, $3::workflowstatus) ORDER BY examination_artifacts.submit_timestamp DESC
2026-01-11 13:07:34,153 - sqlalchemy.engine.Engine - INFO - [generated in 0.00289s] ('212221230038', 'SUBMITTED_TO_LMS', 'COMPLETED')
2026-01-11 13:07:34,162 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,163 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] ('19AI550',)
2026-01-11 13:07:34,171 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,172 - sqlalchemy.engine.Engine - INFO - [cached since 0.01069s ago] ('19AI550',)
2026-01-11 13:07:34,177 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,178 - sqlalchemy.engine.Engine - INFO - [cached since 0.01645s ago] ('19AI406',)
2026-01-11 13:07:34,182 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,184 - sqlalchemy.engine.Engine - INFO - [cached since 0.02201s ago] ('19AI406',)
2026-01-11 13:07:34,189 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.02884s ago] ('19AI411',)
2026-01-11 13:07:34,195 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.03418s ago] ('19AI411',)
2026-01-11 13:07:34,199 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.03972s ago] ('19AI405',)
2026-01-11 13:07:34,205 - sqlalchemy.engine.Engine - INFO - SELECT subject_mappings.id, subject_mappings.subject_code, subject_mappings.subject_name, subject_mappings.moodle_course_id, subject_mappings.moodle_course_idnumber, subject_mappings.moodle_assignment_id, subject_mappings.moodle_assignment_name, subject_mappings.exam_session, subject_mappings.is_active, subject_mappings.created_at, subject_mappings.updated_at, subject_mappings.last_verified_at 
FROM subject_mappings 
WHERE subject_mappings.subject_code = $1::VARCHAR AND subject_mappings.is_active = true
2026-01-11 13:07:34,207 - sqlalchemy.engine.Engine - INFO - [cached since 0.04544s ago] ('19AI405',)
2026-01-11 13:07:34,212 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:34,427 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,428 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:07:34,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.5396s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:07:34,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,443 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:07:34,445 - sqlalchemy.engine.Engine - INFO - [cached since 0.555s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:07:34,462 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:07:34,463 - sqlalchemy.engine.Engine - INFO - [cached since 0.5539s ago] (datetime.datetime(2026, 1, 11, 7, 37, 34, 461412, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:07:34,467 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:07:34,468 - sqlalchemy.engine.Engine - INFO - [cached since 0.5589s ago] (datetime.datetime(2026, 1, 11, 7, 37, 34, 466365, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:07:34,474 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:34,492 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:34,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,768 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:07:34,769 - sqlalchemy.engine.Engine - INFO - [generated in 0.00139s] ('f519994d-9d50-4d62-ae23-cf157d9de0d8',)
2026-01-11 13:07:34,932 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,934 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:07:34,936 - sqlalchemy.engine.Engine - INFO - [cached since 1.046s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:07:34,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,942 - sqlalchemy.engine.Engine - INFO - SELECT student_sessions.id, student_sessions.session_id, student_sessions.moodle_user_id, student_sessions.moodle_username, student_sessions.moodle_fullname, student_sessions.register_number, student_sessions.encrypted_token, student_sessions.token_expires_at, student_sessions.ip_address, student_sessions.user_agent, student_sessions.created_at, student_sessions.last_activity_at, student_sessions.expires_at 
FROM student_sessions 
WHERE student_sessions.session_id = $1::VARCHAR
2026-01-11 13:07:34,947 - sqlalchemy.engine.Engine - INFO - [cached since 1.057s ago] ('8RVbGsPPmqLd63ir4f6JEctuwWwqUzJkhULgEg2K2D8',)
2026-01-11 13:07:34,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:34,958 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:07:34,960 - sqlalchemy.engine.Engine - INFO - [cached since 0.1925s ago] ('da821bc2-0a4f-4f70-8377-033ea15e6517',)
2026-01-11 13:07:34,970 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:07:34,971 - sqlalchemy.engine.Engine - INFO - [cached since 1.062s ago] (datetime.datetime(2026, 1, 11, 7, 37, 34, 968838, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:07:34,974 - sqlalchemy.engine.Engine - INFO - UPDATE student_sessions SET last_activity_at=$1::TIMESTAMP WITH TIME ZONE WHERE student_sessions.id = $2::INTEGER
2026-01-11 13:07:34,979 - sqlalchemy.engine.Engine - INFO - [cached since 1.07s ago] (datetime.datetime(2026, 1, 11, 7, 37, 34, 974097, tzinfo=datetime.timezone.utc), 89)
2026-01-11 13:07:34,983 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:35,003 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:35,017 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:07:35,018 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] ('uploads/pending/bf26a11978784e1b925e3f1539ef205c.pdf', 6)
2026-01-11 13:07:35,025 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:07:35,026 - sqlalchemy.engine.Engine - INFO - [cached since 0.009886s ago] ('uploads/pending/888626c5010e4a46a1c768ebc10153d2.pdf', 7)
2026-01-11 13:07:35,040 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:35,042 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:35,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:35,324 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:07:35,325 - sqlalchemy.engine.Engine - INFO - [cached since 0.5574s ago] ('ffe8b273-da46-401a-afbb-c7fce6e26996',)
2026-01-11 13:07:35,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-11 13:07:35,329 - sqlalchemy.engine.Engine - INFO - SELECT examination_artifacts.id, examination_artifacts.artifact_uuid, examination_artifacts.raw_filename, examination_artifacts.original_filename, examination_artifacts.parsed_reg_no, examination_artifacts.parsed_subject_code, examination_artifacts.file_blob_path, examination_artifacts.file_hash, examination_artifacts.file_size_bytes, examination_artifacts.mime_type, examination_artifacts.moodle_user_id, examination_artifacts.moodle_username, examination_artifacts.moodle_course_id, examination_artifacts.moodle_assignment_id, examination_artifacts.workflow_status, examination_artifacts.moodle_draft_item_id, examination_artifacts.moodle_submission_id, examination_artifacts.lms_transaction_id, examination_artifacts.transaction_id, examination_artifacts.uploaded_at, examination_artifacts.validated_at, examination_artifacts.submit_timestamp, examination_artifacts.completed_at, examination_artifacts.uploaded_by_staff_id, examination_artifacts.submitted_by_user_id, examination_artifacts.transaction_log, examination_artifacts.error_message, examination_artifacts.retry_count 
FROM examination_artifacts 
WHERE examination_artifacts.artifact_uuid = $1::UUID
2026-01-11 13:07:35,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.5627s ago] ('875568b4-9178-4f37-b8bf-42678001475f',)
2026-01-11 13:07:35,377 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:07:35,378 - sqlalchemy.engine.Engine - INFO - [cached since 0.3616s ago] ('uploads/pending/7f0c1bec7df0447dbb98685cf6820480.pdf', 5)
2026-01-11 13:07:35,383 - sqlalchemy.engine.Engine - INFO - UPDATE examination_artifacts SET file_blob_path=$1::VARCHAR WHERE examination_artifacts.id = $2::INTEGER
2026-01-11 13:07:35,384 - sqlalchemy.engine.Engine - INFO - [cached since 0.3671s ago] ('uploads/pending/8f2b52ef5fbc44d6830709ac2d7b020b.pdf', 4)
2026-01-11 13:07:35,387 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-11 13:07:35,388 - sqlalchemy.engine.Engine - INFO - COMMIT
